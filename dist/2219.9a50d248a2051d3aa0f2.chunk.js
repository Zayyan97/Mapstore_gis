(self.webpackChunkMyMapStoreProject=self.webpackChunkMyMapStoreProject||[]).push([[2219],{90683:(e,t,n)=>{var o={"./de-DE.png":89834,"./de.png":94122,"./en-US.png":16885,"./en.png":11533,"./es-ES.png":55350,"./es.png":88777,"./fi-FI.png":21500,"./fi.png":52019,"./fr-FR.png":21767,"./fr.png":31287,"./hr-HR.png":66566,"./id-ID.png":78007,"./id.png":24893,"./it-IT.png":23491,"./jp.png":69960,"./nl-NL.png":44349,"./nl.png":40717,"./pt-PT.png":46374,"./pt.png":64171,"./sk-SK.png":35070,"./sk.png":32147,"./sv-SE.png":74921,"./us.png":18268,"./vi-VN.png":57003,"./vi.png":78513,"./zh-ZH.png":23257};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=90683},82904:(e,t,n)=>{"use strict";n.d(t,{kM:()=>o,At:()=>r,dc:()=>i,l:()=>a,Xg:()=>s}),n(17204),n(8400);const o="TOGGLE_CONTROL",r="SET_CONTROL_PROPERTY",i="SET_CONTROL_PROPERTIES",a="RESET_CONTROLS";function s(e,t,n,o){return{type:r,control:e,property:t,value:n,toggle:o}}},34990:(e,t,n)=>{"use strict";n.d(t,{D7:()=>l,mN:()=>c,vb:()=>d,KT:()=>p,QK:()=>u,cc:()=>m,Jl:()=>g,Gx:()=>h,XH:()=>f,XR:()=>y,lX:()=>b,tP:()=>A,Dq:()=>E,LE:()=>v,SW:()=>C,si:()=>w,i2:()=>S,IY:()=>P,Zf:()=>O,ij:()=>T,Hb:()=>I,Mk:()=>_,c:()=>M,NZ:()=>x,Cx:()=>k,wb:()=>D,km:()=>L,un:()=>R,Ro:()=>B,jr:()=>N,ZY:()=>F,EQ:()=>U,W$:()=>G,mk:()=>j,IH:()=>W,rp:()=>H,D_:()=>z,wJ:()=>Z,OS:()=>V,YP:()=>Q,Ct:()=>K,Od:()=>q,y6:()=>Y,g5:()=>X,DF:()=>J,GD:()=>$,K0:()=>ee,Vx:()=>te,RZ:()=>ne,pB:()=>oe,$A:()=>re,m7:()=>ie,YM:()=>ae,o2:()=>se,c0:()=>le,nL:()=>ce,Fu:()=>de,WE:()=>pe,fD:()=>ue,EE:()=>me});var o=n(47037),r=n.n(o),i=n(55877),a=n.n(i),s=n(92579);const l="GEOSTORY:ADD",c="GEOSTORY:ADD_RESOURCE",d="GEOSTORY:CHANGE_MODE",p="GEOSTORY:CLEAR_SAVE_ERROR",u="GEOSTORY:EDIT_RESOURCE",m="GEOSTORY:EDIT_WEBPAGE",g="GEOSTORY:GEOSTORY_LOADED",h="GEOSTORY:SCROLLING",f="GEOSTORY:LOAD_GEOSTORY",y="GEOSTORY:LOAD_GEOSTORY_ERROR",b="GEOSTORY:LOADING_GEOSTORY",A="GEOSTORY:MOVE",E="GEOSTORY:REMOVE",v="GEOSTORY:SAVE_STORY",C="GEOSTORY:SAVE_ERROR",w="GEOSTORY:STORY_SAVED",S="GEOSTORY:SELECT_CARD",P="GEOSTORY:SET_CONTROL",O="GEOSTORY:SET_RESOURCE",T="GEOSTORY:SET_CURRENT_STORY",I="GEOSTORY:SET_WEBPAGE_URL",_="GEOSTORY:TOGGLE_CARD_PREVIEW",M="GEOSTORY:TOGGLE_SETTINGS_PANEL",x="GEOSTORY:TOGGLE_SETTING",k="GEOSTORY:TOGGLE_CONTENT_FOCUS",D="GEOSTORY:UPDATE",L="GEOSTORY:UPDATE_SETTING",R="GEOSTORY:UPDATE_CURRENT_PAGE",B="GEOSTORY:REMOVE_RESOURCE",N="GEOSTORY:SET_PENDING_CHANGES",F="GEOSTORY:SET_UPDATE_URL_SCROLL",U="GEOSTORY:UPDATE_MEDIA_EDITOR_SETTINGS",G="GEOSTORY:HIDE_CAROUSEL_ITEMS",j="GEOSTORY:ENABLE_DRAW",W=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>e;return{type:l,id:n&&n.id||a()(),path:e,position:t,element:r()(n)&&(0,s.nq)(n,o)||n}},H=(e,t,n)=>({type:c,id:e,mediaType:t,data:n}),z=e=>({type:d,mode:e?s.nl.EDIT:s.nl.VIEW}),Z=(e,t)=>({type:f,id:e,options:t}),V=e=>({type:g,id:e}),Q=function(){return{type:b,value:arguments.length>0&&void 0!==arguments[0]&&arguments[0],name:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading"}},K=e=>({type:y,error:e}),q=e=>({type:E,path:e}),Y=e=>({type:C,error:e}),X=(e,t)=>({type:P,control:e,value:t}),J=e=>({type:O,resource:e}),$=e=>({type:w,id:e}),ee=e=>({type:T,story:e}),te=function(e,t){return{type:D,path:e,element:t,mode:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"replace"}},ne=e=>{let{sectionId:t,columnId:n}=e;return{type:R,sectionId:t,columnId:n}},oe=(e,t,n)=>({type:A,source:e,target:t,position:n}),re=(e,t,n,o,r)=>({type:k,status:e,target:t,selector:n,hideContent:o,path:r}),ie=(e,t)=>({type:L,prop:e,value:t}),ae=e=>({type:I,src:e}),se=function(e){let{path:t}=e;return{type:m,path:t,owner:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GEOSTORY"}},le=e=>({type:N,value:e}),ce=e=>({type:F,value:e}),de=e=>({type:U,mediaEditorSettings:e}),pe=e=>({type:h,status:e}),ue=(e,t)=>({type:G,sectionId:e,showContentId:t}),me=e=>({type:j,drawOptions:e})},63516:(e,t,n)=>{"use strict";n.d(t,{Tu:()=>o,XP:()=>i,Nv:()=>a,kk:()=>s}),n(24384),n(33044),n(69293),n(37275);const o="LOGIN:LOGIN_PROMPT_CLOSED",r="LOGIN:LOGIN_REQUIRED",i="LOGIN_SUCCESS",a="LOGOUT";function s(){return{type:r}}},47310:(e,t,n)=>{"use strict";n(75875),n(72500),n(27418)},32420:(e,t,n)=>{"use strict";n.d(t,{Bm:()=>c,v$:()=>d});var o=n(75875),r=n.n(o),i=n(72500),a=n.n(i),s=n(27418),l=n.n(s);const c=(e,t,n)=>r().get(function(e,t){let{version:n="1.1.0",...o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=a().parse(e,!0);return a().format(l()({},r,{query:l()({service:"WFS",typeName:t,version:n,request:"GetFeature",...o},r.query)}))}(e,t,n)),d=function(e,t){return r().get(((e,t)=>{const n=a().parse(e,!0);return a().format({...n,search:void 0,query:{...n.query,service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"}})})(e,t)).then((e=>{let{data:t}=e;return t}))}},75875:(e,t,n)=>{const o=n(9669),r=n(7303),i=n(72500),a=n(37275).ZP,{isAuthenticationActivated:s,getAuthenticationRule:l,getToken:c,getBasicAuthHeader:d}=n(33044),p=n(27418),u=n(13218),m=n(14176),g=n(14293),h=n(72500);function f(e,t,n){e.params=p({},e.params,{[t]:n}),e.url=e.url?a.getUrlWithoutParameters(e.url,[t]):e.url}function y(e,t,n){e.headers=p({},e.headers,{[t]:n})}const b=[];o.interceptors.request.use((e=>{var t=e.url||"",n=!(0===t.indexOf("http")),o=!n&&t.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(function(e){if(!e||!e.url||!s())return e;const t=r(e.baseURL||"",e.url),n=l(t);switch(n&&n.method){case"browserWithCredentials":return e.withCredentials=!0,e;case"authkey":{const t=c();return t?(f(e,n.authkeyParamName||"authkey",t),e):e}case"test":{const t=n?n.token:"";return t?(f(e,n.authkeyParamName||"authkey",t),e):e}case"basic":const t=d();return t?(y(e,"Authorization",t),e):e;case"bearer":{const t=c();t&&y(e,"Authorization","Bearer "+t)}}}(e),o){let e=window.location;n=o[1]===e.protocol&&o[3]===e.hostname;let t=o[4],r=e.port,i=0===e.protocol.indexOf("https")?443:80;t=""===t?i+"":t+"",r=""===r?i+"":r+"",n=n&&t===r}if(!n){let n=a.getProxyUrl(e);if(n){let o=[],r=!1;u(n)&&(o=n.useCORS||[],r=n.autoDetectCORS||!1,n=n.url);const i=o.reduce(((e,n)=>e||0===t.indexOf(n)),!1),a=b.reduce(((e,n)=>e||0===t.indexOf(n)),!1);if(i||r&&!a)r&&(e.autoDetectCORS=!0);else{const o=h.parse(t,!0,!0),r=m(e.params,g);e.url=n+encodeURIComponent(h.format(p({},o,{search:null,query:p({},o.query,r)}))),e.params=void 0}}}return e})),o.interceptors.response.use((e=>e),(e=>{if(e.config&&e.config.autoDetectCORS){const t=i.parse(e.config.url),n=t.protocol+"//"+t.host+t.pathname;if(-1===b.indexOf(n))return b.push(n),new Promise(((t,n)=>{o({...e.config,autoDetectCORS:!1}).then(t).catch(n)}))}return Promise.reject(e.response?{...e.response,originalError:e}:e)})),e.exports=o},79432:(e,t,n)=>{"use strict";n.r(t);var o={};n.r(o),n.d(o,{cleanUpEmptyStoryContainers:()=>ce,closeShareOnGeostoryChangeMode:()=>ge,editMediaForBackgroundEpic:()=>ae,editWebPageComponent:()=>oe,handlePendingGeoStoryChanges:()=>he,hideCarouselItemsOnUpdateCurrentPage:()=>ue,inlineEditorEditMap:()=>me,loadGeostoryEpic:()=>se,loadStoryOnHistoryPop:()=>be,openMediaEditorForNewMedia:()=>ee,openWebPageComponentCreator:()=>ne,reloadGeoStoryOnLoginLogout:()=>le,saveGeoStoryResource:()=>re,scrollOnLoad:()=>ye,scrollSideBar:()=>Ae,scrollToContentEpic:()=>ie,setFocusOnMapEditing:()=>pe,sortContentEpic:()=>de,urlUpdateOnScroll:()=>fe});var r=n(37718),i=n(49977),a=n.n(i),s=n(91175),l=n.n(s),c=n(7654),d=n.n(c),p=n(47037),u=n.n(p),m=n(14293),g=n.n(m),h=n(95825),f=n.n(h),y=n(58748),b=n.n(y),A=n(27361),E=n.n(A),v=n(1469),C=n.n(v),w=n(41609),S=n.n(w),P=n(75982),O=n(23570),T=n.n(O),I=n(75875),_=n.n(I),M=n(6571),x=n(34990),k=n(82904),D=n(13218),L=n.n(D);const R={type:"osm",title:"Open Street Map",name:"mapnik",source:"osm",group:"background",visibility:!0,id:"mapnik__0",loading:!1,loadingError:!1},B="GEOSTORY:EDIT_MEDIA",N="MEDIA_EDITOR:HIDE",F=()=>({type:N}),U=(e,t)=>({type:"MEDIA_EDITOR:SHOW",owner:e,settings:t});var G=n(97395),j=n(63516),W=n(74621),H=n(66113),z=n(13311),Z=n.n(z),V=n(22222);const Q=e=>E()(e,"mediaEditor.settings.sourceId"),K=e=>E()(e,"mediaEditor.settings.mediaType");(0,V.P1)((e=>E()((e=>E()(e,`mediaEditor.data["${K(e)}"]["${Q(e)}"].resultData`))(e),"resources")),(e=>E()(e,"mediaEditor.selected")),(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return Z()(e,{id:t})}));var q=n(89919),Y=n(92579);const X="MAP_EDITOR:SHOW",J="MAP_EDITOR:HIDE",$=(e,t,n)=>o=>o.ofType("MEDIA_EDITOR:CHOOSE_MEDIA").switchMap((o=>{let{resource:r={}}=o,a=[];const s=e.getState(),c=K(s),d=Q(s),p=l()((0,H.jq)(s).filter((e=>e.data&&("geostory"!==d&&e.data.id||e.id)===r.id)));let u=r.id;p?u=p.id:S()(r)?a=[...a,(0,x.Od)(`${t}`),F()]:(u=r.id||T()(),a=[...a,(0,x.rp)(u,c,r.data?r.data:r)]);let m=c===Y.Tr.MAP?{resourceId:u,type:c,map:void 0}:{resourceId:u,type:c},g=[(0,x.Vx)(`${t}`,m,"merge")];return n===Y.ID.CAROUSEL&&g.push((0,x.Vx)(`${t}.map`,{mapInfoControl:!0},"merge")),a=[...a,...g,F()],i.Observable.from(a)})),ee=(e,t)=>e.ofType(x.D7).filter((e=>{let{element:t={}}=e;return t.type===Y.bT.MEDIA||(0,Y.lt)(t)})).switchMap((n=>{let{path:o,element:r}=n,a="";(0,Y.lt)(r)&&"sections"===o&&(a=".contents[0].contents[0]");const s=`${o}[{"id":"${r.id}"}]${a}`,l=(0,H.X6)(t.getState());return i.Observable.of(U("geostory",l)).merge(e.let($(t,s)),e.ofType(N).switchMap((()=>i.Observable.of((0,x.Od)(s)))).takeUntil(e.ofType(x.wb))).takeUntil(e.ofType(B))})),te=e=>t=>t.ofType(x.Hb).switchMap((t=>{let{src:n}=t;return i.Observable.of((0,x.Vx)(`${e}`,{src:n,editURL:!1},"merge"))})),ne=e=>e.ofType(x.D7).filter((e=>{let{element:t={}}=e;return t.type===Y.bT.WEBPAGE&&!1!==t.editURL||(0,Y.NC)(t)})).switchMap((t=>{let{path:n,element:o}=t,r="";(0,Y.NC)(o)&&"sections"===n&&(r=".contents[0].contents[0]");const a=`${n}[{"id":"${o.id}"}]${r}`;return i.Observable.of((0,x.Vx)(a,{editURL:!0},"merge")).merge(e.let(te(a))).takeUntil(e.ofType(x.cc))})),oe=e=>e.ofType(x.cc).switchMap((t=>{let{path:n}=t;return i.Observable.of((0,x.Vx)(n,{editURL:!0},"merge")).merge(e.let(te(n))).takeUntil(e.ofType(x.D7))})),re=e=>e.ofType(x.LE).exhaustMap((function(){let{resource:e,delay:t=1e3}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(e.id?(0,M.id)(e):(0,M.SN)(e)).switchMap((n=>i.Observable.of((0,x.GD)(n),(0,x.g5)(Y.ZX.SHOW_SAVE,!1),e.id?(0,x.wJ)(n):(0,P.VF)(`/geostory/${n}`)).merge(i.Observable.of((0,G.$Z)({id:"STORY_SAVE_SUCCESS",title:"saveDialog.saveSuccessTitle",message:"saveDialog.saveSuccessMessage"})).delay(e.id?0:t)))).let((0,q.hP)((0,x.YP)(!0,"loading"),(0,x.YP)(!1,"loading"))).catch((function(){let{status:e,statusText:t,data:n,message:o,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.Observable.of((0,x.y6)(e?{status:e,statusText:t,data:n}:o||r),(0,x.YP)(!1,"loading"))}))})),ie=function(e){let{getState:t=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.ofType(x.D7).switchMap((e=>{let{path:n,element:o}=e;return i.Observable.of(o).switchMap((()=>{if(document.getElementById(o.id)){const{sectionId:e}=(0,Y.u0)(n),r=(0,H.I0)(e)(t())?e:o.id;return(0,Y.M1)(r,{behavior:"auto",block:"center"}),i.Observable.empty()}throw new Error("Item not mounted yet")})).retryWhen((e=>e.delay(200).take(10)))}))},ae=(e,t)=>e.ofType(B).switchMap((n=>{let{path:o,owner:r,sectionType:a}=n;const s=(0,H.vv)(o)(t.getState()),l=(0,H.Tr)(s)(t.getState());return i.Observable.of(K(t.getState())).filter((e=>l&&l.type!==e)).map((()=>({type:"MEDIA_EDITOR:SET_MEDIA_TYPE",mediaType:l.type,selectedService:undefined}))).merge(i.Observable.of(U(r,(0,H.X6)(t.getState())),(c=s,{type:"MEDIA_EDITOR:SELECT_ITEM",id:c}),function(){return{type:"MEDIA_EDITOR:MEDIA_TYPE_DISABLE",mediaTypes:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}(a===Y.ID.CAROUSEL?["image","video"]:[])).merge(e.let($(t,o,a)).takeUntil(e.ofType(N,x.D7))));var c})),se=(e,t)=>{let{getState:n=(()=>{})}=t;return e.ofType(x.XH).switchMap((e=>{let{id:t}=e;return i.Observable.defer((()=>t&&d()(parseInt(t,10))?_().get(`configs/${t}.json`).then((e=>{let{data:t}=e;const n=t.sections,o=C()(n)&&n.map((e=>({...e,id:T()()})));return{data:o.length?{...t,sections:o}:t,isStatic:!0,canEdit:!0}})):(0,M.RX)(t))).do((e=>{let{data:t}=e;if(!t)throw Error("Wrong data format");return!0})).switchMap((e=>{let{data:o,isStatic:r=!1,...a}=e;const s=n(),l=(0,W.qg)(s),c=(0,W.jl)(s),p=u()(o)?JSON.parse(o):o;if(!c&&d()(parseInt(t,10)))return i.Observable.of((0,x.Ct)({status:403}));const m=(0,H.eK)(s)===Y.nl.EDIT;return i.Observable.from([...r||m?[(0,x.D_)(a&&a.canEdit||l)]:[],(0,x.OS)(t),(0,x.K0)(p),(0,x.DF)(a)])})).let((0,q.hP)((0,x.YP)(!0,"loading"),(0,x.YP)(!1,"loading"),(e=>{const t=(0,Y.of)();let o=t+".errors.loading.unknownError";return 403===e.status?(o=t+".errors.loading.pleaseLogin",((0,W.jl)(n())||(0,H.JM)(n()))&&(o=t+".errors.loading.geostoryNotAccessible")):404===e.status?o=t+".errors.loading.geostoryDoesNotExist":g()(e.status)&&(o=e.message),i.Observable.of((0,G.vU)({title:t+".errors.loading.title",message:o}),(0,x.K0)({}),(0,x.Ct)({...e,messageId:o}))}))).startWith((0,x.K0)({}))}))},le=e=>e.ofType(x.XH).switchMap((t=>{let{id:n}=t;return e.ofType(j.XP,j.Nv).switchMap((()=>i.Observable.of((0,x.wJ)(n)).delay(500))).takeUntil(e.ofType(P.nk))})),ce=(e,t)=>{let{getState:n=(()=>{})}=t;return e.ofType(x.Dq).switchMap((e=>{let{path:t}=e;const o=(0,Y.Ll)(t,(0,H.Kg)(n())),r=f()(o,"contents");if(r>0){const e=o.splice(0,r),t=(0,H.$F)(e.join("."))(n());if(t&&t.contents&&0===t.contents.length)return i.Observable.of((0,x.Od)(e.join(".")))}return i.Observable.empty()}))},de=(e,t)=>{let{getState:n=(()=>{})}=t;return e.ofType(x.tP).switchMap((e=>{let{source:t,target:o,position:r}=e;const a=n(),s=(0,H.$F)(t)(a);return i.Observable.from([(0,x.Od)(t),(0,x.IH)(o,r,s)])}))},pe=(e,t)=>{let{getState:n=(()=>{})}=t;return e.ofType(x.wb).filter((e=>{let{path:t=""}=e;return t.endsWith("editMap")})).switchMap((e=>{let{path:t,element:o}=e;const{flatPath:r,path:a}=(0,Y.ln)(t,(0,H.Kg)(n())),s=1===r.length,l=s?r[0]:r.pop(),c=s?r[0]:r.shift(),d="background"===a[a.length-2],p=d&&`#${c.id} .ms-section-background-container`||`#${l.id}`;return(0,Y.M1)(l.id),i.Observable.from([(0,x.$A)(o,l,p,d,t.replace(".editMap",""))])}))},ue=(e,t)=>{let{getState:n}=t;return e.ofType(x.wb).filter((e=>{let{path:t,element:n}=e;return t&&t.endsWith("carouselToggle")&&n})).switchMap((e=>{let{path:t}=e;const{sectionId:o,contentId:r}=(0,Y.u0)(t)||{},a=(0,H.eB)(o)(n())||[];return r&&!S()(a)?i.Observable.from([(0,x.fD)(o,r)]).concat(i.Observable.of((0,x.Vx)(t,!1))):i.Observable.empty()}))},me=(e,t)=>{let{getState:n}=t;return e.ofType(X).filter((e=>{let{owner:t,map:n}=e;return"inlineEditor"===t&&!!n})).switchMap((()=>e.ofType("MAP_EDITOR:SAVE").switchMap((t=>{let{map:o}=t;const{path:r}=(0,H.FW)(n());return i.Observable.of((0,x.Vx)(`${r}.map`,o,"merge"),(0,x.Vx)(`${r}.editMap`,!1),{type:J,owner:undefined}).takeUntil(e.ofType(J))}))))},ge=e=>e.ofType(x.vb).switchMap((()=>i.Observable.of((0,k.Xg)("share","enabled",!1)))),he=e=>i.Observable.merge(e.ofType(x.XH).switchMap((()=>e.ofType(x.Zf)))).switchMap((()=>e.ofType(x.D7,x.wb,x.Dq,x.mN,x.QK,x.km).take(1).switchMap((()=>i.Observable.of((0,x.c0)(!0)).concat(e.ofType(x.si,P.nk,j.Nv).take(1).switchMap((()=>i.Observable.of((0,x.c0)(!1))))))))),fe=(e,t)=>{let{getState:n}=t;return e.ofType(x.un).let(function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e;return o=>o.withLatestFrom(e.startWith(t)).filter((e=>{let[,t]=e;return n(t)})).map((e=>{let[t]=e;return t}))}(e.ofType(x.Gx).map((e=>!e.status)).startWith(!0))).debounceTime(50).switchMap((e=>{let{sectionId:t,columnId:o}=e;if("edit"!==(0,H.eK)(n())&&(o||t)&&(0,H.bU)(n())){const e=E()(n(),"geostory.resource.id"),r=(0,Y.NP)(window.location.href,window?.location?.hash,e,t,o);r&&history.pushState(null,"",r)}return i.Observable.empty()}))},ye=e=>e.ofType(x.ij).switchMap((e=>{let{delay:t=2e3}=e;const n=window?.location?.hash?.split("/");return i.Observable.of(n).do((()=>{window?.location?.hash?.includes("shared")?(0,Y.M1)(n[7]||n[5],{block:"start",behavior:"auto"}):n.length>5?(0,Y.M1)(n[6],{block:"start",behavior:"auto"}):5===n.length&&(0,Y.M1)(n[4],{block:"start",behavior:"auto"})})).ignoreElements().startWith((0,x.WE)(!0)).concat(i.Observable.of((0,x.WE)(!1)).delay(t))})),be=e=>e.ofType(P.nk).switchMap((e=>{let{payload:t}=e;const n=t?.location?.pathname.includes("/geostory/");if(n&&"POP"===t.action&&!t.isFirstRendering){const e=b()(t?.location?.pathname);return e.find((e=>"shared"===e))?i.Observable.of((0,x.wJ)(e[2])).delay(500):i.Observable.of((0,x.wJ)(e[1])).delay(500)}return i.Observable.empty()})),Ae=(e,t)=>{let{getState:n}=t;return e.ofType(x.un).filter((e=>{let{columnId:t,sectionId:o}=e;return!("edit"!==(0,H.eK)(n())||!t&&!o)})).debounceTime(50).switchMap((()=>i.Observable.of(Array.from(document.querySelectorAll(".ms-geostory-builder .mapstore-side-card.ms-highlight")).pop()).filter((e=>!!e)).withLatestFrom(i.Observable.of(document.querySelector(".ms-geostory-builder .ms2-border-layout-body")).filter((e=>!!e))).map((e=>{let[t,n]=e;return function(){const{top:e,bottom:o}=t.getBoundingClientRect(),{top:r,bottom:i}=n.getBoundingClientRect();e<r?n.scrollBy({top:e-r-10,behavior:"smooth"}):o>i&&n.scrollBy({top:o-i+10,behavior:"smooth"})}})).do((e=>window.requestAnimationFrame(e))).ignoreElements()))};var Ee=n(81763),ve=n.n(Ee),Ce=n(30998),we=n.n(Ce),Se=n(68630),Pe=n.n(Se),Oe=n(84596),Te=n.n(Oe),Ie=n(19155),_e=n.n(Ie),Me=n(61868);const xe=(e,t,n)=>{let{contents:o,background:r,id:i,resourceId:a}=n,s=[],l=t+`{"id": "${i}"}]`;return a===e?[l]:(r&&r.resourceId===e&&s.push(l+".background"),o?o.reduce(((t,n)=>[...t,...xe(e,l+".contents[",n)]),s):s)};let ke={mode:"view",isCollapsed:!1,focusedContent:{},currentPage:{},settings:{},oldSettings:{},updateUrlOnScroll:!1};const De=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.D7:{const{id:n,path:o,position:r}=t;let{element:i}=t;const a=(0,Y.Ll)(`currentStory.${o}`,e),s=E()(e,a,[]),l=((e,t)=>{const n=e.length;let o=0;return t||0===t||(o=n),u()(t)?o=we()(e,{id:t})+1:ve()(t)&&(o=Math.min(t,e.length)),o})(s,r),c=s.slice();return c.splice(l,0,{id:n,...i}),(0,Me.t8)(a,c,e)}case x.mN:{const{id:n,mediaType:o,data:r}=t;return(0,Me.t8)("currentStory.resources",_e()([{id:n,type:o,data:r},...e.currentStory&&e.currentStory.resources||[]],"id"),e)}case x.vb:return(0,Me.t8)("mode",t.mode,e);case x.QK:{const{id:n,mediaType:o,data:r}=t;let i=(0,Me.cc)("currentStory.resources",{id:n,type:o,data:r},{id:n},e);return o===Y.Tr.MAP&&e.currentStory.sections.filter((e=>e.type!==Y.ID.CAROUSEL)).reduce(((e,t)=>[...e,...xe(n,"sections[",t)]),[]).map((t=>{const n=(0,Y.Ll)(`currentStory.${t}.map`,e);i=(0,Me.t8)(n,void 0,i)})),i}case x.Ro:{const{id:n,mediaType:o}=t;let r=(0,Me.z6)("currentStory.resources",{id:n},e);return e.currentStory.sections.reduce(((e,t)=>[...e,...xe(n,"sections[",t)]),[]).map((t=>{const n=(0,Y.Ll)(`currentStory.${t}.resourceId`,e);if(r=(0,Me.zN)(n,r),o===Y.Tr.MAP){const n=(0,Y.Ll)(`currentStory.${t}.map`,e);r=(0,Me.zN)(n,r)}})),r}case x.lX:return(0,Me.t8)("loading"===t.name?"loading":`loadFlags.${t.name}`,t.value,(0,Me.t8)("loading",t.value,e));case x.Dq:{const{path:n}=t,o=(0,Y.Ll)(`currentStory.${n}`,e);let r=[...o],i=r.pop();const a=E()(e,r);return C()(a)?(u()(i)&&(i=parseInt(i,10)),(0,Me.t8)(r,[...a.slice(0,i),...a.slice(i+1)],e)):(0,Me.zN)(o,e)}case x.ij:{let n=e.defaultSettings||{},o=t.story.settings||n;const r=o?.theme?.fontFamilies||[],i=e.currentStory?.settings?.theme?.fontFamilies;return i&&i.length>0&&(o=(0,Me.t8)("theme.fontFamilies",_e()([...i,...r],"family"),o)),(0,Me.t8)("currentStory",{...t.story,settings:o},e)}case x.i2:return(0,Me.t8)("selectedCard",e.selectedCard===t.card?"":t.card,e);case x.IY:{const{control:n,value:o}=t;return(0,Me.t8)(`controls.${n}`,o,e)}case x.Zf:{const{resource:n}=t,o=e.currentStory&&e.currentStory.settings||{};return(0,Me.qC)((0,Me.t8)("resource",n),(0,Me.t8)("currentStory.settings.storyTitle",o.storyTitle||n.name))(e)}case x.si:case x.KT:return(0,Me.zN)("errors.save",e);case x.SW:return(0,Me.t8)("errors.save",Te()(t.error),e);case x.Mk:return(0,Me.t8)("isCollapsed",!e.isCollapsed,e);case x.NZ:{const n=E()(e,`currentStory.settings.${t.option}`);return(0,Me.t8)(`currentStory.settings.${t.option}`,!n,e)}case x.c:{const n=!e.isSettingsEnabled,o=e.currentStory&&e.currentStory.settings||{};return(0,Me.qC)((0,Me.t8)("isSettingsEnabled",n),(0,Me.t8)("oldSettings",n?o:{}),(0,Me.t8)("currentStory.settings",n?{...o}:t.withSave?o:e.oldSettings))(e)}case x.wb:{const{path:n,mode:o}=t;let{element:r}=t;const i=(0,Y.Ll)(`currentStory.${n}`,e),a=E()(e,i);return Pe()(a)&&Pe()(r)&&"merge"===o&&(r={...a,...r}),C()(a)&&C()(r)&&"merge"===o&&(r=[...a,...r]),(0,Me.t8)(i,r,e)}case x.km:return(0,Me.t8)(`currentStory.settings.${t.prop}`,t.value,e);case x.un:if(t.columnId){const n=Z()(e.currentStory.sections,(e=>Z()(e.contents,{id:t.columnId})));return n&&Z()(n.contents,{id:t.columnId})?(0,Me.t8)("currentPage",{...e.currentPage,columns:{...e.currentPage.columns,[n.id]:t.columnId}},e):e}return(0,Me.t8)("currentPage",{...e.currentPage,sectionId:t.sectionId},e);case x.Cx:{const{status:n,target:o,selector:r="",hideContent:i=!1,path:a}=t,s=n?{target:o,selector:r,hideContent:i,path:a}:void 0;return(0,Me.t8)("focusedContent",s,e)}case x.jr:return(0,Me.t8)("pendingChanges",t.value,e);case x.ZY:return(0,Me.t8)("updateUrlOnScroll",t.value,e);case x.EQ:return(0,Me.t8)("mediaEditorSettings",t.mediaEditorSettings,e);case x.W$:if(t.sectionId){const n=Z()(e.currentStory.sections,(e=>Z()(e.contents,{id:t.showContentId})));return n&&Z()(n.contents,{id:t.showContentId})?(0,Me.t8)("currentStory",{...e.currentStory,sections:(0,Y.eI)(e.currentStory.sections,t)},e):e}return e;case x.mk:return(0,Me.t8)("drawOptions",t.drawOptions,e);default:return e}};var Le=n(43410),Re=n(24852),Be=n.n(Re),Ne=n(45697),Fe=n.n(Ne),Ue=n(71703),Ge=n(72500),je=n.n(Ge),We=n(91159),He=n(65539);function ze(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ze=je().parse(window.location.href,!0).query;class Ve extends Be().Component{constructor(){super(...arguments),ze(this,"setInitialMode",(e=>{const{pathname:t}=this.props.location;(t.includes("/geostory/shared")||!this.props.canEdit||e)&&this.props.setEditing(!1)}))}UNSAFE_componentWillMount(){const e=E()(this.props,"match.params.gid"),t=this.props.previousId&&this.props.previousId+"";this.props.reset(),this.setInitialMode(t!==e),this.props.updateUrlOnScroll(!0),this.props.loadResource(e)}componentDidUpdate(e){const t=E()(this.props,"match.params.gid");E()(e,"match.params.gid")!==t&&(g()(t)?this.props.reset():(this.setInitialMode(!0),this.props.loadResource(t)))}componentWillUnmount(){this.props.reset()}render(){return Be().createElement(We.Z,{id:this.props.name,component:He.Z,includeCommon:!1,plugins:this.props.plugins,params:this.props.match.params})}}ze(Ve,"propTypes",{mode:Fe().string,match:Fe().object,name:Fe().string,loadResource:Fe().func,reset:Fe().func,plugins:Fe().object,canEdit:Fe().bool,location:Fe().object,history:Fe().object,setEditing:Fe().func,previousId:Fe().oneOfType([Fe().number,Fe().string]),updateUrlOnScroll:Fe().func}),ze(Ve,"defaultProps",{name:"geostory",mode:"desktop",reset:()=>{},setEditing:()=>{},updateUrlOnScroll:()=>{}});const Qe=e=>{const t=e?.browser?.mobile;return!(!(0,W.jl)(e)||t)},Ke={pages:[{name:"geostory-embedded",path:"/:gid",component:(0,Ue.connect)((e=>({mode:Ze.mobile||e.browser&&e.browser.mobile?"mobile":"desktop",canEdit:Qe(e),previousId:(0,H.bI)(e)})),{loadResource:x.wJ,setEditing:x.D_,updateUrlOnScroll:x.nL})(Ve),pageConfig:{name:"geostory-embedded"}}],initialState:{defaultState:{}},baseReducers:{version:Le.Z,geostory:De},baseEpics:{loadGeostoryEpic:se},storeOpts:{persist:{whitelist:["security"]}}};var qe=n(75933),Ye=n.n(qe),Xe=n(22843),Je=n(86638),$e=n(31398),et=n(8316),tt=n(622),nt=n(67076),ot=n(28878);(0,nt.setObservableConfig)(ot.Z);const rt=(0,nt.compose)((0,nt.mapPropsStream)((e=>{const{handler:t,stream:n}=(0,nt.createEventHandler)();let o="EMPTY",r="EMPTY";return i.Observable.combineLatest(e,n.filter((e=>{let{columnId:t,sectionId:n}=e;return t&&o!==t?(o=t,!0):!(!n||r===n||(r=n,0))})).withLatestFrom(e.pluck("updateCurrentPage")).do((e=>{let[t,n]=e;return n&&n(t)})).ignoreElements().startWith({}),(function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return{...n.reduce((function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},...arguments.length>1?arguments[1]:void 0}}),{}),updateCurrentPage:t}}))})));var it=n(82030),at=n(22762),st=n.n(at);(0,nt.setObservableConfig)(ot.Z);const lt=(0,nt.compose)((0,nt.mapPropsStream)((e=>{const{handler:t,stream:n}=(0,nt.createEventHandler)();return i.Observable.combineLatest(e,((e,t)=>t.map((function(){let{interceptorTime:e,updateCurrentPage:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{interceptorTime:e,updateCurrentPage:t}})).distinctUntilKeyChanged("interceptorTime").switchMap((function(){let{interceptorTime:t=100,updateCurrentPage:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.scan((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:t,visible:n,entry:o}=arguments.length>1?arguments[1]:void 0;return{...e,[t]:{visible:n,entry:o}}}),{}).debounceTime(t).map((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return st()(Object.keys(e),(t=>e[t].visible?E()(e[t],"entry.boundingClientRect.top"):1/0))})).do((e=>{n&&n({sectionId:e})})).ignoreElements()})))(n,e).startWith({}),(function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return{...n.reduce((function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},...arguments.length>1?arguments[1]:void 0}}),{}),onVisibilityChange:t}}))})));var ct=n(93451),dt=(n(7169),n(37163)),pt=n(9582),ut=n(94184),mt=n.n(ut);function gt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ht="External Link";class ft extends Re.Component{constructor(){super(...arguments),gt(this,"state",{expanded:!1}),gt(this,"toggle",(()=>{this.setState((e=>({expanded:!e.expanded})))}))}render(){const{expanded:e}=this.state,{externalLinkOption:t,onSelectionChange:n,currentSelectOption:o,availableStorySections:r}=this.props;return Be().createElement("div",{className:"rdw-block-wrapper","aria-label":"rdw-block-control"},Be().createElement(pt.Dropdown,{className:"ms-rdw-link-options-dropdown",onChange:n,expanded:e,doExpand:this.toggle,doCollapse:this.toggle,onExpandEvent:this.toggle,title:"MSLinks"},Be().createElement("span",null,o),Be().createElement(pt.DropdownOption,{active:!0,value:{value:t,label:t},key:t},"External Link"),r&&r.map((e=>Be().createElement(pt.DropdownOption,{active:e.id===o,value:{value:e.id,label:e.title||e.type||e.id},key:e.id},e.title||e.type||e.id)))))}}gt(ft,"propTypes",{externalLinkOption:Fe().string,onSelectionChange:Fe().func,currentSelectOption:Fe().string,availableStorySections:Fe().array});class yt extends Re.Component{constructor(){super(...arguments),gt(this,"state",{showModal:!1,linkTarget:"",linkTitle:"",attributes:{},linkTargetOption:this.props.config.defaultTargetOption,currentSelectOption:"Select link target"}),gt(this,"removeLink",(()=>{const{onChange:e}=this.props;e("unlink")})),gt(this,"addLink",(()=>{const{onChange:e}=this.props,{linkTitle:t,linkTarget:n,linkTargetOption:o,attributes:r}=this.state;e("link",t,n,o,r)})),gt(this,"updateValue",(e=>{this.setState({[`${e.target.name}`]:e.target.value})})),gt(this,"onSelectionChange",(e=>{e.value===ht?this.setState({linkTarget:"",attributes:{},currentSelectOption:e.label}):this.setState({linkTarget:e.value,attributes:{"data-geostory-interaction-type":"scrollTo","data-geostory-interaction-params":`${e.value}`,"data-geostory-interaction-name":e.label},currentSelectOption:e.label})})),gt(this,"updateTargetOption",(e=>{this.setState({linkTargetOption:e.target.checked?"_blank":"_self"})})),gt(this,"hideModal",(()=>{this.setState({showModal:!1})})),gt(this,"signalExpandShowModal",(()=>{const{onExpandEvent:e,currentState:{link:t,selectionText:n}}=this.props,{linkTargetOption:o}=this.state;e();let r="Select link target";t?.target&&t.target.length>0&&(r=ht),t?.attributes["data-geostory-interaction-name"]&&(r=t.attributes["data-geostory-interaction-name"]),this.setState({showModal:!0,linkTarget:t&&t.target||"",linkTargetOption:t&&t.targetOption||o,linkTitle:t&&t.title||n,attributes:t&&t.attributes||{},currentSelectOption:r})})),gt(this,"forceExpandAndShowModal",(()=>{const{doExpand:e,currentState:{link:t,selectionText:n}}=this.props,{linkTargetOption:o}=this.state;e();let r="Select link target";t?.target&&t.target.length>0&&(r=ht),t?.attributes["data-geostory-interaction-name"]&&(r=t.attributes["data-geostory-interaction-name"]),this.setState({showModal:!0,linkTarget:t&&t.target,linkTargetOption:t&&t.targetOption||o,linkTitle:t&&t.title||n,attributes:t&&t.attributes||{},currentSelectOption:r})}))}componentDidUpdate(e){e.expanded&&!this.props.expanded&&this.setState({showModal:!1,linkTarget:"",linkTitle:"",attributes:{},linkTargetOption:this.props.config.defaultTargetOption,currentSelectOption:"Select link target"})}renderAddLinkModal(){const{config:{popupClassName:e},doCollapse:t,translations:n,availableStorySections:o}=this.props,{linkTitle:r,linkTarget:i,linkTargetOption:a,currentSelectOption:s}=this.state;return Be().createElement("div",{className:mt()("rdw-link-modal",e),onClick:pt.stopPropagation},Be().createElement("label",{className:"rdw-link-modal-label",htmlFor:"linkTitle"},n["components.controls.link.linkTitle"]),Be().createElement("input",{id:"linkTitle",className:"rdw-link-modal-input",onChange:this.updateValue,onBlur:this.updateValue,name:"linkTitle",value:r}),Be().createElement("label",{className:"rdw-link-modal-label",htmlFor:"linkTarget"},n["components.controls.link.linkTarget"]),Be().createElement(ft,{externalLinkOption:ht,currentSelectOption:s,onSelectionChange:this.onSelectionChange,availableStorySections:o}),s===ht&&Be().createElement(Be().Fragment,null,Be().createElement("input",{id:"linkTarget",className:"rdw-link-modal-input",onChange:this.updateValue,onBlur:this.updateValue,name:"linkTarget",value:i}),Be().createElement("label",{className:"rdw-link-modal-target-option",htmlFor:"openLinkInNewWindow"},Be().createElement("input",{id:"openLinkInNewWindow",type:"checkbox",defaultChecked:"_blank"===a,value:"_blank",onChange:this.updateTargetOption}),Be().createElement("span",null,n["components.controls.link.linkTargetOption"]))),Be().createElement("span",{className:"rdw-link-modal-buttonsection"},Be().createElement("button",{className:"rdw-link-modal-btn",onClick:this.addLink,disabled:!i||!r},n["generic.add"]),Be().createElement("button",{className:"rdw-link-modal-btn",onClick:t},n["generic.cancel"])))}renderInFlatList(){const{config:{options:e,link:t,unlink:n,className:o},currentState:r,expanded:i,translations:a}=this.props,{showModal:s}=this.state;return Be().createElement("div",{className:mt()("rdw-link-wrapper",o),"aria-label":"rdw-link-control"},e.indexOf("link")>=0&&Be().createElement(pt.Option,{value:"unordered-list-item",className:mt()(t.className),onClick:this.signalExpandShowModal,"aria-haspopup":"true","aria-expanded":s,title:t.title||a["components.controls.link.link"]},Be().createElement("img",{src:t.icon,alt:""})),e.indexOf("unlink")>=0&&Be().createElement(pt.Option,{disabled:!r.link,value:"ordered-list-item",className:mt()(n.className),onClick:this.removeLink,title:n.title||a["components.controls.link.unlink"]},Be().createElement("img",{src:n.icon,alt:""})),i&&s?this.renderAddLinkModal():void 0)}renderInDropDown(){const{expanded:e,onExpandEvent:t,doCollapse:n,doExpand:o,onChange:r,config:i,currentState:a,translations:s}=this.props,{options:l,link:c,unlink:d,className:p,dropdownClassName:u,title:m}=i,{showModal:g}=this.state;return Be().createElement("div",{className:"rdw-link-wrapper","aria-haspopup":"true","aria-label":"rdw-link-control","aria-expanded":e,title:m},Be().createElement(pt.Dropdown,{className:mt()("rdw-link-dropdown",p),optionWrapperClassName:mt()(u),onChange:r,expanded:e&&!g,doExpand:o,doCollapse:n,onExpandEvent:t},Be().createElement("img",{src:(0,pt.getFirstIcon)(i),alt:""}),l.indexOf("link")>=0&&Be().createElement(pt.DropdownOption,{onClick:this.forceExpandAndShowModal,className:mt()("rdw-link-dropdownoption",c.className),title:c.title||s["components.controls.link.link"]},Be().createElement("img",{src:c.icon,alt:""})),l.indexOf("unlink")>=0&&Be().createElement(pt.DropdownOption,{onClick:this.removeLink,disabled:!a.link,className:mt()("rdw-link-dropdownoption",d.className),title:d.title||s["components.controls.link.unlink"]},Be().createElement("img",{src:d.icon,alt:""}))),e&&g?this.renderAddLinkModal():void 0)}render(){const{config:{inDropdown:e}}=this.props;return e?this.renderInDropDown():this.renderInFlatList()}}gt(yt,"propTypes",{expanded:Fe().bool,doExpand:Fe().func,doCollapse:Fe().func,onExpandEvent:Fe().func,config:Fe().object,onChange:Fe().func,currentState:Fe().object,translations:Fe().object,modalHandler:Fe().any});const bt=yt;function At(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Et(e,t,n){e.findEntityRanges((e=>{const t=e.getEntity();return null!==t&&"LINK"===n.getEntity(t).getType()}),t)}function vt(e){var t;const{showOpenOptionOnHover:n}=e;return t=class extends Re.Component{constructor(){super(...arguments),At(this,"state",{showPopOver:!1}),At(this,"openLink",(()=>{const{entityKey:e,contentState:t}=this.props,{url:n}=t.getEntity(e).getData(),o=window.open(n,"blank");o&&o.focus()})),At(this,"toggleShowPopOver",(()=>{const e=!this.state.showPopOver;this.setState({showPopOver:e})})),At(this,"renderDecorator",(()=>{const{children:e,entityKey:t,contentState:o}=this.props,{url:r,targetOption:i,attributes:a}=o.getEntity(t).getData(),{showPopOver:s}=this.state;return a&&a["data-geostory-interaction-type"]?Be().createElement("span",{className:"rdw-link-decorator-wrapper"},Be().createElement("a",{"data-geostory-interaction-type":a["data-geostory-interaction-type"],"data-geostory-interaction-params":a["data-geostory-interaction-params"]},e)):Be().createElement("span",{className:"rdw-link-decorator-wrapper",onMouseEnter:this.toggleShowPopOver,onMouseLeave:this.toggleShowPopOver},Be().createElement("a",{href:r,target:i},e),s&&n?Be().createElement("img",{src:pt.openlink,alt:"",onClick:this.openLink,className:"rdw-link-decorator-icon"}):void 0)}))}render(){return this.renderDecorator()}},At(t,"propTypes",{entityKey:Fe().string.isRequired,children:Fe().array,contentState:Fe().object}),t}const Ct=e=>({strategy:Et,component:vt(e)});var wt=n(89265),St=n.n(wt),Pt=n(17247),Ot=n.n(Pt);const Tt=e=>{let t;if(e instanceof HTMLAnchorElement){const n={};if(e.dataset&&void 0!==e.dataset.mention)n.url=e.href,n.text=e.innerHTML,n.value=e.dataset.value,t=dt.Entity.__create("MENTION","IMMUTABLE",n);else{n.url=e.getAttribute&&e.getAttribute("href")||e.href,n.title=e.innerHTML,n.targetOption=e.target;const o=e.getAttribute&&e.getAttribute("data-geostory-interaction-type"),r=e.getAttribute&&e.getAttribute("data-geostory-interaction-params"),i=e.getAttribute&&e.getAttribute("data-geostory-interaction-name");let a={};i&&r&&o&&(a["data-geostory-interaction-type"]=o,a["data-geostory-interaction-params"]=r,a["data-geostory-interaction-name"]=i),n.attributes=a,t=dt.Entity.__create("LINK","MUTABLE",n)}}return t},It=(e,t)=>{if("MENTION"===e.type)return`< href="${e.data.url}" class="wysiwyg-mention" data-mention data-value="${e.data.value}">${t}</a>`;if("LINK"===e.type){const n=e.data.targetOption||"_self",o=e.data.attributes;return o&&o["data-geostory-interaction-type"]?`<a data-geostory-interaction-name="${o["data-geostory-interaction-name"]}" data-geostory-interaction-type="${o["data-geostory-interaction-type"]}" data-geostory-interaction-params="${o["data-geostory-interaction-params"]}" onclick="__geostory_interaction(type='scrollTo', '${o["data-geostory-interaction-params"]}')">${t}</a>`:`<a href="${e.data.url}" target="${n}">${t}</a>`}if("IMAGE"===e.type){const t=e.data.alignment,n=t&&"none"!==t?`float: ${t};`:"display: block; margin: 0 auto 0 auto;";return`<img src="${e.data.src}" alt="${e.data.alt}" style="height: ${e.data.height}; width: ${e.data.width}; ${n}" />`}return"EMBEDDED_LINK"===e.type?`<iframe width="${e.data.width}" height="${e.data.height}" src="${e.data.src}" frameBorder="0"></iframe>`:t};function _t(){return _t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_t.apply(this,arguments)}const Mt=(0,nt.compose)((0,nt.withProps)((e=>{let{storyFonts:t=[],placeholder:n,toolbarStyle:o={},className:r="ms-text-editor",toolbar:i={}}=e;return{editorRef:e=>setTimeout((()=>e&&e.focus&&e.focus()),100),stripPastedStyles:!0,placeholder:n,toolbarStyle:o,toolbar:{options:["fontFamily","blockType","fontSize","inline","textAlign","colorPicker","list","link","remove"],fontFamily:{options:t.length>0?t:Y.Km,className:void 0,component:void 0,dropdownClassName:void 0},link:{inDropdown:!1,className:void 0,component:void 0,popupClassName:void 0,dropdownClassName:void 0,showOpenOptionOnHover:!0,defaultTargetOption:"_self",options:["link","unlink"],link:{icon:void 0,className:void 0},unlink:{icon:void 0,className:void 0},linkCallback:void 0},blockType:{inDropdown:!0,options:["Normal","H1","H2","H3","H4","H5","H6","Blockquote","Code"],className:void 0,component:void 0,dropdownClassName:void 0},inline:{options:["bold","italic","underline","strikethrough","monospace"],bold:{className:`${r}-toolbar-btn`},italic:{className:`${r}-toolbar-btn`},underline:{className:`${r}-toolbar-btn`},strikethrough:{className:`${r}-toolbar-btn`},code:{className:`${r}-toolbar-btn`}},textAlign:{left:{className:`${r}-toolbar-btn`},center:{className:`${r}-toolbar-btn`},right:{className:`${r}-toolbar-btn`},justify:{className:`${r}-toolbar-btn`}},colorPicker:{className:`${r}-toolbar-btn`},remove:{className:`${r}-toolbar-btn`},...i},toolbarClassName:`${r}-toolbar`,wrapperClassName:`${r}-wrapper`,editorClassName:`${r}-main`}})),(0,nt.renderComponent)(pt.Editor)),xt=(0,nt.compose)((0,nt.lifecycle)({componentWillUnmount(){const{editorState:e,save:t=(()=>{})}=this.props;t(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e){const n=1!==(0,dt.convertToRaw)(e.getCurrentContent()).blocks.length||(0,dt.convertToRaw)(e.getCurrentContent()).blocks[0].text,o=St()((0,dt.convertToRaw)(e.getCurrentContent()),null,null,It);return n?o:t}return t}(e,Y.gg))}}),(0,nt.withHandlers)({onBlur:e=>{let{toggleEditing:t=(()=>{})}=e;return()=>{t(!1)}}}),(0,nt.withProps)((e=>{let{sections:t=[]}=e;return{availableStorySections:t.reduce(((e,t)=>{const n=[];return[Y.ID.IMMERSIVE,Y.ID.CAROUSEL].includes(t.type)?t.contents.forEach((e=>{n.push(e)})):n.push(t),[...e,...n]}),[])}})),(0,nt.withProps)((e=>{let{availableStorySections:t=[]}=e;return{toolbar:{link:{inDropdown:!1,className:void 0,component:e=>Be().createElement(bt,_t({},e,{availableStorySections:t})),popupClassName:void 0,dropdownClassName:void 0,showOpenOptionOnHover:!0,defaultTargetOption:"_self",options:["link","unlink"],link:{icon:void 0,className:void 0},unlink:{icon:void 0,className:void 0},linkCallback:void 0,getLinkDecorator:Ct}}}})),Mt),kt=(0,nt.compose)((0,nt.withState)("contentEditing","setContentEditing",!1),(0,nt.withState)("editorState","onEditorStateChange"),(0,nt.withHandlers)({toggleEditing:e=>{let{bubblingTextEditing:t=(()=>{}),sectionType:n,onEditorStateChange:o=(()=>{}),setContentEditing:r=(()=>{})}=e;return(e,i)=>{if(e){let e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=Ot()(e,null,Tt),n=dt.ContentState.createFromBlockArray(t.contentBlocks);return dt.EditorState.createWithContent(n)}(i);if(n===Y.ID.TITLE&&"unstyled"===dt.RichUtils.getCurrentBlockType(e)){let t=e.getCurrentContent();t=dt.Modifier.setBlockType(t,dt.EditorState.createWithContent(t).getSelection(),"header-one"),e=dt.EditorState.createWithContent(t)}o(e),r(!0),t(!0)}else r(!1),t(!1)}}}),(0,nt.branch)((e=>{let{contentEditing:t}=e;return!!t}),xt)),Dt=(0,nt.compose)((0,nt.withHandlers)({save:e=>{let{update:t=(()=>{})}=e;return e=>t("html",e)}}),(0,nt.branch)((e=>{let{mode:t}=e;return t===Y.nl.EDIT}),kt),(0,nt.compose)((0,nt.withPropsOnChange)(["sectionType"],(e=>{let{sectionType:t}=e;return{placeholder:Y.ID.TITLE===t?"geostory.builder.defaults.htmlTitlePlaceholder":"geostory.builder.defaults.htmlPlaceholder",placeholderTag:Y.ID.TITLE===t?"h1":"p"}})),(0,ct.Z)("placeholder")))((e=>{let{placeholder:t,placeholderTag:n="p",id:o,toggleEditing:r=(()=>{}),html:i,mode:a}=e;return Be().createElement("div",{className:"ms-text-wrapper"},i!==Y.gg&&Be().createElement("div",{id:o,onClick:()=>r(!0,i),dangerouslySetInnerHTML:{__html:i}}),(!i||i===Y.gg)&&a===Y.nl.EDIT&&Be().createElement("div",{className:"ms-text-placeholder",id:"placeholder"+o,onClick:()=>r(!0,i===Y.gg?"":i),dangerouslySetInnerHTML:{__html:`<${n}>${t}</${n}>`}}))}));var Lt,Rt,Bt,Nt=n(1206),Ft=n.n(Nt),Ut=n(96797),Gt=n.n(Ut);class jt extends Re.Component{componentDidMount(){Gt()(this._node)}UNSAFE_componentWillReceiveProps(e){e.src!==this.props.src&&Gt()(this._node)}render(){const{id:e,src:t,fit:n="cover",enableFullscreen:o=!0,fullscreen:r,onClick:i,description:a,showCaption:s,caption:l=a,credits:c,loaderStyle:d}=this.props,p=this.props.loaderComponent,u=this.props.errorComponent;return Be().createElement("div",{id:e,className:"ms-media ms-media-image"},t&&"error"!==this.props.status&&Be().createElement("img",{ref:e=>{this._node=e},src:t,onLoad:()=>this.props.onChangeStatus("loaded"),onError:()=>this.props.onChangeStatus("error"),onClick:o?()=>i(!0):void 0,style:{objectFit:n,fontFamily:`object-fit: ${n}`,cursor:o?"pointer":"default"}}),t&&!this.props.status&&p&&Be().createElement(p,{style:{...d}}),"error"===this.props.status&&u&&Be().createElement(u,null),c&&Be().createElement("div",{className:"ms-media-credits"},Be().createElement("small",null,c)),s&&l&&Be().createElement("div",{className:"ms-media-caption"},Be().createElement("small",null,l)),o&&r?Be().createElement(Ft(),{mainSrc:t,onCloseRequest:()=>i(!1)}):null)}}Lt=jt,Rt="propTypes",Bt={src:Fe().string,id:Fe().string,fit:Fe().string,description:Fe().string,showCaption:Fe().bool,credits:Fe().string,altText:Fe().string,enableFullscreen:Fe().bool,fullscreen:Fe().bool,onClick:Fe().func,onChangeStatus:Fe().func,status:Fe().string,loaderComponent:Fe().oneOfType([Fe().element,Fe().func]),errorComponent:Fe().oneOfType([Fe().element,Fe().func]),caption:Fe().string,loaderStyle:Fe().object},(Rt=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(Rt))in Lt?Object.defineProperty(Lt,Rt,{value:Bt,enumerable:!0,configurable:!0,writable:!0}):Lt[Rt]=Bt;const Wt=(0,nt.compose)((0,nt.withState)("fullscreen","onClick",!1),(0,nt.withState)("status","onChangeStatus",""))(jt);var Ht=n(57588),zt=n(19180),Zt=n(91812),Vt=n(37981),Qt=n(69705),Kt=n(57068),qt=n(18446),Yt=n.n(qt),Xt=n(47359),Jt=n(49243),$t=n(7412),en=n(24262);function tn(){return tn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},tn.apply(this,arguments)}const nn=()=>-1!==(0,$t.lY)().indexOf("application/json")?"application/json":(0,$t.wR)(),on=(0,nt.mapPropsStream)((e=>{const{stream:t,handler:n}=(0,nt.createEventHandler)();return t.withLatestFrom(e.map((e=>{let{map:t,layers:n,options:o}=e;return{map:t,layers:n,options:o}})).distinctUntilChanged(((e,t)=>Yt()(e,t)))).switchMap((e=>{let[{point:t},{map:n,layers:o=[],options:{mapOptions:{mapInfoFormat:r=nn()}={}}={}}]=e;const a=o.filter((e=>(0,en.T4)(e,n.resolution)&&(0,$t.y_)(e))),s=["SLD_BODY"],l=["buffer","cql_filter","filter","propertyName"];return 0===a.length?i.Observable.of({requests:[{}],responses:[{response:{features:[]}}],validResponses:[]}):i.Observable.from(a).mergeMap((e=>{let{url:o,request:i,metadata:a}=(0,$t.Fm)(e,{format:r,map:n,point:t,currentLocale:"en-US"});const c=o,d=i,p={...(0,$t.K7)(e,l,s),...d},u=T()();return(0,Jt.y)(c,p,e).map((e=>e.data.exceptions?{reqId:u,exceptions:e.data.exceptions,queryParams:d,layerMetadata:a}:{data:e.data,reqId:u,queryParams:d,layerMetadata:{...a,features:e.features,featuresCrs:e.featuresCrs}})).catch((e=>({error:e.data||e.statusText||e.status,reqId:u,queryParams:d,layerMetadata:a}))).startWith({start:!0,reqId:u,request:p})})).scan(((e,t)=>{let{requests:n,responses:o,validResponses:i}=e;if(t.start){const{reqId:e,request:r}=t;return{requests:n.concat({reqId:e,request:r}),responses:o,validResponses:i}}const{data:a,queryParams:s,layerMetadata:l}=t,c=(0,$t.Te)(r),d=o.concat({response:a,queryParams:s,layerMetadata:l});return{requests:n,validResponses:c.getValidResponses(d),responses:d}}),{requests:[],responses:[],validResponses:[]})})).startWith({requests:[],responses:[]}).combineLatest(e,(function(e){return{...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},mapInfo:e,getFeatureInfoHandler:n}}))})),rn=((0,nt.branch)((e=>{let{map:{mapInfoControl:t=!1}={}}=e;return t}),(0,nt.compose)(on,(0,nt.withStateHandlers)({popups:[]},{onClick:(e,t)=>{let{getFeatureInfoHandler:n=(()=>{})}=t;return(e,t)=>{let{rawPos:o=[],...r}=e;return n({point:r,layerInfo:t}),{popups:[{position:{coordinates:o},id:T()()}]}}},onPopupClose:()=>()=>({popups:[]})}),(0,nt.withPropsOnChange)(["mapInfo","popups"],(e=>{let{mapInfo:t,popups:n,options:{mapOptions:{mapInfoFormat:o=nn()}={}}={}}=e;const{responses:r,requests:i,validResponses:a}=t,s=()=>Be().createElement(Xt.Z,{renderValidOnly:!0,responses:r,requests:i,validResponses:a,format:o,showEmptyMessageGFI:!0,missingResponses:(i||[]).length-(r||[]).length});return{popups:n.map((e=>({...e,component:s})))}})),(0,nt.withPropsOnChange)(["plugins","onPopupClose","popups"],(function(){let{plugins:e,popups:t,onPopupClose:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{PopupSupport:o,tools:r={},...i}=e;return o?{plugins:{...i,tools:{...r,popup:e=>Be().createElement(o,tn({},e,{popups:t,onPopupClose:n}))}}}:{}})))),(0,nt.withPropsOnChange)(["onClick","eventHandlers"],(function(){let{onClick:e=(()=>{}),eventHandlers:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{eventHandlers:{...t,onClick:e}}})));var an=n(55745),sn=n.n(an),ln=n(65442),cn=n.n(ln);function dn(){return dn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},dn.apply(this,arguments)}function pn(e){return e&&0===e.indexOf("geostory-vector")}const un=(0,nt.compose)((0,Ue.connect)((e=>({sections:(0,H.NR)(e)})),{onClickMarker:x.Vx}),(0,nt.withHandlers)({onClickMarker:e=>{let{onClickMarker:t=(()=>{}),sections:n={}}=e;return(e,o,r)=>{const{response:{features:[{contentRefId:i}={}]=[]}={}}=Z()(e,(function(){let{queryParams:{request:e}={},layerMetadata:{title:t}={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!e&&t.toLowerCase()===o}))||{},a=Z()(n,(e=>{let{contents:t}=e;return Z()(t,{id:i})}));let s={popups:[]};if(a){const{id:e,title:n=""}=Z()(a.contents,{id:i})||{};t(`sections[{"id":"${a.id}"}].contents[{"id":"${e}"}].carouselToggle`,!0),n&&(s={popups:r.map((e=>({...e,component:()=>Be().createElement("div",{className:"ms-geostory-carousel-viewer"},n)})))})}return s}}})),mn=(0,nt.mapPropsStream)((e=>{const{stream:t,handler:n}=(0,nt.createEventHandler)();return t.withLatestFrom(e.map((e=>{let{map:t,layers:n,options:o}=e;return{map:t,layers:n,options:o}})).distinctUntilChanged(((e,t)=>Yt()(e,t)))).switchMap((e=>{let[{point:t,layerInfo:n},{map:o,layers:r=[],options:{mapOptions:{mapInfoFormat:a=nn()}={}}={}}]=e,s=r.filter((e=>(0,en.T4)(e,o.resolution)&&(0,$t.y_)(e)));pn(n)&&(s=s.filter((e=>{let{id:t}=e;return n===t})));const l=["SLD_BODY"],c=["buffer","cql_filter","filter","propertyName"];return 0===s.length?i.Observable.of({requests:[{}],responses:[{response:{features:[]}}],validResponses:[]}):i.Observable.from(s).mergeMap((e=>{let{url:n,request:r,metadata:s}=(0,$t.Fm)(e,{format:a,map:o,point:t,currentLocale:"en-US"});const d=n,p=r,u={...(0,$t.K7)(e,c,l),...p},m=T()();return(n?(0,Jt.y)(d,u,e).map((e=>e.data.exceptions?{reqId:m,exceptions:e.data.exceptions,queryParams:p,layerMetadata:s}:{data:e.data,reqId:m,queryParams:p,layerMetadata:{...s,features:e.features,featuresCrs:e.featuresCrs}})):i.Observable.of(((e,t,n)=>{const o={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[t.lng,t.lat]}};let r=n&&n.units;switch(r){case"m":default:r="meters";break;case"deg":r="degrees";break;case"mi":r="miles"}let i=n&&n.resolution||1,a=sn()(o,(n.buffer||1)*i,r);return{data:{crs:null,features:(e.features||[]).filter((e=>{try{return"FeatureCollection"===e.type&&e.features&&e.features.length?e.features.reduce(((e,t)=>{let o=t.properties.useGeodesicLines&&t.properties.geometryGeodesic?{...t,geometry:t.properties.geometryGeodesic}:t;return e||cn()(a,i&&n.buffer&&r?sn()(o,1,"meters"):o)}),!1):cn()(a,i&&n.buffer&&r?sn()(e,1,"meters"):e)}catch(e){return!1}})),totalFeatures:"unknown",type:"FeatureCollection"},queryParams:t,layerMetadata:n}})(e,r,s))).catch((e=>({error:e.data||e.statusText||e.status,reqId:m,queryParams:p,layerMetadata:s}))).startWith({start:!0,reqId:m,request:u})})).scan(((e,t)=>{let{requests:o,responses:r,validResponses:i}=e;if(t.start){const{reqId:e,request:n}=t;return{requests:o.concat({reqId:e,request:n}),responses:r,validResponses:i}}const{data:s,queryParams:l,layerMetadata:c}=t,d=(0,$t.Te)(a),p=r.concat({response:s,queryParams:l,layerMetadata:c});return{requests:o,validResponses:d.getValidResponses(p),responses:p,layerInfo:n}}),{requests:[],responses:[],validResponses:[],layerInfo:n})})).startWith({requests:[],responses:[]}).combineLatest(e,(function(e){return{...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},mapInfo:e,getFeatureInfoHandler:n}}))})),gn=(0,nt.branch)((e=>{let{map:{mapInfoControl:t=!1}={},isDrawEnabled:n}=e;return!n&&t}),(0,nt.compose)(mn,(0,nt.withStateHandlers)({popups:[]},{onClick:(e,t)=>{let{getFeatureInfoHandler:n=(()=>{}),map:{mapInfoControl:o}={}}=t;return(e,t)=>{let{rawPos:r=[],...i}=e;return pn(t)||o?(n({point:i,layerInfo:t}),{popups:[{position:{coordinates:r},id:T()()}]}):{popups:[]}}},onPopupClose:()=>()=>({popups:[]})}),(0,nt.withPropsOnChange)(["mapInfo","popups"],(e=>{let{mapInfo:t,popups:n,options:{mapOptions:{mapInfoFormat:o=nn()}={}}={},onClickMarker:r=(()=>{})}=e;const{responses:i,requests:a,validResponses:s,layerInfo:l}=t;return pn(l)?r(s,l,n):{popups:n.map((e=>({...e,component:()=>Be().createElement(Xt.Z,{renderValidOnly:!0,responses:i,requests:a,validResponses:s,format:o,showEmptyMessageGFI:!0,missingResponses:(a||[]).length-(i||[]).length})})))}})),(0,nt.withPropsOnChange)(["plugins","onPopupClose","popups"],(function(){let{plugins:e,popups:t,onPopupClose:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{PopupSupport:o,tools:r={},...i}=e;return o?{plugins:{...i,tools:{...r,popup:e=>Be().createElement(o,dn({},e,{popups:t,onPopupClose:n}))}}}:{}}))));var hn=n(61928);const fn=(0,nt.compose)(Qt.Z,(0,Zt.Z)(0),zt.Z,gn,rn,Vt.Z,Kt.e)(hn.Z);var yn=n(99534),bn=n(15135),An=n(80628),En=n(38560);function vn(){return vn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},vn.apply(this,arguments)}const Cn=(0,bn.Z)(En.Z),wn=(0,nt.compose)((0,nt.withState)("active","setActive",!1),An.Z)((e=>{let{id:t,map:n={layers:[R]},fit:o,editMap:r=!1,onMapViewChanges:i,eventHandlers:a,expandable:s=!1,active:l,setActive:c,width:d,height:p,size:u,showCaption:m,caption:g,mapType:h="leaflet",onMapTypeLoaded:f,layers:y,children:b,...A}=e;const{layers:E=[],mapOptions:v={},description:C,...w}=n.data?n.data:n,S=g||C,P=s?l?{zoomControl:!1,interactive:!0,mapOptions:{scrollWheelZoom:!0,interactions:{mouseWheelZoom:!0,dragPan:!0}}}:{zoomControl:!1,interactive:!1,mapOptions:{scrollWheelZoom:!1,interactions:{mouseWheelZoom:!1,dragPan:!1}}}:{mapOptions:v},O=r?{mapOptions:{...v,interactions:{...v.interactions,mouseWheelZoom:w.zoomControl}}}:P,T=!A.isDrawEnabled&&w.mapInfoControl&&!(s&&!l),I=Be().createElement(Be().Fragment,null,Be().createElement(fn,vn({},A,{key:s?"overlay":"block",onMapViewChanges:i,eventHandlers:a,map:{...w,id:`media-${t}`,resize:d+"-"+p+"_"+u,className:"aaaa",style:{cursor:T?"pointer":"default",...s&&!l&&{pointerEvents:"none",touchAction:"none"}}},layers:y?[...E,...y]:E,tools:T?["popup"]:[],options:(0,Y.kn)(O),mapType:h,onMapTypeLoaded:f}),Re.Children.map(b,(e=>e?(0,Re.cloneElement)(e,{mapType:h}):null))),s&&!r&&Be().createElement(Cn,{className:"ms-expand-media-button",onClick:()=>c(!l),tooltipId:l?"geostory.closeFullscreenMap":"geostory.showFullscreenMap",tooltipPosition:"left"},Be().createElement(Ht.Glyphicon,{glyph:l?"1-close":"1-full-screen"})));return Be().createElement("div",{className:`ms-media ms-media-map ${v.zoomPosition||""}`,style:{objectFit:o}},l&&s?Be().createElement(yn.Z,null,Be().createElement("div",{className:"ms-expanded-media-container"},I)):I,m&&S&&Be().createElement("div",{className:"ms-media-caption"},Be().createElement("small",null,S)))}));var Sn=n(70390),Pn=n(32425),On=n(5346);const Tn=(0,An.Z)((e=>{let{src:t,width:n,height:o,resolution:r,thumbnail:i,controls:a,play:s,onPlay:l=(()=>{}),onStart:c=(()=>{}),fit:d,loop:p,volume:u=1,muted:m}=e;const g=s,[h,f]=(0,Re.useState)(g),[y,b]=(0,Re.useState)(),[A,E]=(0,Re.useState)(s),v="cover"===d,[C,w]=(0,Re.useState)(!1);(0,Re.useEffect)((()=>{!h&&g&&(f(!0),E(!0)),h&&c(h)}),[h,g]);const S=function(){const e=n/o;return v?e<r?[o*r,o]:[n,n/r]:"contain"===d?e<r?[n,n/r]:[o*r,o]:[n,n/r]}(),P="contain"===d||v?o:S[1],O=!v&&a,T=!!v||p;return Be().createElement("div",{className:"ms-video",style:{position:"relative",width:n,height:P,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"}},t&&Be().createElement(Be().Fragment,null,h&&Be().createElement(Sn.ZP,{url:t,width:S[0],height:S[1],playing:g,loop:T,volume:u,muted:m,style:v?{left:"50%",top:"50%",transform:"translate(-50%, -50%)",position:"absolute"}:{},controls:O,pip:!1,fileConfig:{attributes:{controlsList:"nodownload",disablePictureInPicture:!0}},youtubeConfig:{playerVars:{controls:O?2:0,modestbranding:1,rel:0}},onReady:()=>E(!1),onError:e=>{b(e),(""+e).includes("NotAllowedError")&&(l(!1),w(!0),E(!1))},onPause:()=>{l(!1)},onPlay:()=>{l(!0),C&&(b(!1),w(!1))}}),(!h||h&&(A||y))&&Be().createElement("div",{className:"ms-video-cover",style:{position:"absolute",width:S[0],height:S[1],display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 1.0)",...!(A||y)&&{cursor:"pointer"},...!g&&i&&{backgroundImage:`url(${i})`,backgroundSize:v?"cover":"640px auto",backgroundPosition:"center",backgroundRepeat:"no-repeat"}},onClick:()=>{C?(w(!1),b(!1)):E(!0),f(!0),l(!0)}},A&&Be().createElement(Pn.Z,{size:70}),y&&!C&&Be().createElement("div",{className:"text-center"},Be().createElement(Ht.Glyphicon,{glyph:"alert",style:{fontSize:S[1]/4>100?100:S[1]/4,mixBlendMode:"difference",color:"#ffffff"}}),Be().createElement("h3",null,Be().createElement(On.Z,{msgId:"geostory.errors.loading.video"}))," "),(!(A||y)&&!g||y&&C)&&Be().createElement(Ht.Glyphicon,{glyph:"play",style:{fontSize:S[1]/4>100?100:S[1]/4,mixBlendMode:"difference",color:"#ffffff"}}))),!O&&!C&&Be().createElement("div",{className:"ms-video-mask-cover",style:{position:"absolute",width:S[0],height:S[1]}}))})),In=e=>{let{id:t,src:n,resolution:o=16/9,autoplay:r,inView:i,description:a,showCaption:s,caption:l=a,thumbnail:c,credits:d,controls:p=!0,fit:u,loop:m,muted:g,onPlay:h=(()=>{}),mode:f,containerInView:y=!0}=e;const b=y&&i,[A,E]=(0,Re.useState)(!1),v=e=>{E(e),h(e)};return(0,Re.useEffect)((()=>{f===Y.nl.EDIT&&v(!1)}),[f]),(0,Re.useEffect)((()=>{f===Y.nl.VIEW&&b&&(r||"cover"===u)&&v(!0)}),[b,r,u,f]),(0,Re.useEffect)((()=>{f===Y.nl.VIEW&&!b&&A&&v(!1)}),[b,A,f]),Be().createElement("div",{id:t,key:`${t}-${u}-${f}`,className:"ms-media ms-media-video"},Be().createElement(Tn,{src:n,play:A&&f===Y.nl.VIEW,resolution:o,thumbnail:c,controls:p&&f===Y.nl.VIEW,onPlay:v,fit:u,loop:m,muted:g}),d&&Be().createElement("div",{className:"ms-media-credits"},Be().createElement("small",null,d)),s&&l&&Be().createElement("div",{className:"ms-media-caption"},Be().createElement("small",null,l)))};function _n(){return _n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_n.apply(this,arguments)}const Mn=Wt,xn={image:Wt,map:wn,video:In},kn=e=>{let{debounceTime:t,mediaViewer:n,children:o,...r}=e;const i=`${r.id}${r.resourceId?`-${r.resourceId}`:""}`,[a,s]=(0,Re.useState)({}),l=void 0===a[i]||a[i],c=n||xn[r.mediaType||r.type]||Mn;return Be().createElement(c,_n({sectionType:r.sectionType,debounceTime:t,loading:a,isLoading:l,onLoad:s,loadingId:i},r),o)};kn.propTypes={id:Fe().string,lazy:Fe().bool,mediaType:Fe().string,type:Fe().string,debounceTime:Fe().number},kn.defaultProps={id:"",lazy:!0,mediaType:"",type:""};const Dn=kn;var Ln=n(7472);function Rn(){return Rn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Rn.apply(this,arguments)}const Bn=e=>{let{show:t,style:n={},modal:o,draggable:r=!1,closeGlyph:i="1-close",closable:a=!0,onClose:s=(()=>{}),title:l,header:c,footer:d,children:p,...u}=e;return t?Be().createElement(Ln.Z,Rn({modal:o,onClickOut:a&&o?()=>s():null,style:{...n,display:t?"block":"none"},draggable:r},u),Be().createElement("span",{role:"header"},l||c||Be().createElement("span",null,""),a?Be().createElement("button",{onClick:()=>s(),className:"settings-panel-close close"},Be().createElement(Ht.Glyphicon,{glyph:i})):null),Be().createElement("span",{role:"body"},p),d?Be().createElement("span",{role:"footer"},d):null):null},Nn=(0,nt.branch)((function(){let{src:e="",viewHeight:t,size:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!e||!t||!n}),(0,it.Z)((()=>!0),(()=>({glyph:"code"})))),Fn=(0,nt.compose)(Nn)((e=>{let{src:t,size:n,viewHeight:o}=e;return Be().createElement("div",{className:"ms-webpage-wrapper"},Be().createElement("iframe",{src:t,height:`${(0,Y.t4)(n,o)}px`}))}));n(89734);var Un=n(64210),Gn=n(37275),jn=n(79468),Wn=n(23279),Hn=n.n(Wn);const zn=e=>{let{id:t,onLoad:n,loading:o,debounceTime:r,children:i,loaderComponent:a,loaderStyle:s}=e;const[l,c]=(0,jn.YD)(),d=(0,Re.useRef)(null),p=a;return(0,Re.useEffect)((()=>(d.current=Hn()((e=>{n(e)}),r),()=>{d.current.cancel()})),[]),(0,Re.useEffect)((()=>{c&&o&&d.current(t),!c&&o&&d.current.cancel()}),[c,o,t]),Be().createElement("div",{ref:l,className:"ms-visibility-container"},o?p?Be().createElement(p,{style:{...s}}):null:(0,Re.cloneElement)(i,{inView:c}))};zn.propTypes={id:Fe().string,debounceTime:Fe().number,loading:Fe().bool,onLoad:Fe().func,loaderComponent:Fe().oneOfType([Fe().element,Fe().func])},zn.defaultProps={id:"",debounceTime:300,loading:!0,onLoad:()=>{},loaderComponent:null};const Zn=zn;function Vn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Qn=()=>Be().createElement("div",{className:"ms-media-loader"},Be().createElement(Pn.Z,{size:52}));class Kn extends Be().PureComponent{constructor(){super(...arguments),Vn(this,"state",{url:this.props.src||"",error:!1,loading:!0}),Vn(this,"updateURL",(e=>{let{target:{value:t}}=e;this.setState({url:t})})),Vn(this,"save",(()=>{const{url:e}=this.state,t=!function(e){return new RegExp(arguments.length>1&&void 0!==arguments[1]?arguments[1]:/^(http(s{0,1}):\/\/)+?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/).test(e)}(e,(0,Gn.u8)("GeoStoryValidIframeURLRegex"));this.setState({error:t}),t||this.props.onChange(e)}))}render(){const{onClose:e,editURL:t}=this.props,{url:n,error:o}=this.state;return Be().createElement(Be().Fragment,null,Be().createElement(yn.Z,null,Be().createElement(Bn,{modal:!0,show:t,onClickOut:e=>e.preventDefault()&&e.stopPropagation(),title:Be().createElement(On.Z,{msgId:"geostory.webPageCreator.title"}),onClose:e,id:"web-page-creator",footer:Be().createElement(En.Z,{bsSize:"small",onClick:this.save},Be().createElement(On.Z,{msgId:"geostory.webPageCreator.saveButton"}))},o&&Be().createElement("div",{className:"dropzone-errorBox alert-danger"},Be().createElement(On.Z,{msgId:"geostory.webPageCreator.error"})),Be().createElement(Ht.FormGroup,{controlId:"WEBPAGE_URL",validationState:o&&"error"},Be().createElement(Ht.ControlLabel,null,Be().createElement(On.Z,{msgId:"geostory.webPageCreator.url.label"})),Be().createElement(Ht.FormControl,{label:"URL",type:"text",value:n,onChange:this.updateURL,required:!0})))),this.props.lazy?Be().createElement(Zn,{key:this.props.id,id:this.props.id,debounceTime:this.props.debounceTime,loading:this.state.loading,onLoad:()=>this.setState({loading:!1}),loaderComponent:Qn},Be().createElement(Fn,this.props)):Be().createElement(Fn,this.props))}}Vn(Kn,"propTypes",{editURL:Fe().bool,onClose:Fe().func,onChange:Fe().func,src:Fe().string,id:Fe().string,debounceTime:Fe().number,lazy:Fe().bool}),Vn(Kn,"defaultProps",{lazy:!0});const qn=(0,nt.compose)((0,nt.withHandlers)({onClose:e=>{let{update:t=(()=>{})}=e;return()=>t("editURL",!1,"merge")}}))(Kn),Yn=(0,Ue.connect)(null,{onChange:x.YM})(qn);function Xn(){return Xn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Xn.apply(this,arguments)}const Jn=e=>{let{type:t}=e;return Be().createElement("div",{className:"ms-content ms-content-unknown"},`warning: unknown content type "${t}"`)},$n=e=>{let{type:t,...n}=e;const o=(e=>{switch(e){case Y.bT.TEXT:return Dt;case Y.bT.MEDIA:case Y.Tr.IMAGE:case Y.Tr.MAP:case Y.Tr.VIDEO:return Dn;case Y.bT.WEBPAGE:return Yn;default:return Jn}})(t);return Be().createElement(o,Xn({type:t},n))};function eo(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class to extends Be().Component{constructor(){super(...arguments),eo(this,"getContainerNode",(e=>e?document.body:this.parentNode||document.querySelector("."+(Gn.ZP.getConfigProp("themePrefix")||"ms2")+" > div")||document.body))}render(){const e=this.getContainerNode(this.props.useBody);return Be().createElement("div",{ref:e=>{this.parentNode=e&&e.parentNode},className:this.props.className,style:this.props.style},Be().createElement(Ht.OverlayTrigger,{ref:e=>{this.trigger=e},trigger:["click"],container:e,placement:this.props.placement,rootClose:!0,overlay:Be().createElement(Ht.Popover,{id:this.props.id,title:this.props.title,className:this.props.popoverClassName},this.props.content)},this.props.children))}}eo(to,"propTypes",{id:Fe().string,style:Fe().object,className:Fe().string,popoverClassName:Fe().string,placement:Fe().string,title:Fe().node,content:Fe().node,useBody:Fe().bool}),eo(to,"defaultProps",{id:"",useBody:!1});const no=to;var oo=n(80717);function ro(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class io extends Be().Component{UNSAFE_componentWillReceiveProps(e){!this.trigger||e.containerWidth===this.props.containerWidth&&e.containerHeight===this.props.containerHeight||this.trigger.hide()}render(){var e=this;return Be().createElement(no,{className:"add-bar",popoverClassName:"add-bar-popover",content:Be().createElement(oo.Z,{btnDefaultProps:{className:"square-button btn-tray"},buttons:this.props.buttons.map((t=>{let{onClick:n=(()=>{}),...o}=t;return{...o,onClick:function(){for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];n(...o),e.trigger.hide(),o[0]&&o[0].preventDefault&&o[0].preventDefault()}}}))}),ref:e=>{e&&(this.trigger=e.trigger)},placement:"top"},Be().createElement(En.Z,{className:this.props.addButtonClassName},Be().createElement(Ht.Glyphicon,{glyph:"plus"})))}}ro(io,"propTypes",{id:Fe().string,type:Fe().string,buttons:Fe().array,containerWidth:Fe().oneOfType([Fe().number,Fe().string]),containerHeight:Fe().oneOfType([Fe().number,Fe().string]),addButtonClassName:Fe().string}),ro(io,"defaultProps",{id:"",type:"",buttons:[],containerWidth:0,containerHeight:0,addButtonClassName:""});const ao=io;function so(){return so=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},so.apply(this,arguments)}const lo=e=>{let{viewWidth:t,viewHeight:n,className:o,contentProps:r={},addButtons:i=[],tools:a=[],contents:s=[],ContentComponent:l=$n,mode:c,sectionType:d,editMedia:p=(()=>{}),editWebPage:u=(()=>{}),add:m=(()=>{}),update:g=(()=>{}),remove:h=(()=>{}),bubblingTextEditing:f=(()=>{}),storyTheme:y,sections:b=[],storyFonts:A,innerRef:E}=e;return Be().createElement("div",{ref:E,className:o},s.reduce((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{id:o,...s}=arguments.length>1?arguments[1]:void 0;const E=[Be().createElement(l,so({id:o,key:`${o}-content`,mode:c,viewWidth:t,sectionType:d,viewHeight:n,editMedia:function(e){let{path:t=""}=e;for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return p({path:`contents[{"id": "${o}"}]`+t},...r)},editWebPage:function(e){let{path:t=""}=e;for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return u({path:`contents[{"id": "${o}"}]`+t},...r)},add:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return m(`contents[{"id": "${o}"}].`+e,...n)},update:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return g(`contents[{"id": "${o}"}].`+e,...n)},remove:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return h(`contents[{"id": "${o}"}]`+(e?"."+e:""),...n)}},r,s,{storyTheme:y,storyFonts:A,bubblingTextEditing:f,tools:a&&a[s.type],sections:b}))];return c===Y.nl.EDIT&&i.length>0&&E.push(Be().createElement(ao,{key:`${o}-content-add-buttons`,containerWidth:t,containerHeight:n,buttons:i.map((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e,onClick:()=>m("contents",o,e.template)}}))})),[...e,...E]}),[]))};function co(){return co=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},co.apply(this,arguments)}n(66337);const po=e=>(0,nt.compose)((0,nt.withHandlers)({onVisibilityChange:function(){let{id:e,onVisibilityChange:t=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(n,o)=>t({id:e,visible:n,entry:o})}}),function(){let{onVisibilityChange:e,rootSelector:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>o=>{let{intersectionObserverOptions:r={},onVisibilityChange:i,...a}=o;const s=e||i;return Be().createElement(jn.df,co({},n,r,{onChange:s}),(e=>{let{inView:n,ref:o,entry:r}=e;return Be().createElement(t,co({},a,{inView:n,inViewRef:o,inViewEntry:r}))}))}}(e));var uo=n(90085),mo=n(12610),go=n(23560),ho=n.n(go);const fo=(0,mo.Z)(Ht.DropdownButton);function yo(e){let{value:t,options:n=[],onSelect:o=(()=>{}),glyph:r="",tooltipId:i,pullRight:a=!1,className:s="square-button-md no-border",disabled:l,noTooltipWhenDisabled:c=!1,hideMenuItem:d=(()=>!1),shouldClose:p,showSelectionInTitle:u=!0}=e;const[m,h]=(0,Re.useState)(!1),[f,y]=(0,Re.useState)(!1),b=Z()(n,(e=>Yt()(e.value,t)))||{},{glyph:A}=b;return(0,Re.useEffect)((()=>{l&&h(!1)}),[l]),Be().createElement(fo,{noCaret:!0,open:m,noTooltipWhenDisabled:c,tooltipId:i,pullRight:a,className:s,disabled:l,title:Be().createElement(Ht.Glyphicon,{glyph:u&&A||r}),onToggle:(e,n,o)=>f||"select"===o?.source||p&&!p(t,n)?null:h(e)},n.map((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=e?.Component||Ht.MenuItem;return d(t,e)?null:Be().createElement(n,{key:e.value,selected:t,value:e.value,active:ho()(e?.isActive)&&e.isActive(t)||!g()(t)&&t===e.value,onClick:e?.Component?o:()=>o(e.value),onActive:e=>y(e)},e.label)})))}var bo=n(27418),Ao=n.n(bo),Eo=n(80307),vo=n.n(Eo);function Co(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class wo extends Be().Component{constructor(){super(...arguments),Co(this,"setConfirmRef",(e=>(this.confirm=e,this.confirm)))}componentDidMount(){this.props.focusConfirm&&vo().findDOMNode(this.confirm).focus()}render(){return Be().createElement(Ln.Z,{draggable:this.props.draggable,onClickOut:this.props.onClose,id:"confirm-dialog",modal:this.props.modal,style:Ao()({},this.props.style,{display:this.props.show?"block":"none"})},Be().createElement("span",{role:"header"},Be().createElement("span",{className:"user-panel-title"},this.props.title),Be().createElement("button",{onClick:this.props.onClose,className:"login-panel-close close"},this.props.closeGlyph?Be().createElement(Ht.Glyphicon,{glyph:this.props.closeGlyph}):Be().createElement("span",null,""))),Be().createElement("div",{role:"body"},this.props.children),Be().createElement("div",{role:"footer"},Be().createElement(Ht.ButtonGroup,null,Be().createElement(En.Z,{ref:this.setConfirmRef,onClick:this.props.onConfirm,disabled:this.props.confirmButtonDisabled,bsStyle:this.props.confirmButtonBSStyle},this.props.confirmButtonContent),Be().createElement(En.Z,{onClick:this.props.onClose},this.props.closeText))))}}Co(wo,"propTypes",{show:Fe().bool,draggable:Fe().bool,onClose:Fe().func,onConfirm:Fe().func,onSave:Fe().func,modal:Fe().bool,closeGlyph:Fe().string,style:Fe().object,buttonSize:Fe().string,inputStyle:Fe().object,title:Fe().node,confirmButtonContent:Fe().node,confirmButtonDisabled:Fe().bool,closeText:Fe().node,confirmButtonBSStyle:Fe().string,focusConfirm:Fe().bool}),Co(wo,"defaultProps",{onClose:()=>{},onChange:()=>{},modal:!0,title:Be().createElement(On.Z,{msgId:"confirmTitle"}),closeGlyph:"",confirmButtonBSStyle:"danger",confirmButtonDisabled:!1,confirmButtonContent:Be().createElement(On.Z,{msgId:"confirm"})||"Confirm",closeText:Be().createElement(On.Z,{msgId:"close"}),includeCloseButton:!0,focusConfirm:!1});const So=wo,Po=(0,nt.compose)((0,nt.withProps)((e=>{let{setConfirming:t}=e;return{onClose:e=>{e?.stopPropagation&&e.stopPropagation(),t(!1)}}})))((function(){let{confirmYes:e=Be().createElement(On.Z,{msgId:"yes"}),confirmNo:t=Be().createElement(On.Z,{msgId:"no"}),confirmTitle:n=Be().createElement(On.Z,{msgId:"confirm"}),confirmContent:o,confirmButtonBSStyle:r="primary",show:i=!1,confirmModal:a=!0,draggable:s=!1,onClose:l=(()=>{}),onConfirm:c=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i?Be().createElement(yn.Z,null,Be().createElement("div",{className:"with-confirm-modal"},Be().createElement(So,{draggable:s,show:i,modal:a,onClose:l,onConfirm:c,title:n,confirmButtonContent:e,closeText:t,confirmButtonBSStyle:r,closeGlyph:"1-close"},o))):null})),Oo=e=>t=>{let{confirming:n,confirmYes:o,confirmNo:r,confirmTitle:i,confirmContent:a,confirmModal:s,draggable:l,onConfirm:c,setConfirming:d,...p}=t;return Be().createElement(Be().Fragment,null,Be().createElement(Po,{show:n,setConfirming:d,confirmYes:o,confirmNo:r,confirmTitle:i,confirmContent:a,confirmModal:s,draggable:l,onConfirm:c}),Be().createElement(e,p))},To=e=>(0,nt.compose)((0,nt.withState)("confirming","setConfirming",!1),(0,nt.withHandlers)({onClick:e=>{let{setConfirming:t=(()=>{}),onClick:n=(()=>{}),confirmPredicate:o=!0}=e;return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];const[a]=r||[];a?.stopPropagation&&a.stopPropagation(),o?t(!0):n(...r)}},onConfirm:e=>{let{onClick:t=(()=>{}),setConfirming:n=(()=>{})}=e;return function(){n(!1),t(...arguments)}}}),Oo)(e);var Io=n(24198),_o=n(17621),Mo=n.n(_o),xo=n(74691),ko=n.n(xo);function Do(){return Do=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Do.apply(this,arguments)}function Lo(e){let{containerNode:t=(()=>document.querySelector("."+((0,Gn.u8)("themePrefix")||"ms2")+" > div")||document.body),placement:n,content:o,children:r,open:i,onOpen:a=(()=>{}),disabled:s}=e;const l=10,c=ho()(t)?t():t,d=(0,Re.useRef)({picker:{opacity:0},arrow:{opacity:0},overlay:{}}),[p,u]=(0,Re.useState)(d.current),m=(0,Re.useRef)(),g=(0,Re.useRef)(),h=(0,Re.useRef)(),f=(0,Re.useCallback)((()=>{if(!i)return d.current;const e={picker:{},overlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},arrow:{opacity:0}};if("center"===n)return e;const t=m?.current?.getBoundingClientRect?.(),o=g?.current?.getBoundingClientRect?.(),r=h?.current?.getBoundingClientRect?.();if(t&&o&&r){const{width:e,height:i}=r,{top:a,left:s,width:c,height:d}=o,{top:p,left:u,width:m,height:g}=t,h=e+20<c,f=i+20<d,y={top:{filter:()=>h&&p-a>i+l,styles:()=>{const t=u+m/2-e/2-s;return{picker:{position:"absolute",top:p-i-l-a,left:ko()(t,s+l,s+c-e-l)},overlay:{},arrow:{top:p+2,left:u+m/2,transform:"translate(-50%, -50%) rotateZ(270deg) translateX(50%)"}}}},right:{filter:()=>f&&s+c-(u+m)>e+l,styles:()=>{const e=p-i/2-a+g/2,t=u+m+l-s;return{picker:{position:"absolute",top:ko()(e,a+l,a+d-i-l),left:t},overlay:{},arrow:{top:p+g/2,left:u+m-2,transform:"translate(-50%, -50%) rotateZ(0deg) translateX(50%)"}}}},bottom:{filter:()=>h&&a+d-(p+g)>i+l,styles:()=>{const t=u+m/2-e/2-s;return{picker:{position:"absolute",top:p+g+l-a,left:ko()(t,s+l,s+c-e-l)},overlay:{},arrow:{top:p+g-2,left:u+m/2,transform:"translate(-50%, -50%) rotateZ(90deg) translateX(50%)"}}}},left:{filter:()=>f&&u-s>e+l,styles:()=>{const t=p-i/2-a+g/2,n=u-e-l-s;return{picker:{position:"absolute",top:ko()(t,a+l,a+d-i-l),left:n},overlay:{},arrow:{top:p+g/2,left:u+2,transform:"translate(-50%, -50%) rotateZ(180deg) translateX(50%)"}}}}};if(y?.[n]?.filter?.())return y?.[n]?.styles?.();if("top"!==n&&y.top.filter())return y.top.styles();if("right"!==n&&y.right.filter())return y.right.styles();if("bottom"!==n&&y.bottom.filter())return y.bottom.styles();if("left"!==n&&y.left.filter())return y.left.styles()}return e}),[n,i]);(0,Re.useEffect)((()=>{u(f());const e=()=>u(f());return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[f]);const y=(0,Re.useRef)();return y.current={open:i},(0,Re.useEffect)((()=>{function e(e){const t=h.current,n=m.current,o=e.target&&(t&&t.contains(e.target)||n&&n.contains(e.target));if(y.current.open&&!o){const{clientX:t,clientY:n}=e,{left:o,top:r,width:i,height:s}=h?.current?.getBoundingClientRect?.()||{};void 0!==t&&void 0!==n&&!(t>=o&&t<=o+i&&n>=r&&n<=r+s)&&a(!1)}}return window.addEventListener("click",e,!0),window.addEventListener("wheel",e,!0),window.addEventListener("scroll",e,!0),()=>{window.removeEventListener("click",e,!0),window.removeEventListener("wheel",e,!0),window.removeEventListener("scroll",e,!0)}}),[]),Be().createElement(Be().Fragment,null,Be().createElement("div",{className:"ms-popover",ref:m},(0,Re.cloneElement)(r,{onClick:e=>{s||(e.stopPropagation(),a(!i))}})),c&&i?(0,Eo.createPortal)(Be().createElement("div",{className:"ms-popover-overlay",ref:g,style:{position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",top:0,left:0,pointerEvents:"none",...p?.overlay}},Be().createElement("div",{style:{position:"absolute",width:"100%",height:"100%",top:0,left:0}}),Be().createElement("div",{ref:h,style:{pointerEvents:"auto",...p?.picker}},o),Be().createElement("div",{className:"ms-popover-arrow",style:{position:"absolute",borderTop:"12px solid transparent",borderBottom:"12px solid transparent",borderRight:"12px solid #ffffff",filter:"drop-shadow(-4px 2px 4px rgba(0, 0, 0, 0.2))",...p?.arrow}})),c):null)}const Ro=function(e){let{open:t,onOpen:n=(()=>{}),...o}=e;const[r,i]=(0,Re.useState)(t);return Be().createElement(Lo,Do({},o,{open:r,onOpen:e=>{i(e),n(e)}}))};function Bo(){return Bo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Bo.apply(this,arguments)}function No(e){let{value:t,format:n,onChangeColor:o,text:r,line:i,disabled:a,pickerProps:s,containerNode:l,onOpen:c,placement:d}=e;const[p,u]=(0,Re.useState)(),m=Mo()(t).toString();(0,Re.useEffect)((()=>{const e=p&&Mo()(p).toString();e&&m&&m!==e&&u(t)}),[m]);const g=(0,Re.useRef)();g.current=e=>{c(e),e||a||!p||o(n?Mo()(p).toString(n):p)};const h=a?" ms-disabled":"";return Be().createElement(Ro,{disabled:a,onOpen:e=>g.current(e),placement:d,containerNode:l,content:Be().createElement(Io.xS,Bo({},s,{className:"ms-sketch-picker",styles:{picker:{width:200,padding:"10px 10px 0",boxSizing:"initial"}},color:Mo()(p||t).toRgb(),onChange:e=>u(e.rgb)}))},Be().createElement("div",{className:`ms-color-picker${h}`},Be().createElement("div",{className:"ms-color-picker-swatch",style:function(){const e=p||t||"transparent",n=Mo()(e).toRgbString();return i?{boxSizing:"border-box",border:`4px solid ${n}`,backgroundColor:"transparent"}:{color:"transparent"===e?"#000000":Mo().mostReadable(n,["#000000"],{includeFallbackColors:!0}).toHexString(),backgroundColor:n}}()},r)))}No.propTypes={value:Fe().oneOfType([Fe().string,Fe().shape({r:Fe().number,g:Fe().number,b:Fe().number,a:Fe().number})]),format:Fe().string,onChangeColor:Fe().func,text:Fe().string,line:Fe().bool,disabled:Fe().bool,pickerProps:Fe().object,containerNode:Fe().oneOfType([Fe().node,Fe().func]),onOpen:Fe().function,placement:Fe().string},No.defaultProps={disabled:!1,line:!1,onChangeColor:()=>{},pickerProps:{},onOpen:()=>{}};const Fo=No;function Uo(e){let{color:t,format:n,line:o,onChangeColor:r,disableAlpha:i,containerNode:a,onOpen:s,disabled:l,presetColors:c,placement:d}=e;return Be().createElement("div",{className:"ms-color-selector"},Be().createElement(Fo,{text:Be().createElement(Ht.Glyphicon,{glyph:"dropper"}),format:n,line:o,value:t,onChangeColor:r,pickerProps:{disableAlpha:i,presetColors:c},containerNode:a,disabled:l,onOpen:s,placement:d}))}Uo.propTypes={color:Fe().oneOfType([Fe().string,Fe().shape({r:Fe().number,g:Fe().number,b:Fe().number,a:Fe().number})]),format:Fe().string,line:Fe().bool,onChangeColor:Fe().func,disableAlpha:Fe().bool,containerNode:Fe().node,disabled:Fe().bool,onOpen:Fe().func,presetColors:Fe().array,placement:Fe().string},Uo.defaultProps={line:!1,onChangeColor:()=>{},onOpen:()=>{}};const Go=Uo;function jo(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Wo extends Be().Component{render(){return Be().createElement("label",{className:`mapstore-switch-btn ${this.props.className}`},Be().createElement("input",{type:"checkbox",disabled:this.props.disabled,checked:this.props.checked,onChange:()=>this.props.onChange(!this.props.checked)}),Be().createElement("span",{onClick:()=>this.props.onClick(!this.props.checked),className:"m-slider"}))}}jo(Wo,"propTypes",{disabled:Fe().bool,className:Fe().string,checked:Fe().bool,onChange:Fe().func,onClick:Fe().func}),jo(Wo,"defaultProps",{className:"",checked:!1,onChange:()=>{},onClick:()=>{}});const Ho=Wo;var zo=n(15402);const Zo=(0,bn.Z)(En.Z);function Vo(e){let{themeStyle:t,disableBackgroundPicker:n=!1,disableBackgroundAlpha:o,disableTextColor:r,disableShadow:i,onChange:a=(()=>{}),onOpen:s=(()=>{}),placement:l}=e;const c=(0,Re.useRef)(),d=t?.backgroundColor,p=t?.color,u=!r&&d&&p&&!Mo().isReadable(p,d)?Mo().mostReadable(d,[p,"#000000","#ffffff"],{includeFallbackColors:!0}).toHexString():null;return Be().createElement(Be().Fragment,null,!n&&Be().createElement("div",{className:"ms-custom-theme-picker-field"},Be().createElement("div",null,Be().createElement(On.Z,{msgId:"geostory.customizeTheme.backgroundColorLabel"})),Be().createElement("div",null,Be().createElement(Go,{placement:l,key:d,onOpen:s,color:d,format:o?"hex":"rgb",disableAlpha:o,presetColors:[],onChangeColor:e=>{const n=Mo()(e).isLight()?Mo()(e).darken(10).toHexString():Mo()(e).lighten(15).toHexString(),o=!r&&!t?.color&&{color:Mo().mostReadable(e,["#000000","#ffffff"],{includeFallbackColors:!0}).toHexString()};a({...t,backgroundColor:e,borderColor:n,...!r&&o})}}))),!r&&Be().createElement("div",{className:"ms-custom-theme-picker-field"},Be().createElement("div",null,Be().createElement("div",null,Be().createElement(On.Z,{msgId:"geostory.customizeTheme.textColorLabel"})),Be().createElement(no,{className:"ms-custom-theme-picker-popover",ref:e=>{e&&(c.current=e.trigger)},placement:"top",content:Be().createElement(Be().Fragment,null,Be().createElement(zo.Z,{msgId:"geostory.customizeTheme.alternativeTextColorPopover",msgParams:{color:u}}),Be().createElement(Zo,{bsSize:"xs",bsStyle:"primary",style:{margin:"auto",display:"block"},onClick:()=>{a({...t,color:u}),c.current?.hide?.()}},Be().createElement(On.Z,{msgId:"geostory.customizeTheme.useAlternativeTextColor"})))},u&&Be().createElement(Zo,{className:"square-button-md no-border",style:{display:u?"block":"none"}},Be().createElement(Ht.Glyphicon,{glyph:"exclamation-mark"}))||Be().createElement("div",null))),Be().createElement("div",null,Be().createElement(Go,{placement:l,key:p,color:p,onOpen:s,format:"hex",disableAlpha:!0,presetColors:[],onChangeColor:e=>{a({...t,color:e})}}))),!i&&Be().createElement("div",{className:"ms-custom-theme-picker-field"},Be().createElement("div",null,Be().createElement(On.Z,{msgId:"geostory.customizeTheme.shadowLabel"})),Be().createElement("div",null,Be().createElement(Ho,{checked:t?.boxShadow,onChange:()=>{const{boxShadow:e,MozBoxShadow:n,WebkitBoxShadow:o,...r}=t||{};a(e?{...r}:{...r,boxShadow:"0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22)"})}}))))}function Qo(e){let{selected:t,value:n,storyTheme:o,onUpdate:r,onActive:i,disableBackgroundAlpha:a,disableTextColor:s,disableShadow:l}=e;const c=(e,o)=>{const i=L()(t)&&t;return r("theme",o?{...i,value:e,[n]:{...o}}:{...i,value:e})},{color:d,backgroundColor:p}=o||{},u={...!s&&d&&{color:d},...p&&{backgroundColor:p}},m=t?.value===n,g=t?.[n]||u;return Be().createElement(Be().Fragment,null,m?Be().createElement("div",{className:"ms-custom-theme-picker-menuitem-header"},Be().createElement("div",null,Be().createElement(On.Z,{msgId:"geostory.contentToolbar.customizeThemeLabel"})),Be().createElement(Zo,{tooltipId:"geostory.contentToolbar.customizeThemeRemoveLabel",className:"square-button-md no-border",onClick:e=>{e.stopPropagation(),c("")}},Be().createElement(Ht.Glyphicon,{glyph:"trash"}))):Be().createElement(Be().Fragment,null,Be().createElement(Ht.MenuItem,{active:m,onClick:()=>c(n,g)},Be().createElement(On.Z,{msgId:"geostory.contentToolbar.customizeThemeLabel"}))),m&&Be().createElement("div",{className:"ms-custom-theme-picker-menuitem"},Be().createElement(Vo,{disableBackgroundAlpha:a,disableTextColor:s,disableShadow:l,themeStyle:g,onChange:e=>c(n,e),onOpen:i})))}function Ko(){return Ko=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ko.apply(this,arguments)}const qo=To(uo.Z),Yo={primary:"btn-primary",default:"btn-default"},Xo=e=>{let{editMap:t=!1,align:n,sectionType:o,size:r,update:i=(()=>{}),filterOptions:a,pullRight:s,sizeType:l}=e;const{pre:c,_size:d,glyph:p,sizeProp:u}=((e,t)=>{const n="horizontal";let o="",[r,i]=e&&e.split(",")||[],a=e,s="resize-horizontal";return t===n?(o="h-",a=r):"vertical"===t&&(o="v-",a=i,s="resize-vertical"),{sizeProp:e=>t?`${t===n?e:r},${"vertical"===t?e:i}`:e,pre:o,_size:a,glyph:s}})(r,l);return Be().createElement(yo,Ko({value:d,noTooltipWhenDisabled:!0,disabled:t,glyph:p,pullRight:s||("right"===n||d===`${c}full`||d===`${c}large`)&&!o,tooltipId:"geostory.contentToolbar.contentSize",options:[{value:`${c}small`,glyph:"size-small",label:Be().createElement(On.Z,{msgId:"geostory.contentToolbar.smallSizeLabel"})},{value:`${c}medium`,glyph:"size-medium",label:Be().createElement(On.Z,{msgId:"geostory.contentToolbar.mediumSizeLabel"})},{value:`${c}large`,glyph:"size-large",label:Be().createElement(On.Z,{msgId:"geostory.contentToolbar.largeSizeLabel"})},{value:`${c}full`,glyph:"size-extra-large",label:Be().createElement(On.Z,{msgId:"geostory.contentToolbar.fullSizeLabel"})}].filter((e=>!a||a(e))),onSelect:e=>i("size",u(e))},l&&{showSelectionInTitle:!1}))},Jo=e=>{let{editMap:t=!1,align:n,sectionType:o,size:r,update:i=(()=>{})}=e;return Be().createElement(yo,{value:n,noTooltipWhenDisabled:!0,disabled:"full"===r||t,glyph:"align-center",pullRight:("right"===n||"full"===r||"large"===r)&&!o,tooltipId:"geostory.contentToolbar.contentAlign",options:[{value:"left",label:Be().createElement(On.Z,{msgId:"geostory.contentToolbar.leftAlignLabel"}),glyph:"align-left"},{value:"center",label:Be().createElement(On.Z,{msgId:"geostory.contentToolbar.centerAlignLabel"}),glyph:"align-center"},{value:"right",label:Be().createElement(On.Z,{msgId:"geostory.contentToolbar.rightAlignLabel"}),glyph:"align-right"}],onSelect:e=>i("align",e)})},$o=e=>{let{editMap:t=!1,theme:n,storyTheme:o,align:r,sectionType:i,update:a=(()=>{}),themeProps:s,size:l}=e;return Be().createElement(yo,{value:n,noTooltipWhenDisabled:!0,pullRight:("right"===r||"full"===l||"large"===l)&&!i,glyph:"dropper",tooltipId:"geostory.contentToolbar.contentTheme",disabled:t,shouldClose:(e,t)=>L()(e)&&"ms-color-picker-cover"!==t?.target?.getAttribute?.("class")||u()(e)||void 0===e,hideMenuItem:(e,t)=>"custom"===e?.value&&"custom"!==t?.value,options:[{value:"",isActive:e=>void 0===e||""===e||L()(e)&&(void 0===e.value||""===e.value),label:Be().createElement(On.Z,{msgId:"geostory.contentToolbar.defaultThemeLabel"})},{value:"bright",isActive:e=>"bright"===e?.value||"bright"===e,label:Be().createElement(On.Z,{msgId:"geostory.contentToolbar.brightThemeLabel"})},{value:"dark",isActive:e=>"dark"===e?.value||"dark"===e,label:Be().createElement(On.Z,{msgId:"geostory.contentToolbar.darkThemeLabel"})},{value:"custom",Component:e=>Be().createElement(Qo,Ko({},e,{disableBackgroundAlpha:s?.disableBackgroundAlpha,disableShadow:s?.disableShadow,disableTextColor:s?.disableTextColor,onUpdate:a,storyTheme:o}))}],onSelect:e=>a("theme",{...L()(n)&&n,value:e})})},er=e=>{let{editMap:t=!1,forceDelBtnDisable:n=!1,path:o,remove:r=(()=>{}),bsStyle:i}=e;return Be().createElement(qo,{glyph:"trash",visible:!0,noTooltipWhenDisabled:!0,disabled:t||n,className:`square-button-md no-border ${i&&Yo[i]}`,tooltipId:"geostory.contentToolbar.remove",confirmTitle:Be().createElement(On.Z,{msgId:"geostory.contentToolbar.removeConfirmTitle"}),confirmContent:Be().createElement(On.Z,{msgId:"geostory.contentToolbar.removeConfirmContent"}),onClick:()=>{r(o)}})},tr="square-button-md no-border",nr={size:e=>({renderButton:Be().createElement(Xo,e)}),align:e=>({renderButton:Be().createElement(Jo,e)}),theme:e=>({renderButton:Be().createElement($o,e)}),fit:e=>{let{editMap:t=!1,fit:n,update:o=(()=>{})}=e;return{value:n,glyph:"contain"===n?"fit-cover":"fit-contain",disabled:t,visible:!0,tooltipId:"contain"===n?"geostory.contentToolbar.cover":"geostory.contentToolbar.fit",onClick:()=>o("fit","contain"===n?"cover":"contain")}},cover:e=>{let{editMap:t=!1,cover:n,updateSection:o=(()=>{})}=e;return{value:n,glyph:n?"height-auto":"height-view",visible:!0,disabled:t,tooltipId:n?"geostory.contentToolbar.contentHeightAuto":"geostory.contentToolbar.contentHeightView",onClick:()=>o({cover:!n},"merge")}},editMedia:e=>{let{editMap:t=!1,path:n,editMedia:o=(()=>{}),sectionType:r}=e;return{glyph:"pencil","data-button":"pencil",visible:!0,disabled:t,tooltipId:"geostory.contentToolbar.editMedia",onClick:()=>{o({path:n},n?r:"")}}},remove:e=>({renderButton:Be().createElement(er,e)}),editMap:e=>{let{editMap:t=!1,update:n=(()=>{})}=e;return{glyph:"map-edit",visible:!0,disabled:t,bsStyle:t?"success":"default",tooltipId:"geostory.contentToolbar.editMap",onClick:()=>{n("editMap",!t)}}},editURL:e=>{let{editURL:t=!1,path:n,editWebPage:o=(()=>{})}=e;return{glyph:"pencil",visible:!0,disabled:t,bsStyle:t?"success":"default",tooltipId:"geostory.contentToolbar.editURL",onClick:()=>{o({path:n})}}},muted:e=>{let{update:t,muted:n}=e;return{glyph:n?"muted":"audio",visible:!0,active:!n,tooltipId:n?"geostory.contentToolbar.enableAudio":"geostory.contentToolbar.disableAudio",onClick:()=>{t("muted",!n)}}},autoplay:e=>{let{update:t,autoplay:n,fit:o}=e;return{glyph:"play-circle",visible:!("cover"===o),active:n,tooltipId:n?"geostory.contentToolbar.disableAutoplay":"geostory.contentToolbar.enableAutoplay",onClick:()=>{t("autoplay",!n)}}},loop:e=>{let{update:t,loop:n,fit:o}=e;return{glyph:"loop",visible:!("cover"===o),active:n,tooltipId:n?"geostory.contentToolbar.disableLoop":"geostory.contentToolbar.enableLoop",onClick:()=>{t("loop",!n)}}},showCaption:e=>{let{editMap:t=!1,update:n,showCaption:o,caption:r,description:i}=e;return{glyph:"caption",visible:!(!r&&!i),disabled:t,active:!(!o||t),tooltipId:o?"geostory.contentToolbar.hideCaption":"geostory.contentToolbar.showCaption",onClick:()=>{n("showCaption",!o)}}},add:e=>{let{editMap:t=!1,addDisabled:n=!1,add:o=(()=>{}),bsStyle:r="default"}=e;return{glyph:"plus",visible:!0,bsStyle:r,tooltipId:"geostory.contentToolbar.add",disabled:t||n,onClick:o}},edit:e=>{let{editMap:t=!1,edit:n=(()=>{}),bsStyle:o="default"}=e;return{glyph:"pencil",visible:!0,bsStyle:o,tooltipId:"geostory.contentToolbar.edit",disabled:t,onClick:n}},marker:e=>{let{editMap:t=!1,markerDisabled:n=!1,marker:o=(()=>{}),bsStyle:r="default"}=e;return{glyph:"map-marker",visible:!0,tooltipId:"geostory.contentToolbar.marker",bsStyle:r,disabled:t||n,onClick:o}},closeDraw:e=>{let{editMap:t=!1,bsStyle:n="default",update:o=(()=>{}),onEnableDraw:r=(()=>{})}=e;return{glyph:"1-close",visible:!0,tooltipId:"geostory.contentToolbar.closeMapEditing",bsStyle:n,disabled:!t,onClick:()=>{r(null),o("editMap",!t)}}}};function or(e){let{tools:t=[],children:n,...o}=e;return Be().createElement("div",{className:"ms-content-toolbar"},Be().createElement(oo.Z,{btnDefaultProps:{className:tr,noTooltipWhenDisabled:!0},buttons:t.filter((e=>e?.id&&nr[e.id]||nr[e])).map((e=>e?.id&&nr[e.id]({...o,...e})||nr[e](o)))}),n)}const rr=e=>{let{id:t,inViewRef:n,innerRef:o,children:r,type:i,contentWrapperStyle:a,contentToolbar:s,mode:l,...c}=e;const d=s||or;return Be().createElement("div",{id:t,ref:n,style:{...a,...c.hideContent&&{display:"none"}},className:`ms-content ms-content-${i}${(0,Y.w)(c)}`},Be().createElement("div",{className:"ms-content-body",ref:o,style:(0,Y.cy)(c)},l===Y.nl.EDIT&&Be().createElement(d,c),r))},ir=(0,nt.compose)(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(0,nt.nest)(...t,e)}(rr),(0,nt.setDisplayName)("ColumnContent"))($n),ar=function(e){return{id:"size",filterOptions:e=>{let{value:t}=e;return"full"!==t},pullRight:e,...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}},sr=(0,nt.compose)((0,nt.branch)((e=>{let{type:t,sectionType:n}=e;return[Y.ID.IMMERSIVE,Y.ID.CAROUSEL].includes(n)&&t===Y.bT.COLUMN}),po({threshold:[0,.25,.5,.75]})),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(0,nt.nest)(...t,e)}(rr),(0,nt.setDisplayName)("SectionContent"),(0,nt.branch)((e=>{let{type:t}=e;return t===Y.bT.COLUMN}),(0,nt.renderComponent)((e=>{let{viewWidth:t,viewHeight:n,contents:o=[],mode:r,add:i=(()=>{}),editMedia:a=(()=>{}),editWebPage:s=(()=>{}),update:l=(()=>{}),remove:c=(()=>{}),bubblingTextEditing:d=(()=>{}),expandable:p,mediaViewer:u,contentToolbar:m,sections:g=[],sectionType:h,overrideTools:f=(e=>e),storyFonts:y}=e;return Be().createElement(lo,{className:"ms-column-contents",ContentComponent:ir,contents:o,mode:r,add:i,editMedia:a,editWebPage:s,update:l,remove:c,viewWidth:t,viewHeight:n,bubblingTextEditing:d,sectionType:h,contentProps:{expandable:p,mediaViewer:u,contentToolbar:m},sections:g,storyFonts:y,tools:f({[Y.bT.TEXT]:["remove"],[Y.Tr.IMAGE]:["editMedia",ar(),"showCaption","remove"],[Y.Tr.MAP]:["editMedia","editMap",ar(!0),"showCaption","remove"],[Y.bT.WEBPAGE]:[ar(!0,{sizeType:"horizontal"}),"editURL",ar(!0,{sizeType:"vertical",filterOptions:e=>{let{value:t}=e;return"v-full"!==t}}),"remove"],[Y.Tr.VIDEO]:["editMedia","muted","autoplay","loop","showCaption","remove"]}),addButtons:[{glyph:"sheet",tooltipId:"geostory.addTextContent",template:Y.bT.TEXT},{glyph:"picture",tooltipId:"geostory.addMediaContent",template:Y.bT.MEDIA},{glyph:"webpage",tooltipId:"geostory.addWebPageContent",template:Y.bT.WEBPAGE}]})}))))($n),lr=(0,nt.compose)((0,nt.defaultProps)({ContentComponent:sr}),(0,nt.withHandlers)({editMedia:e=>{let{editMedia:t=(()=>{}),sectionId:n}=e;return function(e){let{path:o}=e;for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t({path:`sections[{"id": "${n}"}].`+o},...i)}},editWebPage:e=>{let{editWebPage:t=(()=>{}),sectionId:n}=e;return function(e){let{path:o}=e;for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t({path:`sections[{"id": "${n}"}].`+o},...i)}},add:e=>{let{add:t=(()=>{}),sectionId:n}=e;return function(e){for(var o=arguments.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];return t(`sections[{"id": "${n}"}].`+e,...r)}},update:e=>{let{update:t=(()=>{}),sectionId:n}=e;return function(e){for(var o=arguments.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];return t(`sections[{"id": "${n}"}].`+e,...r)}},remove:e=>{let{remove:t=(()=>{}),sectionId:n}=e;return function(e){for(var o=arguments.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];return t(`sections[{"id": "${n}"}].`+e,...r)}}}),(0,nt.setDisplayName)("SectionContents"))(lo);var cr=n(84753),dr=n.n(cr);(0,nt.setObservableConfig)(ot.Z);const pr=(e,t)=>{const n=we()(e,{id:t});return e[-1!==n&&n?n:0]},ur=(0,nt.withProps)((e=>{let{id:t,backgroundId:n,contents:o=[]}=e;const r=pr(o,n)||{},i=r&&r.id;return{background:E()(r,"background")||{type:"none"},contentId:i,sectionId:t,path:`sections[{"id": "${t}"}].contents[{"id": "${i}"}].background`}})),mr=(0,nt.withHandlers)({updateBackground:e=>{let{sectionId:t,contentId:n,update:o=(()=>{})}=e;return function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return o(`sections[{"id": "${t}"}].contents[{"id": "${n}"}].background.`+e,...i)}},updateSection:e=>{let{sectionId:t,update:n=(()=>{})}=e;return function(){for(var e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return n(`sections[{"id": "${t}"}]`,...o)}}}),gr=(0,nt.compose)(ur,mr),hr=(0,nt.mapPropsStream)((e=>{const{handler:t,stream:n}=(0,nt.createEventHandler)();return i.Observable.combineLatest(e,((e,t)=>{const n=e.scan((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:t,visible:n,entry:o}=arguments.length>1?arguments[1]:void 0;return{...e,[t]:{visible:n,entry:o}}}),{}).debounceTime(100).map((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{maxItem:dr()(Object.keys(e),(t=>e[t].visible?E()(e[t],"entry.intersectionRatio"):-1/0)),items:e}}));return i.Observable.merge(n.pluck("maxItem").distinctUntilChanged().map((e=>({backgroundId:e}))),n.map((e=>{let{maxItem:t,items:n}=e;return 0===E()(n[t],"entry.intersectionRatio")?"EMPTY":t})).withLatestFrom(t.pluck("updateCurrentPage")).do((e=>{let[t,n]=e;return n&&n({columnId:t})})).ignoreElements())})(n,e).startWith({}),(function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return{...n.reduce((function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},...arguments.length>1?arguments[1]:void 0}}),{}),onVisibilityChange:t}}))})),fr=(0,nt.compose)(hr,gr);var yr=n(89438);function br(){return br=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},br.apply(this,arguments)}function Ar(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Er=n(82620),vr=n(83255),Cr=n.n(vr);function wr(){return wr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},wr.apply(this,arguments)}function Sr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Pr extends Re.Component{render(){const e=(0,Y.cy)(this.props),t=!this.props.disableToolbarPortal&&this.refs&&this.refs.div&&this.refs.div.parentNode,n=this.props.sectionType===Y.ID.TITLE?["editMedia","cover"]:["editMedia"],o=this.props.contentToolbar||or,r=Be().createElement(o,wr({},this.props,{themeProps:{disableBackgroundAlpha:!0,disableTextColor:!0,disableShadow:!0},tools:this.props.tools&&this.props.type&&this.props.tools[this.props.type]||this.props.sectionType===Y.ID.BANNER&&[...n,"cover","remove"]||n}),this.props.contentToolbarChildren),i=`${this.props.sectionId||"ms"}-media-${this.props.id||this.props.resourceId}`;return Be().createElement("div",{ref:"div",className:"ms-section-background",style:{...this.props.style}},Be().createElement("div",{className:`ms-section-background-container${(0,Y.w)(this.props)}`,ref:this.props.innerRef,style:{height:this.props.height,...e,...xn?.[this.props.type]?{}:this.props.backgroundPlaceholder}},Be().createElement(Dn,wr({id:i},this.props,{enableFullscreen:!1,descriptionEnabled:!1,mediaViewer:this.props.mediaViewer,containerInView:this.props.inView}),this.props.children),this.props.mode===Y.nl.EDIT&&(t?Be().createElement(Er.h_,{container:t},r):r)))}}Sr(Pr,"propTypes",{id:Fe().string,resourceId:Fe().string,sectionId:Fe().string,mode:Fe().string,fit:Fe().string,size:Fe().string,path:Fe().string,credits:Fe().string,description:Fe().string,height:Fe().number,width:Fe().number,tools:Fe().object,style:Fe().object,add:Fe().func,editMedia:Fe().func,update:Fe().func,updateSection:Fe().func,remove:Fe().func,type:Fe().oneOf(Y.lg.MediaTypes),disableToolbarPortal:Fe().bool,backgroundPlaceholder:Fe().object,sectionType:Fe().string,src:Fe().string,theme:Fe().string,mediaViewer:Fe().func,contentToolbar:Fe().func,inView:Fe().bool,sections:Fe().array,innerRef:Fe().oneOfType([Fe().func,Fe().object]),contentToolbarChildren:Fe().node}),Sr(Pr,"defaultProps",{height:0,size:"full",width:0,style:{},backgroundPlaceholder:{background:`url(${Cr()})`,backgroundSize:"256px auto"}});const Or=(e=>{var t;return t=class extends Re.Component{constructor(){super(...arguments),Ar(this,"state",{style:{}}),Ar(this,"update",(e=>{if(!this._stickybits)return;const t=document.querySelector(e);-1===this._stickybits.definePosition().indexOf("sticky")&&t&&(this._stickybits.update(),setTimeout((()=>{const{top:e,left:n}=t.getBoundingClientRect();this.setState({style:{top:e,left:n,width:t.scrollWidth-2}})})))}))}componentDidMount(){this._stickybits=this._node&&(0,yr.Z)(this._node,{scrollEl:this.props.scrollContainerSelector,noStyles:!0,useGetBoundingClientRect:!0}),this.update(this.props.scrollContainerSelector)}componentWillReceiveProps(e){!this._stickybits||e.viewWidth===this.props.viewWidth&&e.viewHeight===this.props.viewHeight||this.update(e.scrollContainerSelector)}componentWillUnmount(){this._stickybits&&this._stickybits.cleanup()}render(){return Be().createElement(e,br({ref:e=>{e&&e.refs&&e.refs[this.props.refId]&&(this._node=e.refs[this.props.refId])},style:{...this.state.style}},this.props),this.props.children)}},Ar(t,"propTypes",{scrollContainerSelector:Fe().string,height:Fe().number,width:Fe().number,refId:Fe().string}),Ar(t,"defaultProps",{scrollContainerSelector:"body",height:0,width:0,refId:"div"}),t})(Pr);var Tr=n(11636),Ir=n.n(Tr);function _r(){return _r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_r.apply(this,arguments)}const Mr=(0,nt.compose)(fr,(0,nt.withStateHandlers)({textEditorActive:!1},{bubblingTextEditing:()=>e=>({textEditorActiveClass:e?" ms-text-editor-active":""})}))((e=>{let{add:t=(()=>{}),editMedia:n=(()=>{}),editWebPage:o=(()=>{}),onVisibilityChange:r=(()=>{}),update:i=(()=>{}),updateBackground:a=(()=>{}),updateCurrentPage:s=(()=>{}),remove:l=(()=>{}),id:c,background:d={},path:p,contents:u=[],mode:m,sectionType:g,inViewRef:h,viewWidth:f,viewHeight:y,focusedContent:b,contentId:A,bubblingTextEditing:v=(()=>{}),textEditorActiveClass:C="",expandableMedia:w=!1,storyTheme:S,mediaViewer:P,contentToolbar:O,inView:T,sections:I=[],storyFonts:_}=e;const M=b&&b.hideContent&&E()(b,"target.id")===A,x=M?"hidden":"visible",k=w&&d&&"map"===d.type?" ms-expandable-background":"",D=S?.overlay||{},L=S?.general||{};return Be().createElement("section",{className:`ms-section ms-section-immersive${k}`,id:c,ref:h},Be().createElement(Or,_r({},d,{mode:m,disableToolbarPortal:!0,tools:{[Y.Tr.IMAGE]:["editMedia","fit","size","align","theme"],[Y.Tr.MAP]:["editMedia","editMap","size","align","theme"],[Y.Tr.VIDEO]:["editMedia","fit","size","align","theme","muted","autoplay","loop"]},scrollContainerSelector:"#ms-sections-container",add:t,editMedia:n,expandable:w,path:p,update:a,updateCurrentPage:s,remove:l,sectionType:g,sectionId:c,backgroundId:d.id,key:d.id,width:f,height:y,backgroundPlaceholder:{background:`url(${Ir()})`,backgroundSize:"600px auto"},storyTheme:L,mediaViewer:P,contentToolbar:O,inView:T})),Be().createElement(lr,{tools:{[Y.bT.COLUMN]:["size","align","theme"]},className:`ms-section-contents${C}`,contents:u,mode:m,add:t,updateCurrentPage:s,editMedia:n,editWebPage:o,update:i,remove:l,sectionId:c,viewWidth:f,viewHeight:y,contentProps:{onVisibilityChange:r,contentWrapperStyle:{minHeight:y,visibility:x},expandable:w,mediaViewer:P,contentToolbar:O},focusedContent:b,bubblingTextEditing:v,sectionType:g,storyTheme:D,sections:I,storyFonts:_}),m===Y.nl.EDIT&&!M&&Be().createElement(ao,{containerWidth:f,containerHeight:y,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:()=>{t("sections",c,Y.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:()=>{t("sections",c,Y.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:()=>{t("sections",c,Y.ID.PARAGRAPH)}},{glyph:"story-immersive-content",tooltipId:"geostory.addImmersiveContent",onClick:()=>{t(`sections[{"id": "${c}"}].contents`,void 0,Y.bT.COLUMN,"geostory.builder.defaults.titleImmersiveContent")}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:()=>{t("sections",c,Y.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:()=>{t("sections",c,Y.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:()=>{t("sections",c,Y.tQ.WEBPAGE)}}]}))})),xr=e=>{let{id:t,contents:n,mode:o,add:r=(()=>{}),update:i=(()=>{}),editMedia:a=(()=>{}),editWebPage:s=(()=>{}),remove:l=(()=>{}),inViewRef:c,viewWidth:d,viewHeight:p,expandableMedia:u,mediaViewer:m,contentToolbar:g,sections:h=[],sectionType:f,storyFonts:y}=e;return Be().createElement("section",{className:"ms-section ms-section-paragraph",id:t,ref:c},Be().createElement(lr,{className:"ms-section-contents",contents:n,mode:o,add:r,editMedia:a,editWebPage:s,update:i,remove:l,sectionId:t,viewWidth:d,viewHeight:p,sectionType:f,contentProps:{expandable:u,mediaViewer:m,contentToolbar:g,overrideTools:e=>({...e,[Y.bT.TEXT]:[(!0,{id:"size",filterOptions:e=>{let{value:t}=e;return"full"!==t},pullRight:true}),"remove"]})},sections:h,storyFonts:y}),o===Y.nl.EDIT&&Be().createElement(ao,{containerWidth:d,containerHeight:p,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:()=>{r("sections",t,Y.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:()=>{r("sections",t,Y.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:()=>{r("sections",t,Y.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:()=>{r("sections",t,Y.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:()=>{r("sections",t,Y.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:()=>{r("sections",t,Y.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:()=>{r("sections",t,Y.tQ.WEBPAGE)}}]}))};var kr=n(75492),Dr=n.n(kr);function Lr(){return Lr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Lr.apply(this,arguments)}const Rr=(0,nt.compose)(gr,(0,nt.withStateHandlers)({textEditorActive:!1},{bubblingTextEditing:()=>e=>({textEditorActiveClass:e?" ms-text-editor-active":""})}))((e=>{let{id:t,background:n={},contents:o=[],mode:r,contentId:i,path:a,sectionType:s,cover:l,viewWidth:c,viewHeight:d,inViewRef:p,add:u=(()=>{}),update:m=(()=>{}),updateSection:g=(()=>{}),remove:h=(()=>{}),updateBackground:f=(()=>{}),editMedia:y=(()=>{}),focusedContent:b,bubblingTextEditing:A=(()=>{}),textEditorActiveClass:v="",expandableMedia:C=!1,storyTheme:w,mediaViewer:S,contentToolbar:P,inView:O,sections:T=[],storyFonts:I}=e;const _=E()(b,"target.id")===i,M=_?"hidden":"visible",x=C&&n&&"map"===n.type?" ms-expandable-background":"",k=w?.overlay||{},D=w?.general||{};return Be().createElement("section",{ref:p,className:`ms-section ms-section-title${x}`,id:t},Be().createElement(tt.Z,null,(e=>{let{height:t}=e;return Be().createElement(Or,Lr({},n,{scrollContainerSelector:"#ms-sections-container",key:n.id,mode:r,id:i,path:a,update:f,add:u,editMedia:y,expandable:C,updateSection:g,cover:l,remove:h,width:c,sectionType:s,backgroundPlaceholder:{background:`url(${l?Cr():Dr()})`,backgroundSize:(l?64:600)+"px auto"},tools:{[Y.Tr.IMAGE]:["editMedia","cover","fit","size","align","theme"],[Y.Tr.MAP]:["editMedia","cover","editMap","size","align","theme"],[Y.Tr.VIDEO]:["editMedia","cover","fit","size","align","theme","muted","autoplay","loop"]},height:t>=d?d:t,storyTheme:D,mediaViewer:S,contentToolbar:P,inView:O}))})),Be().createElement(lr,{className:`ms-section-contents${v}`,contents:o,mode:r,add:u,sectionType:s,update:m,remove:h,sectionId:t,contentProps:{contentWrapperStyle:l?{minHeight:d,visibility:M}:{visibility:M},mediaViewer:S,contentToolbar:P},tools:{[Y.bT.TEXT]:["size","align","theme","remove"]},focusedContent:b,bubblingTextEditing:A,storyTheme:k,sections:T,storyFonts:I}),r===Y.nl.EDIT&&!_&&Be().createElement(ao,{containerWidth:c,containerHeight:d,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:()=>{u("sections",t,Y.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:()=>{u("sections",t,Y.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:()=>{u("sections",t,Y.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:()=>{u("sections",t,Y.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:()=>{u("sections",t,Y.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:()=>{u("sections",t,Y.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:()=>{u("sections",t,Y.tQ.WEBPAGE)}}]}))}));function Br(){return Br=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Br.apply(this,arguments)}const Nr=(0,nt.compose)(gr,(0,nt.withStateHandlers)({textEditorActive:!1}))((e=>{let{id:t,background:n={},mode:o,contentId:r,path:i,sectionType:a=Y.ID.BANNER,cover:s,viewWidth:l,viewHeight:c,inViewRef:d,add:p=(()=>{}),updateSection:u=(()=>{}),remove:m=(()=>{}),updateBackground:g=(()=>{}),editMedia:h=(()=>{}),focusedContent:f,expandableMedia:y=!1,storyTheme:b,mediaViewer:A,contentToolbar:v,inView:C}=e;const w=E()(f,"target.id")===r,S=y&&n&&"map"===n.type?" ms-expandable-background":"",P=i.replace(".background","");return Be().createElement("section",{ref:d,className:`ms-section ms-section-banner${S}`,id:t},Be().createElement(tt.Z,null,(e=>{let{height:t}=e;return Be().createElement(Or,Br({},n,{scrollContainerSelector:"#ms-sections-container",key:n.id,mode:o,id:r,path:i,update:g,add:p,editMedia:h,expandable:y,updateSection:u,cover:s,remove:()=>m(P),width:l,sectionType:a,backgroundPlaceholder:{background:`url(${s?Cr():Dr()})`,backgroundSize:(s?64:600)+"px auto"},tools:{[Y.Tr.IMAGE]:["editMedia","cover","fit","size","align","theme","remove"],[Y.Tr.MAP]:["editMedia","cover","editMap","size","align","theme","remove"],[Y.Tr.VIDEO]:["editMedia","cover","fit","size","align","theme","muted","autoplay","loop","remove"]},height:t>=c?c:t,storyTheme:b,mediaViewer:A,contentToolbar:v,inView:C}))})),Be().createElement("div",{style:{minHeight:s?c:300,pointerEvents:"none"}}),o===Y.nl.EDIT&&!w&&Be().createElement(ao,{containerWidth:l,containerHeight:c,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:()=>{p("sections",t,Y.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:()=>{p("sections",t,Y.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:()=>{p("sections",t,Y.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:()=>{p("sections",t,Y.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:()=>{p("sections",t,Y.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:()=>{p("sections",t,Y.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:()=>{p("sections",t,Y.tQ.WEBPAGE)}}]}))}));var Fr=n(13718),Ur=n(55033),Gr=n.n(Ur);function jr(){return jr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},jr.apply(this,arguments)}const Wr=(0,Re.forwardRef)(((e,t)=>{let{className:n="ms-thumbnail",label:o,loading:r,message:i,error:a,thumbnail:s,removeGlyph:l="trash",removeTooltipId:c="removeThumbnail",style:d={},maxFileSize:p=5e5,supportedImageTypes:u=["image/png","image/jpeg","image/jpg"],thumbnailOptions:m,dropZoneProps:g={className:"ms-thumbnail-dropzone",activeClassName:"ms-thumbnail-dropzone-active",rejectClassName:"ms-thumbnail-dropzone-reject"},onUpdate:h=(()=>{}),onError:f=(()=>{}),onRemove:y,toolbarButtons:b}=e;const A=(0,Re.useRef)(),[E,v]=(0,Re.useState)();if((0,Re.useEffect)((()=>(A.current=!0,()=>{A.current=!1})),[]),r||E)return Be().createElement("div",{className:`dropzone-thumbnail-container${n?` ${n}`:""} ms-loading`},Be().createElement(Pn.Z,{size:70}));const C=Be().createElement(oo.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:b||[{glyph:l,visible:!(!y||!s),tooltipId:c,onClick:e=>{e?.stopPropagation?.(),y?.()}}]});return Be().createElement("div",{className:"dropzone-thumbnail-container"+(n?` ${n}`:""),style:d},o,Be().createElement(Gr(),jr({},g,{multiple:!1,onDrop:e=>{const t=e?.[0]?.type,n=-1!==u.indexOf(t);v(!0),((e,t)=>new Promise((n=>{let o=e;if(o?.[0]){let e=o[0],r=new FileReader;return r.onload=o=>n(t?((e,t)=>new Promise(((n,o)=>{const{width:r=64,height:i=64,contain:a,type:s="image/jpeg",quality:l=.5}=t||{},c=new Image;c.crossOrigin="anonymous",c.onload=()=>{const{naturalWidth:e,naturalHeight:t}=c,o=e/t,d=r,p=i,u=r/i,m=document.createElement("canvas");m.setAttribute("width",r),m.setAttribute("height",i),m.style.width=r+"px",m.style.height=i+"px";const g=m.getContext("2d"),h=!a&&o<u||a&&o>u?[d,d/o]:[p*o,p];g.save(),g.translate(d/2,p/2),g.drawImage(c,-h[0]/2,-h[1]/2,h[0],h[1]),g.restore();const f=m.toDataURL(s,l);n(f)},c.onerror=e=>{o(e)},c.src=e})))(o.target.result,t).then((e=>({data:e,size:e.length}))):{data:o.target.result,size:e.size}),r.readAsDataURL(e)}return n({data:null})})))(e,m).then((t=>{let{data:o,size:r}=t;return A.current?(v(!1),n&&o&&r<p?h(o,e):f([...n?[]:["FORMAT"],...o&&r>=p?["SIZE"]:[]],e)):null})).catch((e=>A.current?(v(!1),f(e)):null))}}),s?Be().createElement("div",{style:{position:"relative",width:"100%",height:"100%"}},Be().createElement("div",{ref:t,style:{position:"relative",width:"100%",height:"100%",backgroundImage:`url(${s})`,backgroundSize:m?.contain?"contain":"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),Be().createElement("div",{className:"dropzone-content-image-added"},i),C):Be().createElement("div",{className:"dropzone-content-image"},i,C,a&&Be().createElement("div",{className:"dropzone-errors"},a))))})),Hr=Wr;function zr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Zr={FORMAT:Be().createElement(On.Z,{msgId:"map.errorFormat"}),SIZE:Be().createElement(On.Z,{msgId:"map.errorSize"})};class Vr extends Be().Component{constructor(){super(...arguments),zr(this,"state",{}),zr(this,"getThumbnailUrl",(()=>this.props.map&&this.props.map.newThumbnail&&"NODATA"!==this.props.map.newThumbnail?decodeURIComponent(this.props.map.newThumbnail):null)),zr(this,"getDataUri",((e,t)=>{let n=e;if(n&&n.length>0){let e=n[0],o=new FileReader;return o.onload=n=>t(n.target.result,e.size),o.readAsDataURL(e)}return t(null)})),zr(this,"getThumbnailDataUri",(e=>{this.getDataUri(this.files,e)})),zr(this,"generateUUID",(()=>{let e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))})),zr(this,"processUpdateThumbnail",((e,t,n)=>{const o=this.generateUUID(),r="THUMBNAIL";!this.props.map||n||!this.props.map.thumbnail||this.refs.imgThumbnail||t||this.deleteThumbnail(this.props.map.thumbnail,this.props.map.id,!0),this.props.map&&!n&&this.props.map.newThumbnail&&!this.refs.imgThumbnail&&t&&(this.deleteThumbnail(this.props.map.thumbnail,this.props.map.id,!1),this.props.onSaveAll(e,t,o,n,r,this.props.map.id)),this.props.map.newThumbnail&&n&&this.refs.imgThumbnail&&(this.deleteThumbnail(this.props.map.thumbnail,null,!1),this.props.onSaveAll(e,t,o,n,r,this.props.map.id)),this.props.map.newThumbnail&&!n&&this.refs.imgThumbnail&&this.props.onSaveAll(e,t,o,n,r,this.props.map.id),this.props.map.newThumbnail||n||this.refs.imgThumbnail||(this.props.map.thumbnail&&t&&this.deleteThumbnail(this.props.map.thumbnail,this.props.map.id,!1),this.props.onSaveAll(e,t,o,n,r,this.props.map.id))})),zr(this,"updateThumbnail",((e,t)=>{this.props.map.errors&&this.props.map.errors.length||this.getDataUri(this.files,(n=>(this.processUpdateThumbnail(e,t,n),n)))})),zr(this,"deleteThumbnail",((e,t)=>{if(e&&-1!==e.indexOf("geostore")){const n=(0,Fr.C)(e);n&&this.props.onDeleteThumbnail(n,t)}}))}renderThumbnailErrors(){return this.props.thumbnailErrors&&this.props.thumbnailErrors.length>0?Be().createElement("div",{className:"dropzone-errorBox alert-danger"},Be().createElement("p",null,Be().createElement(On.Z,{msgId:"map.error"})),this.props.thumbnailErrors.map((e=>Be().createElement("div",{id:"error"+e,key:"error"+e,className:"error"+e},Zr[e])))):null}render(){return Be().createElement(Hr,{ref:"imgThumbnail",thumbnail:this.getThumbnailUrl(),className:null,dropZoneProps:{className:"dropzone alert alert-info",rejectClassName:"alert-danger"},loading:this.props.loading,maxFileSize:this.props.maxFileSize,style:{pointerEvents:this.props.map.saving?"none":"auto"},label:this.props.withLabel&&Be().createElement("label",{className:"control-label"},Be().createElement(On.Z,{msgId:"map.thumbnail"})),:!0,message:Be().createElement(Be().Fragment,null,this.props.message,Be().createElement("br",null),this.props.suggestion),error:this.renderThumbnailErrors(),onUpdate:(e,t)=>{this.props.onError([],this.props.map.id),this.files=t,this.props.onUpdate(e,t?.[0]?.preview)},onError:(e,t)=>{this.props.onError(e,this.props.map.id),this.files=t,this.props.onUpdate(null,null)},onRemove:()=>{this.files=null,this.props.onUpdate(null,null),this.props.onRemoveThumbnail(),this.props.onError([],this.props.map.id)}})}}zr(Vr,"propTypes",{glyphiconRemove:Fe().string,style:Fe().object,thumbnailErrors:Fe().array,loading:Fe().bool,withLabel:Fe().bool,map:Fe().object,maxFileSize:Fe().number,onDrop:Fe().func,onError:Fe().func,onUpdate:Fe().func,onSaveAll:Fe().func,onCreateThumbnail:Fe().func,onDeleteThumbnail:Fe().func,onRemoveThumbnail:Fe().func,message:Fe().oneOfType([Fe().string,Fe().element]),suggestion:Fe().oneOfType([Fe().string,Fe().element])}),zr(Vr,"contextTypes",{messages:Fe().object}),zr(Vr,"defaultProps",{loading:!1,withLabel:!0,glyphiconRemove:"remove-circle",maxFileSize:5e5,onDrop:()=>{},onError:()=>{},onUpdate:()=>{},onSaveAll:()=>{},onRemoveThumbnail:()=>{},onCreateThumbnail:()=>{},onDeleteThumbnail:()=>{},message:Be().createElement(On.Z,{msgId:"map.message"}),suggestion:Be().createElement(On.Z,{msgId:"map.suggestion"}),map:{},thumbnailErrors:[]});const Qr=Vr;var Kr=n(94745);const qr=(0,ct.Z)("placeholder")(Ht.FormControl),Yr=e=>{const[t,n]=(0,Re.useState)([]),[o,r]=(0,Re.useState)({data:e?.thumbnail?.image}),[i,a]=(0,Re.useState)(e?.title);return Be().createElement(Kr.Z,{fitContent:!0,title:Be().createElement(On.Z,{msgId:e.editing?"geostory.carouselEditTitle":"geostory.carouselAddTitle"}),show:!0,fade:!0,clickOutEnabled:!1,bodyClassName:"ms-flex modal-properties-container background-dialog",onClose:e.onClose,buttons:e.loading?[]:[{text:Be().createElement(On.Z,{msgId:e.editing?"save":"backgroundDialog.add"}),bsStyle:"primary",onClick:()=>{e.update("thumbnail",{image:o.data}),e.update("title",i),e.onClose()}}]},Be().createElement(Ht.Form,{style:{width:"100%"}},(()=>{const e={FORMAT:Be().createElement(On.Z,{msgId:"map.errorFormat"}),SIZE:Be().createElement(On.Z,{msgId:"map.errorSize"})};return t.length>0?Be().createElement("div",{className:"dropzone-errorBox alert-danger"},Be().createElement("p",null,Be().createElement(On.Z,{msgId:"map.error"})),t.map((t=>Be().createElement("div",{id:"error"+t,key:"error"+t,className:"error"+t},e[t])))):null})(),Be().createElement(Qr,{onUpdate:(e,t)=>r({data:e,url:t}),onError:e=>n(e),message:Be().createElement(On.Z,{msgId:"backgroundDialog.thumbnailMessage"}),suggestion:"",map:{newThumbnail:E()(o,"url")||e.thumbnail?.image||"NODATA"}}),Be().createElement(Ht.FormGroup,null,Be().createElement(Ht.ControlLabel,null,Be().createElement(On.Z,{msgId:"layerProperties.title"})),Be().createElement(qr,{value:i,placeholder:"backgroundDialog.titlePlaceholder",onChange:e=>a(e.target.value)}))))};var Xr=n(25311);function Jr(){return Jr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Jr.apply(this,arguments)}const $r=(0,nt.compose)((0,nt.branch)((e=>{let{isDraggable:t=!0}=e;return t}),(e=>t=>{let{onSort:n,isDraggable:o,items:r=[],containerId:i,...a}=t;const s=r.map(((e,t)=>({...e,onSort:n,isDraggable:o,sortId:t,key:e.id||t,containerId:i})));return Be().createElement(e,Jr({},a,{isDraggable:o,items:s}))})));var ei=n(55877),ti=n.n(ei),ni=n(73723),oi=n.n(ni);const ri=e=>{let{type:t}=e;return(e=>{let t="",n="";return"addMap"===e?(t="ms-carousel-map-info",n="geostory.carouselAddMapInfo"):"addMarker"===e?(t="ms-carousel-marker-info",n="geostory.carouselPlaceMarkerInfo"):(t="ms-carousel-add-info",n="geostory.carouselAddItemInfo"),Be().createElement("div",{className:t},Be().createElement(zo.Z,{msgId:n}))})(t)};var ii=n(45338);const ai=function(e){let{direction:t="horizontal",deltaScroll:n,width:o,height:r,transition:i}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const[s,l]=(0,Re.useState)(0),[c,d]=(0,Re.useState)(0),p=(0,Re.useRef)({x:0,y:0}),[u,m]=(0,Re.useState)(!1),[g,h]=(0,Re.useState)("start"),[f,y]=(0,Re.useState)(),b=(0,Re.useRef)(),A=(0,Re.useRef)({});function E(e,n){y("move:start");const o=b.current,r=o.parentNode,a=o.getBoundingClientRect(),s=r.getBoundingClientRect();if("horizontal"===t){const t=e+a.width;e<0&&t>s.width?(l(e),p.current.x=e,h("center")):e>=0?(l(0),p.current.x=0,h("start")):t<=s.width&&(l(s.width-a.width),p.current.x=s.width-a.width,h("end"))}if("vertical"===t){const e=n+a.height;n<0&&e>s.height?(d(n),p.current.y=n,h("center")):n>=0?(d(0),p.current.y=0,h("start")):e<=s.height&&(d(s.height-a.height),p.current.y=s.height-a.height,h("end"))}setTimeout((()=>{y("move:end")}),i)}function v(){const e=b.current,n=e.parentNode,o=e.getBoundingClientRect(),r=n.getBoundingClientRect();return!("horizontal"===t&&r.width>=o.width||"vertical"===t&&r.height>=o.height)}(0,Re.useEffect)((()=>{function e(e){e.preventDefault();const t=v();return m(v()),t?E(p.current.x-(e.deltaY>0?n:-n),p.current.y-(e.deltaY>0?n:-n)):null}const t=v();m(t);const o=b.current.parentNode;return t&&E(p.current.x,p.current.y),t&&o&&o.addEventListener&&o.addEventListener("wheel",e),()=>{t&&o&&o.removeEventListener&&o.removeEventListener("wheel",e)}}),[o,r,...a]);const C=(0,ii.QS)({onSwiping:e=>{e.event.stopPropagation();const t=v();return m(v()),t?E(s-e.deltaX*e.velocity,c-e.deltaY*e.velocity):null},trackTouch:!0,trackMouse:!0});function w(e){const n=A.current[e];if(n){const e=b.current,o=(e&&e.parentNode).getBoundingClientRect(),r=n.getBoundingClientRect();if("horizontal"===t){const{width:e,left:t}=o,{width:n,left:i}=r,a=t+e,s=i+n;return t<=i&&a>=i||t<=s&&a>=s}}return!1}return{status:f,canSwipe:u,isStartControlActive:u&&("end"===g||"center"===g),isEndControlActive:u&&("start"===g||"center"===g),positionLabel:g,coordinates:{x:s,y:c},containerPropsHandlers:function(){let{style:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...C,style:{position:"relative",overflow:"hidden",width:"100%",height:"100%",...e}}},contentPropsHandlers:function(){let{style:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ref:b,style:{position:"absolute",display:"flex",...i&&{transition:`transform ${i}ms ease 0s`},flexDirection:"horizontal"===t?"row":"column",...u&&"horizontal"===t&&{transform:`translateX(${s}px)`},...u&&"vertical"===t&&{transform:`translateY(${c}px)`},...e}}},itemPropsHandlers:function(){let{id:e,onClick:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{key:e,ref:t=>t&&function(e,t){A.current={...A.current,[e]:t}}(e,t),...t?{onClick:t,tabindex:w(e)?0:-1,onKeyDown:e=>{"Enter"===e.key&&t()}}:{tabindex:-1}}},updateCoordinates:E,moveItemInViewById:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{margin:o=0}=n,r=A.current[e];if(r){const e=b.current,n=(e&&e.parentNode).getBoundingClientRect(),i=r.getBoundingClientRect();if("horizontal"===t){const{width:t,left:r}=n,{width:a,left:s}=i;if(!(r<=s&&r+t>=s+a)){const t=e.getBoundingClientRect(),{left:n}=t;E(-(s-n)+o,void 0)}}}},moveToDeltaSize:function(e){E(s+e,c+e)}}};function si(){return si=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},si.apply(this,arguments)}const li=(0,Xr.Z)((e=>{let{title:t,thumbnail:n,index:o,isSelected:r,...i}=e;const a=Be().createElement("div",{className:mt()("ms-geo-carousel-item",{"ms-geo-carousel-item-selected":r}),onClick:i.onClick},Be().createElement("div",{className:"ms-geo-carousel-item-inner-wrapper",style:{backgroundImage:`url(${n?.image||oi()})`}},Be().createElement("span",{className:"ms-geo-carousel-item-inner"},t||`Item ${o+1}`),Be().createElement("span",{className:"ms-geo-carousel-item-inner-index"},o+1)));return i.isDraggable&&i.connectDragSource?i.connectDragSource(a):a})),ci=$r((e=>{let{mode:t,add:n,update:o=(()=>{}),remove:r,sectionId:i,isMapBackground:a,contentId:s,items:l,contentToolbar:c=or,cardComponent:d,containerWidth:p,isDrawEnabled:u,onEnableDraw:m,isEditMap:g,innerRef:h,deltaSwipeSize:f=200,transition:y=300,style:b,controlStyle:A}=e;const[E,v]=(0,Re.useState)(!1),[C,w]=(0,Re.useState)(void 0),[P,O]=(0,Re.useState)(""),[T,I]=(0,Re.useState)({}),{isStartControlActive:_,isEndControlActive:M,containerPropsHandlers:x,contentPropsHandlers:k,itemPropsHandlers:D,moveToDeltaSize:L,moveItemInViewById:R}=ai({direction:"horizontal",width:p,deltaScroll:f,transition:y},[l.length]),B=t===Y.nl.EDIT;(0,Re.useEffect)((()=>{s&&R(s,{margin:32})}),[s]);const N=!(a&&!Z()(l,(e=>0===(e?.features?.length||0))));return Be().createElement(Be().Fragment,null,Be().createElement("div",{ref:h,style:b,className:"ms-geo-carousel"},B&&1===l.length&&N&&!g&&Be().createElement(ri,{type:"addInfo"}),g&&B&&u&&!!Z()(l,(e=>e.id===s&&0===(e?.features?.length||0)))&&Be().createElement(ri,{type:"addMarker"}),B&&Be().createElement(c,{addDisabled:N,add:n,editMap:g,remove:()=>r(`sections[{"id":"${i}"}]`),tools:["add","remove"]}),Be().createElement("div",si({},x(),{className:"ms-horizontal-menu"}),Be().createElement("div",k(),l.map(((e,t)=>{const p=D({id:e.id,onClick:g?void 0:()=>{o(`sections[{"id":"${i}"}].contents[{"id":"${e.id}"}].carouselToggle`,!0)}});return Be().createElement("div",si({key:t},p,{className:"ms-geo-carousel-item-wrapper",style:g?{pointerEvents:"none"}:{}}),B&&Be().createElement(c,{editMap:g,markerDisabled:!a||e?.id!==s,edit:t=>{t.stopPropagation(),(e=>{w(e?.id),v(!0),I(e?.thumbnail),O(e?.title)})(e)},remove:()=>{return n=e?.id,a=0===t&&l.length>0?l[t+1]?.id:l[t-1]?.id,r(`sections[{"id":"${i}"}].contents[{"id":"${n}"}]`),void(s===n&&o(`sections[{"id":"${i}"}].contents[{"id":"${a}"}].hideContent`,!1));var n,a},forceDelBtnDisable:e?.id===s,add:n,marker:t=>{t.stopPropagation(),m(e)},tools:["edit","remove","marker"]}),Be().createElement(d,si({key:t,index:t,items:l,update:o,sectionId:i,selectedId:s,isSelected:e?.id===s},e)))}))),_&&Be().createElement(En.Z,{className:"square-button-md no-border ms-geo-carousel-control",style:{...A,position:"absolute"},onClick:()=>L(f)},Be().createElement(Ht.Glyphicon,{glyph:"chevron-left"})),M&&Be().createElement(En.Z,{className:"square-button-md no-border ms-geo-carousel-control",style:{...A,position:"absolute",right:0},onClick:()=>L(-f)},Be().createElement(Ht.Glyphicon,{glyph:"chevron-right"})))),E&&Be().createElement(Yr,{title:P,thumbnail:T,update:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"replace";const a=S()(e)?"":`.${e}`;o(`sections[{"id":"${i}"}].contents[{"id":"${n}"}]`+a,t,r)},onClose:()=>v(!1)}))})),di=e=>{let{onSort:t,sectionId:n,contents:o=[],onEnableDraw:r=(()=>{}),isEditMap:i,isDrawEnabled:a,...s}=e;return Be().createElement(ci,si({containerId:n,isDraggable:s.mode===Y.nl.EDIT,onSort:(e,o,r,i)=>{if(r.containerId===i.containerId){const o=`sections[{ "id": "${n}" }].contents[{"id":"${i.id}"}]`,r=`sections[{ "id": "${n}" }].contents`,a=e,s=ti()();t(o,r,a,s,`sections[{ "id": "${n}" }].contents[{"id":"${s}"}]`)}}},s,{sectionId:n,cardComponent:li,items:o.map((e=>{let{id:t,thumbnail:n={},features:o,title:r}=e;return{id:t,thumbnail:n,features:o,title:r}})),isDrawEnabled:a,onEnableDraw:r,isEditMap:i}))};var pi=n(6909);function ui(){return ui=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ui.apply(this,arguments)}function mi(e){let{map:t,active:n,method:o,mapId:r,mapType:i,features:a,options:s,onChange:l,...c}=e;const[d,p]=(0,Re.useState)(null);return(0,Re.useEffect)((()=>{p(n?"drawOrEdit":"clean")}),[n]),"openlayers"!==i?null:Be().createElement(pi.Z,ui({},c,{map:t,drawOwner:r,drawStatus:d,drawMethod:o,features:a,options:{drawEnabled:n,addClickCallback:!0,editEnabled:!0,featureProjection:"EPSG:4326",geodesic:!1,stopAfterDrawing:!1,transformToFeatureCollection:!0,translateEnabled:!1,useSelectedStyle:!0,...s},onDrawingFeatures:l.bind(null,r)}))}mi.propTypes={active:Fe().bool,method:Fe().string,features:Fe().array,onChange:Fe().func,options:Fe().object},mi.defaultProps={active:!1,method:"Point",features:[],onChange:()=>{},options:{}};const gi=mi;var hi=n(90183),fi=n(52043);const yi={openlayers:{fit:e=>{let{map:t,geometry:n,padding:o,geometryProjection:r,fixedZoom:i,maxZoom:a,duration:s}=e;const l=t.getView(),c=l.getProjection().getCode();let d;if(2===n.length){const{x:e,y:t}=(0,hi.reproject)(n,r,c);d=new fi.Z([e,t])}else d=(0,hi.reprojectBbox)(n,r,c);const{top:p=0,right:u=0,bottom:m=0,left:g=0}=o||{};l.fit(d,{padding:[p,u,m,g],maxZoom:i?l.getZoom():a,duration:s})}},leaflet:{fit:e=>{let{map:t,geometry:n,padding:o,geometryProjection:r,fixedZoom:i,maxZoom:a,duration:s}=e;const l=i?t.getZoom():a,{top:c=0,right:d=0,bottom:p=0,left:u=0}=o;let m;if(2===n.length){const{x:e,y:t}=(0,hi.reproject)(n,r,"EPSG:4326");m=[[t,e],[t,e]]}else{const[e,t,o,i]=(0,hi.reprojectBbox)(n,r,"EPSG:4326");m=[[t,e],[i,o]]}t.flyToBounds(m,{paddingTopLeft:[u,c],paddingBottomRight:[d,p],maxZoom:l,animate:!!s,duration:s/1e3})}}};function bi(e){let{map:t,mapType:n,active:o,geometry:r,geometryProjection:i="EPSG:4326",padding:a,maxZoom:s,fixedZoom:l,duration:c}=e;const d=(0,Re.useRef)();return d.current=()=>{t&&yi[n]&&yi[n].fit({map:t,geometry:r,padding:a,geometryProjection:i,maxZoom:s,fixedZoom:l,duration:c})},(0,Re.useEffect)((()=>{o&&r&&d.current()}),[r,o]),null}bi.propTypes={id:Fe().string,map:Fe().object,mapType:Fe().string,active:Fe().bool,geometry:Fe().array,geometryProjection:Fe().string,padding:Fe().object,maxZoom:Fe().number,fixedZoom:Fe().bool,duration:Fe().number},bi.defaultProps={geometryProjection:"EPSG:4326",padding:{top:0,right:0,bottom:0,left:0}};const Ai=bi,Ei=e=>{let{currentIndex:t,contents:n=[],onTraverseCard:o=(()=>{})}=e;return Be().createElement(Be().Fragment,null,Be().createElement(En.Z,{className:"ms-carousel-slider left-arrow",disabled:0===t,onClick:()=>o()},Be().createElement(Ht.Glyphicon,{style:{fontSize:22},glyph:"chevron-left"})),Be().createElement(En.Z,{className:"ms-carousel-slider right-arrow",onClick:()=>o("right"),disabled:t===n.length-1},Be().createElement(Ht.Glyphicon,{style:{fontSize:22},glyph:"chevron-right"})))};function vi(){return vi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},vi.apply(this,arguments)}const Ci=(0,nt.compose)(hr,(e=>t=>{const n=pr(t.contents||[],t.backgroundId)||{},o=n&&n.id,r={...t,contentId:o,sectionId:t.id,path:`sections[{"id": "${t.id}"}].background`};return Be().createElement(e,r)}),(e=>t=>{const n={...t,updateBackground:function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return t.update(`sections[{"id": "${t.sectionId}"}].background.`+e,...o)},updateSection:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return t.update(`sections[{"id": "${t.sectionId}"}]`,...n)}};return Be().createElement(e,n)}),(e=>t=>{const[n,o]=(0,Re.useState)("");return Be().createElement(e,vi({},t,{textEditorActiveClass:n,bubblingTextEditing:e=>o(e?" ms-text-editor-active":"")}))}))((e=>{let{add:t=(()=>{}),editMedia:n=(()=>{}),editWebPage:o=(()=>{}),onVisibilityChange:r=(()=>{}),update:i=(()=>{}),updateBackground:a=(()=>{}),updateCurrentPage:s=(()=>{}),remove:l=(()=>{}),id:c,background:d={},path:p,contents:u=[],mode:m,sectionType:g,inViewRef:h,viewWidth:f,viewHeight:y,focusedContent:b,contentId:A,bubblingTextEditing:v=(()=>{}),textEditorActiveClass:C="",expandableMedia:w=!1,storyTheme:S,mediaViewer:P,contentToolbar:O,inView:T,sections:I=[],storyFonts:_,onSort:M=(()=>{}),onEnableDraw:x=(()=>{}),isDrawEnabled:k,defaultMarkerStyle:D={iconColor:"cyan",iconShape:"circle"},highlightedMarkerStyle:L={iconColor:"green",iconShape:"circle"}}=e;const R=(0,Re.useRef)(),B=(0,Re.useRef)(),N=(0,Re.useRef)();function F(e,t){return t-(e.left+e.right)<128?{top:0,left:0,bottom:0,right:0}:e}const U=b&&b.hideContent&&E()(b,"target.id")===c,G=U?"hidden":"visible",j=w&&d&&"map"===d.type?" ms-expandable-background":"",W={...S?.overlay,...m===Y.nl.VIEW&&{maxHeight:y-350,overflowY:"auto"}}||{},H=S?.general||{},z=y-(m===Y.nl.EDIT?220:200),V=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const{contents:t=[]}=Z()(u,{id:A})||{};return e.filter((e=>Y.ID.CAROUSEL===g&&1===t.length?"remove"!==e:e))},Q=d?.type===Y.Tr.MAP,{features:K=[]}=u.find((e=>e.id===A))||{},q=we()(u,(e=>{let{id:t}=e;return A===t})),X=(0,Y.Yh)({id:c,contents:u.filter((e=>e.id!==A)),featureStyle:e=>{let{content:t,feature:n}=e;return(0,Y.c0)(D,u,t,A,n)}}),J=(0,Y.Yh)({id:`${c}-highlighted`,contents:u.filter((e=>e.id===A)),featureStyle:e=>{let{content:t,feature:n}=e;return(0,Y.c0)(L,u,t,A,n)}});return Be().createElement("section",{className:`ms-section ms-section-carousel${j}`,id:c,ref:h},Be().createElement(Or,vi({},d,{mode:m,innerRef:R,disableToolbarPortal:!0,tools:{[Y.Tr.IMAGE]:["editMedia","fit","size","align","theme"],[Y.Tr.MAP]:["editMedia","editMap","size","align","theme"].concat(k?"closeDraw":[]),[Y.Tr.VIDEO]:["editMedia","fit","size","align","theme","muted","autoplay","loop"]},scrollContainerSelector:"#ms-sections-container",add:t,editMedia:n,expandable:w,path:p,update:a,updateCurrentPage:s,remove:l,sectionType:g,sectionId:c,backgroundId:d.id,key:d.id,width:f,height:y,backgroundPlaceholder:{background:`url(${Ir()})`,backgroundSize:"600px auto"},storyTheme:H,mediaViewer:P,contentToolbar:O,inView:T,layers:[X,J],isDrawEnabled:k,onEnableDraw:x,contentToolbarChildren:!Q&&m===Y.nl.EDIT&&Be().createElement(ri,{type:"addMap"})}),Be().createElement(gi,{active:k,features:K,method:"Point",onChange:(e,t)=>{i(`sections[{"id":"${c}"}].contents[{"id":"${A}"}].features`,t)}}),Be().createElement(Ai,{active:!k&&!d?.editMap,geometry:K?.[0]?.geometry?.coordinates,padding:function(){let e={top:0,left:0,bottom:0,right:0};const t=R.current&&R.current.querySelector(".ms-media-map"),n=B.current&&B.current.querySelector(`[id='${A}']`);if(t&&n){const o=R.current.getBoundingClientRect()||{},r=t.getBoundingClientRect()||{},i=n.getBoundingClientRect()||{};if(N.current){const t=N.current.getBoundingClientRect()||{};e.bottom=o.height-(t.top-o.top)}const a=r.left-o.left,s=a+r.width,l=i.left-o.left,c=l+i.width;if(l>=a&&c<=s){const t=l-a,n=s-c;return n>=t?e.left=t+i.width:e.right=n+i.width,F(e,r.width)}if(c>=a&&c<=s)return e.left=c-a,F(e,r.width);if(l>=a&&l<=s)return e.right=s-l,F(e,r.width)}return e}(),fixedZoom:!0,duration:300})),Be().createElement(lr,{innerRef:B,tools:{[Y.bT.COLUMN]:["size","align","theme"]},className:`ms-section-contents${C}`,contents:u,mode:m,add:t,updateCurrentPage:s,editMedia:n,editWebPage:o,update:i,remove:l,sectionId:c,viewWidth:f,viewHeight:y,contentProps:{onVisibilityChange:r,contentWrapperStyle:{minHeight:z,visibility:G},expandable:w,mediaViewer:P,contentToolbar:O,overrideTools:e=>Object.fromEntries(Object.entries(e).map((e=>{let[t,n]=e;return[t,V(n)]})))},focusedContent:b,bubblingTextEditing:v,sectionType:g,storyTheme:W,sections:I,storyFonts:_}),Be().createElement(di,{innerRef:N,style:S?.overlay?{...S.overlay}:{},controlStyle:H?{...H}:{},sectionId:c,contentId:A,contents:u,update:i,remove:l,expandable:w,add:()=>(()=>{const e={...(0,Y.nq)(Y.bT.COLUMN),title:"Item "+(u.length+1),background:{}};t(`sections[{"id": "${c}"}].contents`,void 0,e,"geostory.builder.defaults.titleGeocarouselContent"),i(`sections[{"id":"${c}"}].contents[{"id":"${A}"}].hideContent`,!0)})(),contentToolbar:O,mode:m,onSort:M,isMapBackground:Q,isEditMap:d?.editMap,containerWidth:f,isDrawEnabled:k,onEnableDraw:e=>{i(`sections[{"id":"${c}"}].background.editMap`,!0,"replace"),x({contentId:e.id,sectionId:c})}}),m===Y.nl.VIEW&&!w&&Be().createElement(Ei,{currentIndex:q,contents:u,onTraverseCard:function(){let e;e="left"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"left")?u?.[0===q?0:q-1]?.id:u?.[q===u.length-1?q:q+1]?.id,i(`sections[{"id":"${c}"}].contents[{"id":"${e}"}].carouselToggle`,!0)}}),m===Y.nl.EDIT&&!U&&Be().createElement(ao,{containerWidth:f,containerHeight:y,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:()=>{t("sections",c,Y.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:()=>{t("sections",c,Y.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:()=>{t("sections",c,Y.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:()=>t("sections",c,Y.ID.IMMERSIVE)},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:()=>{t("sections",c,Y.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:()=>{t("sections",c,Y.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:()=>{t("sections",c,Y.tQ.WEBPAGE)}}]}))}));function wi(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Si={[Y.ID.IMMERSIVE]:Mr,[Y.ID.CAROUSEL]:Ci,[Y.ID.PARAGRAPH]:xr,[Y.tQ.MEDIA]:xr,[Y.tQ.WEBPAGE]:xr,[Y.ID.TITLE]:Rr,[Y.ID.BANNER]:Nr,UNKNOWN:e=>{let{type:t,inViewRef:n}=e;return Be().createElement("div",{ref:n,className:"ms-section ms-section-unknown"},"WARNING: unknown session of type ",t)}};class Pi extends Be().Component{constructor(){super(...arguments),wi(this,"state",{height:0})}render(){const e=Si[this.props.type]||Si.UNKNOWN;return Be().createElement(e,{sectionType:this.props.type,id:this.props.id,add:this.props.add,update:this.props.update,inViewRef:this.props.inViewRef,editMedia:this.props.editMedia,expandableMedia:this.props.expandableMedia,editWebPage:this.props.editWebPage,updateCurrentPage:this.props.updateCurrentPage,remove:this.props.remove,mode:this.props.mode,cover:this.props.cover,contents:this.props.contents,viewWidth:this.props.viewWidth,viewHeight:this.props.viewHeight,focusedContent:this.props.focusedContent,storyTheme:this.props.storyTheme,mediaViewer:this.props.mediaViewer,contentToolbar:this.props.contentToolbar,inView:this.props.inView,sections:this.props.sections,storyFonts:this.props.storyFonts,onSort:this.props.onSort,isDrawEnabled:this.props.isDrawEnabled,background:this.props.background,onEnableDraw:this.props.onEnableDraw,defaultMarkerStyle:this.props.defaultMarkerStyle,highlightedMarkerStyle:this.props.highlightedMarkerStyle})}}wi(Pi,"propTypes",{id:Fe().string,type:Fe().oneOf(Y.lg.SectionTypes),storyType:Fe().oneOf(Y.lg.StoryTypes),add:Fe().func,update:Fe().func,editMedia:Fe().func,editWebPage:Fe().func,remove:Fe().func,updateCurrentPage:Fe().func,mode:Fe().oneOf(Y.lg.Modes),contents:Fe().array,viewHeight:Fe().number,viewWidth:Fe().number,inViewRef:Fe().func,excludeClassName:Fe().string,cover:Fe().bool,focusedContent:Fe().object,expandableMedia:Fe().bool,storyTheme:Fe().object,mediaViewer:Fe().func,contentToolbar:Fe().func,inView:Fe().bool,sections:Fe().array,storyFonts:Fe().array,onSort:Fe().func,isDrawEnabled:Fe().bool,onEnableDraw:Fe().func,background:Fe().object,defaultMarkerStyle:Fe().object,highlightedMarkerStyle:Fe().object}),wi(Pi,"defaultProps",{id:"",add:()=>{},update:()=>{},editMedia:()=>{},editWebPage:()=>{},updateCurrentPage:()=>{},remove:()=>{},onSort:()=>{},storyType:Y.Ln.CASCADE,viewHeight:0,viewWidth:0,mode:Y.nl.VIEW,expandableMedia:!1,sections:[],storyFonts:[],onEnableDraw:()=>{}});const Oi=po({threshold:[0,.25,.5,.75,1],rootMargin:"-200px 0px 0px 0px"})(Pi);function Ti(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ii extends Be().Component{constructor(){var e;super(...arguments),e=this,Ti(this,"getAdjustedSelector",(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/#\d|^#-\d/g,((e,t)=>t?"#\\"+t[1]+t[2]:"#\\3"+e[1]+" "))})),Ti(this,"getFocusedTarget",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.targets;const{padding:n={}}=e.props;return t.map((t=>{let{selector:o}=t,r=null;try{const t=window.document.querySelector(e.getAdjustedSelector(o));if(t){const{top:e,right:o,bottom:i,left:a}=t.getBoundingClientRect();r={x:a-n,y:e-n,w:o-a+2*n,h:i-e+2*n}}}catch(e){console.warn(e)}finally{return r}})).filter((e=>e))})),Ti(this,"getHolePath",(e=>{let{x:t,y:n,w:o,h:r}=e;const{borderRadius:i=8}=this.props;return`M ${t} ${n+i} q 0 -${i} ${i} -${i} h ${o-2*i} q ${i} 0 ${i} ${i} v ${r-2*i} q 0 ${i} -${i} ${i} h-${o-2*i} q -${i} 0 -${i} -${i} v-${r-2*i}`})),Ti(this,"getPath",(function(t,n){return`M 0 0 h ${n} v ${t} h -${n} v -${t}`+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getFocusedTarget()).map(e.getHolePath).join(" ")}))}render(){const{onMaskClicked:e,stopEventsOnTargets:t=!1,targets:n}=this.props,o=this.getFocusedTarget(n.filter((e=>{let{stopEventsOnTarget:n}=e;return t||n})));return Be().createElement("div",{style:{position:"fixed",height:"100vh",width:"100vw",top:0,left:0,zIndex:1e6,pointerEvents:"none"}},Be().createElement(tt.Z,null,(t=>{let{width:n,height:r}=t;return Be().createElement("svg",{width:n,height:r,xmlns:"http://www.w3.org/2000/svg"},Be().createElement("path",{d:this.getPath(r,n),fill:"rgba(0,0,0,0.7)",fillRule:"evenodd",pointerEvents:"visiblePainted",onClick:e}),o.map(((e,t)=>Be().createElement("path",{key:t,d:this.getHolePath(e),fill:"transparent",pointerEvents:"visiblePainted"}))))})))}}Ti(Ii,"propTypes",{targets:Fe().arrayOf(Fe().shape({selector:Fe().string,stopEventsOnTarget:Fe().bool})),padding:Fe().number,borderRadius:Fe().number,onMaskClicked:Fe().func,stopEventsOnTargets:Fe().bool}),Ti(Ii,"defaultProps",{targets:[],padding:0,borderRadius:8,onMaskClicked:()=>{},stopEventsOnTargets:!1});const _i=(0,it.Z)((e=>{let{sections:t=[]}=e;return 0===t.length}),(e=>{let{add:t=(()=>{})}=e;return{iconFit:!1,style:{position:"relative",width:"50%",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},glyph:"geostory",title:Be().createElement(On.Z,{msgId:"geostory.emptyTitle"}),description:Be().createElement(On.Z,{msgId:"geostory.emptyDescription"}),content:Be().createElement(ao,{addButtonClassName:"square-button-md",containerWidth:"100%",containerHeight:"100%",buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:()=>{t("sections",0,Y.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:()=>{t("sections",0,Y.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:()=>{t("sections",0,Y.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveContent",onClick:()=>{t("sections",0,Y.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselContent",onClick:()=>{t("sections",0,Y.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:()=>{t("sections",0,Y.tQ.MEDIA)}},{glyph:"code",tooltipId:"geostory.addWebPageSection",onClick:()=>{t("sections",0,Y.tQ.WEBPAGE)}}]})}}))(tt.Z),Mi=e=>{let{width:t,mode:n}=e;return n===Y.nl.EDIT?"":t<640?"sm":t>=640&&t<1024?"md":""},xi=(0,nt.compose)(rt,lt,function(e){let{showFocusMask:t=(()=>{}),defaultTargets:n={selector:".ms-geostory-map-editor"}}=e,{padding:o=0,borderRadius:r=8,stopEventsOnTargets:i=!1,onMaskClicked:a=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,nt.branch)(t,(e=>(0,nt.nest)((e=>{let{focusedContent:t,children:s}=e;return Be().createElement(Be().Fragment,null,s,Be().createElement(Ii,{targets:[t,n],padding:o,borderRadius:r,stopEventsOnTargets:i,onMaskClicked:a}))}),e)))}({showFocusMask:e=>{let{focusedContent:{target:t={}}={}}=e;return t.id}}))((e=>{let{mode:t=Y.nl.VIEW,sections:n=[],add:o=(()=>{}),onVisibilityChange:r=(()=>{}),updateCurrentPage:i=(()=>{}),editMedia:a=(()=>{}),editWebPage:s=(()=>{}),update:l=(()=>{}),remove:c=(()=>{}),focusedContent:d,isContentFocused:p=!1,getSize:u=Mi,theme:m={},mediaViewer:g,contentToolbar:h,storyFonts:f,onSort:y=(()=>{}),isDrawEnabled:b=!1,onEnableDraw:A=(()=>{}),defaultMarkerStyle:E,highlightedMarkerStyle:v}=e;return Be().createElement(He.Z,{className:`ms-cascade-story ms-${t}`},Be().createElement(_i,{sections:n,add:o},(e=>{let{width:C,height:w}=e;const S=u({width:C,height:w,mode:t}),P=S?` ms-${S}`:"",O="sm"===S,T=m&&L()(m)&&m||{};return Be().createElement("div",{id:"ms-sections-container",className:`ms-sections-container${P} ms-sections-hyperlinks`,style:{...T?.general,...p&&{overflow:"hidden"}}},T?.link?.color&&Be().createElement("style",{dangerouslySetInnerHTML:{__html:`\n            .ms-sections-hyperlinks .ms-text-editor-main a,\n            .ms-sections-hyperlinks .ms-text-wrapper a,\n            .ms-sections-hyperlinks .ms-text-editor-main a:link,\n            .ms-sections-hyperlinks .ms-text-wrapper a:link,\n            .ms-sections-hyperlinks .ms-text-editor-main a:visited,\n            .ms-sections-hyperlinks .ms-text-wrapper a:visited,\n            .ms-sections-hyperlinks .ms-text-editor-main a:active,\n            .ms-sections-hyperlinks .ms-text-wrapper a:active {\n                color: ${T.link.color};\n                opacity: 1;\n            }\n            .ms-sections-hyperlinks .ms-text-editor-main a:hover,\n            .ms-sections-hyperlinks .ms-text-wrapper a:hover {\n                color: ${T.link.color};\n                opacity: 0.75;\n            }\n        `}}),n.map((e=>{let{contents:p=[],id:u,type:m,cover:S,background:P}=e;return Be().createElement(Oi,{focusedContent:d,onVisibilityChange:r,add:o,editMedia:a,expandableMedia:O,editWebPage:s,updateCurrentPage:i,update:l,remove:c,key:u,id:u,viewHeight:w,viewWidth:C,type:m,mode:t,contents:p,cover:S,storyTheme:T,mediaViewer:g,contentToolbar:h,sections:n,storyFonts:f,onSort:y,isDrawEnabled:b,onEnableDraw:A,background:P,defaultMarkerStyle:E,highlightedMarkerStyle:v})})))})))})),ki=(e,t)=>(t.layers||[]).filter((function(){let{group:t="Default"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t===e})).map((function(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e})),Di=(0,nt.compose)((0,nt.withStateHandlers)((()=>({selectedLayers:[],selectedGroups:[]})),{onNodeSelect:(e,t)=>{let{selectedLayers:n=[],selectedGroups:o=[]}=e,{map:r={}}=t;return(e,t,i)=>({selectedLayers:"group"===t?we()(o,(t=>t===e))>=0?n.filter((t=>we()(ki(e,r),(e=>e===t))<0)):i?[...n,...ki(e,r)]:[...ki(e,r)]:we()(n,(t=>t===e))>=0?n.filter((t=>t!==e)):i?[...n,e]:[e],selectedGroups:"group"===t?we()(o,(t=>t===e))>=0?o.filter((t=>t!==e)):i?[...o,e]:[e]:i?o:[]})}}),(0,nt.withProps)((e=>{let{selectedLayers:t,selectedGroups:n}=e;return{selectedNodes:[...t,...n]}})));function Li(){return Li=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Li.apply(this,arguments)}const Ri=To(uo.Z),Bi=(0,nt.compose)((0,Ue.connect)((0,V.P1)(H.jq,H.z7,((e,t)=>({resources:e,isContentFocused:t})))),(0,nt.withProps)((e=>{let{resources:t,resourceId:n,map:o={}}=e;const r={...o,layers:(o.layers||[]).map((e=>e||void 0))},i=Z()(t,{id:n})||{};return{map:(0,Y.oH)(i.data,r)}}))),Ni=(0,nt.compose)((0,Ue.connect)((0,V.P1)(H.GC,(function(){return{focusedEl:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}))),(0,nt.withProps)((e=>{let{focusedEl:{resourceId:t,map:n}={}}=e;return{map:n||{},resourceId:t,disableReset:!n}}))),Fi=(0,nt.withHandlers)({onChangeMap:e=>{let{update:t,focusedContent:n={}}=e;return(e,o)=>{t(`${n.path}.map.${e}`,o,"merge")}},onChange:e=>{let{update:t,focusedContent:n={}}=e;return(e,o)=>{t(n.path+`.${e}`,o,"merge")}}}),Ui=(0,nt.compose)((0,Ue.connect)(null,{toggleAdvancedEditing:(e,t)=>({type:X,owner:e,map:t})}),(0,nt.withHandlers)({toggleAdvancedEditing:e=>{let{toggleAdvancedEditing:t=(()=>{}),map:n={}}=e;return()=>{const{id:e,...o}=n;t("inlineEditor",{data:o,id:e})}}})),Gi=(0,nt.withHandlers)({toggleEditing:e=>{let{editMap:t,update:n,focusedContent:o}=e;return()=>n(o.path+".editMap",!t)},onReset:e=>{let{update:t,focusedContent:{path:n=""}={}}=e;return()=>{t(n+".map",void 0)}},discardAndClose:e=>{let{update:t,focusedContent:n={}}=e;return e=>{t(n.path+".map",e),t(n.path+".editMap",!1)}}}),ji=e=>Be().createElement(Ri,Li({glyph:"repeat",bsStyle:"primary",className:"square-button-md no-border",tooltipId:"geostory.contentToolbar.resetMap",confirmTitle:Be().createElement(On.Z,{msgId:"geostory.contentToolbar.resetMapConfirm"}),confirmContent:Be().createElement(On.Z,{msgId:"geostory.contentToolbar.resetConfirmContent"})},e)),Wi=(0,nt.compose)((0,nt.withProps)((e=>{let{pendingChanges:t,toggleEditing:n,disableReset:o,onReset:r,toggleAdvancedEditing:i=(()=>{})}=e;return{buttons:[{glyph:"floppy-disk",disabled:!t,tooltipId:"geostory.contentToolbar.saveChanges",onClick:n},{renderButton:Be().createElement(ji,{disabled:o,onClick:r})},{glyph:"pencil",tooltipId:"geostory.contentToolbar.advancedMapEditor",onClick:i}]}})),Di,(0,nt.withStateHandlers)((()=>({editNode:void 0})),{setEditNode:()=>e=>({editNode:e}),closeNodeEditor:()=>()=>({editNode:void 0})}),(0,nt.branch)((e=>{let{editNode:t}=e;return!!t}),(0,nt.withProps)((e=>{let{selectedNodes:t=[],closeNodeEditor:n=(()=>{})}=e;return{buttons:[{visible:1===t.length,tooltipId:"close",glyph:"1-close",onClick:n}]}})),(0,nt.withProps)((e=>{let{selectedNodes:t=[],setEditNode:n=(()=>{}),buttons:o=[]}=e;return{buttons:[{visible:1===t.length,glyph:"wrench",tooltipId:"toc.toolLayerSettingsTooltip",onClick:()=>{n(t[0])}},...o]}})))),Hi=(0,nt.compose)((0,nt.withPropsOnChange)(["focusedContent"],(e=>{let{map:t,focusedEl:{map:n}={}}=e;return{contentMap:n,lastSavedMap:t}})),(0,nt.withPropsOnChange)(["map"],(e=>{let{map:t,lastSavedMap:n}=e;return{pendingChanges:!Yt()(n,t)}}))),zi=(0,nt.compose)((0,nt.withProps)((e=>{let{toggleEditing:t}=e;return{CloseBtn:e=>Be().createElement(uo.Z,Li({onClick:t},e))}})),(0,nt.branch)((e=>{let{pendingChanges:t}=e;return t}),(0,nt.withProps)((e=>{let{discardAndClose:t,contentMap:n}=e;return{CloseBtn:e=>Be().createElement(Ri,Li({onClick:()=>t(n),confirmTitle:Be().createElement(On.Z,{msgId:"geostory.contentToolbar.confirmCloseMapEditing"}),confirmContent:Be().createElement(On.Z,{msgId:"geostory.contentToolbar.pendingChangesDiscardConfirm"})},e))}})))),Zi=(0,nt.mapPropsStream)((e=>{const{stream:t,handler:n}=(0,nt.createEventHandler)();return e.pluck("map").distinctUntilChanged(((e,t)=>Yt()(e,t))).switchMap((e=>t.map((t=>({map:{...e,...t}}))).startWith({map:e}))).combineLatest(e,(function(){let{map:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},onMapViewLocalChanges:n,map:e}}))})),Vi=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)==0},Qi=(0,nt.withHandlers)({onMapViewChanges:function(){let{update:e,editMap:t=!1,onMapViewLocalChanges:n,map:{center:o={},zoom:r,mapStateSource:i,resolution:a,resetPanAndZoom:s}={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l=>{let{center:c={},zoom:d,mapStateSource:p,resolution:u}=l;const m=Vi(o.x,c.x)&&Vi(o.y,c.y);!t||m&&r===d?s?e("map",{center:o,zoom:r,mapStateSource:i,resolution:a,resetPanAndZoom:!1},"merge"):n({center:c,zoom:d,mapStateSource:p,resolution:u}):e("map",{center:c,zoom:d,mapStateSource:ti()(),resolution:u,resetPanAndZoom:!1},"merge")}}}),Ki=(e,t)=>function(){let n=arguments.length>1?arguments[1]:void 0;return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[n]:e[n]&&(0,Je.MZ)(t,e[n])}};function qi(){return qi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},qi.apply(this,arguments)}const Yi=(0,bn.Z)(Ht.NavItem),Xi=(e,t,n)=>(0,nt.branch)((function(){return!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})[t]}),(0,nt.withState)(e,t,n)),Ji=(0,nt.compose)((0,nt.withState)("showEditor","onShowEditor",!1)),$i=(0,nt.compose)((0,nt.withHandlers)({onClose:e=>{let{onUpdateInitialSettings:t=(()=>{}),onHideSettings:n=(()=>{}),onUpdateOriginalSettings:o=(()=>{})}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];C()(e)&&e.forEach((e=>{ho()(e)&&e()})),o({}),n(),t({})}}}),(0,nt.lifecycle)({UNSAFE_componentWillMount(){const{element:e={},onUpdateOriginalSettings:t=(()=>{}),onUpdateInitialSettings:n=(()=>{})}=this.props;t({}),n({...e})},componentWillReceiveProps(e){const{settings:t={},onRetrieveLayerData:n=(()=>{})}=this.props;!t.expanded&&e.settings&&e.settings.expanded&&g()(e.element.description)&&"wms"===e.element.type&&n(e.element)},componentWillUpdate(e){const{initialActiveTab:t="general",settings:n={},onUpdateOriginalSettings:o=(()=>{}),onUpdateInitialSettings:r=(()=>{}),onSetTab:i=(()=>{})}=this.props;!n.expanded&&e.settings&&e.settings.expanded&&(o({}),r({...e.element}),i(t))}}));(0,nt.compose)(Ji,$i);var ea=n(94192),ta=n(52595),na=n(50966);function oa(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ra extends Be().Component{renderPopover(){return Be().createElement(Ht.Popover,{id:this.props.id,placement:this.props.placement,positionLeft:this.props.left,positionTop:this.props.top,title:this.props.title},this.props.text)}renderContent(){return Be().createElement(Ht.Glyphicon,{ref:e=>{this.target=e},className:`text-${this.props.bsStyle}`,glyph:this.props.glyph})}render(){const e=!0===this.props.trigger?["hover","focus"]:this.props.trigger;return Be().createElement("span",{className:"mapstore-info-popover"},this.props.trigger?Be().createElement(na.Z,{trigger:e,placement:this.props.placement,overlay:this.renderPopover()},this.renderContent()):[this.renderContent(),Be().createElement(ta.Z,{placement:this.props.placement,show:!0,target:()=>vo().findDOMNode(this.target)},this.renderPopover())])}}oa(ra,"propTypes",{id:Fe().string,title:Fe().string,text:Fe().string,glyph:Fe().string,bsStyle:Fe().string,placement:Fe().string,left:Fe().number,top:Fe().number,trigger:Fe().oneOfType([Fe().array,Fe().bool])}),oa(ra,"defaultProps",{id:"",title:"",text:"",placement:"right",left:200,top:50,glyph:"question-sign",bsStyle:"info",trigger:["hover","focus"]});const ia=ra;var aa=n(90079),sa=n(43129),la=n(90173),ca=n(67007),da=n(10284);n(33044),la.default;const pa=e=>i.Observable.defer((()=>ca.ZP.getCapabilities((0,en.Fh)(e)))).let(da.oB).map((t=>ca.ZP.parseLayerCapabilities(t,e)));var ua=n(52259);const ma=(0,ct.Z)(["placeholder","noResultsText"])(sa.ZP.Creatable),ga=(0,ct.Z)(["placeholder","noResultsText"])(sa.ZP);function ha(e){let{label:t,showArrow:n,limitsType:o}=e;return Be().createElement("span",null,function(e,t){return"scale"===t?"1 : "+Math.round(e):e}(t,o),n&&Be().createElement(Be().Fragment,null,"",Be().createElement(Ht.Glyphicon,{glyph:"arrow-left"})))}function fa(e){let{id:t,value:n,placeholderId:o,noResultsTextId:r,createTextId:i,options:a,isValidNewOption:s=(()=>!0),onChange:l=(()=>{}),disabled:c,loading:p}=e;return Be().createElement(ma,{inputProps:{id:t},placeholder:o,noResultsText:r,value:n,isLoading:p,options:a,disabled:c,optionRenderer:ha,valueRenderer:ha,promptTextCreator:e=>Be().createElement(On.Z,{msgId:i,msgParams:{label:e}}),isValidNewOption:e=>{if(e.label){const t=parseFloat(e.label);return!d()(t)&&s(t)}return!1},onChange:e=>{const t=e?.value&&parseFloat(e.value);l(d()(t)?void 0:{...e,value:t})}})}function ya(e){let{title:t,layer:n,zoom:o,projection:r,resolutions:i=(0,ua.getResolutions)(),defaultLimitsType:a,limitsTypesOptions:s,dpi:l,onChange:c}=e;const[d,p]=(0,Re.useState)(a||s[0].value),{maxResolution:u,minResolution:m,disableResolutionLimits:h}=n,f=(0,ua.dpi2dpu)(l,r);function y(e,t){const n=e.map((e=>e[d]));return g()(t[d])||-1!==n.indexOf(t[d])?e:[t,...e].sort(((e,t)=>e[d]>t[d]?-1:1))}function b(e,t){return(0,ua.getResolutionObject)(e,t,{projection:r,resolutions:i})}const[A,E]=(0,Re.useState)([]),[v,C]=(0,Re.useState)(u&&{resolution:u,scale:u*f,zoom:(0,ua.getZoomFromResolution)(u,i)}),[w,S]=(0,Re.useState)(m&&{resolution:m,scale:m*f,zoom:(0,ua.getZoomFromResolution)(m,i)}),[P,O]=(0,Re.useState)(!1),[T,I]=(0,Re.useState)(),[_,M]=(0,Re.useState)(),x=(0,Re.useRef)();function k(){M(void 0),I(void 0)}function D(e,t){const n=(o=e,r=t,g()(o)&&g()(r)?"layerProperties.visibilityLimits.serverValuesUpdateUndefined":g()(o)&&!g()(r)?"layerProperties.visibilityLimits.serverValuesUpdateMinScale":!g()(o)&&g()(r)?"layerProperties.visibilityLimits.serverValuesUpdateMaxScale":"layerProperties.visibilityLimits.serverValuesUpdate");var o,r;I(n)}function L(e,t){e<t&&M("layerProperties.visibilityLimits.rangeError")}(0,Re.useEffect)((()=>(x.current=!0,()=>{x.current=!1})),[]);const R=i.join(",");return(0,Re.useEffect)((()=>{const e=m&&{resolution:m,scale:m*f,zoom:(0,ua.getZoomFromResolution)(m,i)},t=u&&{resolution:u,scale:u*f,zoom:(0,ua.getZoomFromResolution)(u,i)},n=[e,t].filter((e=>e)).reduce(y,i.map(((e,t)=>({resolution:e,scale:e*f,zoom:t}))));C(t),S(e),E(n),k()}),[f,R]),(0,Re.useEffect)((()=>{!x.current||g()(u)&&g()(m)||(D(u,m),L(u,m))}),[x]),Be().createElement("div",{className:"ms-visibility-limits-form"},Be().createElement("div",{className:"ms-visibility-limits-form-title",style:{display:"flex",alignItems:"center"}},Be().createElement("div",{style:{flex:1}},t),Be().createElement(oo.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:"refresh",disabled:!(!h&&!P),visible:"wms"===n.type,onClick:function(){"wms"!==n.type||P||(O(!0),k(),pa(n).toPromise().then((e=>{if(x.current){const{maxScaleDenominator:t,minScaleDenominator:n}=e,o=!g()(t)&&b(t,"scale"),r=!g()(n)&&b(n,"scale");D(t,n),r&&S(r),o&&C(o),c({...o&&{maxResolution:o.resolution},...r&&{minResolution:r.resolution}});const i=(r||w)?.resolution||-1/0;L((o||v)?.resolution||1/0,i),O(!1)}})).catch((()=>{x.current&&(O(!1),M("layerProperties.visibilityLimits.serverValuesError"))})))},tooltipId:"layerProperties.visibilityLimits.updateWMSCapabilities"},{Element:()=>Be().createElement(Ho,{checked:!h,onClick:()=>{c({disableResolutionLimits:!h}),k()}})}]})),Be().createElement("label",{htmlFor:"ms-visibility-limits-max"},Be().createElement(On.Z,{msgId:"layerProperties.visibilityLimits.maxValue"})),Be().createElement(fa,{id:"ms-visibility-limits-max",value:v?.[d]&&{value:v[d],label:v[d],zoom:v.zoom,limitsType:d},placeholderId:"layerProperties.visibilityLimits.maxValuePlaceholder",noResultsTextId:"layerProperties.visibilityLimits.valueNoResultsText",createTextId:"layerProperties.visibilityLimits.createOption",loading:P,isValidNewOption:e=>e>=(w?.[d]||0),options:A.map((e=>({...e,value:e[d]+(e.delta||0),label:e[d],showArrow:e.zoom===o,disabled:!g()(w?.[d])&&e[d]<=w[d],limitsType:d}))),disabled:h||P,onChange:e=>{const t=void 0===e.value?{}:g()(e.zoom)?b(e.value,d):{resolution:e.resolution,scale:e.scale,zoom:e.zoom};if(c({maxResolution:t.resolution}),C(t),void 0!==e.value&&g()(e.zoom)){const e=y(A,t);E(e)}k()}}),Be().createElement("label",{htmlFor:"ms-visibility-limits-min"},Be().createElement(On.Z,{msgId:"layerProperties.visibilityLimits.minValue"})),Be().createElement(fa,{id:"ms-visibility-limits-min",value:w?.[d]&&{value:w[d],label:w[d],zoom:w.zoom,limitsType:d},placeholderId:"layerProperties.visibilityLimits.minValuePlaceholder",noResultsTextId:"layerProperties.visibilityLimits.valueNoResultsText",createTextId:"layerProperties.visibilityLimits.createOption",loading:P,isValidNewOption:e=>e<=(v?.[d]||1/0),options:A.map((e=>({...e,value:e[d],label:e[d],showArrow:e.zoom===o,disabled:!g()(v?.[d])&&e[d]>=v[d],limitsType:d}))),disabled:h||P,onChange:e=>{const t=void 0===e.value?{}:g()(e.zoom)?b(e.value,d):{resolution:e.resolution,scale:e.scale,zoom:e.zoom};if(c({minResolution:t.resolution}),S(t),void 0!==e.value&&g()(e.zoom)){const e=y(A,t);E(e)}k()}}),Be().createElement("label",{htmlFor:"ms-visibility-limits-type"},Be().createElement(On.Z,{msgId:"layerProperties.visibilityLimits.type"})),Be().createElement(ga,{inputProps:{id:"ms-visibility-limits-type"},value:d,clearable:!1,options:s.map((e=>{let{labelId:t,...n}=e;return{...n,...t&&{label:Be().createElement(On.Z,{msgId:t})}}})),disabled:h||P,onChange:e=>{let{value:t}=e;p(t),k()}}),T&&Be().createElement(Ht.Alert,{bsStyle:"success"},Be().createElement(On.Z,{msgId:T})),_&&Be().createElement(Ht.Alert,{bsStyle:"danger"},Be().createElement(On.Z,{msgId:_})))}ya.propTypes={layer:Fe().object,zoom:Fe().number,onChange:Fe().func,resolutions:Fe().array,limitsTypesOptions:Fe().array,projection:Fe().string,dpi:Fe().number,defaultLimitsType:Fe().string},ya.defaultProps={layer:{},onChange:()=>{},limitsTypesOptions:[{value:"scale",labelId:"layerProperties.visibilityLimits.scale"},{value:"resolution",labelId:"layerProperties.visibilityLimits.resolution"}],dpi:ua.DEFAULT_SCREEN_DPI};const ba=ya;var Aa=n(44908),Ea=n.n(Aa),va=n(64721),Ca=n.n(va);n(7294);const wa=[{label:"image/png",value:"image/png"},{label:"image/png8",value:"image/png8"},{label:"image/jpeg",value:"image/jpeg"},{label:"image/vnd.jpeg-png",value:"image/vnd.jpeg-png"},{label:"image/vnd.jpeg-png8",value:"image/vnd.jpeg-png8"},{label:"image/gif",value:"image/gif"}],Sa=()=>Ea()(Object.values((0,$t.eq)()));function Pa(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Oa=(0,mo.Z)(Ht.Button);class Ta extends Be().Component{constructor(e){super(e),Pa(this,"state",{opacity:100,legendOptions:{legendWidth:12,legendHeight:12},containerStyle:{overflowX:"auto"},containerWidth:0}),Pa(this,"onChange",((e,t)=>{if("opacity"===e){const e=t&&ko()(Math.round(t),0,100);this.setState({opacity:e,...this.state}),this.props.onChange("opacity",e&&e/100||0)}else{const n=t&&ko()(Math.round(t),0,1e3);this.setState({...this.state,legendOptions:{...this.state.legendOptions,[e]:n}}),this.props.onChange({legendOptions:{...this.state.legendOptions,[e]:n}})}})),Pa(this,"onBlur",(e=>{const t=e.target.value&&Math.round(e.target.value),n=e.target.name;this.props.onChange({legendOptions:{...this.state.legendOptions,[n]:t>=12?t:""}})})),Pa(this,"onFormatOptionsFetch",(e=>{this.setState({formatLoading:!0}),function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ca.ZP.getCapabilities(e).then((e=>{let n,o,r=E()(e,"capability.request.getMap.format",[]);if(S()(r))n=wa;else{const e=wa.map((e=>{let{value:t}=e;return t}));r=r.map((e=>{let{value:t}=e;return{label:t,value:t}})),n=r.filter((t=>{let{value:n}=t;return Ca()(e,n)}))||[]}if(t){let t=E()(e,"capability.request.getFeatureInfo.format",[]);const n=Sa();S()(t)?o=n:(t=t.map((e=>{let{value:t}=e;return t})),o=Ea()(t.filter((e=>Ca()(n,e))))||[])}return t?{imageFormats:n,infoFormats:o}:n})).catch((()=>t?{imageFormats:wa,infoFormats:Sa()}:wa))}(e).then((e=>{this.props.onChange("imageFormats",e),this.setState({formatLoading:!1})}))})),Pa(this,"getValidationState",(e=>this.state.legendOptions&&this.state.legendOptions[e]?parseInt(this.state.legendOptions[e],10)<12&&"error":null)),Pa(this,"updateState",(e=>{e.settings&&e.settings.options&&this.setState({...this.state,opacity:g()(e.settings.options.opacity)?this.state.opacity:Math.round(100*e.settings.options.opacity),legendOptions:{...this.state.legendOptions,legendHeight:e.element.legendOptions&&!g()(e.element.legendOptions.legendHeight)?e.element.legendOptions.legendHeight:this.state.legendOptions.legendHeight,legendWidth:e.element.legendOptions&&!g()(e.element.legendOptions.legendWidth)?e.element.legendOptions.legendWidth:this.state.legendOptions.legendWidth},containerWidth:this.containerRef.current&&this.containerRef.current.clientWidth})})),Pa(this,"setOverFlow",(()=>this.state.legendOptions.legendWidth>this.state.containerWidth)),Pa(this,"useLegendOptions",(()=>"error"!==this.getValidationState("legendWidth")&&"error"!==this.getValidationState("legendHeight")&&ve()(this.state.legendOptions.legendHeight)&&ve()(this.state.legendOptions.legendWidth))),this.containerRef=Be().createRef()}componentDidMount(){this.updateState(this.props)}UNSAFE_componentWillReceiveProps(e){this.props!==e&&this.updateState(e)}render(){return Be().createElement(Ht.Grid,{fluid:!0,className:"fluid-container ms-display-form "+(!this.props.containerWidth&&"adjust-display")},"wms"===this.props.element.type&&Be().createElement(Ht.Row,null,Be().createElement(Ht.Col,{xs:12},Be().createElement(Ht.FormGroup,null,Be().createElement(Ht.ControlLabel,null,Be().createElement(On.Z,{msgId:"layerProperties.format.title"})),Be().createElement("div",{className:"ms-format-container"},Be().createElement(sa.ZP,{className:"format-select",key:"format-dropdown",clearable:!1,noResultsText:Be().createElement(On.Z,{msgId:this.state.formatLoading?"layerProperties.format.loading":"layerProperties.format.noOption"}),isLoading:!!this.state.formatLoading,options:this.state.formatLoading?[]:this.props.formats?.map((e=>({value:e,label:e})))||this.props.element?.imageFormats||wa,value:this.props.element&&this.props.element.format||"image/png",onChange:e=>{let{value:t}=e;this.props.onChange("format",t)}}),Be().createElement(Oa,{tooltipId:"layerProperties.format.refresh",className:"square-button-md no-border format-refresh",onClick:()=>{this.onFormatOptionsFetch(this.props.element?.url)},key:"format-refresh"},Be().createElement(Ht.Glyphicon,{glyph:"refresh"}))))),Be().createElement(Ht.Col,{xs:12},Be().createElement(Ht.FormGroup,null,Be().createElement(Ht.ControlLabel,null,Be().createElement(On.Z,{msgId:"WMS Layer tile size"})),Be().createElement(sa.ZP,{key:"wsm-layersize-dropdown",clearable:!1,options:[{value:256,label:256},{value:512,label:512}],value:this.props.element&&this.props.element.tileSize||256,onChange:e=>{let{value:t}=e;this.props.onChange("tileSize",t)}})))),Be().createElement(Ht.Row,null,Be().createElement(Ht.Col,{xs:12},Be().createElement(Ht.FormGroup,null,Be().createElement(Ht.ControlLabel,null,this.props.opacityText," %"),Be().createElement(ea.Z,{type:"number",min:0,max:100,name:"opacity",value:this.state.opacity,onChange:e=>this.onChange("opacity",e)})))),Be().createElement(Ht.Row,null,Be().createElement(Ht.Col,{xs:12},Be().createElement(Ht.FormGroup,null,Be().createElement(ba,{title:Be().createElement(Ht.ControlLabel,null,Be().createElement(On.Z,{msgId:"layerProperties.visibilityLimits.title"})),layer:this.props.element,onChange:this.props.onChange,projection:this.props.projection,resolutions:this.props.resolutions,zoom:this.props.zoom})))),"wms"===this.props.element.type&&Be().createElement(Ht.Row,null,Be().createElement(Ht.Col,{xs:12},Be().createElement("hr",null),Be().createElement(Ht.FormGroup,null,Be().createElement(Ht.Checkbox,{key:"transparent",checked:this.props.element&&(void 0===this.props.element.transparent||this.props.element.transparent),onChange:e=>{this.props.onChange("transparent",e.target.checked)}},Be().createElement(On.Z,{msgId:"layerProperties.transparent"})),Be().createElement(Ht.Checkbox,{value:"tiled",key:"tiled",disabled:!!this.props.element.singleTile,onChange:e=>this.props.onChange("tiled",e.target.checked),checked:!this.props.element||void 0===this.props.element.tiled||this.props.element.tiled},Be().createElement(On.Z,{msgId:"layerProperties.cached"})),Be().createElement(Ht.Checkbox,{key:"singleTile",value:"singleTile",checked:this.props.element&&void 0!==this.props.element.singleTile&&this.props.element.singleTile,onChange:e=>this.props.onChange("singleTile",e.target.checked)},Be().createElement(On.Z,{msgId:"layerProperties.singleTile"})),this.props.isLocalizedLayerStylesEnabled&&Be().createElement(Ht.Checkbox,{key:"localizedLayerStyles",value:"localizedLayerStyles","data-qa":"display-lacalized-layer-styles-option",checked:this.props.element&&void 0!==this.props.element.localizedLayerStyles&&this.props.element.localizedLayerStyles,onChange:e=>this.props.onChange("localizedLayerStyles",e.target.checked)},Be().createElement(On.Z,{msgId:"layerProperties.enableLocalizedLayerStyles.label"}),"",Be().createElement(ia,{text:Be().createElement(On.Z,{msgId:"layerProperties.enableLocalizedLayerStyles.tooltip"})})))),Be().createElement("div",{className:"legend-options"},Be().createElement(Ht.Col,{xs:12,className:"legend-label"},Be().createElement("label",{key:"legend-options-title",className:"control-label"},Be().createElement(On.Z,{msgId:"layerProperties.legendOptions.title"}))),Be().createElement(Ht.Col,{xs:12,sm:6,className:"first-selectize"},Be().createElement(Ht.FormGroup,{validationState:this.getValidationState("legendWidth")},Be().createElement(Ht.ControlLabel,null,Be().createElement(On.Z,{msgId:"layerProperties.legendOptions.legendWidth"})),Be().createElement(ea.Z,{value:this.state.legendOptions.legendWidth,name:"legendWidth",type:"number",min:12,max:1e3,onChange:e=>this.onChange("legendWidth",e),onKeyPress:e=>"-"===e.key&&e.preventDefault(),onBlur:this.onBlur}))),Be().createElement(Ht.Col,{xs:12,sm:6,className:"second-selectize"},Be().createElement(Ht.FormGroup,{validationState:this.getValidationState("legendHeight")},Be().createElement(Ht.ControlLabel,null,Be().createElement(On.Z,{msgId:"layerProperties.legendOptions.legendHeight"})),Be().createElement(ea.Z,{value:this.state.legendOptions.legendHeight,name:"legendHeight",type:"number",min:12,max:1e3,onChange:e=>this.onChange("legendHeight",e),onKeyPress:e=>"-"===e.key&&e.preventDefault(),onBlur:this.onBlur}))),Be().createElement(Ht.Col,{xs:12,className:"legend-preview"},Be().createElement(Ht.ControlLabel,null,Be().createElement(On.Z,{msgId:"layerProperties.legendOptions.legendPreview"})),Be().createElement("div",{style:this.setOverFlow()&&this.state.containerStyle||{},ref:this.containerRef},Be().createElement(aa.Z,{style:this.setOverFlow()&&{}||void 0,layer:this.props.element,legendHeight:this.useLegendOptions()&&this.state.legendOptions.legendHeight||void 0,legendWidth:this.useLegendOptions()&&this.state.legendOptions.legendWidth||void 0,language:this.props.isLocalizedLayerStylesEnabled?this.props.currentLocaleLanguage:void 0}))))))}}Pa(Ta,"propTypes",{opacityText:Fe().node,element:Fe().object,formats:Fe().array,settings:Fe().object,onChange:Fe().func,containerWidth:Fe().number,currentLocaleLanguage:Fe().string,isLocalizedLayerStylesEnabled:Fe().bool,projection:Fe().string,resolutions:Fe().array,zoom:Fe().number}),Pa(Ta,"defaultProps",{onChange:()=>{},opacityText:Be().createElement(On.Z,{msgId:"opacity"})});var Ia=n(72986),_a=n.n(Ia),Ma=n(59112);const xa=(0,nt.compose)((0,nt.withState)("enableOverlayTrigger","setEnableOverlayTrigger",!0),(0,nt.withState)("overlayTriggerDelayID","setOverlayTriggerDelayID"),(0,nt.withState)("layerName","setLayerName",""),(0,nt.withState)("editingLayerName","setEditingLayerName",!1),(0,nt.withState)("waitingForLayerLoading","setWaitingForLayerLoading",!1),(0,nt.withState)("waitingForLayerLoad","setWaitingForLayerLoad",!1),(0,nt.withState)("layerError","setLayerError"),(0,nt.withHandlers)({setEditingLayerName:e=>{let{editingLayerName:t=!1,overlayTriggerDelayID:n,setEditingLayerName:o=(()=>{}),setOverlayTriggerDelayID:r=(()=>{}),setEnableOverlayTrigger:i=(()=>{})}=e;return e=>{t!==e&&(n&&clearTimeout(n),i(!1),r(setTimeout((()=>{i(!0)}),250))),o(e)}}}),(0,nt.lifecycle)({componentDidMount(){this.props.setLayerName(this.props.element?.name)},componentDidUpdate(){const{element:e={},waitingForLayerLoading:t,waitingForLayerLoad:n,setWaitingForLayerLoad:o=(()=>{}),setWaitingForLayerLoading:r=(()=>{}),setEditingLayerName:i=(()=>{}),setLayerError:a=(()=>{})}=this.props;t&&e.loading?(r(!1),o(!0)):n&&!e.loading&&(o(!1),a(e.loadingError),i(!!e.loadingError))}}))((e=>{let{enableOverlayTrigger:t,element:n={},enableLayerNameEditFeedback:o=!1,layerName:r="",editingLayerName:i=!1,layerError:a,waitingForLayerLoading:s=!1,waitingForLayerLoad:l=!1,setLayerName:c=(()=>{}),setWaitingForLayerLoading:d=(()=>{}),setEditingLayerName:p=(()=>{}),onUpdateEntry:u=(()=>{})}=e;const m=Be().createElement(Ht.InputGroup.Addon,{className:"btn",onClick:()=>{i?r!==n.name?(u("name",{target:{value:r}}),o?d(!0):p(!1)):p(!1):p(!0)}},s||l?Be().createElement(_a(),{noFadeIn:!0,style:{width:"18px",height:"18px"},spinnerName:"circle"}):Be().createElement(Ht.Glyphicon,{glyph:i?"ok":"pencil"}));return Be().createElement(Ht.FormGroup,{validationState:!a||l||s?null:"error"},Be().createElement(Ht.ControlLabel,null,Be().createElement(On.Z,{msgId:"layerProperties.name"})),Be().createElement(Ht.InputGroup,null,Be().createElement(Ht.FormControl,{value:r,key:"name",type:"text",disabled:!i,onChange:e=>c(e.target.value)}),t?(g=m,Be().createElement(na.Z,{placement:"top",overlay:Be().createElement(Ht.Tooltip,{id:"tooltip-layer-name-edit"},Be().createElement(On.Z,{msgId:`layerProperties.tooltip.${i?"confirm":"edit"}LayerName`}))},g)):m));var g}));function ka(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Da extends Be().Component{constructor(){super(...arguments),ka(this,"getTitle",(e=>(0,Ma.YQ)(e,this.props.currentLocale))),ka(this,"getLabelName",((e,t)=>(0,Ma.fu)(this.getTitle(e),t))),ka(this,"supportedNameEditLayerTypes",["wms"]),ka(this,"updateEntry",((e,t)=>L()(e)?this.props.onChange(e):this.props.onChange(e,t.target.value))),ka(this,"updateTranslation",((e,t)=>{const n="default"===e&&u()(this.props.element.title)?t.target.value:Ao()({},L()(this.props.element.title)?this.props.element.title:{default:this.props.element.title||""},{[e]:t.target.value});this.props.onChange("title",n)})),ka(this,"findGroupLabel",(()=>{const e=this.props.groups&&(0,Ma.yQ)(this.props.groups,0,!0),t=this.props.element&&this.props.element.group||"Default",n=Z()(e,(e=>e.id===t))||{};return this.getTitle(n.title)}))}render(){const e=(0,Je.w8)(),t=L()(this.props.element.title)?Ao()({},this.props.element.title):{default:this.props.element.title},{hideTitleTranslations:o=!1}=this.props.pluginCfg,r=[{value:"title",label:(0,Je.S$)(this.context.messages,"layerProperties.tooltip.title")},{value:"description",label:(0,Je.S$)(this.context.messages,"layerProperties.tooltip.description")},{value:"both",label:(0,Je.S$)(this.context.messages,"layerProperties.tooltip.both")},{value:"none",label:(0,Je.S$)(this.context.messages,"layerProperties.tooltip.none")}],i=[{value:"top",label:(0,Je.S$)(this.context.messages,"layerProperties.tooltip.top")},{value:"right",label:(0,Je.S$)(this.context.messages,"layerProperties.tooltip.right")},{value:"bottom",label:(0,Je.S$)(this.context.messages,"layerProperties.tooltip.bottom")}],a=this.props.groups&&(0,Ma.yQ)(this.props.groups),s=this.findGroupLabel(this.props.element&&this.props.element.group||"Default"),l=this.props.allowNew?sa.ZP.Creatable:sa.ZP;return Be().createElement(Ht.Grid,{fluid:!0,style:{paddingTop:15,paddingBottom:15}},Be().createElement("form",{ref:"settings"},Be().createElement(Ht.FormGroup,null,Be().createElement(Ht.ControlLabel,null,Be().createElement(On.Z,{msgId:"layerProperties.title"})),Be().createElement(Ht.FormControl,{defaultValue:t.default||"",key:"title",type:"text",onBlur:this.updateTranslation.bind(null,"default")})),o||Be().createElement(Ht.FormGroup,null,Be().createElement(Ht.ControlLabel,null,Be().createElement(On.Z,{msgId:"layerProperties.titleTranslations"})),Object.keys(e).map((o=>{let r;try{r=n(90683)("./"+e[o].code+".png")}catch(e){r=!1}return r?Be().createElement(Ht.InputGroup,{key:o},Be().createElement(Ht.InputGroup.Addon,null,Be().createElement("img",{src:r,alt:e[o].description})),Be().createElement(Ht.FormControl,{placeholder:e[o].description,defaultValue:t[e[o].code]||"",type:"text",onBlur:this.updateTranslation.bind(null,e[o].code)})):null}))),Ca()(this.supportedNameEditLayerTypes,this.props.element.type)&&Be().createElement(xa,{element:this.props.element,enableLayerNameEditFeedback:this.props.enableLayerNameEditFeedback,onUpdateEntry:this.updateEntry.bind(null)}),Be().createElement(Ht.FormGroup,null,Be().createElement(Ht.ControlLabel,null,Be().createElement(On.Z,{msgId:"layerProperties.description"})),this.props.element.capabilitiesLoading?Be().createElement(_a(),{spinnerName:"circle"}):Be().createElement(Ht.FormControl,{defaultValue:this.props.element.description||"",key:"description",rows:"2",componentClass:"textarea",style:{resize:"vertical",minHeight:"33px"},onBlur:this.updateEntry.bind(null,"description")})),"layers"===this.props.nodeType?Be().createElement("div",null,Be().createElement("label",{key:"group-label",className:"control-label"},Be().createElement(On.Z,{msgId:"layerProperties.group"})),Be().createElement(l,{clearable:!1,key:"group-dropdown",options:_e()([{value:"Default",label:"Default"},...(a||this.props.element&&this.props.element.group||[]).map((e=>L()(e)?{...e,label:this.getLabelName(e.label,a)}:{label:this.getLabelName(e,a),value:e}))],"value"),isValidNewOption:Ma.gP,newOptionCreator:function(e){const{valueKey:t,label:n,labelKey:o}=e;return{[t]:n.replace(/\./g,"${dot}").replace(/\//g,"."),[o]:n,className:"Select-create-option-placeholder"}},value:{label:this.getLabelName(s,a),value:s},placeholder:this.getLabelName(s,a),onChange:e=>{this.updateEntry("group",{target:{value:e.value||"Default"}})}})):null,this.props.showTooltipOptions&&Be().createElement("div",{style:{width:"100%"}},Be().createElement(Ht.Col,{xs:12,sm:8,className:"first-selectize"},Be().createElement("br",null),Be().createElement("label",{key:"tooltip-label",className:"control-label"},Be().createElement(On.Z,{msgId:"layerProperties.tooltip.label"})),Be().createElement(sa.ZP,{clearable:!1,key:"tooltips-dropdown",options:r,value:Z()(r,(e=>e.value===(this.props.element.tooltipOptions||"title"))),onChange:e=>{this.updateEntry("tooltipOptions",{target:{value:e.value||"title"}})}})),Be().createElement(Ht.Col,{xs:12,sm:4,className:"second-selectize"},Be().createElement("br",null),Be().createElement("label",{key:"tooltip-placement-label",className:"control-label"},Be().createElement(On.Z,{msgId:"layerProperties.tooltip.labelPlacement"})),Be().createElement(sa.ZP,{clearable:!1,key:"tooltips-placement-dropdown",options:i,value:Z()(i,(e=>e.value===(this.props.element.tooltipPlacement||"top"))),onChange:e=>{this.updateEntry("tooltipPlacement",{target:{value:e.value||"top"}})}})))))}}ka(Da,"propTypes",{onChange:Fe().func,element:Fe().object,settings:Fe().object,groups:Fe().array,nodeType:Fe().string,pluginCfg:Fe().object,showTooltipOptions:Fe().bool,allowNew:Fe().bool,enableLayerNameEditFeedback:Fe().bool,currentLocale:Fe().string}),ka(Da,"contextTypes",{messages:Fe().object}),ka(Da,"defaultProps",{element:{},onChange:()=>{},nodeType:"layers",showTooltipOptions:!0,pluginCfg:{},allowNew:!1,currentLocale:"en-US"});const La=Da;function Ra(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ba extends Be().Component{constructor(){super(...arguments),Ra(this,"renderLegend",(()=>null)),Ra(this,"renderItemLabel",(e=>Be().createElement("div",null,Be().createElement("div",{key:"item-title"},e.title||e.name),Be().createElement("div",null,Be().createElement("small",{className:"text-muted",key:"item-key-description"},e.name))))),Ra(this,"renderError",(()=>this.props.element&&this.props.element.capabilities&&this.props.element&&this.props.element.capabilities.error?Be().createElement(Ht.Alert,{bsStyle:"danger"},Be().createElement(On.Z,{msgId:"layerProperties.styleListLoadError"})):null)),Ra(this,"updateEntry",((e,t)=>{let n=t.target.value;this.props.onChange(e,n)}))}render(){let e=[{label:"Default Style",value:""}].concat((this.props.element.availableStyles||[]).map((e=>({label:this.renderItemLabel(e),value:e.name}))));return(this.props.element.style&&this.props.element.availableStyles&&we()(this.props.element.availableStyles,(e=>e.name===this.props.element.style)))>=0||!this.props.element.style||e.push({label:this.props.element.style,value:this.props.element.style}),Be().createElement(Ht.Grid,{fluid:!0,style:{paddingTop:15,paddingBottom:15}},Be().createElement("form",{ref:"style"},Be().createElement(sa.ZP.Creatable,{key:"styles-dropdown",options:e,isLoading:this.props.element&&this.props.element.capabilitiesLoading,value:this.props.element.style||"",onOpen:()=>{!this.props.element||this.props.element.capabilities&&this.props.element.availableStyles||this.props.retrieveLayerData(this.props.element)},promptTextCreator:e=>Be().createElement(On.Z,{msgId:"layerProperties.styleCustom",msgParams:{value:e}}),onChange:e=>{this.updateEntry("style",{target:{value:e&&e.value||""}})}}),Be().createElement("br",null),this.renderLegend(),this.renderError(),Be().createElement(En.Z,{bsStyle:"primary",style:{float:"right"},onClick:()=>this.props.retrieveLayerData(this.props.element)},Be().createElement(Ht.Glyphicon,{glyph:"refresh"}),"",Be().createElement(On.Z,{msgId:"layerProperties.stylesRefreshList"})),Be().createElement("br",null)))}}Ra(Ba,"propTypes",{retrieveLayerData:Fe().func,onChange:Fe().func,element:Fe().object,groups:Fe().array}),Ra(Ba,"defaultProps",{element:{},retrieveLayerData:()=>{},onChange:()=>{}});const Na=Ba,Fa=(0,nt.withHandlers)({changeLayerProperty:e=>{let{onChange:t=(()=>{}),map:n={}}=e;return(e,o,r)=>{const i=we()(n.layers||[],{id:e});t(`map.layers[${i}].${o}`,r)}},changeLayerPropertyByGroup:e=>{let{onChange:t=(()=>{}),map:n={}}=e;return(e,o,r)=>n.layers.filter((0,en.CK)(e)).map((function(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return we()(n.layers||[],{id:e})})).filter((e=>e>=0)).map((e=>t(`map.layers[${e}].${o}`,r)))},changeGroupProperty:e=>{let{onChange:t=(()=>{}),map:n=[]}=e;return(e,o,r)=>{const i=n.groups?Te()(n.groups):[],a=we()(i,(t=>e===t.id));let s=-1===a?i.length:a;"expanded"!==o||i?.[s]?.id||t(`map.groups[${s}].id`,e),t(`map.groups[${s}].${o}`,r)}},updateMapEntries:e=>{let{onChange:t=(()=>{})}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((n=>t(`map[${n}]`,e[n])))}}}),Ua=(0,nt.withProps)((e=>{let{map:t}=e;return{nodes:(e=>{let{layers:t={}}=e;return(0,en.C1)(t.flat||[],t.groups||[]).groups})((0,en.DN)(t))}})),Ga=(0,nt.mapPropsStream)((e=>{const{stream:t,handler:n}=(0,nt.createEventHandler)();return e.pluck("element").distinctUntilChanged((function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id===e.id})).switchMap((()=>t.switchMap((e=>pa(e).map((e=>({capabilities:e,capabilitiesLoading:null,description:e._abstract,boundingBox:e.latLonBoundingBox,availableStyles:e.style&&(Array.isArray(e.style)?e.style:[e.style])}))).startWith({capabilitiesLoading:!0}))).catch((e=>a().Observable.of({capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:e},description:null}))))).startWith({}).combineLatest(e,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{...t,retrieveLayerData:n,element:{...t.element,...e}}}))}));var ja=n(66379),Wa=n.n(ja);const Ha=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;for(let o in e)null!==e[o]&&"object"==typeof e[o]&&(Wa()(e[o],t)&&n.apply(void 0,[e[o]]),Ha(e[o],t,n))},za=(0,nt.withProps)((e=>{let{nodes:t={},editNode:n}=e,o={};return n&&Ha(t,{id:n},(e=>{o=e})),{selectedNode:o}})),Za=Ga(Na),Va=(0,nt.withProps)((e=>({tabs:e.tabs||[{id:"general",titleId:"layerProperties.general",tooltipId:"layerProperties.general",glyph:"wrench",visible:!0,Component:La},{id:"display",titleId:"layerProperties.display",tooltipId:"layerProperties.display",glyph:"eye-open",visible:e.settings&&"layers"===e.settings.nodeType,Component:Ta},{id:"style",titleId:"layerProperties.style",tooltipId:"layerProperties.style",glyph:"dropper",visible:e.settings&&"layers"===e.settings.nodeType&&e.element&&"wms"===e.element.type,Component:Za}]}))),Qa=(0,nt.compose)(Ua,za,(0,nt.withState)("settings","onUpdateSettings",{}),(0,nt.withProps)((function(){let{map:e={},selectedNode:t,settings:n={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{element:t,settings:{...n,nodeType:t&&t.nodes?"groups":"layers",options:{opacity:n.opacity>=0?n.opacity:t.opacity>=0?t.opacity:1}},groups:E()((0,en.DN)(e),"layers.groups")}})),(0,nt.compose)(Fa,(0,nt.withHandlers)({onUpdateNode:e=>{let{changeLayerProperty:t=(()=>{}),changeGroupProperty:n=(()=>{}),editNode:o}=e;return(e,r,i)=>{"layers"===r&&Object.keys(i).map((e=>t(o,e,i[e]))),"groups"===r&&Object.keys(i).map((e=>n(o,e,i[e])))}}}),(0,nt.withHandlers)({onUpdateParams:e=>{let{settings:t={},onUpdateNode:n=(()=>{})}=e;return function(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&n(t.node,t.nodeType,{...t.props,...e})}}})),$i,Xi("activeTab","setActiveTab","general"),Va);function Ka(){return Ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ka.apply(this,arguments)}const qa=(0,bn.Z)(Ht.NavItem);var Ya=n(87320);const Xa=(0,ct.Z)(["placeholder","options"])(sa.ZP),Ja=function(){let{map:e={zoomControl:!0,mapInfoControl:!1},onChangeMap:t=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=e&&e.mapOptions||{},o=(0,Y.kn)({mapOptions:n,zoomControl:!!g()(e.zoomControl)||e.zoomControl,mapInfoControl:!g()(e.mapInfoControl)&&e.mapInfoControl});return Be().createElement(Ht.Form,{className:"ms-geostory-map-controls"},Be().createElement(Ht.FormGroup,null,Be().createElement(Ht.ControlLabel,null,Be().createElement(On.Z,{msgId:"geostory.mapEditor.zoom"})),Be().createElement(Ho,{onChange:()=>{let e=!o.zoomControl;t("zoomControl",e),t("mapOptions.interactions",{doubleClickZoom:e,shiftDragZoom:e,pinchZoom:e})},className:"ms-geostory-map-controls-switch",checked:o.zoomControl}),Be().createElement(Xa,{options:[{label:"geostory.mapEditor.topLeft",value:"topLeft"},{label:"geostory.mapEditor.topRight",value:"topRight"},{label:"geostory.mapEditor.bottomLeft",value:"bottomLeft"},{label:"geostory.mapEditor.bottomRight",value:"bottomRight"}],wrapperStyle:{marginTop:"10px"},value:o.mapOptions&&o.mapOptions.zoomPosition||"topLeft",clearable:!1,disabled:!o.zoomControl,onChange:e=>t("mapOptions.zoomPosition",e&&e.value?e.value:"topLeft"),placeholder:"geostory.builder.settings.titlePlaceholder"})),Be().createElement(Ht.FormGroup,null,Be().createElement(Ht.ControlLabel,null,Be().createElement(On.Z,{msgId:"geostory.mapEditor.pan"})),Be().createElement(Ho,{onChange:()=>{const e=!(o.mapOptions&&o.mapOptions.interactions&&o.mapOptions.interactions.dragPan);t("mapOptions.interactions",{dragPan:e,keyboardPan:e})},className:"ms-geostory-map-controls-switch",checked:o.mapOptions&&o.mapOptions.interactions&&o.mapOptions.interactions.dragPan})),Be().createElement(Ht.FormGroup,null,Be().createElement(Ht.ControlLabel,null,Be().createElement(On.Z,{msgId:"geostory.mapEditor.identify"})),Be().createElement(Ho,{onChange:()=>{let e=!o.mapInfoControl;t("mapInfoControl",e)},className:"ms-geostory-map-controls-switch",checked:o.mapInfoControl}),o.mapInfoControl&&Be().createElement(Ya.Z,{disabled:!o.mapInfoControl,popoverMessage:"geostory.builder.settings.templateTooltip",infoFormat:o.mapOptions&&o.mapOptions.mapInfoFormat||"application/json",onInfoFormatChange:e=>t("mapOptions.mapInfoFormat",e),selectProps:{wrapperStyle:{marginTop:10}}})))};var $a=n(81859),es=n(90690),ts=n(29423),ns=n(21338);const os=(e,t)=>e.reduce(((e,n)=>{let o={...n};return o.nodes&&(o={...o,nodes:os(o.nodes,t)}),t.forEach((e=>{o.nodes&&e.func(o)?o={...o,...e.options}:o.nodes&&(o={...o})})),e.push(o),e}),[]),rs=e=>{let{nodes:t,filterText:n,currentLocale:o}=e;return os(t,[{options:{showComponent:!0},func:()=>!n},{options:{loadingError:!0},func:e=>l()(e.nodes.filter((e=>e.loadingError&&"Warning"!==e.loadingError)))},{options:{expanded:!0,showComponent:!0},func:e=>n&&l()(e.nodes.filter((e=>!0)))}])},is=(0,nt.withProps)((e=>({nodes:rs(e)}))),as=(0,nt.compose)(Ua,is,Fa)((function(){let{changeLayerPropertyByGroup:e=(()=>{}),changeLayerProperty:t=(()=>{}),changeGroupProperty:n=(()=>{}),onSort:o,onSelect:r,selectedNodes:i,nodes:a=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Be().createElement(ns.Z,{onSort:o,selectedNodes:i,onSelect:r,nodes:a},Be().createElement(ts.Z,{groupElement:Be().createElement($a.Z,{onSort:o,selectedNodes:i,onSelect:r,propertiesChangeHandler:(t,n)=>Object.keys(n).map((o=>e(t,o,n[o]))),onToggle:(e,t)=>n(e,"expanded",!t),groupVisibilityCheckbox:!0}),layerElement:Be().createElement(es.Z,{selectedNodes:i,onSelect:r,titleTooltip:!0,propertiesChangeHandler:(e,n)=>Object.keys(n).map((o=>t(e,o,n[o]))),onUpdateNode:(e,n,o)=>Object.keys(o).map((n=>t(e,n,o[n]))),onToggle:(e,n)=>t(e,"expanded",!n)})}))})),ss=(0,nt.withProps)((e=>({tabs:e.tabs||[{id:"toc",titleId:"geostory.mapEditor.toc",tooltipId:"geostory.mapEditor.toc",glyph:"1-layer",visible:!0,Component:as},{id:"settings",titleId:"geostory.mapEditor.settings",tooltipId:"geostory.mapEditor.settings",glyph:"wrench",visible:!0,Component:Ja}]}))),ls=(0,nt.compose)(Xi("activeTab","setActiveTab","toc"),ss),cs=(0,nt.compose)(Qa,(0,nt.withProps)((e=>{let{selectedNode:t}=e;return{title:t&&t.title}})),("title",(0,nt.compose)((0,nt.getContext)({locale:Fe().string}),(0,nt.mapProps)((e=>{let{locale:t,...n}=e;return{...n,...Te()("title").reduce(Ki(n,t),{})}})))))((e=>{let{title:t,description:n}=e;return Be().createElement("div",{className:"text-center"},Be().createElement("div",{className:"mapstore-step-title"},t),Be().createElement("div",{className:"mapstore-step-description"},n))}));const ds=Qa((function(){let{settings:e,element:t={},tabs:n=[],activeTab:o,width:r,groups:i,isLocalizedLayerStylesEnabled:a,setActiveTab:s=(()=>{}),onUpdateParams:l=(()=>{}),onRetrieveLayerData:c=(()=>{}),realtimeUpdate:d,...p}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Be().createElement(Ht.Row,{key:"ms-toc-settings-navbar",className:"ms-row-tab"},Be().createElement(Ht.Col,{xs:12},Be().createElement(Ht.Nav,{bsStyle:"tabs",activeKey:o,justified:!0},n.map((e=>Be().createElement(Yi,{key:"ms-tab-settings-"+e.id,tooltip:Be().createElement(On.Z,{msgId:e.tooltipId}),eventKey:e.id,onClick:()=>s(e.id)},Be().createElement(Ht.Glyphicon,{glyph:e.glyph})))))),Be().createElement(Ht.Col,{xs:12},n.filter((e=>e.id&&e.id===o)).filter((e=>e.Component)).map((n=>Be().createElement(n.Component,qi({},p,{key:"ms-tab-settings-body-"+n.id,containerWidth:r,element:t,groups:i,nodeType:e.nodeType,settings:e,retrieveLayerData:c,isLocalizedLayerStylesEnabled:a,onChange:(e,t)=>L()(e)?l(e,d):l({[e]:t},d)}))))))})),ps=ls((function(){let{tabs:e=[],activeTab:t,width:n,setActiveTab:o=(()=>{}),...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Be().createElement("div",{key:"ms-geostory-map-settings-navbar",className:"ms-row-tab"},Be().createElement("div",null,Be().createElement(Ht.Nav,{bsStyle:"tabs",activeKey:t,justified:!0},e.map((e=>Be().createElement(qa,{key:"ms-tab-settings-"+e.id,tooltipId:e.tooltipId,eventKey:e.id,onClick:()=>o(e.id)},Be().createElement(Ht.Glyphicon,{glyph:e.glyph})))))),Be().createElement("div",null,e.filter((e=>e.id&&e.id===t)).filter((e=>e.Component)).map((e=>Be().createElement(e.Component,Ka({},r,{key:"ms-geostory-tab-settings-body-"+e.id}))))))})),us=(0,nt.branch)((e=>{let{focusedContent:{path:t}={}}=e;return t}),(0,nt.compose)((0,nt.defaultProps)({isFocused:!0,editMap:!0}),Ni,Bi,Hi,Fi,Gi,Ui,Wi,zi))((e=>{let{mode:t=Y.nl.VIEW,isFocused:n=!1,map:o={},onChange:r=(()=>{}),onChangeMap:i=(()=>{}),onNodeSelect:a=(()=>{}),selectedNodes:s,buttons:l=[],editNode:c,closeNodeEditor:d,CloseBtn:p=(()=>null),isDrawEnabled:u}=e;return t===Y.nl.EDIT&&n?Be().createElement("div",{key:"left-column",style:{order:-1,width:400,position:"relative"}},!u&&Be().createElement(He.Z,{className:"ms-geostory-map-editor",header:Be().createElement("div",{className:"ms-geostory-map-editor-header text-center"},Be().createElement(Ht.Row,null,Be().createElement(Ht.Col,{md:12,className:"text-center",style:{overflow:"hidden",lineHeight:"52px"}},Be().createElement(p,{glyph:"1-close",className:"pull-left on-close-btn square-button no-border ",tooltipId:"geostory.contentToolbar.closeMapEditing"}),Be().createElement("div",{className:"mapstore-step-title"},Be().createElement(On.Z,{msgId:"geostory.mapEditor.configureMapOptions"})))),Be().createElement(oo.Z,{transitionProps:!1,btnGroupProps:{className:"ms-geostory-map-editor-toolbar"},btnDefaultProps:{className:"square-button-md no-border",bsStyle:"primary",noTooltipWhenDisabled:!0},buttons:l}))},!!c&&[Be().createElement(cs,{map:o,editNode:c}),Be().createElement(ds,{closeNodeEditor:d,editNode:c,map:o,onChange:r})]||[Be().createElement(ps,{map:o,onChange:r,onChangeMap:i,selectedNodes:s,onSelect:a})])):null}));function ms(){return ms=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ms.apply(this,arguments)}const gs=e=>{const t=()=>Be().createElement("div",{className:"ms-media-error"},Be().createElement(Ht.Glyphicon,{glyph:"exclamation-sign"})),n=e=>{let{style:t={}}=e;return Be().createElement("div",{style:t,className:"ms-media-loader"},Be().createElement(Pn.Z,{size:52}))};return function(o){let r={};const i=o.sectionType;return i!==Y.ID.PARAGRAPH&&i!==Y.ID.IMMERSIVE&&i!==Y.ID.CAROUSEL||o.type!==Y.Tr.IMAGE||(r={paddingTop:(o?.imgHeight||9)/(o?.imgWidth||16)*100+"%"}),o.lazy?Be().createElement(Zn,{key:o.loadingId,id:o.loadingId,debounceTime:o.debounceTime,loading:o.isLoading,onLoad:e=>o.onLoad({...o.loading,[e]:!1}),loaderComponent:n,loaderStyle:r},Be().createElement(e,ms({},o,{type:o.type,loaderComponent:n,loaderStyle:r,errorComponent:t}))):Be().createElement(e,ms({},o,{key:o.id,type:o.mediaType||o.type,loaderComponent:n,errorComponent:t}))}};var hs=n(7848),fs=n(19983);function ys(){return ys=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ys.apply(this,arguments)}const bs={image:(0,nt.branch)((e=>{let{resourceId:t}=e;return t}),(0,nt.compose)((0,Ue.connect)((0,V.P1)(H.jq,(e=>({resources:e})))),(0,nt.withProps)((e=>{let{resources:t,resourceId:n}=e;return(Z()(t,{id:n})||{}).data}))),(0,it.Z)((function(){let{src:e="",sectionType:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!e&&t!==Y.ID.TITLE&&!Ca()([Y.ID.IMMERSIVE,Y.ID.CAROUSEL],t)}),(()=>({glyph:"picture"}))))(gs(Wt)),map:(0,nt.compose)((0,nt.branch)((e=>{let{resourceId:t}=e;return t}),Bi),hs.Z,fs.Z,Zi,Qi,un)(gs(wn)),video:(0,nt.branch)((e=>{let{resourceId:t}=e;return t}),(0,nt.compose)((0,Ue.connect)((0,V.P1)(H.jq,(e=>({resources:e})))),(0,nt.withProps)((e=>{let{resources:t,resourceId:n,autoplay:o}=e;const r=Z()(t,{id:n})||{},{autoplay:i,...a}=r.data||{};return{...a,autoplay:void 0!==o?o:i}}))),(0,it.Z)((function(){let{src:e="",sectionType:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!e&&t!==Y.ID.TITLE&&!Ca()([Y.ID.IMMERSIVE,Y.ID.CAROUSEL],t)}),(()=>({glyph:"play"}))))(gs(In))},As=e=>{let{type:t,...n}=e;const o=bs[t];return o?Be().createElement(o,ys({type:t},n)):null};function Es(){return Es=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Es.apply(this,arguments)}const vs=(0,Ue.connect)((0,V.P1)(H.jq,(e=>({resources:e}))))((e=>{let{resources:t,...n}=e;if(n.resourceId){const e=(Z()(t,{id:n.resourceId})||{}).data||{};return Be().createElement(or,Es({},e,n))}return Be().createElement(or,n)}));function Cs(){return Cs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Cs.apply(this,arguments)}const ws=e=>{let{story:t,mode:n=Y.nl.VIEW,onAdd:o,messages:r,fontFamilies:i=[],storyFonts:a=[],webFont:s=Ye(),onUpdate:l=(()=>{}),onBasicError:c=(()=>{}),onUpdateMediaEditorSetting:d,mediaEditorSettings:p,...u}=e;const m=(0,Re.useCallback)((e=>(0,Je.S$)(r,e)),[r]),g=(e,t,n,r)=>o(e,t,n,r?m(r):m);return(0,Re.useEffect)((()=>{window.__geostory_interaction=(e,t)=>{"scrollTo"===e&&(0,Y.M1)(t,{behavior:"smooth"})}}),[]),(0,Re.useEffect)((()=>{l("settings.theme.fontFamilies",i,"merge"),p&&d(p)}),[]),(0,Re.useEffect)((()=>{a.length>0&&a.filter((e=>{let{src:t}=e;return t&&!document.head.querySelector(`link[href='${t}']`)})).length>0&&s.load((0,Y.bm)(a,(()=>{}),(()=>c({message:"geostory.builder.settings.webFontLoadError"}))))}),[a]),Be().createElement(He.Z,{className:"ms-geostory",columns:[Be().createElement(us,Cs({},u,{add:g,update:l,mode:n}))]},Be().createElement(xi,Cs({},t,u,{storyFonts:(0,Y._R)(a),add:g,update:l,mode:n,mediaViewer:As,contentToolbar:vs})))};ws.defaultProps={storyFonts:[],fontFamilies:[],onUpdateMediaEditorSetting:()=>{}};const Ss=(0,Xe.rx)("GeoStory",{component:(0,Ue.connect)((0,V.zB)({mode:H.eK,story:H.Kg,messages:et.Ps,focusedContent:H.FW,isContentFocused:H.z7,theme:e=>(0,H.TQ)(e)?.theme||{},storyFonts:H.mm,isDrawEnabled:H.HB}),{onAdd:x.IH,onUpdate:x.Vx,updateCurrentPage:x.RZ,onUpdateSetting:x.m7,remove:x.Od,onSort:x.pB,editMedia:(e,t)=>{let{path:n,owner:o="geostory"}=e;return{type:B,path:n,owner:o,sectionType:t}},editWebPage:x.o2,onBasicError:$e.d,onUpdateMediaEditorSetting:x.Fu,onEnableDraw:x.EE})(ws),reducers:{geostory:De},epics:o});var Ps=n(24684);function Os(){return Os=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Os.apply(this,arguments)}const Ts=e=>{let{tabindex:t,text:n,selected:o,style:r}=e;return Be().createElement(En.Z,{tabindex:t,className:(o?"active":"btn-tray")+" btn-xs btn-default",style:r},n)},Is=(0,An.Z)((e=>{let{currentPage:t,items:n,scrollTo:o=(()=>{}),width:r,height:i,deltaSwipeSize:a=200,transition:s=300,updateTimeDebounceTime:l=500,getItemStyle:c=(()=>({}))}=e;const{isStartControlActive:d,isEndControlActive:p,containerPropsHandlers:u,contentPropsHandlers:m,itemPropsHandlers:g,moveToDeltaSize:h,moveItemInViewById:f}=ai({direction:"horizontal",width:r,height:i,transition:s,deltaScroll:a}),y=t&&t.columns&&t.sectionId&&t.columns[t.sectionId]||t&&t.sectionId,b=(e,n,o)=>o===Y.ID.CAROUSEL?t&&t.sectionId===e:n===e,A=(0,Re.useRef)(null);return(0,Re.useEffect)((()=>(A.current=Hn()((e=>{f(e,{margin:32})}),l),()=>{A.current&&(A.current.cancel(),A.current=null)})),[]),(0,Re.useEffect)((()=>{A.current&&(A.current.cancel(),A.current(y))}),[y]),Be().createElement("div",Os({},u(),{className:"ms-horizontal-menu"}),Be().createElement("div",m(),n.map((e=>{let{title:n,id:r,type:i}=e;const a=g({id:r,onClick:()=>{t&&t.sectionId!==r&&o(r)}});return Be().createElement("div",Os({},a,{className:"ms-menu-item"}),Be().createElement(Ts,{tabindex:"-1",id:r,text:n||"title",selected:b(r,y,i),style:c(b(r,y,i))}))}))),d&&Be().createElement(En.Z,{className:"square-button-md no-border",style:{position:"absolute"},onClick:()=>h(a)},Be().createElement(Ht.Glyphicon,{glyph:"chevron-left"})),p&&Be().createElement(En.Z,{className:"square-button-md no-border",style:{position:"absolute",right:0},onClick:()=>h(-a)},Be().createElement(Ht.Glyphicon,{glyph:"chevron-right"})))}));var _s=n(78718),Ms=n.n(_s);function xs(){return xs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},xs.apply(this,arguments)}function ks(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ds extends Be().Component{constructor(){super(...arguments),ks(this,"checkUnsavedChanges",(()=>{this.props.renderUnsavedMapChangesDialog?this.props.onCheckMapChanges(this.goHome):(this.props.onCloseUnsavedDialog(),this.goHome())})),ks(this,"goHome",(()=>{this.context.router.history.push((()=>{const e=Gn.ZP.getConfigProp("miscSettings");return E()(e,["homePath"],"/")})())}))}render(){const{tooltipPosition:e,...t}=this.props;let n=Be().createElement(Ht.Tooltip,{id:"toolbar-home-button"},Be().createElement(On.Z,{msgId:"gohome"}));return Be().createElement(Be().Fragment,null,Be().createElement(na.Z,{overlay:n,placement:e},Be().createElement(En.Z,xs({id:"home-button",className:"square-button",bsStyle:"primary",onClick:this.checkUnsavedChanges,tooltip:n},Ms()(t,["disabled","active","block","componentClass","href","children","icon","bsStyle","className"])),this.props.icon)),Be().createElement(Kr.Z,{ref:"unsavedMapModal",show:this.props.displayUnsavedDialog||!1,onClose:this.props.onCloseUnsavedDialog,title:Be().createElement(On.Z,{msgId:"resources.maps.unsavedMapConfirmTitle"}),buttons:[{bsStyle:"primary",text:Be().createElement(On.Z,{msgId:"resources.maps.unsavedMapConfirmButtonText"}),onClick:this.goHome},{text:Be().createElement(On.Z,{msgId:"resources.maps.unsavedMapCancelButtonText"}),onClick:this.props.onCloseUnsavedDialog}],fitContent:!0},Be().createElement("div",{className:"ms-detail-body"},Be().createElement(On.Z,{msgId:"resources.maps.unsavedMapConfirmMessage"}))))}}ks(Ds,"propTypes",{icon:Fe().node,onCheckMapChanges:Fe().func,onCloseUnsavedDialog:Fe().func,displayUnsavedDialog:Fe().bool,renderUnsavedMapChangesDialog:Fe().bool,tooltipPosition:Fe().string}),ks(Ds,"contextTypes",{router:Fe().object,messages:Fe().object}),ks(Ds,"defaultProps",{icon:Be().createElement(Ht.Glyphicon,{glyph:"home"}),onCheckMapChanges:()=>{},onCloseUnsavedDialog:()=>{},renderUnsavedMapChangesDialog:!0,tooltipPosition:"left"});const Ls=Ds,Rs=e=>{let{settings:t,scrollTo:n=(()=>{}),navigableItems:o=[],currentPage:r={},totalItems:i=1,currentPosition:a=0,router:s,buttons:l=[]}=e;const c=t?.theme?.general,{fontFamily:d,borderColor:p,color:u,backgroundColor:m}=L()(c)&&c||{},{isTitleEnabled:g,isLogoEnabled:h,isNavbarEnabled:f}=t||{},y=l.length>0,b=s&&s.pathname&&s.search&&"true"===(A=s.search,Un.Qc(A)).showHome&&s.pathname.includes("/geostory/shared");var A;const E=f&&o?.length>0,v=g||h||E||y||b;return Be().createElement("div",{className:"ms-geostory-navigation-bar",style:{color:u,backgroundColor:m,...p&&{borderBottom:`1px solid ${p}`},fontFamily:d}},Be().createElement("div",{className:"progress-bar",key:"progress-bar",style:{backgroundColor:p}},Be().createElement("div",{className:"progress-percent",style:{width:(a+1)/i*100+"%",backgroundColor:u}})),v&&Be().createElement("div",{className:"ms-geostory-navigation-tools"},Be().createElement("div",{className:"ms-geostory-navigation-toolbar"},Be().createElement(oo.Z,{buttons:l}),b&&Be().createElement(Ls,{bsStyle:"default",className:"square-button-md no-border",tooltipPosition:"right",renderUnsavedMapChangesDialog:!1})),Be().createElement("div",{className:"ms-geostory-navigation-elements"},E?Be().createElement("div",{className:"ms-geostory-navigation-navigable-items"},Be().createElement(Is,{items:o,currentPage:r,scrollTo:n,getItemStyle:e=>e?{color:m,backgroundColor:u}:{outlineColor:u,borderColor:u}})):null,Be().createElement("div",{className:"ms-geostory-navigation-metadata"},g&&Be().createElement("div",{className:"ms-geostory-navigation-title",style:{fontSize:t.storyTitleFontSize||"14px"}},t.storyTitle),h&&Be().createElement("div",{className:"ms-geostory-navigation-logo"},Be().createElement("img",{src:t.thumbnail&&(t.thumbnail.data||t.thumbnail.url)||"",height:32}))))))},Bs=(0,Xe.rx)("GeoStoryNavigation",{component:(0,Ue.connect)((0,V.zB)({mode:H.eK,settings:H.TQ,currentPage:H.PR,currentPosition:H.u5,totalItems:H.CK,navigableItems:(0,H.w)({includeAlways:!1}),pathname:Ps.F,search:Ps.y}))((e=>{let{mode:t=Y.nl.VIEW,currentPage:n,currentPosition:o,totalItems:r,settings:i,navigableItems:a=[],pathname:s,search:l,items:c=[]}=e;const d=c.filter((e=>{let{tool:t}=e;return t})).map((e=>{let{tool:t}=e;return{Element:t}}));return t===Y.nl.VIEW?Be().createElement("div",{key:"geostory-navigation",className:"ms-geostory-navigation",style:{width:"100%",position:"relative"}},Be().createElement(Rs,{settings:i,currentPage:n,currentPosition:o,totalItems:r,scrollTo:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{behavior:"smooth"};(0,Y.M1)(e,t)},navigableItems:a,router:{pathname:s,search:l},buttons:d})):null})),reducers:{geostory:De}});var Ns=n(68741),Fs=n(77314),Us=n(79870);const Gs={plugins:{GeoStoryPlugin:Ss,GeoStoryNavigationPlugin:Bs,FeedbackMaskPlugin:Ns.Z},requires:{ReactSwipe:Fs.Z,SwipeHeader:Us.Z}};var js=n(76015);(0,n(98223).Rw)(Gs.plugins),(0,js.Z)(Ke,Gs,(e=>({...e,initialActions:[r.loadVersion]})))},66113:(e,t,n)=>{"use strict";n.d(t,{$F:()=>h,Kg:()=>f,PR:()=>y,eK:()=>b,bI:()=>A,TQ:()=>v,vv:()=>C,jq:()=>w,Tr:()=>S,w:()=>P,CK:()=>O,u5:()=>T,z7:()=>I,FW:()=>_,GC:()=>M,JM:()=>x,bU:()=>k,mm:()=>D,X6:()=>L,NR:()=>R,I0:()=>B,eB:()=>N,HB:()=>F});var o=n(27361),r=n.n(o),i=n(13311),a=n.n(i),s=n(30998),l=n.n(s),c=(n(18446),n(44908)),d=n.n(c),p=n(64721),u=n.n(p),m=n(92579),g=(n(74621),n(24684));const h=e=>t=>r()(t,(0,m.Ll)(`geostory.currentStory.${e}`,t),""),f=e=>r()(e,"geostory.currentStory"),y=e=>r()(e,"geostory.currentPage",{}),b=e=>r()(e,"geostory.mode"),A=e=>r()((e=>r()(e,"geostory.resource"))(e),"id"),E=e=>r()(f(e),"sections",[]),v=e=>{const t=r()(f(e),"settings",{}),n=E(e).filter((e=>{let{type:t}=e;return u()([m.ID.CAROUSEL,m.ID.IMMERSIVE],t)})),o=t.checked||[],i=d()(o.map((e=>(0,m.Un)(n,e))).filter((e=>e)));return{...t,expanded:i}},C=e=>t=>h(`${e}.resourceId`)(t),w=e=>r()(f(e),"resources",[]),S=e=>t=>a()(w(t),{id:e}),P=function(){let{withImmersiveSection:e=!1,includeAlways:t=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n=>{const o=E(n),i=(e=>r()(v(e),"checked",[]).reduce(((e,t)=>({...e,[t]:!0})),{}))(n);return o.reduce(((n,o)=>{if(o.type===m.ID.TITLE&&(t||i[o.id]))return[...n,o];if(o.type===m.ID.PARAGRAPH&&(t||i[o.id]))return[...n,o];if(o.type===m.ID.BANNER&&(t||i[o.id]))return[...n,o];if(o.type===m.ID.CAROUSEL&&(t||i[o.id]))return[...n,o];if(o.type===m.ID.IMMERSIVE){const r=o.contents&&o.contents.reduce(((e,n)=>t||i[n.id]?[...e,{...n,sectionId:e.id}]:e),[])||[];return e?[...n,o,...r]:[...n,...r]}return n}),[])}},O=e=>P({includeAlways:!0})(e).length,T=e=>{const t=(e=>{const t=y(e);return l()(P({includeAlways:!0})(e),{id:t.columns&&t.columns[t.sectionId]?t.columns[t.sectionId]:t.sectionId||""})})(e);return-1!==t?t:l()(P({includeAlways:!0})(e),{id:y(e).sectionId})},I=e=>void 0!==r()(e,"geostory.focusedContent.target"),_=e=>r()(e,"geostory.focusedContent"),M=e=>h(r()(e,"geostory.focusedContent.path",""))(e),x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,g.F)(e).includes("geostory/shared")},k=e=>r()(e,"geostory.updateUrlOnScroll",!1),D=e=>r()(e,"geostory.currentStory.settings.theme.fontFamilies",[]),L=e=>r()(e,"geostory.mediaEditorSettings"),R=e=>(f(e)?.sections||[]).filter((e=>{let{type:t}=e;return t===m.ID.CAROUSEL})),B=e=>t=>!!a()(R(t),{id:e}),N=e=>t=>{const n=a()(R(t)||[],{id:e});return n?.contents||[]},F=e=>!!e?.geostory?.drawOptions},75110:(e,t,n)=>{"use strict";n.d(t,{l2:()=>E,CA:()=>v,W6:()=>C,jN:()=>w,Rt:()=>S});var o=n(22222),r=(n(52259),n(7412)),i=(n(24262),n(18412)),a=n(90183),s=n(7877),l=n(27361),c=n.n(l),d=n(91175),p=n.n(d),u=(n(41609),n(13311)),m=n.n(u),g=n(13218),h=n.n(g),f=n(1469),y=n.n(f),b=n(84596),A=n.n(b);n(14293),n(59112),n(827);const E=function(){let{layers:e,config:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&y()(e)?e:e&&e.flat||t&&t.layers||[]},v=(e,t)=>p()(E(e).filter((e=>e.id===t))),C=((0,o.P1)([E,s.Dg,e=>e.search&&e.search,e=>c()(e,"mapInfo.centerToMarker",""),e=>c()(e,"additionallayers",[]),e=>e.annotations&&e.annotations.showMarker&&e.annotations.clickPoint],(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0;const c=s.filter((e=>{let{actionType:t}=e;return"override"===t})),d=s.filter((e=>{let{actionType:t}=e;return"overlay"===t})).map((e=>e.options));let u=e.map((e=>{const{options:t}=p()(c.filter((t=>t.id===e.id)))||{};return t?{...e,...t}:{...e}}));if(u=u.concat(d),t){u.push((0,r.su)("GetFeatureInfoHighLight",{features:t.features},void 0,{overrideOLStyle:!0,featuresCrs:t.featuresCrs,style:{...i.be,color:"#3388ff",weight:4,dashArray:"",fillColor:"#3388ff",fillOpacity:.2}}));const e="enabled"===o?(0,a.getNormalizedLatLon)(t.latlng):t.latlng;u.push((0,r.su)("GetFeatureInfo",e))}if(l){const e="enabled"===o?(0,a.getNormalizedLatLon)(l.latlng):l.latlng;u.push((0,r.su)("Annotations",e)),u.push((0,r.su)("GetFeatureInfo",{...e}))}if(n&&n.markerPosition){let e=h()(n.style)&&n.style||{};u.push((0,r.su)("GeoCoder",n.markerPosition,"marker",{overrideOLStyle:!0,style:{...i.be,...e}},n.markerLabel))}return u})),e=>e.layers&&e.layers.flat&&e.layers.groups||[]),w=e=>e.layers&&e.layers.settings||{expanded:!1,options:{opacity:1}},S=(e,t)=>(E(e)||[]).filter((e=>e&&e.dimensions&&m()(A()(e.dimensions),{name:t})))},8316:(e,t,n)=>{"use strict";n.d(t,{Pz:()=>a,Ps:()=>s});var o=n(22222),r=n(91175),i=n.n(r);const a=e=>e.locale&&e.locale.current||"en-US",s=e=>e.locale&&e.locale.messages||{};(0,o.P1)([a],(e=>i()(e.split("-"))))},24684:(e,t,n)=>{"use strict";n.d(t,{F:()=>i,y:()=>a});var o=n(27361),r=n.n(o);const i=e=>r()(e,"router.location.pathname")||"/",a=e=>r()(e,"router.location.search")||""},74621:(e,t,n)=>{"use strict";n.d(t,{np:()=>o,jl:()=>r,qg:()=>i}),n(27418),n(27361);const o=e=>e&&e.security&&e.security.user,r=e=>e&&e.security&&e.security.user,i=e=>"ADMIN"===(e=>o(e)&&o(e).role)(e)},43143:(e,t,n)=>{"use strict";n.d(t,{qq:()=>d});var o=n(17621),r=n.n(o),i=n(14841),a=n.n(i),s=n(64721),l=n.n(s);let c;const d=(e,t,n)=>{const o=r()(e);return e&&o.setAlpha(a()(void 0!==t?t:o.getAlpha())).toRgbString()||n},p=e=>{const t=Math.round,n=Math.random,o=[t(255*n()),t(255*n()),t(255*n())],r=c.rgbToHex(o);if(e)for(;l()(e,r)||"#000000"===r||"#FFFFFF"===r;)p(e);return r};c={decToHex:e=>{const t="0123456789ABCDEF";let n=parseInt(e,10);return n=isNaN(n)?0:n,n=n>255||n<0?0:n,t.charAt((n-n%16)/16)+t.charAt(n%16)},rgbToHex:(e,t,n)=>e instanceof Array?c.rgbToHex(e[0],e[1],e[2]):"#"+c.decToHex(e)+c.decToHex(t)+c.decToHex(n),realToDec:e=>Math.min(255,Math.round(256*e)),rgbToHsv:(e,t,n)=>{if(e instanceof Array)return c.rgbToHsv(e[0],e[1],e[2]);let o,r,i,a,s,l=e/255,d=t/255,p=n/255;switch(o=Math.min(Math.min(l,d),p),r=Math.max(Math.max(l,d),p),i=r-o,r){case o:a=0;break;case l:a=60*(d-p)/i,d<p&&(a+=360);break;case d:a=60*(p-l)/i+120;break;case p:a=60*(l-d)/i+240}return s=0===r?0:1-o/r,[Math.round(a),s,r]},distributedColorsHEX:e=>{let t=360/(e-1),n=[];const o=(e,t,n)=>{let r=o(e,t,n);return c.rgbToHex(r)};for(let r=0;r<e;r++)n.push(o(t*r,.57,.63,r));return n},sameToneRangeColors:(e,t,n,o)=>{let r=e;isNaN(parseFloat(e))&&(r=c.hexToHsv(e)[0]);let i=.5/(n-1),a=t/(n-1),s=[];1===n&&(i=.5,a=t/2);for(let e=0;e<n;e++){let n=r+e*a-t/2,l=i*e+.3,d=l;o&&(n=o.h||n,l=o.s||l,d=o.v||d),s.push(c.hsvToHex(n,l,d,e))}return s},hsvToRgb:(e,t,n)=>{if(e instanceof Array)return c.hsvToRgb(e[0],e[1],e[2]);let o,r,i,a=Math.floor(e/60%6),s=e/60-a,l=n*(1-t),d=n*(1-s*t),p=n*(1-(1-s)*t);switch(a){case 0:o=n,r=p,i=l;break;case 1:o=d,r=n,i=l;break;case 2:o=l,r=n,i=p;break;case 3:o=l,r=d,i=n;break;case 4:o=p,r=l,i=n;break;case 5:o=n,r=l,i=d}return[c.realToDec(o),c.realToDec(r),c.realToDec(i)]},hsvToHex:(e,t,n)=>{let o=c.hsvToRgb(e,t,n);return c.rgbToHex(o)},hexToHsv:e=>{let t=e;if(t.length>0){"#"===t[0]&&(t=e.substring(1));let n=c.hexToRgb(t);return c.rgbToHsv(n)}return null},hexToRgb:e=>{let t,n,o,r=e;return"#"===r.charAt(0)&&(r=e.substring(1)),t=r.charAt(0)+r.charAt(1),n=r.charAt(2)+r.charAt(3),o=r.charAt(4)+r.charAt(5),[parseInt(t,16),parseInt(n,16),parseInt(o,16)]},colorToHexStr:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"red";return r()(e).toHexString()},colorToRgbaStr:d,generateRandomHexColor:p}},90183:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FORMULAS:()=>Z,getProjUrl:()=>Q,determineCrs:()=>q,normalizePoint:()=>X,reproject:()=>$,reprojectExtent:()=>te,getPolygonFromExtent:()=>ne,getExtentFromNormalized:()=>oe,crsCodeTable:()=>re,setCrsLabels:()=>ie,getUnits:()=>ae,getProjectedBBox:()=>se,createBBox:()=>le,reprojectGeoJson:()=>ce,lineIntersectPolygon:()=>de,normalizeLng:()=>pe,reprojectBbox:()=>ue,bboxToFeatureGeometry:()=>me,getCompatibleSRS:()=>ge,getEquivalentSRS:()=>he,getEPSGCode:()=>fe,normalizeSRS:()=>Ae,isAllowedSRS:()=>Ee,getAvailableCRS:()=>ve,filterCRSList:()=>Ce,calculateAzimuth:()=>we,calculateDistance:()=>Se,extendExtent:()=>Pe,getGeoJSONExtent:()=>Oe,isValidExtent:()=>Te,calculateCircleCoordinates:()=>Ie,transformLineToArcs:()=>_e,transformArcsToLine:()=>Me,coordsOLtoLeaflet:()=>xe,mergeToPolyGeom:()=>ke,getViewportGeometry:()=>De,getExtentFromViewport:()=>Le,fetchProjRemotely:()=>Re,parseURN:()=>Be,parseString:()=>Ne,getWMSBoundingBox:()=>Fe,isSRSAllowed:()=>Ue,getNormalizedLatLon:()=>Ge,isInsideVisibleArea:()=>je,centerToVisibleArea:()=>We,calculateCircleRadiusFromPixel:()=>He,roundCoord:()=>ze,midpoint:()=>Ze,pointObjectToArray:()=>Ve,isPointInsideExtent:()=>Qe,isBboxCompatible:()=>Ke,extractCrsFromURN:()=>qe,makeNumericEPSG:()=>Ye,makeBboxFromOWS:()=>Xe,getPolygonFromCircle:()=>Je,getProjections:()=>$e,getExtentForProjection:()=>et,checkIfLayerFitsExtentForProjection:()=>tt,getLonLatFromPoint:()=>nt,convertRadianToDegrees:()=>ot,convertDegreesToRadian:()=>rt,setValueBoundaries:()=>it,default:()=>at});var o=n(68103),r=n(90173),i=n(75875),a=n.n(i),s=n(27418),l=n.n(s),c=n(1469),d=n.n(c),p=n(13218),u=n.n(p),m=n(23560),g=n.n(m),h=n(42348),f=n.n(h),y=n(8400),b=n.n(y),A=n(50361),E=n.n(A),v=n(81763),C=n.n(v),w=n(12571),S=n.n(w),P=n(91175),O=n.n(P),T=n(10928),I=n.n(T),_=n(68898),M=n(67703),x=n.n(M),k=n(73345),D=n.n(k),L=n(7725),R=n(23384),B=n.n(R),N=n(81965),F=n(89733),U=n(35462),G=n(13292),j=n.n(G),W=n(37275);const H=r.default;let z;const Z={vincenty:e=>{let t=0;for(let n=0;n<e.length-1;++n){const r=e[n],i=e[n+1],[a,s]=r,[l,c]=i;t+=parseFloat(o.Kl({longitude:a,latitude:s},{longitude:l,latitude:c}))}return t},haversine:e=>{let t=0;for(let n=0;n<e.length-1;++n){const r=e[n],i=e[n+1],[a,s]=r,[l,c]=i;t+=parseFloat(o.e8({longitude:a,latitude:s},{longitude:l,latitude:c}))}return t}};function V(e,t){return(n=e).length>=2&&"number"==typeof n[0]&&"number"==typeof n[1]?t(e):e.map((function(e){return V(e,t)}));var n}const Q=e=>`http://spatialreference.org/ref/epsg/${e}/proj4/`;function K(e,t,n){if(null===e)return e;let o=E()(e);return"Feature"===e.type?o.geometry=K(e.geometry,t,n):"FeatureCollection"===e.type?o.features=o.features.map((function(e){return K(e,t,n)})):"GeometryCollection"===e.type?o.geometries=o.geometries.map((function(e){return K(e,t,n)})):t&&t(o),n&&n(o),o}function q(e){return"string"==typeof e||e instanceof String?r.default.defs(e)?new r.default.Proj(e):null:e}let Y={"EPSG:4326":"WGS 84","EPSG:3857":"EPSG:3857"};const X=e=>({x:e.x||0,y:e.y||0,srs:e.srs||e.crs||"EPSG:4326",crs:e.srs||e.crs||"EPSG:4326"}),J=e=>{let t=e;return C()(e.x)||(t.x=parseFloat(e.x)),C()(e.y)||(t.y=parseFloat(e.y)),t},$=function(e,t,n){let o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=t&&r.default.defs(t)?new r.default.Proj(t):null,a=n&&r.default.defs(n)?new r.default.Proj(n):null;if(i&&a){let s=d()(e)?r.default.toPoint(e):r.default.toPoint([e.x,e.y]);const c=l()({},t===n?J(s):r.default.transform(i,a,J(s)),{srs:n});return o?X(c):c}return null},ee=["EPSG:900913","EPSG:4326","EPSG:3857"],te=(e,t,n)=>"EPSG:4326"===t?e:n?e.map((e=>[$([e[0],e[1]],"EPSG:4326",t),$([e[2],e[3]],"EPSG:4326",t)].reduce(((e,t)=>[...e,t.x,t.y]),[]))):[$([e[0],e[1]],"EPSG:4326",t),$([e[2],e[3]],"EPSG:4326",t)].reduce(((e,t)=>[...e,t.x,t.y]),[]),ne=e=>e?e.hasOwnProperty("geometry")&&"Polygon"===e.geometry.type?e:(0,N.Z)(e):null,oe=(e,t)=>{const n=((e,t)=>{const n="EPSG:4326"!==t?[$([parseFloat(e.minx),parseFloat(e.miny)],t,"EPSG:4326"),$([parseFloat(e.maxx),parseFloat(e.maxy)],t,"EPSG:4326")].reduce(((e,t)=>[...e,t.x,t.y]),[]):[parseFloat(e.minx),parseFloat(e.miny),parseFloat(e.maxx),parseFloat(e.maxy)];let o=!1;return"EPSG:4326"===t?o=Math.abs(e.maxx-e.minx)>=360:"EPSG:900913"!==t&&"EPSG:3857"!==t||(o=Math.abs(e.maxx-e.minx)>=40075016.68557849),o?[0,n[1],360,n[3]]:[(n[0]+180)%360,n[1],(n[2]+180)%360,n[3]].map(((e,t)=>t%2==0&&e<0?360+e:e))})(e,t),o=n[2]<n[0];return o?{extent:te([[-180,n[1],n[2]-180,n[3]],[n[0]-180,n[1],180,n[3]]],t,o),isIDL:o}:{extent:te([n[0]-180,n[1],n[2]-180,n[3]],t,o),isIDL:o}},re={wgs84:4326,wgs1984:4326,crs84:4326,ogccrs84:4326,lambert93:2154,rgflambert93:2154},ie=e=>{Y=l()({},Y,e)},ae=function(e){return new r.default.Proj(e).units||"degrees"},se=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3?arguments[3]:void 0,r=t*o[0]/2,i=t*o[1]/2,a=Math.cos(n),s=Math.sin(n),l=r*a,c=r*s,d=i*a,p=i*s,u=e.x,m=e.y,g=u-l+p,h=u-l-p,f=u+l-p,y=u+l+p,b=m-c-d,A=m-c+d,E=m+c+d,v=m+c-d;return z.createBBox(Math.min(g,h,f,y),Math.min(b,A,E,v),Math.max(g,h,f,y),Math.max(b,A,E,v))},le=(e,t,n,o)=>({minx:e,miny:t,maxx:n,maxy:o}),ce=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EPSG:4326",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"EPSG:4326";"string"==typeof t&&(t=q(t)),"string"==typeof n&&(n=q(n));let o=H(t,n);return K(e,(e=>{e.crs&&delete e.crs,e.coordinates=V(e.coordinates,(e=>{let[t,n]=e;return o.forward([t,n])}))}),(e=>{e.bbox&&(e.bbox=(()=>{let t=[Number.MAX_VALUE,Number.MAX_VALUE],n=[-Number.MAX_VALUE,-Number.MAX_VALUE];return K(e,(function(e){V(e.coordinates,(function(e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),n[0]=Math.max(n[0],e[0]),n[1]=Math.max(n[1],e[1])}))})),[t[0],t[1],n[0],n[1]]})())}))},de=function(e,t){let n=D()(t).features[0];return 0!==x()(e,n).features.length},pe=e=>{let t=e/360%1*360;return t<-180?t+=360:t>180&&(t-=360),t},ue=function(e,t,n){let o,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];o=d()(e)?{sw:[e[0],e[1]],ne:[e[2],e[3]]}:{sw:[e.minx,e.miny],ne:[e.maxx,e.maxy]};let i=[];for(let e in o)if(o.hasOwnProperty(e)){const a=z.reproject(o[e],t,n,r);if(!a)return null;{let{x:e,y:t}=a;i.push(e),i.push(t)}}return i},me=e=>{const t=d()(e)?{minx:e[0],miny:e[1],maxx:e[2],maxy:e[3]}:e,{minx:n,miny:o,maxx:r,maxy:i}=t;return{type:"Polygon",coordinates:[[[n,o],[n,i],[r,i],[r,o],[n,o]]]}},ge=(e,t)=>"EPSG:900913"===e&&!t["EPSG:900913"]&&t["EPSG:3857"]?"EPSG:3857":"EPSG:3857"===e&&!t["EPSG:3857"]&&t["EPSG:900913"]?"EPSG:900913":e,he=e=>"EPSG:900913"===e||"EPSG:3857"===e?["EPSG:3857","EPSG:900913"]:[e],fe=e=>-1!==e.indexOf(":")?"EPSG:"+e.substring(e.lastIndexOf(":")+1):e,ye=["EPSG:900913","EPSG:3857","EPSG:3785","EPSG:102113","GOOGLE"],be=["EPSG:4326","WGS84"],Ae=function(e,t){const n=-1!==ye.indexOf(e)?"EPSG:3857":-1!==be.indexOf(e)?"EPSG:4326":e;return t&&!t[n]?z.getCompatibleSRS(n,t):n},Ee=(e,t)=>t[z.getCompatibleSRS(e,t)],ve=function(){let e={};for(let t in r.default.defs)r.default.defs.hasOwnProperty(t)&&(e[t]={label:Y[t]||t});return e},Ce=(e,t,n,o)=>{let r=Object.keys(e).reduce(((n,o)=>l()({},-1===t.indexOf(o)?n:{...n,[o]:e[o]})),{});const i=o.map((e=>e.code));let a=Object.keys(n).reduce(((e,t)=>l()({},-1===i.indexOf(t)?e:{...e,[t]:n[t]})),{});return l()({},r,a)},we=function(e,t,n){var o=z.reproject(e,n,"EPSG:4326"),r=z.reproject(t,n,"EPSG:4326"),i=o.x*Math.PI/180,a=o.y*Math.PI/180,s=r.x*Math.PI/180,l=r.y*Math.PI/180,c=s-i,d=Math.sin(c)*Math.cos(l),p=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(c);return(180*Math.atan2(d,p)/Math.PI+360)%360},Se=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"haversine";return e.length>=2&&-1!==Object.keys(Z).indexOf(t)?Z[t](e):0},Pe=function(e,t){let n=e.slice();return t[0]<e[0]&&(n[0]=t[0]),t[2]>e[2]&&(n[2]=t[2]),t[1]<e[1]&&(n[1]=t[1]),t[3]>e[3]&&(n[3]=t[3]),n},Oe=function(e){let t=[1/0,1/0,-1/0,-1/0];const n=(e,t)=>{let n=z.getGeoJSONExtent(t);return z.isValidExtent(n)?z.extendExtent(n,e):n};if(e.coordinates){if("Point"===e.type){let n=e.coordinates;t[0]=n[0]-.01*n[0],t[1]=n[1]-.01*n[1],t[2]=n[0]+.01*n[0],t[3]=n[1]+.01*n[1]}return b()(f()(e.coordinates),2).reduce(((e,t)=>[t[0]<e[0]?t[0]:e[0],t[1]<e[1]?t[1]:e[1],t[0]>e[2]?t[0]:e[2],t[1]>e[3]?t[1]:e[3]]),t)}if("GeometryCollection"===e.type)return e.geometries.reduce(n,t);if(e.type){if("FeatureCollection"===e.type)return e.features.reduce(n,t);if("Feature"===e.type&&e.geometry)return z.getGeoJSONExtent(e.geometry)}return t},Te=function(e){return!(-1!==e.indexOf(1/0)||-1!==e.indexOf(-1/0)||e[0]>e[2]||e[1]>e[3])},Ie=function(e,t,n,o){let r,i,a,s=Math.PI*(1/n-.5);o&&(s+=o/180*Math.PI);let l=[[]];for(let o=0;o<n;o++)r=s+2*o*Math.PI/n,i=e.x+t*Math.cos(r),a=e.y+t*Math.sin(r),l[0].push([i,a]);return l[0].push(l[0][0]),l},_e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{npoints:100,offset:10,properties:{}},n=[];for(let o=0;o<e.length-1;++o){const r=e[o],i=e[o+1],a=B()(r),s=B()(i);if(r[0]!==i[0]||r[1]!==i[1]){let e=(0,L.Z)(a,s,t);n=[...n,...e.geometry.coordinates]}}return n},Me=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e.length<=t?[O()(e),I()(e)]:e.length>t?[O()(e)].concat(z.transformArcsToLine(S()(e,t))):[]},xe=e=>{let{coordinates:t,type:n}=e;switch(n){case"Polygon":return t.map((e=>e.map((e=>e.reverse()))));case"LineString":return t.map((e=>e.reverse()));case"Point":return t.reverse();default:return[]}},ke=e=>1===e.length?e[0].geometry:{type:"GeometryCollection",geometries:e.map((e=>{let{geometry:t}=e;return t}))},De=(e,t)=>{if(O()(ee.filter((e=>e===t)))){const{extent:n,isIDL:o}=oe(e,t),r=(o?n:[n]).map((e=>{const t=[e[0],e[1]],n=[e[2],e[3]];return[[t,[t[0],n[1]],n,[n[0],t[1]],t]]}));if(o){let e=n[1][0]+(Math.abs(n[0][0]-n[0][2])+Math.abs(n[1][0]-n[1][2]))/2;return e=e>180?e-360:e,{type:"MultiPolygon",radius:0,projection:t,coordinates:r,extent:n,center:[e,(n[0][1]+n[0][3])/2]}}return{type:"Polygon",radius:0,projection:t,coordinates:r[0],extent:n,center:[(n[0]+n[2])/2,(n[1]+n[3])/2]}}const n=[e.minx,e.miny,e.maxx,e.maxy],o=[n[0],n[1]],r=[n[2],n[3]];return{type:"Polygon",radius:0,projection:t,coordinates:[[o,[o[0],r[1]],r,[r[0],o[1]],o]],extent:n,center:[(n[0]+n[2])/2,(n[1]+n[3])/2]}},Le=function(){let{bounds:e,crs:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EPSG:4326";if(!e||!t)return null;const{extent:o}=z.getViewportGeometry(e,t);if(4===o.length)return z.reprojectBbox(o,t,n);const[r,i]=o.map((e=>e[2]-e[0]));return r>i?z.reprojectBbox(o[0],t,n):z.reprojectBbox(o[1],t,n)},Re=(e,t)=>{const n=2===e.split(":").length?e.split(":")[1]:"3857";return a().get(t||Q(n),null,{timeout:2e3})},Be=e=>{const t=e&&e.properties&&e.properties.name||e&&e.name||e&&e.properties&&e.properties.code||e;let n=t&&I()(t.split(":"));return"WGS 1984"===n||"WGS84"===n?"EPSG:4326":n?"EPSG:"+n:null},Ne=e=>{const t=e.split(" "),n=parseFloat(t[0]),o=parseFloat(t[1]);return!isNaN(n)&&!isNaN(o)&&{x:n,y:o}||null},Fe=(e,t)=>{const n=t||"EPSG:3857",o=e&&d()(e)&&O()(e.filter((e=>e&&e.$&&e.$.SRS===n&&e.$.maxx&&e.$.maxy&&e.$.minx&&e.$.miny)).map((e=>e&&e.$&&z.reprojectBbox([parseFloat(e.$.minx),parseFloat(e.$.miny),parseFloat(e.$.maxx),parseFloat(e.$.maxy)],n,"EPSG:4326"))));return d()(o)&&{minx:o[0],miny:o[1],maxx:o[2],maxy:o[3]}||null},Ue=e=>!!r.default.defs(e),Ge=e=>{let{lng:t=1,lat:n=1}=e;return{lat:n,lng:z.normalizeLng(t)}},je=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=z.getNormalizedLatLon(e),i=$([r.lng,r.lat],"EPSG:4326",t.projection);if(!t.bbox)return!1;const a=z.reprojectBbox(t.bbox.bounds,t.bbox.crs,t.projection),s={left:0,right:0,top:0,bottom:0,...n},l={minx:a[0]+s.left*o,miny:a[1]+s.bottom*o,maxx:a[2]-s.right*o,maxy:a[3]-s.top*o},c=z.getViewportGeometry(l,t.projection),d=4===c.extent.length?[[...c.extent]]:[...c.extent];return O()(d.map((e=>i.x>=e[0]&&i.y>=e[1]&&i.x<=e[2]&&i.y<=e[3])).filter((e=>e)))||!1},We=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=z.getNormalizedLatLon(e),i=$([r.lng,r.lat],"EPSG:4326",t.projection),a={left:0,right:0,top:0,bottom:0,...n},s=(t.size.width-a.right-a.left)*o,l=(t.size.height-a.top-a.bottom)*o,c={minx:i.x-s/2-a.left*o,miny:i.y-l/2-a.bottom*o,maxx:i.x+s/2+a.right*o,maxy:i.y+l/2+a.top*o},d=z.getViewportGeometry(c,t.projection);if(4===d.extent.length)return{pos:$([d.extent[0]+t.size.width/2*o,d.extent[1]+t.size.height/2*o],t.projection,"EPSG:4326"),zoom:t.zoom,crs:"EPSG:4326"};if(Math.abs(d.extent[0][2]-d.extent[0][0])>Math.abs(d.extent[1][2]-d.extent[1][0])){const e=$([d.extent[0][2]-t.size.width/2*o,d.extent[0][3]-t.size.height/2*o],t.projection,"EPSG:4326");return{pos:{...e,x:e.x+(r.lng>e.x?360:0)},zoom:t.zoom,crs:"EPSG:4326"}}return{pos:$([d.extent[1][0]+t.size.width/2*o,d.extent[1][1]+t.size.height/2*o],t.projection,"EPSG:4326"),zoom:t.zoom,crs:"EPSG:4326"}},He=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.01;const i=d()(n)?n:[n.x,n.y];if(C()(i[0])&&!isNaN(i[0])&&C()(i[1])&&!isNaN(i[1])&&C()(t.x)&&!isNaN(t.x)&&C()(t.y)&&!isNaN(t.y)){const n=g()(e)?e([t.x,t.y>=o?t.y-o:t.y+o]):null,a=n&&(d()(n)?n:[n.x,n.y]);return d()(a)?Math.sqrt((i[0]-a[0])*(i[0]-a[0])+(i[1]-a[1])*(i[1]-a[1])):r}return r},ze=function(){let{roundingBehaviour:e="round",value:t=0,maximumFractionDigits:n=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===n&&Math[e]?Math[e](t):t},Ze=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=d()(e)?{x:e[0],y:e[1]}:e,r=d()(t)?{x:t[0],y:t[1]}:t,i={x:.5*(o.x+r.x),y:.5*(o.y+r.y)};return n?[i.x,i.y]:i},Ve=e=>u()(e)&&C()(e.x)&&C()(e.y)?[e.x,e.y]:e,Qe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{lat:1,lng:1},t=arguments.length>1?arguments[1]:void 0;return(0,U.Z)(ne(t),B()([e.lng,e.lat]))},Ke=(e,t)=>(0,F.Z)(e,t)||(0,U.Z)(e,t)||(0,U.Z)(t,e),qe=e=>{if(e){const t=e.split(":");if("urn"===t[0]&&("ogc"===t[1]||"x-ogc"===t[1])&&"def"===t[2]&&"crs"===t[3]&&(t[4]||t[6])){const e=t[4],n=t[6];return e?`${e}:${n}`:n}}return null},Ye=e=>{if(!e||"EPSG:"!==e.slice(0,5))return null;const t=e.slice(5),n=parseInt(t,10);if(n>=1024&&n<=32767)return e;const o=t.replace(" ","").replace(":","").toLowerCase(),r=re[o];return r>=1024&&r<=32767?`EPSG:${r}`:null},Xe=(e,t)=>{let n=[e[0],e[1]],o=[t[0],t[1]];if(n[1]>o[1]){const e=n;n=o,o=e}if(n[0]>o[0]){const e=n.slice(),t=o.slice();n=[t[0],e[1]],o=[e[0],t[1]]}return[n[0],n[1],o[0],o[1]]},Je=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"degrees",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;return e&&t?(0,_.Z)(e,t,{steps:o,units:n}):null},$e=()=>((0,W.u8)("projectionDefs")||[]).concat([{code:"EPSG:3857",extent:[-20026376.39,-20048966.1,20026376.39,20048966.1]},{code:"EPSG:4326",extent:[-180,-90,180,90]}]),et=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"EPSG:3857";return $e().find((t=>t.code===e))||{extent:[-20026376.39,-20048966.1,20026376.39,20048966.1]}},tt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.bbox?.crs||"EPSG:3857",[n,o,r,i]=et(t).extent,[a,s,l,c]=j()({type:"FeatureCollection",features:e.features||[]});return a>=n&&s>=o&&l<=r&&c<=i},nt=e=>{const t=e&&e.latlng||null;let n=null;return t&&(n=t&&Math.round(1e17*t.lng)/1e17,n-=360*Math.floor(n/360+.5)),[n,t&&t.lat]},ot=e=>{const t=parseFloat(e);return C()(t)&&180*t/Math.PI},rt=e=>{const t=parseFloat(e);return C()(t)&&t*Math.PI/180},it=(e,t,n)=>isNaN(e)&&e.length<1?0:e<t?t:e>n?n:parseFloat(e);z={setCrsLabels:ie,getUnits:ae,reproject:$,getProjectedBBox:se,createBBox:le,reprojectGeoJson:ce,lineIntersectPolygon:de,normalizePoint:X,normalizeLng:pe,reprojectBbox:ue,getCompatibleSRS:ge,getEquivalentSRS:he,getEPSGCode:fe,normalizeSRS:Ae,isAllowedSRS:Ee,getAvailableCRS:ve,filterCRSList:Ce,calculateAzimuth:we,calculateDistance:Se,FORMULAS:Z,extendExtent:Pe,getGeoJSONExtent:Oe,isValidExtent:Te,calculateCircleCoordinates:Ie,transformLineToArcs:_e,transformArcsToLine:Me,coordsOLtoLeaflet:xe,mergeToPolyGeom:ke,getViewportGeometry:De,getProjUrl:Q,getExtentFromViewport:Le,fetchProjRemotely:Re,parseURN:Be,determineCrs:q,parseString:Ne,getWMSBoundingBox:Fe,isSRSAllowed:Ue,getNormalizedLatLon:Ge,isInsideVisibleArea:je,centerToVisibleArea:We,calculateCircleRadiusFromPixel:He,roundCoord:ze,midpoint:Ze,pointObjectToArray:Ve,getExtentFromNormalized:oe,getPolygonFromExtent:ne,isPointInsideExtent:Qe,isBboxCompatible:Ke,extractCrsFromURN:qe,crsCodeTable:re,makeNumericEPSG:Ye,makeBboxFromOWS:Xe,getPolygonFromCircle:Je,checkIfLayerFitsExtentForProjection:tt,getLonLatFromPoint:nt,getExtentForProjection:et,convertRadianToDegrees:ot,convertDegreesToRadian:rt,setValueBoundaries:it};const at=z},47805:(e,t,n)=>{"use strict";n.d(t,{toCQLFilter:()=>W,isFilterValid:()=>H});var o=n(65692),r=n(78889),i=n(99321),a=n(89291),s=n(89737),l=n(2245),c=n.n(l),d=n(90183),p=n(27361),u=n.n(p),m=n(14293),g=n.n(m),h=n(52353),f=n.n(h),y=n(1469),b=n.n(y),A=n(13311),E=n.n(A),v=n(30998),C=n.n(v),w=n(47037),S=n.n(w),P=n(85564),O=n.n(P);let T;const I=e=>{const t=e.match(/(?<!!)[*.]/);return!t?.length},_=e=>e&&e.replace?e.replace(/\'/g,"''"):e,M=(e,t)=>!g()(e)&&"isNull"!==t||!f()(e)&&"isNull"===t,x=e=>'"'+e+'"',k=e=>e?"1.0"===e?"1.0.0":"1.1"===e?"1.1.0":e:"2.0",D={ogc:{startTag:"<ogc:PropertyName>",endTag:"</ogc:PropertyName>"},fes:{startTag:"<fes:ValueReference>",endTag:"</fes:ValueReference>"}},L=(e,t,n,o)=>{let r;if("><"===t){if(n.startDate&&n.endDate){const a=n.startDate.toISOString?n.startDate.toISOString():n.startDate,s=n.endDate.toISOString?n.endDate.toISOString():n.endDate;r=i.ogcComparisonOperators[t](o,D[o].startTag+e+D[o].endTag+"<"+o+":LowerBoundary><"+o+":Literal>"+a+"</"+o+":Literal></"+o+":LowerBoundary><"+o+":UpperBoundary><"+o+":Literal>"+s+"</"+o+":Literal></"+o+":UpperBoundary>")}}else if(n.startDate){const a=n.startDate.toISOString?n.startDate.toISOString():n.startDate;r=i.ogcComparisonOperators[t](o,D[o].startTag+e+D[o].endTag+"<"+o+":Literal>"+a+"</"+o+":Literal>")}return r},R=(e,t,n,o)=>{let r;return M(n,t)&&(r="isNull"===t?i.ogcComparisonOperators[t](o,D[o].startTag+e+D[o].endTag):"="===t?i.ogcComparisonOperators[t](o,D[o].startTag+e+D[o].endTag+"<"+o+":Literal>"+n+"</"+o+":Literal>"):i.ogcComparisonOperators[t](o,D[o].startTag+e+D[o].endTag+"<"+o+":Literal>"+((e,t)=>t(e)?"*"+e+"*":e)(n,I)+"</"+o+":Literal>")),r},B=(e,t,n,o)=>{let r="";return M(n,t)&&"="===t&&""!==n&&(r=i.ogcComparisonOperators[t](o,D[o].startTag+e+D[o].endTag+"<"+o+":Literal>"+n+"</"+o+":Literal>")),r},N=(e,t,n,o)=>{let r="";return M(n,t)&&"contains"===t&&""!==n&&(r=`<${o}:PropertyIsEqualTo>\n                <${o}:Function name="InArray">\n                    <${o}:Literal>${n}</${o}:Literal>\n                    <${o}:PropertyName>${e}</${o}:PropertyName>\n                </${o}:Function>\n                <${o}:Literal>true</${o}:Literal>\n            </${o}:PropertyIsEqualTo>`),r},F=(e,t,n,o)=>{let r;if("><"===t)g()(n)||null===n.lowBound||void 0===n.lowBound||null!==n.upBound&&void 0!==n.upBound?g()(n)||null===n.upBound||void 0===n.upBound||null!==n.lowBound&&void 0!==n.lowBound?g()(n)||null===n.upBound||void 0===n.upBound||null===n.lowBound||void 0===n.lowBound||(r=i.ogcComparisonOperators[t](o,D[o].startTag+e+D[o].endTag+"<"+o+":LowerBoundary><"+o+":Literal>"+n.lowBound+"</"+o+":Literal></"+o+":LowerBoundary><"+o+":UpperBoundary><"+o+":Literal>"+n.upBound+"</"+o+":Literal></"+o+":UpperBoundary>")):r=i.ogcComparisonOperators["<="](o,D[o].startTag+e+D[o].endTag+"<"+o+":Literal>"+n.upBound+"</"+o+":Literal>"):r=i.ogcComparisonOperators[">="](o,D[o].startTag+e+D[o].endTag+"<"+o+":Literal>"+n.lowBound+"</"+o+":Literal>");else{let a=g()(n)||null===n.lowBound||void 0===n.lowBound?n:n.lowBound;g()(a)||(r=i.ogcComparisonOperators[t](o,D[o].startTag+e+D[o].endTag+"<"+o+":Literal>"+a+"</"+o+":Literal>"))}return r},U=function(){let{typeName:e,geometryName:t,cqlFilter:n="INCLUDE"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return`queryCollection('${e}', '${t}','${_(n)}')`},G=e=>`collectGeometries(${e})`,j=function(e,t,n){let o,l,d,p,u=[];if(e.filterFields&&e.filterFields.length>0)o=e.groupFields&&e.groupFields.length>0?T.processOGCFilterGroup(e.groupFields[0],e,n):T.processOGCFilterFields(null,e,n),""!==o&&u.push(o);else if(e.simpleFilterFields&&e.simpleFilterFields.length>0){const t="AND",o=i.ogcLogicalOperators[t](n,e.simpleFilterFields.map((e=>((e,t)=>{let n="";switch(e.type){case"date":n=L(e.attribute,e.operator,e.values,t);break;case"array":n=N(e.attribute,e.operator,e.values,t);break;case"number":n=F(e.attribute,e.operator,e.values,t);break;case"string":n=R(e.attribute,e.operator,e.values,t);break;case"boolean":n=B(e.attribute,e.operator,e.values,t);break;case"list":if(e.values&&e.values.length>0){const o="OR";n=e.values.reduce(((n,o)=>{let r=null===o||"null"===o?"isNull":"=";return n+R(e.attribute,r,o,t)}),""),n=i.ogcLogicalOperators[o](t,n)}}return n})(e,n))).join(""));u.push(o)}if(b()(e.spatialField)?(p=E()(e.spatialField,(e=>"BBOX"===e.operation)),p||(d=e.spatialField)):e.spatialField&&("BBOX"===e.spatialField.operation?p=e.spatialField:d=[e.spatialField]),p){if(b()(p.geometry&&p.geometry.extent[0])){const e="OR",o=p.geometry.extent.reduce(((e,o)=>{let r=Object.assign({},p);return p.geometry.extent=o,e+T.processOGCSpatialFilter(t,r,n)}),"");l=i.ogcLogicalOperators[e](n,o)}u.push(l)}else if(d&&(d=d.filter((e=>e&&e.geometry&&e.operation)),d.length>0)){const o=d.map((e=>T.processOGCSpatialFilter(t,e,n))).join("");l=d.length>1?i.ogcLogicalOperators[e.spatialFieldOperator||"AND"](n,o):o,u.push(l)}if(e.crossLayerFilter&&e.crossLayerFilter.operation){let t={...e.crossLayerFilter,attribute:e.crossLayerFilter.attribute};Array.isArray()?t.forEach((e=>u.push(T.processOGCCrossLayerFilter(e,n)))):u.push(T.processOGCCrossLayerFilter(t,n))}return e.options&&e.options.cqlFilter&&u.push(((e,t)=>{const n=c()(t);return(0,s.Z)(n)((0,a.read)(e))})(e.options.cqlFilter,{filterNS:n,wfsVersion:t,gmlVersion:(0,r.wfsToGmlVersion)(t)})),u},W=function(e){let t;try{t=e instanceof Object?e:JSON.parse(e)}catch(e){return e}let n,o,r=[];if(t.filterFields&&t.filterFields.length>0)n=T.processCQLFilterGroup(t.groupFields[0],t),n&&r.push(n);else if(t.simpleFilterFields&&t.simpleFilterFields.length>0){let e=t.simpleFilterFields.reduce(((e,t)=>{let n=e,o=T.processCQLSimpleFilterField(t);return!1!==o&&(n=e.length>0?e+" AND ("+o+")":"("+o+")"),n}),"");e=e.length>0?e:"INCLUDE",r.push(e)}if(t.spatialField&&(o=T.processCQLSpatialFilter(t),o&&r.push(o)),t.crossLayerFilter){const{crossLayerFilter:e}=t,{operation:n}=e,o=e.attribute,i=e.collectGeometries&&e.collectGeometries.queryCollection;if(n&&o&&i){const{typeName:t,geometryName:a}=i,s=T.getCrossLayerCqlFilter(e),l=G(U({typeName:t,geometryName:a,cqlFilter:s}));r.push(`${n}(${o},${l})`)}}return r.length?"("+(r.length>1?r.join(") AND ("):r[0])+")":null},H=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.filterFields&&e.filterFields.length>0||e.simpleFilterFields&&e.simpleFilterFields.length>0||e.spatialField&&e.spatialField.geometry&&e.spatialField.operation||b()(e.spatialField)&&C()(e.spatialField,(e=>e.operation&&e.geometry))>-1||e.crossLayerFilter&&e.crossLayerFilter.collectGeometries&&e.crossLayerFilter.collectGeometries.queryCollection&&e.crossLayerFilter.collectGeometries.queryCollection.geometryName&&e.crossLayerFilter.collectGeometries.queryCollection.typeName};T={processOGCFilterGroup:function(e,t,n){let o=T.processOGCFilterFields(e,t,n),r=T.findSubGroups(e,t.groupFields);return r.length>0&&r.forEach((e=>{o+=T.processOGCFilterGroup(e,t,n)})),""!==o?i.ogcLogicalOperators[e.logic](n,o):""},processOGCFilterFields:function(e,t,n){let o=e?t.filterFields.filter((t=>t.groupId===e.id&&M(t.value,t.operator))):t.filterFields.filter((e=>M(e.value,e.operator))),r=[];return o.length?(r=o.reduce(((e,t)=>{let o;switch(t.type){case"date":case"date-time":case"time":o=L(t.attribute,t.operator,t.value,n);break;case"number":o=F(t.attribute,t.operator,t.value,n);break;case"string":o=R(t.attribute,t.operator,t.value,n);break;case"boolean":o=B(t.attribute,t.operator,t.value,n);break;case"list":o=((e,t,n,o)=>{let r;return g()(n)||(r=i.ogcComparisonOperators[t](o,D[o].startTag+e+D[o].endTag+"<"+o+":Literal>"+n+"</"+o+":Literal>")),r})(t.attribute,t.operator,t.value,n);break;case"array":o=N(t.attribute,t.operator,t.value,n)}return"isNull"===t.operator&&(o=R(t.attribute,t.operator,t.operator,n)),o&&e.push(o),e}),[]),r.join("")):""},processOGCCrossLayerFilter:function(e,t){let n=t||"ogc",o=D[n].startTag+e.attribute+D[n].endTag;if(e.collectGeometries){const t=T.getCrossLayerCqlFilter(e);o+=`<ogc:Function name="collectGeometries"><ogc:Function name="queryCollection"><ogc:Literal>${e.collectGeometries.queryCollection.typeName}</ogc:Literal><ogc:Literal>${e.collectGeometries.queryCollection.geometryName}</ogc:Literal><ogc:Literal><![CDATA[${t}]]></ogc:Literal></ogc:Function></ogc:Function>`}return"DWITHIN"===e.operation&&(o+="<"+n+':Distance units="m">'+(e.distance||0)+"</"+n+":Distance>"),i.ogcSpatialOperators[e.operation](n,o)},getGetFeatureBase:function(e,t,n,o){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=k(e),a="<wfs:GetFeature ";switch(a+=o?'outputFormat="'+o+'" ':"",a+=t&&(t.startIndex||0===t.startIndex)?'startIndex="'+t.startIndex+'" ':"",a+=r.viewParams?` viewParams="${r.viewParams}" `:"",i){case"1.0.0":a+=t&&t.maxFeatures?'maxFeatures="'+t.maxFeatures+'" ':"",a=n?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" outputFormat="GML2" xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(r.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/WFS-basic.xsd"')+">";break;case"1.1.0":a+=t&&t.maxFeatures?'maxFeatures="'+t.maxFeatures+'" ':"",a=n?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(r.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd"')+">";break;default:a+=t&&t.maxFeatures?'count="'+t.maxFeatures+'" ':"",a=n&&!t?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" xmlns:wfs="http://www.opengis.net/wfs/2.0" xmlns:fes="http://www.opengis.net/fes/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(r.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd"')+">"}return a},toOGCFilterParts:j,findSubGroups:function(e,t){return t.filter((t=>t.groupId===e.id))},toCQLFilter:W,getCrossLayerCqlFilter:e=>u()(e,"collectGeometries.queryCollection.cqlFilter")||(u()(e,"collectGeometries.queryCollection.filterFields")||[]).length>0&&(u()(e,"collectGeometries.queryCollection.groupFields")||[]).length>0&&T.toCQLFilter(e.collectGeometries.queryCollection)||"INCLUDE",processCQLFilterGroup:function(e,t){const n="NOR"===e.logic?{...e,logic:"AND",negateAll:!0}:e;let o=T.processCQLFilterFields(n,t),r=T.findSubGroups(n,t.groupFields);if(r.length>0){const e=r.map((e=>(n.negateAll?"NOT (":"(")+T.processCQLFilterGroup(e,t)+")")).join(" "+n.logic+" ");return o?[o,e].join(" "+n.logic+" "):e}return o},processCQLSimpleFilterField:function(e){let t=!1;switch(e.type){case"date":t=T.cqlDateField(e.attribute,e.operator,e.values);break;case"number":t=T.cqlNumberField(e.attribute,e.operator,e.values);break;case"string":t=T.cqlStringField(e.attribute,e.operator,e.values);break;case"boolean":t=T.cqlBooleanField(e.attribute,e.operator,e.values);break;case"list":if(e.values.length!==e.optionsValues.length){let n=!1,o=e.values.reduce(((e,t)=>(null===t||"null"===t?n=!0:e.push("'"+t+"'"),e)),[]);t=o.length>0?e.attribute+" IN("+o.join(",")+")":t,n&&(t=t?t+" OR isNull("+e.attribute+")=true":"isNull("+e.attribute+")=true")}}return!!(t&&t.length>0)&&t},processCQLSpatialFilter:function(e){let t=(b()(e.spatialField)?e.spatialField:[e.spatialField]).filter((e=>e&&e.geometry&&e.operation)),n="";return t.forEach(((o,r)=>{if(n+=o.operation+'("'+o.attribute+'",',o.collectGeometries&&o.collectGeometries.queryCollection)n+=G(U(o.collectGeometries.queryCollection));else{let e=o.geometry.projection||"";e=2===e.split(":").length?"SRID="+e.split(":")[1]+";":"",n+=e+T.getCQLGeometryElement(o.geometry.coordinates,o.geometry.type)}n+=")",r<t.length-1&&(n+=` ${e.spatialFieldOperator||"AND"} `)})),n},processCQLFilterFields:function(e,t){let n=t.filterFields.filter((t=>t.groupId===e.id)),o=[];return n&&(n.forEach((t=>{let n;switch(t.type){case"date":case"time":case"date-time":n=T.cqlDateField(t.attribute,t.operator,t.value);break;case"number":n=T.cqlNumberField(t.attribute,t.operator,t.value);break;case"string":n=T.cqlStringField(t.attribute,t.operator,t.value);break;case"boolean":n=T.cqlBooleanField(t.attribute,t.operator,t.value);break;case"list":n=T.cqlListField(t.attribute,t.operator,t.value);break;case"array":n=T.cqlArrayField(t.attribute,t.operator,t.value)}n&&o.push(e.negateAll?"NOT ("+n+")":n)})),o=o.join(" "+e.logic+" ")),o},getCQLGeometryElement:function(e,t){let n=t+"(";switch(t){case"Point":n+=e.join(" ");break;case"MultiPoint":e.forEach(((t,o)=>{n+=t.join(" "),n+=o<e.length-1?", ":""}));break;case"Polygon":e.forEach(((t,r)=>{n+="(";let i=(0,o.closePolygon)(t).map((e=>e[0]+" "+e[1]));n+=i.join(", "),n+=")",n+=r<e.length-1?", ":""}));break;case"MultiPolygon":e.forEach(((t,r)=>{n+="(",t.forEach(((e,r)=>{n+="(";let i=(0,o.closePolygon)(e).map((e=>e[0]+" "+e[1]));n+=i.join(", "),n+=")",n+=r<t.length-1?", ":""})),n+=")",n+=r<e.length-1?", ":""}))}return n+=")",n},cqlStringField:function(e,t,n){let o;const r=x(e);if(!g()(n)){const e=function(e,t){let n=!1;const o=_(e),r=o.replaceAll(/[%_*.!]/g,((e,t,o)=>{if(["%","_"].includes(e))return"%"===e?"\\%":"\\_";const r=t>0?o.charAt(t-1):"",i=t<o.length-1?o.charAt(t+1):"";return["*","."].includes(e)&&"!"!==r?(n=!0,"*"===e?"%":"_"):"!"===e&&["*","."].includes(i)?"":e}));switch(t){case"ilike":case"like":const e="ilike"===t?r.toLowerCase():r;return n?"'"+e+"'":"'%"+e+"%'";default:return"'"+o+"'"}}(n,t);o="isNull"===t?"isNull("+r+")=true":["<>","="].includes(t)?r+t+e:"ilike"===t?"strToLowerCase("+r+") LIKE "+e:r+" LIKE "+e}return o},cqlDateField:function(e,t,n){let o;return"><"===t?n.startDate&&n.endDate&&(o="("+e+">='"+(n.startDate.toISOString?n.startDate.toISOString():n.startDate)+"' AND "+e+"<='"+(n.endDate.toISOString?n.endDate.toISOString():n.endDate)+"')"):n.startDate&&(o=e+t+"'"+(n.startDate.toISOString?n.startDate.toISOString():n.startDate)+"'"),o},cqlNumberField:function(e,t,n){let o;const r=x(e);if("><"===t)g()(n)||null===n.lowBound||void 0===n.lowBound||null!==n.upBound&&void 0!==n.upBound?g()(n)||null===n.upBound||void 0===n.upBound||null!==n.lowBound&&void 0!==n.lowBound?g()(n)||null===n.upBound||void 0===n.upBound||null===n.lowBound||void 0===n.lowBound||(o="("+r+">='"+n.lowBound+"' AND "+r+"<='"+n.upBound+"')"):o="("+r+"<='"+n.upBound+"')":o="("+r+">='"+n.lowBound+"')";else{let e=g()(n)||null===n.lowBound||void 0===n.lowBound?n:n.lowBound;g()(e)||(o=r+" "+t+" '"+e+"'")}return o},cqlArrayField:function(e,t,n){return"contains"===t?`InArray(${n},${e})=true`:""},cqlBooleanField:function(e,t,n){let o="";return g()(n)||""===n||"="!==t||(o='"'+e+'"'+t+"'"+n+"'"),o},cqlListField:function(e,t,n){return T.cqlStringField(e,t,n)},toOGCFilter:function(e,t,n){let o,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"EPSG:4326";try{o=t instanceof Object?t:JSON.parse(t)}catch(e){return e}const c=k(n||"2.0"),d="2.0"===c?"fes":"ogc";let p=T.getGetFeatureBase(c,o.pagination,i,a,t&&t.options),u=T.toOGCFilterParts(o,c,d),m="";return u.length>0&&(m="<"+d+":Filter>",1===u.length?m+=u[0]:(m+="<"+d+":And>",u.forEach((e=>{m+=e})),m+="</"+d+":And>"),m+="</"+d+":Filter>"),p+=`<wfs:Query ${"2.0"===c?"typeNames":"typeName"}="${e}" ${"native"!==l&&`srsName="${l}"`||""}>`,p+=m,s&&(p+=s.map((e=>D[d].startTag+e+D[d].endTag)).join("")),r&&r.sortBy&&r.sortOrder&&(p+="<"+d+":SortBy><"+d+":SortProperty>"+D[d].startTag+r.sortBy+D[d].endTag+"<"+d+":SortOrder>"+r.sortOrder+"</"+d+":SortOrder></"+d+":SortProperty></"+d+":SortBy>"),p+="</wfs:Query></wfs:GetFeature>",p},reprojectFilterInNativeCrs:(e,t)=>{const n=e.spatialField.geometry.projection,o=e.spatialField.geometry.center,r=e.spatialField.geometry.radius,i=(0,d.reprojectGeoJson)(e.spatialField.geometry,e.spatialField.geometry.projection||"EPSG:3857",t).coordinates,a=o&&(e=>{let{x:t,y:n}=e;return[t,n]})((0,d.reproject)(o,n,t)),s=r&&(0,d.reproject)([r,0],n,t).x;return{...e,spatialField:{...e.spatialField,geometry:{...e.spatialField.geometry,center:a,radius:s,coordinates:i,projection:t}}}},processOGCSpatialFilter:function(e,t,n){if(t.collectGeometries)return T.processOGCCrossLayerFilter(t);let a=D[n].startTag+t.attribute+D[n].endTag;switch(t.operation){case"INTERSECTS":case"DWITHIN":case"WITHIN":case"CONTAINS":a+=(0,o.processOGCGeometry)((0,r.wfsToGmlVersion)(e),t.geometry),"DWITHIN"===t.operation&&(a+="<"+n+':Distance units="m">'+(t.geometry.distance||0)+"</"+n+":Distance>");break;case"BBOX":{let e=t.geometry.extent[0]+" "+t.geometry.extent[1],n=t.geometry.extent[2]+" "+t.geometry.extent[3];a+='<gml:Envelope srsName="'+t.geometry.projection+'"><gml:lowerCorner>'+e+"</gml:lowerCorner><gml:upperCorner>"+n+"</gml:upperCorner></gml:Envelope>";break}}return i.ogcSpatialOperators[t.operation](n,a)},createFeatureFilter:e=>t=>{if(!e)return!0;const{filterFields:n=[]}=e;for(let e=0;e<n.length;e++){if(void 0===t.properties[n[e].attribute])return!1;if("string"===n[e].type&&!t.properties[n[e].attribute].toLowerCase().includes(n[e].value.toLowerCase()))return!1;if("boolean"===n[e].type&&!t.properties[n[e].attribute].toLowerCase().includes(n[e].value.toLowerCase()))return!1;if("number"===n[e].type&&parseFloat(n[e].attribute)!==parseFloat(t.properties[n[e].attribute]))return!1;if("date"===n[e].type){let o=new Date(t.properties[n[e].attribute]),r=new Date(n[e].value.startDate);if(o.getFullYear()!==r.getFullYear()||o.getMonth()!==r.getMonth()||o.getDay()!==r.getDay())return!1}}return!0},mergeFiltersToOGC:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{nsPlaceholder:t="ogc",ogcVersion:n="2.0",addXmlnsToRoot:o=!1,xmlnsToAdd:i=[]}=e,l=c()({filterNS:t,wfsVersion:n,gmlVersion:(0,r.wfsToGmlVersion)(n)}),d=(0,s.Z)(l);for(var p=arguments.length,u=new Array(p>1?p-1:0),m=1;m<p;m++)u[m-1]=arguments[m];const g=l.filter(l.and(...O()(u.filter((e=>!!e&&(S()(e)||H(e)&&!e.disabled))).map((e=>S()(e)?[d((0,a.read)(e))]:j(e,n,t))))));if(o){const e=g.indexOf(">");return`${g.slice(0,e)}${i.length>0?` ${i.join(" ")}`:""}${g.slice(e)}`}return g}}},92579:(e,t,n)=>{"use strict";n.d(t,{gg:()=>P,Ln:()=>O,ID:()=>T,bT:()=>I,tQ:()=>_,Tr:()=>M,nl:()=>x,ZX:()=>k,lg:()=>D,w:()=>L,cy:()=>R,lt:()=>B,M1:()=>N,kn:()=>U,oH:()=>G,nq:()=>j,Ll:()=>W,ln:()=>H,Un:()=>z,NC:()=>Z,t4:()=>V,NP:()=>Q,bm:()=>K,_R:()=>q,Km:()=>Y,of:()=>X,u0:()=>J,eI:()=>$,Yh:()=>ee,c0:()=>te});var o=n(27361),r=n.n(o),i=n(30998),a=n.n(i),s=n(30084),l=n.n(s),c=n(1469),d=n.n(c),p=n(52628),u=n.n(p),m=(n(63105),n(82492)),g=n.n(m),h=n(47037),f=n.n(h),y=n(13218),b=n.n(y),A=n(64721),E=n.n(A),v=n(13880),C=n.n(v),w=n(55877),S=n.n(w);const P="EMPTY_CONTENT",O={CASCADE:"cascade"},T={TITLE:"title",PARAGRAPH:"paragraph",IMMERSIVE:"immersive",BANNER:"banner",CAROUSEL:"carousel"},I={TEXT:"text",MEDIA:"media",WEBPAGE:"webPage",COLUMN:"column"},_={MEDIA:"template-media",WEBPAGE:"template-web-page"},M={IMAGE:"image",MAP:"map",VIDEO:"video"},x={EDIT:"edit",VIEW:"view"},k={SHOW_SAVE:"save.show",LOADING:"loading"},D={StoryTypes:u()(O),SectionTypes:u()(T),MediaTypes:u()(M),Modes:u()(x)},L=e=>{let{theme:t={},align:n="center",size:o="full"}=e;const r=t?.value||f()(t)&&t;return`${r&&"custom"!==r&&f()(r)&&` ms-${r}`||""} ms-align-${n}${o.split(",").map((e=>` ms-size-${e}`)).join("")}`},R=e=>{let{theme:t={},storyTheme:n}=e;if(""===t||""===t?.value)return b()(n)?n:{};const o=t?.value,r=t?.[o];return b()(r)&&r||{}},B=e=>e.type===T.PARAGRAPH&&e&&d()(e.contents)&&e.contents.length&&d()(e.contents[0].contents)&&e.contents[0].contents.length&&e.contents[0].contents[0].type===I.MEDIA,N=(e,t)=>{const n=(e=>{const t=e.split("?");return 2===t.length?t[0]:e})(e),o=document.getElementById(n);o&&o.scrollIntoView(t)},F={zoomControl:!0,mapInfoControl:!1,mapOptions:{scrollWheelZoom:!1,interactions:{mouseWheelZoom:!1,dragPan:!0}}},U=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g()({},F,e)},G=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g()({},e,t)},j=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;switch(e){case T.TITLE:return{id:S()(),type:T.TITLE,title:t("geostory.builder.defaults.titleTitle"),cover:!1,contents:[{id:S()(),type:I.TEXT,html:"",size:"large",align:"center",theme:"",background:{fit:"cover",size:"full",align:"center"}}]};case T.BANNER:return{id:S()(),type:T.BANNER,title:t("geostory.builder.defaults.titleBanner"),cover:!1,contents:[{id:S()(),background:{fit:"cover",size:"full",align:"center"}}]};case T.PARAGRAPH:return{id:S()(),type:T.PARAGRAPH,title:t("geostory.builder.defaults.titleParagraph"),contents:[{id:S()(),type:I.COLUMN,size:"full",align:"center",contents:[{id:S()(),type:I.TEXT,html:""}]}]};case T.IMMERSIVE:return{id:S()(),type:T.IMMERSIVE,title:t("geostory.builder.defaults.titleImmersive"),contents:[j(I.COLUMN,t("geostory.builder.defaults.titleImmersiveContent"))]};case T.CAROUSEL:return{id:S()(),type:e,title:t("geostory.builder.defaults.titleGeocarousel"),template:e,background:{fit:"cover",size:"full",align:"center"},contents:[j(I.COLUMN,t("geostory.builder.defaults.titleGeocarouselContent"))]};case _.MEDIA:return{id:S()(),type:T.PARAGRAPH,title:t("geostory.builder.defaults.titleMedia"),contents:[{id:S()(),type:I.COLUMN,contents:[{id:S()(),type:I.MEDIA,size:"large",align:"center"}]}]};case _.WEBPAGE:return{id:S()(),type:T.PARAGRAPH,title:t("geostory.builder.defaults.titleWebPageSection"),contents:[{id:S()(),type:I.COLUMN,contents:[{id:S()(),type:I.WEBPAGE,size:"h-medium,v-medium",align:"center"}]}]};case I.COLUMN:return{id:S()(),type:I.COLUMN,align:"left",size:"small",theme:"",title:t,contents:[{id:S()(),type:I.TEXT,html:""}],background:{fit:"cover",size:"full",align:"center"}};case I.TEXT:return{id:S()(),type:I.TEXT,title:t("geostory.builder.defaults.titleText"),html:""};case I.IMAGE:return{id:S()(),type:e,title:t("geostory.builder.defaults.titleMedia"),size:"full",align:"center"};case I.WEBPAGE:return{id:S()(),type:e,title:t("geostory.builder.defaults.titleWebPage"),size:"h-full,v-medium",align:"center"};case I.MEDIA:return{id:S()(),type:e,title:t("geostory.builder.defaults.titleUnknown"),size:"large",align:"center"};default:return{id:S()(),type:e,title:t("geostory.builder.defaults.titleUnknown"),size:"full",align:"center"}}},W=(e,t)=>l()(e).reduce(((e,n)=>{if(n&&0===n.indexOf("{")){const o=JSON.parse(n),i=r()(t,e),s=a()(i,o);return s>=0?[...e,s]:e}return[...e,n]}),[]),H=(e,t)=>l()(e).reduce(((e,n)=>{let{path:o,flatPath:i}=e;if(n&&0===n.indexOf("{")){const e=JSON.parse(n),s=r()(t,o),l=a()(s,e);if(l>=0){const{id:e,type:t}=s[l];return{path:[...o,l],flatPath:[...i,{id:e,type:o[o.length-1],contentType:t}]}}return{path:o,flatPath:i}}return{path:[...o,n],flatPath:i}}),{path:[],flatPath:[]}),z=(e,t)=>e.reduce(((e,n)=>E()(n.contents.map((e=>e.id)),t)?n.id:e),null),Z=e=>e.type===T.PARAGRAPH&&!1!==e.editURL&&e&&d()(e.contents)&&e.contents.length&&d()(e.contents[0].contents)&&e.contents[0].contents.length&&e.contents[0].contents[0].type===I.WEBPAGE&&!1!==e.contents[0].contents[0].editURL,V=(e,t)=>{if(t)switch(e){case"small":return.4*t;case"medium":return.6*t;case"large":return.8*t;default:return t}return 0},Q=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if(!t.includes(n))return null;const i=t.substring(t.indexOf(n)).split("/");return o&&n?i.length>1&&i[2]&&Number(i[0])===n?5===i.length?C()(e,`${i[2]}/column/${i[4]}`,`${o}`):C()(e,`${i[2]}`,`${o}`):(t.includes("shared"),""!==i[1]?`${e}/section/${o}`:`${e}section/${o}`):!o&&r&&f()(r)&&"EMPTY"!==r&&i.length>1?t.includes("shared")&&!i[2]?e:5===i.length?C()(e,`${i[4]}`,`${r}`):`${e}/column/${r}`:null},K=(e,t,n)=>{const o={active:t,inactive:n,custom:{families:[],urls:[]}};return e.filter((e=>!!e.src)).forEach(((e,t)=>{o.custom.families[t]=e.family,o.custom.urls[t]=e.src})),o},q=e=>e.map((e=>e.family)),Y=["inherit","Arial","Georgia","Impact","Tahoma","Times New Roman","Verdana"],X=()=>window.location.href.match("geostory-embedded")?"geostoryEmbedded":"geostory",J=e=>{const t=e=>{try{return JSON.parse(e)?.id}catch{return null}},n=l()(e)||[];return{sectionId:t(n?.[1]),contentId:t(n?.[3]),innerContentId:t(n?.[5])}},$=function(){let e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((t=>e.sectionId===t.id?{...t,contents:(t.contents||[]).map((t=>({...t,hideContent:t.id!==e.showContentId})))}:t))};function ee(e){let{id:t,contents:n,featureStyle:o,layerOptions:r}=e;return{visibility:!0,handleClickOnLayer:!0,...r,id:`geostory-vector-${t}`,name:`geostory-vector-${t}`,type:"vector",features:n.reduce(((e,t,n)=>[...e,...(t?.features||[]).map((e=>({...e,contentRefId:t.id,...o&&{style:o({content:t,feature:e},n)}})))||[]]),[]).reverse()}}const te=(e,t,n,o,r)=>({...e,iconText:`${a()(t,(e=>{let{id:t}=e;return n.id===t}))+1}`,...r.style,highlight:o===n.id})},61868:(e,t,n)=>{"use strict";n.d(t,{t8:()=>m,zN:()=>g,qC:()=>h,cc:()=>f,z6:()=>y});var o=n(27361),r=n.n(o),i=n(30998),a=n.n(i),s=n(28252),l=n.n(s),c=n(17664),d=n.n(c),p=n(36102),u=n.n(p);const m=l(),g=d(),h=u(),f=(e,t,n,o)=>{const i=e?r()(o,e)||[]:o,s=a()(i,n);if(s>=0){let n=i.slice();return n.splice(s,1,t),e?m(e,n,o):n}return o},y=(e,t,n)=>{const o=e?r()(n,e)||[]:n,i=a()(o,t);if(i>=0){const t=o.slice();return t.splice(i,1),e?m(e,t,n):t()}return n}},24262:(e,t,n)=>{"use strict";n.d(t,{Mk:()=>w,ar:()=>S,oH:()=>O,V5:()=>I,D$:()=>_,Hi:()=>x,R8:()=>k,CK:()=>D,IS:()=>L,AZ:()=>R,C1:()=>B,lD:()=>N,DN:()=>F,z8:()=>U,Fh:()=>G,EM:()=>j,QW:()=>W,go:()=>H,T4:()=>z});var o=n(27418),r=n.n(o),i=(n(94707),n(23570),n(47037)),a=n.n(i),s=n(13218),l=n.n(s),c=n(1469),d=n.n(c),p=n(91175),u=n.n(p),m=n(84596),g=n.n(m),h=n(41609),f=n.n(h),y=(n(30998),n(78718),n(14293),n(33044));let b,A=/\/[\w- ]*geoserver[\w- ]*\//;const E=(e,t)=>t.filter((t=>(t.group||"Default")===e)).map((e=>e.id)).reverse(),v=(e,t)=>e.slice(0).reverse().reduce(((e,n)=>e.concat(n.nodes.slice(0).reverse().reduce(((e,n)=>l()(n)?e.concat(v([n],t)):e.concat(((e,t)=>u()(t.filter((t=>t.id===e))))(n,t))),[]))),[]),C=(e,t)=>v(e,t),w=(e,t)=>e&&d()(e)?e.reduce(((e,n)=>e||(!n||n.name!==t&&n.id!==t&&n!==t?n&&n.nodes&&n.nodes.length>0?w(n.nodes,t):e:n)),null):null,S=e=>e&&e.nodes?e.nodes.reduce(((e,t)=>{let n=[].concat(e);return t.nodes&&(n=e.concat(S(t))),a()(t)?[...n,t]:[...n,t.id]}),[]):[],P=e=>{let t=[];return e&&g()(e).forEach((n=>{t.push(n),n.nodes&&Array.isArray(e)&&Array.isArray(n.nodes)&&(t=t.concat(P(n.nodes)))})),t},O=(e,t,n,o)=>e&&d()(e)&&e.length>0?e.map((e=>{if(l()(e)){if(e.id===t)return{...e,...l()(n)?n:{[n]:o}};if(e.nodes)return{...e,nodes:O(e.nodes,t,n,o)}}return e})):[],T=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.capabilitiesURL||u()(g()(e.url))},I=e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&Object.keys(e).reduce(((n,o)=>{const i=e[o].reduce(((e,t)=>r()(e,{[t.id||t.name]:{srs:[...Object.keys(t.matrixIds)],matrixIds:r()({},t.matrixIds)}})),{}),a=e[o].reduce(((e,t)=>{const n=t.tileMatrixSet.reduce(((e,t)=>r()({},e,{[t["ows:Identifier"]]:r()({},t)})),{}),o=Object.keys(n).reduce(((e,t)=>{const o=Object.keys(i).filter((e=>u()(i[e].srs.filter((e=>e===t))))).map((e=>i[e].matrixIds[t])),a=o[0]&&n[t].TileMatrix.map(((e,t)=>o[0][t]&&o[0][t].ranges?r()({},e,{ranges:o[0][t].ranges}):r()({},e)));return u()(o)?r()({},e,{[t]:r()({},n[t],{TileMatrix:a})}):r()({},e)}),{});return r()({},e,o)}),{});return r()({},n,{[o]:r()({},t[o]||{},{tileMatrixSet:r()({},n[o]&&n[o].tileMatrixSet||{},a)})})}),r()({},t))||t}(e.filter((e=>e.tileMatrixSet)).reduce(((e,t)=>{const n=T(t);return e[n]?r()({},e,{[n]:[...e[n],t]}):r()({},e,{[n]:[t]})}),{})),_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.map((e=>e.split("?")[0]+t))},M={},x=e=>d()(e.url)?e.url[0]:e.url,k=(e,t)=>e&&e.id||e.name+"__"+(t?t.length:Math.random().toString(36).substring(2,15)),D=e=>t=>(t.group||"Default")===e||0===(t.group||"").indexOf(`${e}.`),L=(e,t)=>{let n=0,o=e.map((e=>r()({},e,{storeIndex:n++})));return o.reduce(((e,t)=>-1===e.indexOf(t.group||"Default")?e.concat([t.group||"Default"]):e),[]).filter((e=>"background"!==e)).reverse().reduce(((e,n)=>{let i=n||"Default";return i.split(".").reduce(((e,n,a,s)=>{const c=i.split(".",a+1).join(".");let d=((e,t)=>u()(t.filter((t=>l()(t)&&t.id===e))))(c,e);const p=a===s.length-1;if(d)p&&(d.nodes=E(c,o).concat(d.nodes).reduce(((e,t)=>(l()(t)?e.push({node:t,order:o.find((e=>e.group===t.id))?.storeIndex}):e.push({node:t,order:o.find((e=>e.id===t))?.storeIndex}),e)),[]).sort(((e,t)=>t.order-e.order)).map((e=>e.node)));else{const i=((e,t)=>{if(t&&Array.isArray(t))for(let n of t)if(n?.id===e)return n.title;return"Default"})(c,P(t));d=((e,t,n,o,i)=>r()({},{id:e,title:t??(n||"").replace(/\${dot}/g,"."),name:n,nodes:i?E(e,o):[],expanded:!0}))(c,i||n,n,o,p),e.push(d)}return d.nodes}),e),e}),[])},R=e=>e.reduce(((e,t)=>e.concat(b.getNotEmptyGroup(t))),[]),B=(e,t)=>{let n=e=>{let t=!0;return e.forEach((e=>{e.visibility||(t=!1)})),t},o=(e,t)=>{const i=e.nodes.map((e=>l()(e)?o(e,t):t.filter((t=>t.id===e))[0]));return r()({},e,{nodes:i,visibility:n(i)})},i=e.map((e=>r()({},e,{expanded:e.expanded||!1})));return{flat:i,groups:t.map((e=>o(e,i)))}},N=(e,t)=>t.filter((e=>"background"===e.group)).concat(C(e,t)),F=e=>{if(e&&d()(e.layers)){let t=b.getLayersByGroup(e.layers,e.groups);d()(e.groups)&&(t=e.groups.reduce(((e,t)=>{let n=e;if(t.title){const e={title:t.title,description:t.description,tooltipOptions:t.tooltipOptions,tooltipPlacement:t.tooltipPlacement};n=b.deepChange(n,t.id,e)}return n=b.deepChange(n,t.id,"expanded",t.expanded),n}),[].concat(t)));let n=(e=>{if(!e||!e.layers||!d()(e.layers))return null;const t=e.mapInitialConfig&&e.mapInitialConfig.sources&&r()({},e.mapInitialConfig.sources)||{};return f()(t)?[...e.layers]:e.layers.map((e=>{const n=((e,t)=>{if(!e||!t)return{};!d()(t.matrixIds)&&l()(t.matrixIds)&&(t.matrixIds=[...Object.keys(t.matrixIds)]);const n=T(t),o=t.matrixIds&&t.matrixIds.reduce(((t,o)=>{const i=e[n]&&e[n].tileMatrixSet&&e[n].tileMatrixSet[o]&&e[n].tileMatrixSet[o].TileMatrix.map((e=>({identifier:e["ows:Identifier"],ranges:e.ranges})))||[];return 0===i.length?r()({},t):r()({},t,{[o]:[...i]})}),{})||null,i=t.tileMatrixSet&&t.matrixIds.map((t=>e[n].tileMatrixSet[t])).filter((e=>e))||null;return i&&o&&{tileMatrixSet:i,matrixIds:o}||{}})(t,e);return r()({},e,n)}))})(e);return r()({},e,{layers:{flat:b.reorder(t,n),groups:t}})}return e},U=e=>r()({id:e.id,features:e.features,format:e.format,thumbURL:e.thumbURL&&"blob"===e.thumbURL.split(":")[0]?void 0:e.thumbURL,group:e.group,search:e.search,source:e.source,name:e.name,opacity:e.opacity,provider:e.provider,description:e.description,styles:e.styles,style:e.style,styleName:e.styleName,layerFilter:e.layerFilter,title:e.title,transparent:e.transparent,tiled:e.tiled,type:e.type,url:e.url,bbox:e.bbox,visibility:e.visibility,singleTile:e.singleTile||!1,allowedSRS:e.allowedSRS,matrixIds:e.matrixIds,tileMatrixSet:e.tileMatrixSet,requestEncoding:e.requestEncoding,dimensions:e.dimensions||[],maxZoom:e.maxZoom,maxNativeZoom:e.maxNativeZoom,maxResolution:e.maxResolution,minResolution:e.minResolution,disableResolutionLimits:e.disableResolutionLimits,hideLoading:e.hideLoading||!1,handleClickOnLayer:e.handleClickOnLayer||!1,queryable:e.queryable,featureInfo:e.featureInfo,catalogURL:e.catalogURL,capabilitiesURL:e.capabilitiesURL,useForElevation:e.useForElevation||!1,hidden:e.hidden||!1,origin:e.origin,thematic:e.thematic,tooltipOptions:e.tooltipOptions,tooltipPlacement:e.tooltipPlacement,legendOptions:e.legendOptions,tileSize:e.tileSize,version:e.version},e.params?{params:e.params}:{},e.credits?{credits:e.credits}:{},e.extendedParams?{extendedParams:e.extendedParams}:{},e.localizedLayerStyles?{localizedLayerStyles:e.localizedLayerStyles}:{}),G=e=>{const t=b.findGeoServerName({url:e.url});let n=x(e);if(t){let o=n.split(t);if(2===o.length){let r=e.name.split(":");2===r.length&&(n=o[0]+t+r[0]+"/"+r[1]+"/"+o[1])}}return((e,t)=>{const n=Object.keys(t).map((e=>e+"="+encodeURIComponent(t[e]))).join("&");return-1===e.indexOf("?")?e+"?"+n:e+"&"+n})(n,{...e.baseParams,...e.params})},j=e=>M.getLayerTitleTranslations?M.getLayerTitleTranslations(e):e.Title,W=e=>{const t=_(d()(e.url)?e.url:[e.url]);let n={};return t.forEach((t=>{(0,y.addAuthenticationParameter)(t,n,e.securityToken)})),n},H=e=>{let{imageUrl:t,link:n,title:o}=e;const r=t?`<img src="${t}" ${o?`title="${o}"`:""}>`:o;return n&&r?`<a href="${n}" target="_blank">${r}</a>`:r},z=(e,t)=>{if(e.disableResolutionLimits)return!0;const n=e.minResolution||-1/0,o=e.maxResolution||1/0;return void 0===t||t<o&&t>=n};b={getGroupByName:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return u()(t.filter((t=>t.name===e)))||t.reduce(((t,n)=>t||!!n.nodes&&b.getGroupByName(e,n.nodes)),void 0)},getLayerId:k,normalizeLayer:e=>e.id?e:{...e,id:b.getLayerId(e)},getNotEmptyGroup:e=>{const t=e.nodes.reduce(((e,t)=>t.nodes?e.concat(b.getNotEmptyGroup(t)):e.concat(t)),[]);return t.length>0?r()({},e,{nodes:t}):[]},getLayersByGroup:L,deepChange:O,reorder:(e,t)=>t.filter((e=>"background"===e.group)).concat(C(e,t)),getRegGeoserverRule:()=>A,findGeoServerName:e=>{let{url:t,regexRule:n}=e;const o=n||b.getRegGeoserverRule(),r=d()(t)?t[0]:t;return o.test(r)&&r.match(o)[0]||null},isInsideResolutionsLimits:z,visibleTimelineLayers:(e,t)=>e.filter((e=>{let n=t?.find((t=>t.id===e.id));return n?.visibility?e:null}))}},86638:(e,t,n)=>{"use strict";n.d(t,{Pp:()=>c,fE:()=>d,Xu:()=>p,Kd:()=>u,w8:()=>m,S$:()=>g,mo:()=>h,MZ:()=>f});const o=n(72500),r=n(13218),{addLocaleData:i}=n(68195);i([...n(6467),...n(78398),...n(54206),...n(51738),...n(32820),...n(95383),...n(13655),...n(32181),...n(68333),...n(22669),...n(44636),...n(44683),...n(72198),...n(82147)]);let a,s={it:{code:"it-IT",description:"Italiano"},en:{code:"en-US",description:"English"},fr:{code:"fr-FR",description:"Franais"},de:{code:"de-DE",description:"Deutsch"},es:{code:"es-ES",description:"Espaol"},zh:{code:"zh-ZH",description:""},nl:{code:"nl-NL",description:"Nederlands"},hr:{code:"hr-HR",description:"Hrvatski"},pt:{code:"pt-PT",description:"Portugus"},vi:{code:"vi-VN",description:"ting Vit"},fi:{code:"fi-FI",description:"Suomi"},sv:{code:"sv-SE",description:"Svenska"},sk:{code:"sk-SK",description:"Slovak"}},l={};const c=e=>{Promise.all([n.e(2456),n.e(9030),n.e(1058)]).then((t=>{n.g.Intl=n(58267),n(88750),n(95330),n(63474),n(53178),n(73836),n(13447),n(98320),n(72652),n(88792),n(18453),n(76925),n(53046),n(24968),e&&e()}).bind(null,n)).catch(n.oe)},d=function(e){s=e},p=function(){return a.getLocale(o.parse(window.location.href,!0).query)},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.keys(s)[0],n=s.en?{key:"en",locale:s.en}:{key:t,locale:s[t]};let o=s[a.normalizeLocaleCode(e.locale||(navigator?navigator.language||navigator.browserLanguage:n.key))];return o?o.code:n.locale.code},m=function(){return s},g=function(e,t){var n=e;return t.split(".").forEach((e=>{n=n?n[e]:null})),n||t},h=(e,t)=>{l[e]=t},f=(e,t)=>r(t)?t[e]||t.default:t||"";a={getLocale:u,normalizeLocaleCode:function(e){var t;if(null==e)t=void 0;else{let n=/^[a-z]+/i.exec(e);t=n&&n.length>0?n[0].toLowerCase():void 0}return t}}},7412:(e,t,n)=>{"use strict";n.d(t,{eq:()=>A,lY:()=>E,wR:()=>v,su:()=>C,Fm:()=>w,pf:()=>S,Te:()=>P,Qm:()=>O,y_:()=>T,gA:()=>_,K7:()=>M,ZX:()=>k});var o=n(53005),r=n(60130),i=n.n(r),a=n(30998),s=n.n(a),l=n(3918),c=n.n(l),d=n(68843),p=n(39980),u=n(529),m=n(6402),g=n(80009),h=n(35433),f=n(50948),y=n.n(f);let b;const A=()=>Object.keys(o.O7).filter((e=>-1!==b.AVAILABLE_FORMAT.indexOf(e))).reduce(((e,t)=>(e[t]=o.O7[t],e)),{}),E=()=>Object.keys(b.getAvailableInfoFormat()).map((e=>o.O7[e])),v=()=>o.O7[b.AVAILABLE_FORMAT[0]],C=(e,t,n,o,r)=>({type:"vector",visibility:!0,name:e||"GetFeatureInfo",styleName:n||"marker",label:r,features:b.clickedPointToGeoJson(t),...o}),w=(e,t)=>{if(b.services[e.type]){let n=b.getDefaultInfoFormatValueFromLayer(e,t),o=b.getLayerFeatureInfoViewer(e);const r=b.getLayerFeatureInfo(e);return b.services[e.type].buildRequest(e,t,n,o,r)}return{}},S=(e,t,n)=>b.services[e.type]&&b.services[e.type].getIdentifyFlow?b.services[e.type].getIdentifyFlow(e,t,n):null,P=e=>{const t={getValidResponses:e=>e,getNoValidResponses:()=>[]};return{getValidResponses:n=>n.reduce(((n,r)=>{if(r){let i;r.queryParams&&r.queryParams.hasOwnProperty("info_format")&&(i=r.queryParams.info_format),r.queryParams&&r.queryParams.hasOwnProperty("outputFormat")&&(i=r.queryParams.outputFormat);const a=(o.cX[r.format||o.so[i]||o.so[e]]||t).getValidResponses([r]);return[...n,...a]}return[...n]}),[]),getNoValidResponses:n=>n.reduce(((n,r)=>{if(r){let i;r.queryParams&&r.queryParams.hasOwnProperty("info_format")&&(i=r.queryParams.info_format),r.queryParams&&r.queryParams.hasOwnProperty("outputFormat")&&(i=r.queryParams.outputFormat);const a=(o.cX[r.format||o.so[i]||o.so[e]]||t).getNoValidResponses([r]);return[...n,...a]}return[...n]}),[])}},O=()=>({[o.O7.PROPERTIES]:d.Z,[o.O7.JSON]:d.Z,[o.O7.HTML]:p.Z,[o.O7.TEXT]:u.Z}),T=e=>e.visibility&&b.services[e.type]&&(void 0===e.queryable||e.queryable)&&"background"!==e.group&&"HIDDEN"!==e?.featureInfo?.format,I={wfs:m.Z,wms:g.Z,wmts:h.Z,vector:y()},_=e=>b.VIEWERS[e]?b.VIEWERS[e]:null,M=(e,t,n)=>{let o=t||[],r=n||[];return Object.keys(e).reduce(((t,n)=>{if("params"!==n&&-1!==o.indexOf(n))t[n]=e[n];else if("params"===n&&r.length>0){let o=e[n];Object.keys(o).forEach((e=>{-1===s()(r,(t=>t===e))&&(t[e]=o[e])}),{})}return t}),{})};let x={};const k=e=>x[e];b={AVAILABLE_FORMAT:["TEXT","PROPERTIES","HTML","TEMPLATE"],getAvailableInfoFormatLabels:()=>Object.keys(b.getAvailableInfoFormat()),getAvailableInfoFormat:A,getDefaultInfoFormatValue:v,clickedPointToGeoJson:e=>{if(!e)return[];if("Feature"===e.type){let t=[i()(e)];return e&&e.geometry&&"Point"!==e.geometry.type&&t.push(e),t}return void 0===e.lng||void 0===e.lat?e.features||[]:[...e.features||[],{id:"get-feature-info-point",type:"Feature",geometry:{type:"Point",coordinates:[parseFloat(e.lng),parseFloat(e.lat)]},style:[{iconUrl:c(),iconAnchor:[12,41],iconSize:[25,41]}]}]},services:I,getDefaultInfoFormatValueFromLayer:(e,t)=>e.featureInfo&&e.featureInfo.format&&o.O7[e.featureInfo.format]||t.format||b.getDefaultInfoFormatValue(),getLayerFeatureInfoViewer:e=>e.featureInfo&&e.featureInfo.viewer?e.featureInfo.viewer:{},getLayerFeatureInfo:e=>e&&e.featureInfo&&{...e.featureInfo}||{},VIEWERS:{},registerRowViewer:(e,t)=>{x[e]=t},getRowViewer:k}},52259:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DEFAULT_SCREEN_DPI:()=>Z,METERS_PER_UNIT:()=>V,GOOGLE_MERCATOR:()=>Q,EXTENT_TO_ZOOM_HOOK:()=>K,ZOOM_TO_EXTENT_HOOK:()=>q,RESOLUTIONS_HOOK:()=>Y,RESOLUTION_HOOK:()=>X,COMPUTE_BBOX_HOOK:()=>J,GET_PIXEL_FROM_COORDINATES_HOOK:()=>$,GET_COORDINATES_FROM_PIXEL_HOOK:()=>ee,registerHook:()=>ne,getHook:()=>oe,executeHook:()=>re,clearHooks:()=>ie,dpi2dpm:()=>ae,dpi2dpu:()=>se,getSphericalMercatorScale:()=>le,getGoogleMercatorScale:()=>ce,getSphericalMercatorScales:()=>de,getGoogleMercatorScales:()=>pe,getResolutionsForScales:()=>ue,getGoogleMercatorResolutions:()=>me,getResolutionsForProjection:()=>ge,getResolutions:()=>he,getScales:()=>fe,getZoomFromResolution:()=>ye,defaultGetZoomForExtent:()=>be,getZoomForExtent:()=>Ae,getCurrentResolution:()=>Ee,getCenterForExtent:()=>ve,getBbox:()=>Ce,isNearlyEqual:()=>we,mapUpdated:()=>Se,transformExtent:()=>Pe,groupSaveFormatted:()=>Oe,saveMapConfiguration:()=>Te,generateNewUUIDs:()=>Ie,mergeMapConfigs:()=>_e,addRootParentGroup:()=>Me,isSimpleGeomType:()=>xe,getSimpleGeomType:()=>ke,getIdFromUri:()=>De,parseLayoutValue:()=>Le,prepareMapObjectToCompare:()=>Re,updateObjectFieldKey:()=>Be,compareMapChanges:()=>Ne,createRegisterHooks:()=>Fe,detectIdentifyInMapPopUp:()=>Ue,getResolutionObject:()=>Ge,calculateExtent:()=>je,reprojectZoom:()=>We,default:()=>He});var o=n(47037),r=n.n(o),i=n(92742),a=n.n(i),s=n(81763),l=n.n(s),c=n(78718),d=n.n(c),p=n(27361),u=n.n(p),m=n(13311),g=n.n(m),h=n(95395),f=n.n(h),y=n(66604),b=n.n(y),A=n(3674),E=n.n(A),v=n(44908),C=n.n(v),w=n(87185),S=n.n(w),P=n(18446),O=n.n(P),T=n(41609),I=n.n(T),_=n(30998),M=n.n(_),x=n(50361),k=n.n(x),D=n(22762),L=n.n(D),R=n(57557),B=n.n(R),N=n(23570),F=n.n(N),U=n(90183),G=n(61868),j=n(24262),W=n(27418),H=n.n(W),z=n(90173);const Z=96,V={m:1,degrees:111194.87428468118,ft:.3048,"us-ft":1200/3937},Q={RADIUS:6378137,TILE_WIDTH:256,ZOOM_FACTOR:2},K="EXTENT_TO_ZOOM_HOOK",q="ZOOM_TO_EXTENT_HOOK",Y="RESOLUTIONS_HOOK",X="RESOLUTION_HOOK",J="COMPUTE_BBOX_HOOK",$="GET_PIXEL_FROM_COORDINATES_HOOK",ee="GET_COORDINATES_FROM_PIXEL_HOOK";let te={};function ne(e,t){te[e]=t}function oe(e){return te[e]}function re(e,t,n){const o=oe(e);return o?t(o):n?n():null}function ie(){te={}}function ae(e){return e*(100/2.54)}function se(e,t){const n=(0,U.getUnits)(t||"EPSG:3857");return V[n]*ae(e||Z)}function le(e,t,n,o,r){return 2*Math.PI*e/(t*Math.pow(n,o)/ae(r||Z))}function ce(e,t){return le(Q.RADIUS,Q.TILE_WIDTH,Q.ZOOM_FACTOR,e,t)}function de(e,t,n,o,r,i){var a=[];for(let s=o;s<=r;s++)a.push(le(e,t,n,s,i));return a}function pe(e,t,n){return de(Q.RADIUS,Q.TILE_WIDTH,Q.ZOOM_FACTOR,e,t,n)}function ue(e,t,n){const o=se(n,t);return e.map((e=>e/o))}function me(e,t,n){return ue(pe(e,t,n),"EPSG:3857",n)}function ge(e,t,n,o,r,i,a){let s=o??0,l=r??28,c=i??2;const d=z.default.defs(e),p=a??(0,U.getExtentForProjection)(e)?.extent;let u,m,g=(p?p[2]-p[0]:360*V.degrees/V[d.getUnits()])/256,h=(p?p[3]-p[1]:360*V.degrees/V[d.getUnits()])/256;g<=h?(u=1,m=Math.round(h/g),h/=m):(m=1,u=Math.round(g/h),g/=u);const f=Math.max(g,h),y=f/Math.pow(2,28);let b=n;void 0!==b?s=0:b=f/Math.pow(c,s);let A=t;return void 0===A&&(A=void 0!==l?void 0!==n?b/Math.pow(c,l):f/Math.pow(c,l):y),l=s+Math.floor(Math.log(b/A)/Math.log(c)),Array.apply(0,Array(l-s+1)).map(((e,t)=>b/Math.pow(c,t)))}function he(e){return oe("RESOLUTIONS_HOOK")?oe("RESOLUTIONS_HOOK")(e):e&&"EPSG:3857"!==(0,U.normalizeSRS)(e)?ge(e):me(0,21,Z)}function fe(e,t){const n=se(t,e);return he(e).map((e=>e*n))}function ye(e){const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:he()).map(((t,n)=>({diff:Math.abs(t-e),zoom:n}))),{zoom:n}=L()(t,"diff");return n}function be(e,t,n,o,r,i){const a=e[2]-e[0],s=e[3]-e[1],l=Math.abs(a/t.width),c=Math.abs(s/t.height),d=Math.max(l,c),p=i||ue(pe(n,o,r||Z),"EPSG:3857",r),{zoom:u}=p.reduce(((e,t,n)=>{const o=Math.abs(t-d);return o>e.diff?e:{diff:o,zoom:n}}),{diff:Number.POSITIVE_INFINITY,zoom:0});return Math.max(0,Math.min(u,o))}function Ae(e,t,n,o,r){return oe("EXTENT_TO_ZOOM_HOOK")?oe("EXTENT_TO_ZOOM_HOOK")(e,t,n,o,r):be(e,t,n,o,r,oe("RESOLUTIONS_HOOK")?oe("RESOLUTIONS_HOOK")():null)}function Ee(e,t,n,o){return oe("RESOLUTION_HOOK")?oe("RESOLUTION_HOOK")(e,t,n,o):me(t,n,o)[e]}function ve(e,t){var n=(e[2]-e[0])/2,o=(e[3]-e[1])/2;return{x:e[0]+n,y:e[1]+o,crs:t}}function Ce(e,t){return re("COMPUTE_BBOX_HOOK",(n=>n(e,t)))}const we=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)==0};function Se(e,t){return!(!e||I()(e)||!t||I()(t))&&(!(we(t?.center?.x,e?.center?.x)&&we(t?.center?.y,e?.center?.y))||t?.zoom!==e?.zoom)}function Pe(e,t,n,o){let r=(0,U.getUnits)(e);return"ft"===r?{width:n/V.ft,height:o/V.ft}:"us-ft"===r?{width:n/V["us-ft"],height:o/V["us-ft"]}:"degrees"===r?{width:n/(111132.92-559.82*Math.cos(2*t.y)+1.175*Math.cos(4*t.y)),height:o/(111412.84*Math.cos(t.y)-93.5*Math.cos(3*t.y))}:{width:n,height:o}}const Oe=e=>({id:e.id,title:e.title,description:e.description,tooltipOptions:e.tooltipOptions,tooltipPlacement:e.tooltipPlacement,expanded:e.expanded});function Te(e,t,n,o,r,i,a){const s={center:e.center,maxExtent:e.maxExtent,projection:e.projection,units:e.units,mapInfoControl:e.mapInfoControl,zoom:e.zoom,mapOptions:e.mapOptions||{}},l=t.map((e=>(0,j.z8)(e))),c=n.reduce(((e,t)=>e.concat((0,j.ar)(t))),[].concat(n.map((e=>e.id)))).map((e=>{const t=(0,j.Mk)(n,e);return t&&t.nodes?Oe(t):null})).filter((e=>e)),d=o.filter((e=>!!e.thumbnail)),p=(0,j.V5)(l),u=l.map((e=>H()({},e,{tileMatrixSet:e.tileMatrixSet&&e.tileMatrixSet.length>0,matrixIds:e.matrixIds&&Object.keys(e.matrixIds)})));let m=M()(u,(e=>"annotations"===e.id));if(-1!==m){let e=u[m].features.map((e=>"FeatureCollection"===e.type?{...e,features:e.features.map((e=>e.properties.geometryGeodesic?(0,G.t8)("properties.geometryGeodesic",null,e):e))}:e.properties.geometryGeodesic?(0,G.t8)("properties.geometryGeodesic",null,e):{}));u[m]=(0,G.t8)("features",e,u[m])}return{version:2,map:H()({},s,{layers:u,groups:c,backgrounds:d,text_search_config:r,bookmark_search_config:i},!I()(p)&&{sources:p}||{}),...a}}const Ie=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=k()(e),n={...u()(e,"map.layers",[]).reduce(((e,t)=>({...e,[t.id]:"annotations"===t.id?t.id:F()()})),{}),...u()(e,"widgetsConfig.widgets",[]).reduce(((e,t)=>({...e,[t.id]:F()()})),{})};return(0,G.t8)("map.backgrounds",u()(e,"map.backgrounds",[]).map((e=>({...e,id:n[e.id]}))),(0,G.t8)("widgetsConfig",{collapsed:b()(f()(u()(e,"widgetsConfig.collapsed",{}),((e,t)=>n[t])),(e=>({...e,layouts:b()(e.layouts,(e=>({...e,i:n[e.i]})))}))),layouts:b()(u()(e,"widgetsConfig.layouts",{}),(e=>e.map((e=>({...e,i:n[e.i]}))))),widgets:u()(e,"widgetsConfig.widgets",[]).map((e=>({...e,id:n[e.id],layer:{...u()(e,"layer",{}),id:n[u()(e,"layer.id")]}})))},(0,G.t8)("map.layers",u()(e,"map.layers",[]).map((e=>({...e,id:n[e.id]}))),t)))},_e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>d()(e,E()(e).filter((t=>void 0!==e[t])))))},n=Ie(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),o=[...u()(e,"map.backgrounds",[]),...u()(n,"map.backgrounds",[])],r=t(u()(e,"map.layers",[])),i=t(u()(n,"map.layers",[])),a=g()(r,(e=>"annotations"===e.id)),s=g()(i,(e=>"annotations"===e.id)),l=[...i.filter((e=>"annotations"!==e.id)),...r.filter((e=>"annotations"!==e.id)),...a||s?[{...a||{},...s||{},features:[...u()(a,"features",[]),...u()(s,"features",[])]}]:[]],c=["id","visibility"],p=l.filter((e=>"background"===e.group)).filter(((e,t,n)=>M()(n,(t=>O()(B()(e,c),B()(t,c))))===t)),m=M()(p,(e=>e.visibility)),h={...u()(e,"map.sources",{}),...u()(n,"map.sources",{})},f=u()(e,"widgetsConfig",{}),y=u()(n,"widgetsConfig",{});return{...n,...e,catalogServices:{...u()(e,"catalogServices",{}),services:{...u()(e,"catalogServices.services",{}),...u()(n,"catalogServices.services",{})}},map:{...n.map,...e.map,backgrounds:o,groups:S()([...u()(e,"map.groups",[]),...u()(n,"map.groups",[])],((e,t)=>e.id===t.id)),layers:[...p.slice(0,m+1),...p.slice(m+1).map((e=>({...e,visibility:!1}))),...l.filter((e=>"background"!==e.group))],sources:I()(h)?void 0:h},widgetsConfig:{collapsed:{...f.collapsed,...y.collapsed},layouts:C()([...E()(f.layouts),...E()(y.layouts)]).reduce(((e,t)=>({...e,[t]:[...u()(f,`layouts.${t}`,[]),...u()(y,`layouts.${t}`,[])]})),{}),widgets:[...u()(f,"widgets",[]),...u()(y,"widgets",[])]},timelineData:{...u()(e,"timelineData",{}),...u()(n,"timelineData",{})},dimensionData:{...u()(e,"dimensionData",{}),...u()(n,"dimensionData",{})}}},Me=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"RootGroup";const n=u()(e,"map.groups",[]),o=n.filter((e=>{let{id:t}=e;return"Default"!==t})),r=g()(n,(e=>{let{id:t}=e;return"Default"===t})),i=r&&{id:F()(),title:t,expanded:r.expanded},a=r?[...o.map((e=>{let{id:t,...n}=e;return{id:`${i.id}.${t}`,...n}})),i]:o;return{...e,map:{...e.map,groups:a,layers:u()(e,"map.layers",[]).map((e=>{let{group:t,...n}=e;return{...n,group:!r||"background"===t||"Default"!==t&&t?r&&g()(a,(e=>{let{id:n}=e;return n.slice(n.indexOf(".")+1)===t}))?.id||t:i.id}}))}}};function xe(e){switch(e){case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":case"Text":return!1;default:return!0}}function ke(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Point";switch(e){case"Point":case"LineString":case"Polygon":case"Circle":default:return e;case"MultiPoint":case"Marker":case"Text":return"Point";case"MultiLineString":return"LineString";case"MultiPolygon":return"Polygon";case"GeometryCollection":return"GeometryCollection"}}const De=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/data\/(\d+)/;const n=decodeURIComponent(e),o=t.exec(n);return o&&o.length&&o.length>1?o[1]:null},Le=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r()(e)&&-1!==e.indexOf("%")?parseFloat(a()(e))*t/100:l()(e)?e:0},Re=e=>{const t=["apiKey","time","args","fixed"],n=e=>t.reduce(((t,n)=>t||e===n),!1);Object.keys(e).forEach((t=>{const o=e[t],r=typeof o;"object"!==r||null===o||n(t)?"undefined"!==r&&o&&!n(t)||delete e[t]:(Re(o),Object.keys(o).length||delete e[t])}))},Be=(e,t,n)=>{e[t]&&(Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(e,t)),delete e[t])},Ne=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=["map.layers","map.backgrounds","map.text_search_config","map.bookmark_search_config","map.text_serch_config","map.zoom","widgetsConfig"],o=d()(k()(e),n),r=d()(k()(t),n);return Be(o.map,"text_serch_config","text_search_config"),Be(r.map,"text_serch_config","text_search_config"),Re(o),Re(r),O()(o,r)},Fe=()=>{let e={};return{registerHook:(t,n)=>{e[t]=n},getHook:t=>e[t],executeHook:(t,n,o)=>{const r=e[t];return r?n(r):o?o():null}}},Ue=e=>{if(e.mapPopups?.popups){let t=e.mapPopups.popups.filter((e=>"identify"===e?.component?.toLowerCase()));return!!(t&&t.length>0)}return!1},Ge=function(e,t){let{projection:n,resolutions:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=se(Z,n);if("scale"===t){const t=e/r;return{resolution:t,scale:e,zoom:ye(t,o)}}return{resolution:e,scale:e*r,zoom:ye(e,o)}};function je(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0,crs:"EPSG:3857"},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{width:100,height:100},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"EPSG:3857";const{x:r,y:i}=(0,U.reproject)(e,e.crs??o,o),a=t*n.width/2,s=t*n.height/2;return[r-a,i-s,r+a,i+s]}const We=(e,t,n)=>{const o=V[(0,U.getUnits)(t)]/V[(0,U.getUnits)(n)],r=he(t)[e]*o,i=he(n),a=i.reduce(((e,t)=>Math.abs(t-r)<Math.abs(e-r)?t:e),i[0]);return i.indexOf(a)},He={createRegisterHooks:Fe,EXTENT_TO_ZOOM_HOOK:K,RESOLUTIONS_HOOK:Y,RESOLUTION_HOOK:X,COMPUTE_BBOX_HOOK:J,GET_PIXEL_FROM_COORDINATES_HOOK:$,GET_COORDINATES_FROM_PIXEL_HOOK:ee,DEFAULT_SCREEN_DPI:Z,ZOOM_TO_EXTENT_HOOK:q,registerHook:ne,getHook:oe,dpi2dpm:ae,getSphericalMercatorScales:de,getSphericalMercatorScale:le,getGoogleMercatorScales:pe,getGoogleMercatorResolutions:me,getGoogleMercatorScale:ce,getResolutionsForScales:ue,getZoomForExtent:Ae,defaultGetZoomForExtent:be,getCenterForExtent:ve,getResolutions:he,getScales:fe,getBbox:Ce,mapUpdated:Se,getCurrentResolution:Ee,transformExtent:Pe,saveMapConfiguration:Te,generateNewUUIDs:Ie,mergeMapConfigs:_e,addRootParentGroup:Me,isSimpleGeomType:xe,getSimpleGeomType:ke,getIdFromUri:De,parseLayoutValue:Le,prepareMapObjectToCompare:Re,updateObjectFieldKey:Be,compareMapChanges:Ne,clearHooks:ie,getResolutionObject:Ge,calculateExtent:je,reprojectZoom:We}},22843:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{UY:()=>combineReducers,lp:()=>combineEpics,bh:()=>getMonitoredState,rx:()=>createPlugin,ZP:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(24852),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),object_assign__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(27418),object_assign__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(object_assign__WEBPACK_IMPORTED_MODULE_1__),lodash_omit__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(57557),lodash_omit__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash_omit__WEBPACK_IMPORTED_MODULE_2__),lodash_isObject__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(13218),lodash_isObject__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(lodash_isObject__WEBPACK_IMPORTED_MODULE_3__),lodash_head__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(91175),lodash_head__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(lodash_head__WEBPACK_IMPORTED_MODULE_4__),lodash_isArray__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1469),lodash_isArray__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(lodash_isArray__WEBPACK_IMPORTED_MODULE_5__),lodash_isString__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(47037),lodash_isString__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(lodash_isString__WEBPACK_IMPORTED_MODULE_6__),lodash_isFunction__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(23560),lodash_isFunction__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(lodash_isFunction__WEBPACK_IMPORTED_MODULE_7__),lodash_memoize__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(88306),lodash_memoize__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(lodash_memoize__WEBPACK_IMPORTED_MODULE_8__),lodash_get__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(27361),lodash_get__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_9__),lodash_endsWith__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(66654),lodash_endsWith__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(lodash_endsWith__WEBPACK_IMPORTED_MODULE_10__),react_redux__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(71703),react_redux__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_11__),url__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(72500),url__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(url__WEBPACK_IMPORTED_MODULE_12__),lodash_curry__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(41239),lodash_curry__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(lodash_curry__WEBPACK_IMPORTED_MODULE_13__),redux_observable__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(1376),redux_observable__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(redux_observable__WEBPACK_IMPORTED_MODULE_14__),redux__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(12838),_EpicsUtils__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(16135);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends.apply(this,arguments)}function loadScript(e){return new Promise((function(t,n){const o=document.createElement("script");let r=!1;o.type="text/javascript",o.src=e,o.async=!0,o.onerror=function(e){n(e,o)},o.onload=o.onreadystatechange=function(){r||this.readyState&&"complete"!==this.readyState||(r=!0,t())};const i=document.getElementsByTagName("script")?.[0];i?i.parentElement.insertBefore(o,i):document.head.appendChild(o)}))}const dynamicFederation=(e,t)=>new Promise((e=>e(__webpack_require__.I&&__webpack_require__.I("default")))).then((()=>window[e].init(__webpack_require__.S.default))).then((()=>window[e].get(t).then((e=>e())))),defaultMonitoredState=[{name:"mapType",path:"maptype.mapType"},{name:"user",path:"security.user"}],getFromPlugins=lodash_curry__WEBPACK_IMPORTED_MODULE_13___default()(((e,t)=>Object.keys(t).map((n=>t[n][e])).reduce(((e,t)=>({...e,...t})),{}))),getReducers=getFromPlugins("reducers"),getEpics=getFromPlugins("epics"),combineReducers=(e,t)=>{const n=getReducers(e);return(0,redux__WEBPACK_IMPORTED_MODULE_15__.UY)({...t,...n})},combineEpics=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const o={...getEpics(e),...t};return(0,redux_observable__WEBPACK_IMPORTED_MODULE_14__.combineEpics)(...(0,_EpicsUtils__WEBPACK_IMPORTED_MODULE_16__.f)(o,n))},filterState=lodash_memoize__WEBPACK_IMPORTED_MODULE_8___default()(((e,t)=>t.reduce(((t,n)=>object_assign__WEBPACK_IMPORTED_MODULE_1___default()(t,{[n.name]:lodash_get__WEBPACK_IMPORTED_MODULE_9___default()(e,n.path)})),{})),((e,t)=>t.reduce(((t,n)=>t+JSON.stringify(lodash_get__WEBPACK_IMPORTED_MODULE_9___default()(e,n.path))),""))),getPluginSimpleName=e=>lodash_endsWith__WEBPACK_IMPORTED_MODULE_10___default()(e,"Plugin")&&e.substring(0,e.length-6)||e,normalizeName=e=>lodash_endsWith__WEBPACK_IMPORTED_MODULE_10___default()(e,"Plugin")&&e||e+"Plugin",getPluginsConfiguration=(e,t)=>{const n=getPluginSimpleName(t);return e.filter((e=>e.name===n||e===n)).map((e=>lodash_isString__WEBPACK_IMPORTED_MODULE_6___default()(e)?{name:e}:e))},getPluginConfiguration=(e,t)=>{const n=getPluginsConfiguration(e,t);return lodash_head__WEBPACK_IMPORTED_MODULE_4___default()(n)||{}},parseExpression=function(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},context=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},value=arguments.length>2?arguments[2]:void 0;const searchExpression=/^\{(.*)\}$/,expression=searchExpression.exec(value),dispatch=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return()=>state("store").dispatch(e.apply(null,[e,...n]))},request=url__WEBPACK_IMPORTED_MODULE_12___default().parse(location.href,!0);return null!==expression?eval(expression[1]):value},handleExpression=(e,t,n)=>lodash_isString__WEBPACK_IMPORTED_MODULE_6___default()(n)&&0===n.indexOf("{")?parseExpression(e,t,n):n,filterDisabledPlugins=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=lodash_get__WEBPACK_IMPORTED_MODULE_9___default()(e,"cfg.disablePluginIf")||lodash_get__WEBPACK_IMPORTED_MODULE_9___default()(e,"plugin.disablePluginIf");return!(o&&!lodash_get__WEBPACK_IMPORTED_MODULE_9___default()(e,"cfg.skipAutoDisable")&&handleExpression(t,n.requires,o))},isContainedInList=(e,t,n,o)=>e&&t&&-1!==handleExpression(n,o,t).indexOf(e),showIn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return(isContainedInList(r,n.showIn,e,t)||isContainedInList(o,n.showIn,e,t)||!n.showIn&&i)&&!(isContainedInList(r,n.hideFrom,e,t)||isContainedInList(o,n.hideFrom,e,t))},isMapStorePlugin=e=>e.loadPlugin||e.displayName||e.prototype?.isReactComponent||e.isMapStorePlugin,getPluginImplementation=(e,t)=>isMapStorePlugin(e)?e:e(t),includeLoaded=(e,t,n,o)=>{if(t[e]){const r=t[e],i=getPluginImplementation(r.component||r,o);return object_assign__WEBPACK_IMPORTED_MODULE_1___default()(i,n,{loadPlugin:void 0},{...r.containers})}return n},getPriority=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return lodash_get__WEBPACK_IMPORTED_MODULE_9___default()(t,n+".priority")||lodash_get__WEBPACK_IMPORTED_MODULE_9___default()(e,n+".priority")||0},getMorePrioritizedContainer=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>3?arguments[3]:void 0;return(arguments.length>2?arguments[2]:void 0).reduce(((n,o)=>{const r=o.name||o,i=getPriority(e,t,r);return i>n.priority?{plugin:{name:r,impl:object_assign__WEBPACK_IMPORTED_MODULE_1___default()({},e[r],t[r])},priority:i}:n}),{plugin:null,priority:n})},parsePluginConfig=(e,t,n)=>lodash_isArray__WEBPACK_IMPORTED_MODULE_5___default()(n)?n.map((n=>parsePluginConfig(e,t,n))):lodash_isObject__WEBPACK_IMPORTED_MODULE_3___default()(n)?Object.keys(n).reduce(((o,r)=>{const i=n[r];return object_assign__WEBPACK_IMPORTED_MODULE_1___default()(o,{[r]:parsePluginConfig(e,t,i)})}),{}):parseExpression(e,t,n),canContain=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t[e]||n[e]||!1},isMorePrioritizedContainer=(e,t,n,o)=>null===getMorePrioritizedContainer(e,t,n,o).plugin,isValidConfiguration=e=>e&&lodash_isString__WEBPACK_IMPORTED_MODULE_6___default()(e)||lodash_isObject__WEBPACK_IMPORTED_MODULE_3___default()(e)&&e.name,executeDeferredProp=(e,t,n)=>e&&lodash_isFunction__WEBPACK_IMPORTED_MODULE_7___default()(e[n])?{...e,[n]:e[n](t)}:e,getPluginItems=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=arguments.length>7?arguments[7]:void 0;return Object.keys(t).reduce(((e,r)=>[...e,...getPluginsConfiguration(n,r).map((e=>({name:r,impl:executeDeferredProp(includeLoaded(getPluginSimpleName(r),a,t[r]),e,o),config:e})))]),[]).filter((e=>isValidConfiguration(e.config))).filter((e=>canContain(o,e.impl,e.config.override))).filter((n=>showIn(e,t.requires,n.config,o,r,i))).reduce(((e,t)=>{const n=t.impl?.[o];return lodash_isArray__WEBPACK_IMPORTED_MODULE_5___default()(n)?[...e,...n.map((e=>({...t,impl:{...t.impl,[o]:e}})))]:[...e,t]}),[]).filter((e=>isMorePrioritizedContainer(e.impl,e.config.override,n,getPriority(e.impl,e.config.override,o)))).map((r=>{const i=getPluginSimpleName(r.name),s=includeLoaded(i,a,r.impl);return{name:i,...{...lodash_get__WEBPACK_IMPORTED_MODULE_9___default()(s,o+".impl")||lodash_get__WEBPACK_IMPORTED_MODULE_9___default()(s,o)||{},...lodash_get__WEBPACK_IMPORTED_MODULE_9___default()(r.config,"override."+o)??{}},cfg:{...s?.cfg??{},...parsePluginConfig(e,t.requires,r.config.cfg||{})??{}},plugin:s,items:getPluginItems(e,t,n,i,null,!0,a)}})).filter((n=>filterDisabledPlugins(n,e,t))).filter((e=>!s||s(e)))},pluginsMergeProps=(e,t,n)=>{const{pluginCfg:o,...r}=n;return object_assign__WEBPACK_IMPORTED_MODULE_1___default()({},r,e,t,o||{})},importPlugin=e=>dynamicFederation(e,"./plugin"),getMonitoredState=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return filterState(e,defaultMonitoredState.concat(t))},mapPluginsPosition=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(((e,t)=>{const n=t.cfg&&t.cfg.containerPosition||"bodyPlugins";return{...e,[n]:e[n]?[...e[n],t]:[t]}}),{})},getPlugins=e=>Object.keys(e).map((t=>e[t])).reduce(((e,t)=>object_assign__WEBPACK_IMPORTED_MODULE_1___default()({},e,lodash_omit__WEBPACK_IMPORTED_MODULE_2___default()(t,"reducers","epics"))),{}),getPluginDescriptor=function(e,t,n,o){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=lodash_isObject__WEBPACK_IMPORTED_MODULE_3___default()(o)?o.name:o,a=lodash_isObject__WEBPACK_IMPORTED_MODULE_3___default()(o)?o.id:null,s=lodash_isObject__WEBPACK_IMPORTED_MODULE_3___default()(o)?o.stateSelector:a||void 0,l=!lodash_isObject__WEBPACK_IMPORTED_MODULE_3___default()(o)||void 0===o.isDefault||o.isDefault,c=t[(lodash_isObject__WEBPACK_IMPORTED_MODULE_3___default()(o)?o.name:o)+"Plugin"];return c?{id:a||i,name:i,impl:includeLoaded(i,r,getPluginImplementation(c,s),s),cfg:object_assign__WEBPACK_IMPORTED_MODULE_1___default()({},c.cfg||{},lodash_isObject__WEBPACK_IMPORTED_MODULE_3___default()(o)?parsePluginConfig(e,t.requires,o.cfg):{}),items:getPluginItems(e,t,n,i,a,l,r)}:null},getConfiguredPlugin=function(e){let t=arguments.length>2?arguments[2]:void 0;if(e){const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})[e.name]||!e.plugin.loadPlugin&&e.plugin,o=lodash_isObject__WEBPACK_IMPORTED_MODULE_3___default()(e)?e.id:null,r=lodash_isObject__WEBPACK_IMPORTED_MODULE_3___default()(e)?e.stateSelector:o||void 0,i=getPluginImplementation(n?.component||n,r),a=n=>i?react__WEBPACK_IMPORTED_MODULE_0___default().createElement(i,_extends({key:e.id},n,e.cfg,{pluginCfg:e.cfg,items:e.items||[]})):t;return a.loaded=!!n,a}return e},setRefToWrappedComponent=e=>t=>{t&&(window[`${e}Plugin`]=t)},connect=(e,t,n,o)=>(0,react_redux__WEBPACK_IMPORTED_MODULE_11__.connect)(e,t,n||pluginsMergeProps,o),createPlugin=(e,t)=>{let{component:n,options:o={},containers:r={},reducers:i={},epics:a={},lazy:s=!1,enabler:l=(()=>!0),loader:c}=t;const d=normalizeName(e),p=s?{loadPlugin:e=>{c().then((t=>{const n=t.default||t;e(object_assign__WEBPACK_IMPORTED_MODULE_1___default()(n,{isMapStorePlugin:!0}))}))},enabler:l}:object_assign__WEBPACK_IMPORTED_MODULE_1___default()(n,{isMapStorePlugin:!0});return{[d]:object_assign__WEBPACK_IMPORTED_MODULE_1___default()(p,r,o),reducers:i,epics:a}},loadPlugin=(e,t)=>loadScript(e).then((()=>importPlugin(t))).then((e=>({name:t,plugin:e}))),__WEBPACK_DEFAULT_EXPORT__={combineReducers,combineEpics,filterState,filterDisabledPlugins,getMonitoredState,mapPluginsPosition,getPlugins,getPluginDescriptor,getPluginItems,getConfiguredPlugin,setRefToWrappedComponent,connect,createPlugin,importPlugin,loadPlugin,handleExpression,getMorePrioritizedContainer,getPluginConfiguration,isMapStorePlugin}},59112:(e,t,n)=>{"use strict";n.d(t,{gP:()=>d,BC:()=>u,YQ:()=>g,yQ:()=>h,fu:()=>f});var o=n(13218),r=n.n(o),i=n(27361),a=n.n(i),s=n(86638),l=n(91175),c=n.n(l);const d=function(e){let{label:t}=e;const n=RegExp("^/|/$|/{2,}");return!(!t||n.test(t))},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"title",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" - ";switch(e){case"title":return(r()(t.title)?t.title[n]||t.title.default:t.title)||t.name||"";case"description":return t.description||"";case"both":{const e=(r()(t.title)?t.title[n]||t.title.default:t.title)||t.nam||"",i=t.description||"";return`${e}${o&&i?o:""}${i}`}default:return t[e]}},u=e=>{let{node:t,currentLocale:n,tooltipOptions:o={separator:" - ",maxLength:807}}=e,r=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" - ";return p(e.tooltipOptions,e,t,n)}(t,n,o.separator)||"";return r=r&&r.substring(0,o.maxLength),r.length===o.maxLength&&(r+="..."),{title:p("title",t,n,o.separator),tooltipText:r}},m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return c()(t.filter((t=>t.label===e)))||t.reduce(((t,n)=>t||!!n.nodes&&m(e,n.nodes)),void 0)},g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e||"";return r()(e)&&(n=e[t||(0,s.Kd)()]||e.default),n.replace(/\./g,"/").replace(/\${dot}/g,".")},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.filter((e=>e.nodes)).reduce(((e,o)=>(e.push(n?o:{label:o.title,value:o.id}),o.nodes.length>0?e.concat(h(o.nodes,t+1,n)):e)),[])},f=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/[^\.\/]+/g,(t=>{const n=a()(m(t,e),"label");return e&&n||t}));return t=t.replace(/\./g,"/"),t=t.replace(/\${dot}/g,"."),t}},59286:(e,t,n)=>{"use strict";n.d(t,{getCleanTemplate:()=>d});var o=n(47037),r=n.n(o),i=n(18721),a=n.n(i),s=n(92742),l=n.n(s);n(41106);const c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=r()(t)&&l()(t.substring(n,t.length-o))||"";return a()(e,i)},d=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:()=>"";const s=r()(e)&&e.match(n),l=s&&s.map((e=>{const n=e.replace(/(<([^>]+)>)/gi,"");return{previous:e,next:c(t,n,o,i)?n:a(e)}}))||null;return l&&l.reduce(((e,t)=>e.replace(t.previous,t.next)),e)||e||""}},83255:(e,t,n)=>{e.exports=n.p+"grid.svg"},11636:(e,t,n)=>{e.exports=n.p+"world.svg"},89834:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAGzSURBVHjaYvTxcWb4+53h3z8GZpZff/79+v3n/7/fDAz/GHAAgABi+f37e3FxOZD1Dwz+/v3z9y+E/AMFv3//+Qumfv9et241QACxMDExAVWfOHkJJAEW/gUEP0EQDn78+AHE/gFOQJUAAcQiy8Ag8O+fLFj1n1+/QDp+/gQioK7fP378+vkDqOH39x9A/RJ/gE5lAAhAYhzcAACCQBDkgRXRjP034R0IaDTZTFZn0DItot37S94KLOINerEcI7aKHAHE8v/3r/9//zIA1f36/R+o4tevf1ANYNVA9P07RD9IJQMDQACxADHD3z8Ig4GMHz+AqqHagKp//fwLVA0U//v7LwMDQACx/LZiYFD7/5/53/+///79BqK/EMZ/UPACSYa/v/8DyX9A0oTxx2EGgABi+a/H8F/m339BoCoQ+g8kgRaCQvgPJJiBYmAuw39hxn+uDAABxMLwi+E/0PusRkwMvxhBGoDkH4b/v/+D2EDyz///QB1/QLb8+sP0lQEggFh+vGXYM2/SP6A2Zoaf30Ex/J+PgekHwz9gQDAz/P0FYrAyMfz7wcDAzPDtFwNAgAEAd3SIyRitX1gAAAAASUVORK5CYII="},94122:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAGzSURBVHjaYvTxcWb4+53h3z8GZpZff/79+v3n/7/fDAz/GHAAgABi+f37e3FxOZD1Dwz+/v3z9y+E/AMFv3//+Qumfv9et241QACxMDExAVWfOHkJJAEW/gUEP0EQDn78+AHE/gFOQJUAAcQiy8Ag8O+fLFj1n1+/QDp+/gQioK7fP378+vkDqOH39x9A/RJ/gE5lAAhAYhzcAACCQBDkgRXRjP034R0IaDTZTFZn0DItot37S94KLOINerEcI7aKHAHE8v/3r/9//zIA1f36/R+o4tevf1ANYNVA9P07RD9IJQMDQACxADHD3z8Ig4GMHz+AqqHagKp//fwLVA0U//v7LwMDQACx/LZiYFD7/5/53/+///79BqK/EMZ/UPACSYa/v/8DyX9A0oTxx2EGgABi+a/H8F/m339BoCoQ+g8kgRaCQvgPJJiBYmAuw39hxn+uDAABxMLwi+E/0PusRkwMvxhBGoDkH4b/v/+D2EDyz///QB1/QLb8+sP0lQEggFh+vGXYM2/SP6A2Zoaf30Ex/J+PgekHwz9gQDAz/P0FYrAyMfz7wcDAzPDtFwNAgAEAd3SIyRitX1gAAAAASUVORK5CYII="},16885:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3woNChAfXTteVAAAAjRJREFUKM9VkklIlVEAhb9fHxkVDWLwQKw2URI0kQ2GmoYELcJFhFZQ+FBxHaRhIA20qKiWrzDSoAwMGsgicEIlizILi+ZNIERJhNp777/3/ve0sEV9q7M78J0TJBqGxb94D94BBhBguLK8B6V+M/njGwbwgJ23hLHSBCQahuV9pOsDTlZGHX1O1lq19TqFYUbJx07GhArDUJlMWul0SnZ0RD4KlXw0riDRMKyymq10DnoiD5EH40Sk2ZxxYpQW+PkLxbLxW7cwp7aWa13jnE++IAss8nC3SYQe7jdZIkH30RQZJ94GkGptxTXWk336FO/KqqjYfYs376fIGEOQqBtUaU0x1/o8kZ9tdhZCibeELHVPmWheSxCP/6dKgtcfvxPDp9hfItp6xIOmDJWn5tLdNEX8jGGy6jPzkx246glkDN5avDEQRcRW59P7EWIg2gcCnIPy0zl4J9ZczDB+dDGL9h3Hh5bsZyN/Fwnw3iOEBDs+TcLXr19krVUqldLMzIzS09MKW5olSX7jJtl1GzRLpImKcvVf7lY8/4r2Hr6jhSuOKCu//RLZY0/IuXCBWOcNwmSSRLhn9hJhiIwBie07Osnr7aMo+MarykHWFi1HkSXrS3U9bv02THwBoysrOPF7M7kLIiQICvMJCuNIomBVLgcP3WaosISlbW00Pm+l7kAxQX/HTX3oGqKrYBsvhwzWpXFRxMi9ah5WViHn2NXbTdHOs+Aj8BF5y5Zw7FwNAyev8gcAFF3B0hKD4gAAAABJRU5ErkJggg=="},11533:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAGCSURBVHjaYvz48SMDEvj3j+Hfty/npKX/MTAY3L7NwMf3DxUABBALUBEfHx+Q/P//P1QPJ7t6UdG/P3+EpKQY2Nj+I4Fnz54BBBALRBFcNUj4378fDx78+/3739+/QBvhqhkZGf/8+QMQQCxoqiEkUPX/X7+BShiQjAc7+B9AALE8SEmRi4//++ED0Dyg2Qx///77+fPfr1//f/9+PWMGUBVQHCT15w+LkNCF3FyAAGJ5t3q1oJLSr8eP///+8//Pb5BLgMYDyV+/3q1Z8w/MAPrn/69f7AoKzxgYAAKIhcventvIiE1e/t+/vwx/QIYBbfi4dStQKa+LC9QGoIa/f1lFRAT27QMIIMa3b9/y8/PDXQ/ywI8ft1xdgQar7tsHDyWgLNDTd+7cAQggFqA/kL0LkQQ5A4j+/mVE8jEQAEMJIIBAGuCqIaKMDAxsMjJAJzEyMQFNhYlBZQECCKTh1atXyHH56927Q1u2/GJgcLh0iUFICOSEf//+gB0CBAABBgAC4UQezUonUAAAAABJRU5ErkJggg=="},55350:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFnSURBVHjaYvzPgAD/UNlYEUAAmuTYAAAQhAEYqF/zFbe50RZ1cMmS9TLi0pJLRjZohAMTGFUN9HdnHgEE1sDw//+Tp0ClINW/f0NIKPoFJH/9//ULyGaUlQXaABBALAx/Gf4zAt31F4i+ffj3/cN/XrFfzOx//v///f//LzACM/79ZmD8/e8TA0AAMYHdDVT958vXP38nMDB0s3x94/Tj5y+YahhiAKLfQKUAAcQEdtJfoDHMF2L+vPzDmFXLelf551tGFOOhev4A/QgQQExgHwAd8IdFT/Wz6j+GhlpmXSOW/2z///8Eq/sJ18Dw/zdQA0AAMQExxJjjdy9x2/76EfLz4MXdP/i+wsyGkkA3Aw3984cBIIAYfzIwMKel/bt3jwEaLNAwgZIQxp/fDH/+MqqovL14ESCAWICeZvr9h0FSEhSgwBgAygFDEMT+wwAhgQgc4kAEVAwQQIxfUSMSTxxDAECAAQAJWke8v4u1tAAAAABJRU5ErkJggg=="},88777:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFnSURBVHjaYvzPgAD/UNlYEUAAmuTYAAAQhAEYqF/zFbe50RZ1cMmS9TLi0pJLRjZohAMTGFUN9HdnHgEE1sDw//+Tp0ClINW/f0NIKPoFJH/9//ULyGaUlQXaABBALAx/Gf4zAt31F4i+ffj3/cN/XrFfzOx//v///f//LzACM/79ZmD8/e8TA0AAMYHdDVT958vXP38nMDB0s3x94/Tj5y+YahhiAKLfQKUAAcQEdtJfoDHMF2L+vPzDmFXLelf551tGFOOhev4A/QgQQExgHwAd8IdFT/Wz6j+GhlpmXSOW/2z///8Eq/sJ18Dw/zdQA0AAMQExxJjjdy9x2/76EfLz4MXdP/i+wsyGkkA3Aw3984cBIIAYfzIwMKel/bt3jwEaLNAwgZIQxp/fDH/+MqqovL14ESCAWICeZvr9h0FSEhSgwBgAygFDEMT+wwAhgQgc4kAEVAwQQIxfUSMSTxxDAECAAQAJWke8v4u1tAAAAABJRU5ErkJggg=="},21500:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AIUFBUyAPfcpAAAAUpJREFUKM+FkjtLA1EQhb979242IeKrCBokiqJgp0IaS8HOVjvxB1gI4o+wtBFs7CztrCwsbCy1UBCbiBiNDzD43NzdZMciJkTJxgNT3DNw7pk5g4h8iEggIlZE7O7Bmc3NbVpGNuz61qH1bWgbvXZlgCTg0IDwG3/ff6CBqJVIeQZHKRAh5bkkPdNRwJycF0Hq33gJw0XhCb9aA9fh+r7M8dkNnusQRe2tqJml7QBwAZSC5zefh5dPgrBGpj9Nti+NVirWgSK71hQgEujyoDeFMgZ5/YI3vz5kjIaZX5hqbkprze3zO4W7MpVKyPBohrHBHoyjEYkZ4fSqFMiPg2TCYf/okp29E0rFMivLs6wu5nGNQxQjYKYnBn4R47lHko6GsMpQppv8ZPbfGN1Wwq9UqYmA1viVEN9WO8cIFIBEcxGq5YBUPZlO+AYo0JZbV1yoGgAAAABJRU5ErkJggg=="},52019:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AIUFBUyAPfcpAAAAUpJREFUKM+FkjtLA1EQhb979242IeKrCBokiqJgp0IaS8HOVjvxB1gI4o+wtBFs7CztrCwsbCy1UBCbiBiNDzD43NzdZMciJkTJxgNT3DNw7pk5g4h8iEggIlZE7O7Bmc3NbVpGNuz61qH1bWgbvXZlgCTg0IDwG3/ff6CBqJVIeQZHKRAh5bkkPdNRwJycF0Hq33gJw0XhCb9aA9fh+r7M8dkNnusQRe2tqJml7QBwAZSC5zefh5dPgrBGpj9Nti+NVirWgSK71hQgEujyoDeFMgZ5/YI3vz5kjIaZX5hqbkprze3zO4W7MpVKyPBohrHBHoyjEYkZ4fSqFMiPg2TCYf/okp29E0rFMivLs6wu5nGNQxQjYKYnBn4R47lHko6GsMpQppv8ZPbfGN1Wwq9UqYmA1viVEN9WO8cIFIBEcxGq5YBUPZlO+AYo0JZbV1yoGgAAAABJRU5ErkJggg=="},21767:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAGzSURBVHjaYiyeepkBBv79+Zfnx/f379+fP38CyT9//jAyMiq5GP77wvDnJ8MfoAIGBoAAYgGqC7STApL///3/9++/pCTv////Qdz/QO4/IMna0vf/z+9/v379//37bUUTQACBNDD8Z/j87fffvyAVX79+/Q8GQDbQeKA9fM+e/Pv18/+vnwzCIkBLAAKQOAY5AIAwCEv4/4PddNUm3ji0QJyxW3rgzE0iLfqDGr2oYuu0l54AYvnz5x9Q6d+/QPQfyAQqAin9B3EOyG1A1UDj//36zfjr1y8GBoAAFI9BDgAwCMIw+P8Ho3GDO6XQ0l4MN8b2kUwYaLszqgKM/KHcDXwBxAJUD3TJ779A8h9Q5D8SAHoARP36+Rfo41+/mcA2AAQQy49ff0Cu//MPpAeI/0FdA1QNYYNVA/3wmwEYVgwMAAHE8uPHH5BqoD1//gJJLADoJKDS378Z//wFhhJAALF8A3rizz8uTmYg788fJkj4QOKREQyYxSWBhjEC/fcXZANAALF8+/anbcHlHz9+ffvx58uPX9KckkCn/gby/wLd8uvHjx96k+cD1UGiGQgAAgwA7q17ZpsMdUQAAAAASUVORK5CYII="},31287:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAGzSURBVHjaYiyeepkBBv79+Zfnx/f379+fP38CyT9//jAyMiq5GP77wvDnJ8MfoAIGBoAAYgGqC7STApL///3/9++/pCTv////Qdz/QO4/IMna0vf/z+9/v379//37bUUTQACBNDD8Z/j87fffvyAVX79+/Q8GQDbQeKA9fM+e/Pv18/+vnwzCIkBLAAKQOAY5AIAwCEv4/4PddNUm3ji0QJyxW3rgzE0iLfqDGr2oYuu0l54AYvnz5x9Q6d+/QPQfyAQqAin9B3EOyG1A1UDj//36zfjr1y8GBoAAFI9BDgAwCMIw+P8Ho3GDO6XQ0l4MN8b2kUwYaLszqgKM/KHcDXwBxAJUD3TJ779A8h9Q5D8SAHoARP36+Rfo41+/mcA2AAQQy49ff0Cu//MPpAeI/0FdA1QNYYNVA/3wmwEYVgwMAAHE8uPHH5BqoD1//gJJLADoJKDS378Z//wFhhJAALF8A3rizz8uTmYg788fJkj4QOKREQyYxSWBhjEC/fcXZANAALF8+/anbcHlHz9+ffvx58uPX9KckkCn/gby/wLd8uvHjx96k+cD1UGiGQgAAgwA7q17ZpsMdUQAAAAASUVORK5CYII="},66566:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3WAAAN1gGQb3mcAAAAB3RJTUUH4QoHCTAQC4tfhwAAARZJREFUKM+VkqtOA0EUhr+ZWWi3XS4hEBpAkCIICYKLRBIcOAQPUEHqeAEcDkOC4wVQqGLwWCyGFswGSLglTUvbmc7BYMhuFzjy5Fz//1ONUkkYGAIosiJIbdMaly/iTUDQa4MTtDiU978P0N5xsXvIx8Mjk+Mx9aVl5l5eKfcN6+dneG1+1KvnSiXxQmtkipvWGBPSJuc69BDmw08KvU7iAiUiSQ2sJd6vUtzapP/2TrN2yczpCcPlhT9qYC3h2iq23oBgiNGdbUwUpYqo05KqkAdrQWuUAul2MSbdDbV3UEu1sTr9xErYxHvhLlfi6DYiFyT3KRaPZRACG7OKKG+4uneI/IOD79FcxwK4TJaCTMyyIQTgC/dfW5JUkrXFAAAAAElFTkSuQmCC"},78007:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAAKN2lDQ1BzUkdCIElFQzYxOTY2LTIuMQAAeJydlndUU9kWh8+9N71QkhCKlNBraFICSA29SJEuKjEJEErAkAAiNkRUcERRkaYIMijggKNDkbEiioUBUbHrBBlE1HFwFBuWSWStGd+8ee/Nm98f935rn73P3Wfvfda6AJD8gwXCTFgJgAyhWBTh58WIjYtnYAcBDPAAA2wA4HCzs0IW+EYCmQJ82IxsmRP4F726DiD5+yrTP4zBAP+flLlZIjEAUJiM5/L42VwZF8k4PVecJbdPyZi2NE3OMErOIlmCMlaTc/IsW3z2mWUPOfMyhDwZy3PO4mXw5Nwn4405Er6MkWAZF+cI+LkyviZjg3RJhkDGb+SxGXxONgAoktwu5nNTZGwtY5IoMoIt43kA4EjJX/DSL1jMzxPLD8XOzFouEiSniBkmXFOGjZMTi+HPz03ni8XMMA43jSPiMdiZGVkc4XIAZs/8WRR5bRmyIjvYODk4MG0tbb4o1H9d/JuS93aWXoR/7hlEH/jD9ld+mQ0AsKZltdn6h21pFQBd6wFQu/2HzWAvAIqyvnUOfXEeunxeUsTiLGcrq9zcXEsBn2spL+jv+p8Of0NffM9Svt3v5WF485M4knQxQ143bmZ6pkTEyM7icPkM5p+H+B8H/nUeFhH8JL6IL5RFRMumTCBMlrVbyBOIBZlChkD4n5r4D8P+pNm5lona+BHQllgCpSEaQH4eACgqESAJe2Qr0O99C8ZHA/nNi9GZmJ37z4L+fVe4TP7IFiR/jmNHRDK4ElHO7Jr8WgI0IABFQAPqQBvoAxPABLbAEbgAD+ADAkEoiARxYDHgghSQAUQgFxSAtaAYlIKtYCeoBnWgETSDNnAYdIFj4DQ4By6By2AE3AFSMA6egCnwCsxAEISFyBAVUod0IEPIHLKFWJAb5AMFQxFQHJQIJUNCSAIVQOugUqgcqobqoWboW+godBq6AA1Dt6BRaBL6FXoHIzAJpsFasBFsBbNgTzgIjoQXwcnwMjgfLoK3wJVwA3wQ7oRPw5fgEVgKP4GnEYAQETqiizARFsJGQpF4JAkRIauQEqQCaUDakB6kH7mKSJGnyFsUBkVFMVBMlAvKHxWF4qKWoVahNqOqUQdQnag+1FXUKGoK9RFNRmuizdHO6AB0LDoZnYsuRlegm9Ad6LPoEfQ4+hUGg6FjjDGOGH9MHCYVswKzGbMb0445hRnGjGGmsVisOtYc64oNxXKwYmwxtgp7EHsSewU7jn2DI+J0cLY4X1w8TogrxFXgWnAncFdwE7gZvBLeEO+MD8Xz8MvxZfhGfA9+CD+OnyEoE4wJroRIQiphLaGS0EY4S7hLeEEkEvWITsRwooC4hlhJPEQ8TxwlviVRSGYkNimBJCFtIe0nnSLdIr0gk8lGZA9yPFlM3kJuJp8h3ye/UaAqWCoEKPAUVivUKHQqXFF4pohXNFT0VFysmK9YoXhEcUjxqRJeyUiJrcRRWqVUo3RU6YbStDJV2UY5VDlDebNyi/IF5UcULMWI4kPhUYoo+yhnKGNUhKpPZVO51HXURupZ6jgNQzOmBdBSaaW0b2iDtCkVioqdSrRKnkqNynEVKR2hG9ED6On0Mvph+nX6O1UtVU9Vvuom1TbVK6qv1eaoeajx1UrU2tVG1N6pM9R91NPUt6l3qd/TQGmYaYRr5Grs0Tir8XQObY7LHO6ckjmH59zWhDXNNCM0V2ju0xzQnNbS1vLTytKq0jqj9VSbru2hnaq9Q/uE9qQOVcdNR6CzQ+ekzmOGCsOTkc6oZPQxpnQ1df11Jbr1uoO6M3rGelF6hXrtevf0Cfos/ST9Hfq9+lMGOgYhBgUGrQa3DfGGLMMUw12G/YavjYyNYow2GHUZPTJWMw4wzjduNb5rQjZxN1lm0mByzRRjyjJNM91tetkMNrM3SzGrMRsyh80dzAXmu82HLdAWThZCiwaLG0wS05OZw2xljlrSLYMtCy27LJ9ZGVjFW22z6rf6aG1vnW7daH3HhmITaFNo02Pzq62ZLde2xvbaXPJc37mr53bPfW5nbse322N3055qH2K/wb7X/oODo4PIoc1h0tHAMdGx1vEGi8YKY21mnXdCO3k5rXY65vTW2cFZ7HzY+RcXpkuaS4vLo3nG8/jzGueNueq5clzrXaVuDLdEt71uUnddd457g/sDD30PnkeTx4SnqWeq50HPZ17WXiKvDq/XbGf2SvYpb8Tbz7vEe9CH4hPlU+1z31fPN9m31XfKz95vhd8pf7R/kP82/xsBWgHcgOaAqUDHwJWBfUGkoAVB1UEPgs2CRcE9IXBIYMj2kLvzDecL53eFgtCA0O2h98KMw5aFfR+OCQ8Lrwl/GGETURDRv4C6YMmClgWvIr0iyyLvRJlESaJ6oxWjE6Kbo1/HeMeUx0hjrWJXxl6K04gTxHXHY+Oj45vipxf6LNy5cDzBPqE44foi40V5iy4s1licvvj4EsUlnCVHEtGJMYktie85oZwGzvTSgKW1S6e4bO4u7hOeB28Hb5Lvyi/nTyS5JpUnPUp2Td6ePJninlKR8lTAFlQLnqf6p9alvk4LTduf9ik9Jr09A5eRmHFUSBGmCfsytTPzMoezzLOKs6TLnJftXDYlChI1ZUPZi7K7xTTZz9SAxESyXjKa45ZTk/MmNzr3SJ5ynjBvYLnZ8k3LJ/J9879egVrBXdFboFuwtmB0pefK+lXQqqWrelfrry5aPb7Gb82BtYS1aWt/KLQuLC98uS5mXU+RVtGaorH1futbixWKRcU3NrhsqNuI2ijYOLhp7qaqTR9LeCUXS61LK0rfb+ZuvviVzVeVX33akrRlsMyhbM9WzFbh1uvb3LcdKFcuzy8f2x6yvXMHY0fJjpc7l+y8UGFXUbeLsEuyS1oZXNldZVC1tep9dUr1SI1XTXutZu2m2te7ebuv7PHY01anVVda926vYO/Ner/6zgajhop9mH05+x42Rjf2f836urlJo6m06cN+4X7pgYgDfc2Ozc0tmi1lrXCrpHXyYMLBy994f9Pdxmyrb6e3lx4ChySHHn+b+O31w0GHe4+wjrR9Z/hdbQe1o6QT6lzeOdWV0iXtjusePhp4tLfHpafje8vv9x/TPVZzXOV42QnCiaITn07mn5w+lXXq6enk02O9S3rvnIk9c60vvG/wbNDZ8+d8z53p9+w/ed71/LELzheOXmRd7LrkcKlzwH6g4wf7HzoGHQY7hxyHui87Xe4Znjd84or7ldNXva+euxZw7dLI/JHh61HXb95IuCG9ybv56Fb6ree3c27P3FlzF3235J7SvYr7mvcbfjT9sV3qID0+6j068GDBgztj3LEnP2X/9H686CH5YcWEzkTzI9tHxyZ9Jy8/Xvh4/EnWk5mnxT8r/1z7zOTZd794/DIwFTs1/lz0/NOvm1+ov9j/0u5l73TY9P1XGa9mXpe8UX9z4C3rbf+7mHcTM7nvse8rP5h+6PkY9PHup4xPn34D94Tz+49wZioAAAAJcEhZcwAALiMAAC4jAXilP3YAAABCSURBVHicYzknqPafgQLAQonm4WKAWEkWkCI3HBkZWERLMilzwf//FMUiA8u/f/+wSjAyMhJnwJ8/fygzAJcLiAUAfhMRAqSYqZ8AAAAASUVORK5CYII="},24893:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAAKN2lDQ1BzUkdCIElFQzYxOTY2LTIuMQAAeJydlndUU9kWh8+9N71QkhCKlNBraFICSA29SJEuKjEJEErAkAAiNkRUcERRkaYIMijggKNDkbEiioUBUbHrBBlE1HFwFBuWSWStGd+8ee/Nm98f935rn73P3Wfvfda6AJD8gwXCTFgJgAyhWBTh58WIjYtnYAcBDPAAA2wA4HCzs0IW+EYCmQJ82IxsmRP4F726DiD5+yrTP4zBAP+flLlZIjEAUJiM5/L42VwZF8k4PVecJbdPyZi2NE3OMErOIlmCMlaTc/IsW3z2mWUPOfMyhDwZy3PO4mXw5Nwn4405Er6MkWAZF+cI+LkyviZjg3RJhkDGb+SxGXxONgAoktwu5nNTZGwtY5IoMoIt43kA4EjJX/DSL1jMzxPLD8XOzFouEiSniBkmXFOGjZMTi+HPz03ni8XMMA43jSPiMdiZGVkc4XIAZs/8WRR5bRmyIjvYODk4MG0tbb4o1H9d/JuS93aWXoR/7hlEH/jD9ld+mQ0AsKZltdn6h21pFQBd6wFQu/2HzWAvAIqyvnUOfXEeunxeUsTiLGcrq9zcXEsBn2spL+jv+p8Of0NffM9Svt3v5WF485M4knQxQ143bmZ6pkTEyM7icPkM5p+H+B8H/nUeFhH8JL6IL5RFRMumTCBMlrVbyBOIBZlChkD4n5r4D8P+pNm5lona+BHQllgCpSEaQH4eACgqESAJe2Qr0O99C8ZHA/nNi9GZmJ37z4L+fVe4TP7IFiR/jmNHRDK4ElHO7Jr8WgI0IABFQAPqQBvoAxPABLbAEbgAD+ADAkEoiARxYDHgghSQAUQgFxSAtaAYlIKtYCeoBnWgETSDNnAYdIFj4DQ4By6By2AE3AFSMA6egCnwCsxAEISFyBAVUod0IEPIHLKFWJAb5AMFQxFQHJQIJUNCSAIVQOugUqgcqobqoWboW+godBq6AA1Dt6BRaBL6FXoHIzAJpsFasBFsBbNgTzgIjoQXwcnwMjgfLoK3wJVwA3wQ7oRPw5fgEVgKP4GnEYAQETqiizARFsJGQpF4JAkRIauQEqQCaUDakB6kH7mKSJGnyFsUBkVFMVBMlAvKHxWF4qKWoVahNqOqUQdQnag+1FXUKGoK9RFNRmuizdHO6AB0LDoZnYsuRlegm9Ad6LPoEfQ4+hUGg6FjjDGOGH9MHCYVswKzGbMb0445hRnGjGGmsVisOtYc64oNxXKwYmwxtgp7EHsSewU7jn2DI+J0cLY4X1w8TogrxFXgWnAncFdwE7gZvBLeEO+MD8Xz8MvxZfhGfA9+CD+OnyEoE4wJroRIQiphLaGS0EY4S7hLeEEkEvWITsRwooC4hlhJPEQ8TxwlviVRSGYkNimBJCFtIe0nnSLdIr0gk8lGZA9yPFlM3kJuJp8h3ye/UaAqWCoEKPAUVivUKHQqXFF4pohXNFT0VFysmK9YoXhEcUjxqRJeyUiJrcRRWqVUo3RU6YbStDJV2UY5VDlDebNyi/IF5UcULMWI4kPhUYoo+yhnKGNUhKpPZVO51HXURupZ6jgNQzOmBdBSaaW0b2iDtCkVioqdSrRKnkqNynEVKR2hG9ED6On0Mvph+nX6O1UtVU9Vvuom1TbVK6qv1eaoeajx1UrU2tVG1N6pM9R91NPUt6l3qd/TQGmYaYRr5Grs0Tir8XQObY7LHO6ckjmH59zWhDXNNCM0V2ju0xzQnNbS1vLTytKq0jqj9VSbru2hnaq9Q/uE9qQOVcdNR6CzQ+ekzmOGCsOTkc6oZPQxpnQ1df11Jbr1uoO6M3rGelF6hXrtevf0Cfos/ST9Hfq9+lMGOgYhBgUGrQa3DfGGLMMUw12G/YavjYyNYow2GHUZPTJWMw4wzjduNb5rQjZxN1lm0mByzRRjyjJNM91tetkMNrM3SzGrMRsyh80dzAXmu82HLdAWThZCiwaLG0wS05OZw2xljlrSLYMtCy27LJ9ZGVjFW22z6rf6aG1vnW7daH3HhmITaFNo02Pzq62ZLde2xvbaXPJc37mr53bPfW5nbse322N3055qH2K/wb7X/oODo4PIoc1h0tHAMdGx1vEGi8YKY21mnXdCO3k5rXY65vTW2cFZ7HzY+RcXpkuaS4vLo3nG8/jzGueNueq5clzrXaVuDLdEt71uUnddd457g/sDD30PnkeTx4SnqWeq50HPZ17WXiKvDq/XbGf2SvYpb8Tbz7vEe9CH4hPlU+1z31fPN9m31XfKz95vhd8pf7R/kP82/xsBWgHcgOaAqUDHwJWBfUGkoAVB1UEPgs2CRcE9IXBIYMj2kLvzDecL53eFgtCA0O2h98KMw5aFfR+OCQ8Lrwl/GGETURDRv4C6YMmClgWvIr0iyyLvRJlESaJ6oxWjE6Kbo1/HeMeUx0hjrWJXxl6K04gTxHXHY+Oj45vipxf6LNy5cDzBPqE44foi40V5iy4s1licvvj4EsUlnCVHEtGJMYktie85oZwGzvTSgKW1S6e4bO4u7hOeB28Hb5Lvyi/nTyS5JpUnPUp2Td6ePJninlKR8lTAFlQLnqf6p9alvk4LTduf9ik9Jr09A5eRmHFUSBGmCfsytTPzMoezzLOKs6TLnJftXDYlChI1ZUPZi7K7xTTZz9SAxESyXjKa45ZTk/MmNzr3SJ5ynjBvYLnZ8k3LJ/J9879egVrBXdFboFuwtmB0pefK+lXQqqWrelfrry5aPb7Gb82BtYS1aWt/KLQuLC98uS5mXU+RVtGaorH1futbixWKRcU3NrhsqNuI2ijYOLhp7qaqTR9LeCUXS61LK0rfb+ZuvviVzVeVX33akrRlsMyhbM9WzFbh1uvb3LcdKFcuzy8f2x6yvXMHY0fJjpc7l+y8UGFXUbeLsEuyS1oZXNldZVC1tep9dUr1SI1XTXutZu2m2te7ebuv7PHY01anVVda926vYO/Ner/6zgajhop9mH05+x42Rjf2f836urlJo6m06cN+4X7pgYgDfc2Ozc0tmi1lrXCrpHXyYMLBy994f9Pdxmyrb6e3lx4ChySHHn+b+O31w0GHe4+wjrR9Z/hdbQe1o6QT6lzeOdWV0iXtjusePhp4tLfHpafje8vv9x/TPVZzXOV42QnCiaITn07mn5w+lXXq6enk02O9S3rvnIk9c60vvG/wbNDZ8+d8z53p9+w/ed71/LELzheOXmRd7LrkcKlzwH6g4wf7HzoGHQY7hxyHui87Xe4Znjd84or7ldNXva+euxZw7dLI/JHh61HXb95IuCG9ybv56Fb6ree3c27P3FlzF3235J7SvYr7mvcbfjT9sV3qID0+6j068GDBgztj3LEnP2X/9H686CH5YcWEzkTzI9tHxyZ9Jy8/Xvh4/EnWk5mnxT8r/1z7zOTZd794/DIwFTs1/lz0/NOvm1+ov9j/0u5l73TY9P1XGa9mXpe8UX9z4C3rbf+7mHcTM7nvse8rP5h+6PkY9PHup4xPn34D94Tz+49wZioAAAAJcEhZcwAALiMAAC4jAXilP3YAAABCSURBVHicYzknqPafgQLAQonm4WKAWEkWkCI3HBkZWERLMilzwf//FMUiA8u/f/+wSjAyMhJnwJ8/fygzAJcLiAUAfhMRAqSYqZ8AAAAASUVORK5CYII="},23491:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAE2SURBVHjaYmSYyMDwgwEE/jEw/GF4mvT0HyqQUlX9B5aEIIAAYmH4wlDtWg1SDwT//0lKSv7/D+T9/w+nYmL+//79/88fIPll0yaAAGJhYAGJP/n69O+/v0CAUAcHt2////ULqJpRVhZoA0AAsQCtAZoMVP0HiP7+RlcNBEDVYA0Mv38DNQAEEMj8vwx//wCt/AdC/zEBkgagYoAAYgF6FGj277+///wlpAEoz8AAEEAgDX/BZv/69wuoB48GRrCTAAKICajh9//fv/6CVP/++wu7BrDxQFf/YWAACCCwk0BKf0MQdg1/gBqAPv0L9ANAALEAY+33vz+S3JIgb/z5C45CBkZGRgY4UFICKQUjoJMAAoiRoZSB4RMojkHx/YPhbNVZoM3AOISQQPUK9vaQOIYAgAADAC5Wd4RRwnKfAAAAAElFTkSuQmCC"},69960:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAE2SURBVHjaYvz69SsDEvj37x+ERGbAwZ9//wACiAUoysXFBST///8P0QOm//+HU0jgxYsXAAHEAlP0H8HYt+//4SP/f//6b2b238sLrpqRkRFoCUAAsaCrXrv2/8KF///8+f/r9//Dh/8/ffI/OQWiAeJCgABigrseJPT27f/Vq////v3/1y8oWrzk/+PHcEv+/PkDEEBMEM/B3fj/40eo0t9g8suX/w8f/odZAVQMEEAsQAzj/2cQFf3PxARWCrYEaBXQLCkpqB/+/wcqBgggJrjxQPX/hYX/+/v///kLqhpIBgf/l5ODhxiQBAggFriToDoTEv5zcf3ftQuk2s7uf0wM3MdAAPQDQAAxvn37lo+PDy4KZUDcycj4/z9CBojv3r0LEEAgG969eweLSBDEBSCWAAQYACaTbJ/kuok9AAAAAElFTkSuQmCC"},44349:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFXSURBVHjaYvzPgAD/UNlYEUAAkuTgCAAIBgJggq5VoAs1qM0vdzmMz362vezjokxPGimkEQ5WoAQEKuK71zwCCKyB4c//J8+BShn+/vv/+w/D399AEox+//8FJH/9/wUU+cUoKw20ASCAWBhEDf/LyDOw84BU//kDtgGI/oARmAHRDJQSFwVqAAggxo8fP/Ly8oKc9P8/AxjiAoyMjA8ePAAIIJZ///5BVIM0MOBWDpRlZPzz5w9AALH8gyvCbz7QBrCJAAHEyKDYX15r/+j1199//v35++/Xn7+///77DST/wMl/f4Dk378K4jx7O2cABBALw7NP77/+ev3xB0gOpOHfr99AdX9/gTVASKCGP//+8XCyMjC8AwggFoZfIHWSwpwQk4CW/AYjsKlA8u+ff////v33998/YPgBnQQQQIzAaGNg+AVGf5AYf5BE/oCjGEIyAQQYAGvKZ4C6+xXRAAAAAElFTkSuQmCC"},40717:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFXSURBVHjaYvzPgAD/UNlYEUAAkuTgCAAIBgJggq5VoAs1qM0vdzmMz362vezjokxPGimkEQ5WoAQEKuK71zwCCKyB4c//J8+BShn+/vv/+w/D399AEox+//8FJH/9/wUU+cUoKw20ASCAWBhEDf/LyDOw84BU//kDtgGI/oARmAHRDJQSFwVqAAggxo8fP/Ly8oKc9P8/AxjiAoyMjA8ePAAIIJZ///5BVIM0MOBWDpRlZPzz5w9AALH8gyvCbz7QBrCJAAHEyKDYX15r/+j1199//v35++/Xn7+///77DST/wMl/f4Dk378K4jx7O2cABBALw7NP77/+ev3xB0gOpOHfr99AdX9/gTVASKCGP//+8XCyMjC8AwggFoZfIHWSwpwQk4CW/AYjsKlA8u+ff////v33998/YPgBnQQQQIzAaGNg+AVGf5AYf5BE/oCjGEIyAQQYAGvKZ4C6+xXRAAAAAElFTkSuQmCC"},46374:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAG8SURBVHjaYmSIZGD4wgAF/xgYWBj+boQysSKAAGJh+MRQnVoNUgEE///9ZfzLoPiX4e8fxj9/mP/8Yfr9+/+fP/9h5JdNmwACiIWBCaj4/5P3T7mY/xoJ/9UR/v0n8O+f17/Zlv/+//73/1+////+9f/XL6BqRllZoA0AAcQCNvv/339/C03+8v/8w7bk7+/vv/+7/P4S95ur+xdY9W+IBobfv4EaAAKICeiuv////vnz58PX3xxb/7BlN3/K7Ph1WoSR/fcfhl//f4KN/wW1BGg6QAAxMfxi+PP37++/v1kYfn//+usnE+cHCbWfTKz/mH7+ZgUpQmj48wdoA0AAsQA1/P0HZP458/qXqvNfjdnVItxy3wNvApUIvwPb8BvqJEawkwACiIXhDwPQ+F9/f+2890dY6/cnrycCb++z3frNfOwX01eEagZgKAHdzcAAEEAgG4DGA/W8+fO79+Rvdt5f2+b++sP+m+kdWDVEwx+gBmBY/wX6ASCAWBi+Mfz+80eSX/L3n99AzwBDm0H2NwtQHS/QapDBIPT3LwQBnQQQQIwMxgwM7xgYfjAArQKRTAyvP2OPYwgACDAAjtdGduN8tIgAAAAASUVORK5CYII="},64171:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAG8SURBVHjaYmSIZGD4wgAF/xgYWBj+boQysSKAAGJh+MRQnVoNUgEE///9ZfzLoPiX4e8fxj9/mP/8Yfr9+/+fP/9h5JdNmwACiIWBCaj4/5P3T7mY/xoJ/9UR/v0n8O+f17/Zlv/+//73/1+////+9f/XL6BqRllZoA0AAcQCNvv/339/C03+8v/8w7bk7+/vv/+7/P4S95ur+xdY9W+IBobfv4EaAAKICeiuv////vnz58PX3xxb/7BlN3/K7Ph1WoSR/fcfhl//f4KN/wW1BGg6QAAxMfxi+PP37++/v1kYfn//+usnE+cHCbWfTKz/mH7+ZgUpQmj48wdoA0AAsQA1/P0HZP458/qXqvNfjdnVItxy3wNvApUIvwPb8BvqJEawkwACiIXhDwPQ+F9/f+2890dY6/cnrycCb++z3frNfOwX01eEagZgKAHdzcAAEEAgG4DGA/W8+fO79+Rvdt5f2+b++sP+m+kdWDVEwx+gBmBY/wX6ASCAWBi+Mfz+80eSX/L3n99AzwBDm0H2NwtQHS/QapDBIPT3LwQBnQQQQIwMxgwM7xgYfjAArQKRTAyvP2OPYwgACDAAjtdGduN8tIgAAAAASUVORK5CYII="},35070:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAHESURBVHjaYvz79TsDwz8GOPj3D8T5B6L/QTj/4OAPkAsQQCxAWSYuLiD5//9/iBYmEP2f8f9/ZrAgMvjy6g1AALFAjP8+fzHDpy/////7/+cvUISjMPc/BmBkZPzz5w9AAAAxAM7/BEJk5G1eFUfW2gvv5f97fQCnpv3V15Se5fj+A/38/v39/vz9//z8/vz9/hMQBHds1gIAMQDO/wTEyvBFQhNF+Pj/amsADw7/XV39dnrt5PHZ8AgA/Pz7/P77/f/8+/76/P4cFwYA/egCiOnvHwagQ/79/fd/xpT/Hz/9X76Uien/519Mf/79//2XAejAP7////4DYvwFBw1AAAH9wAZ0+uOI7C1bnj2d/p3hp0dppO3LA5y//4IM+f2P8fd/pj//gQHE+BMUCmwAAcS4n4FBqbyLlZ/ru71L80bWcp8/XHu3fjx4+h/INb/BCOym33/YFWT2710KEEAsVgwMzO/v/Dt7j+HdvQmWjow7z7BtXi/6+/f/X7/+A0kI489voJsYeT4IMjAABBAL0GFMQDdKSv5/8oxz+SKg3H9ZWcbfQBV/GCAkEP39C0FAxQABxPgVHBFwxIDKRZMCAoAAAwBcKj0T0E2bvQAAAABJRU5ErkJggg=="},32147:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAHESURBVHjaYvz79TsDwz8GOPj3D8T5B6L/QTj/4OAPkAsQQCxAWSYuLiD5//9/iBYmEP2f8f9/ZrAgMvjy6g1AALFAjP8+fzHDpy/////7/+cvUISjMPc/BmBkZPzz5w9AAAAxAM7/BEJk5G1eFUfW2gvv5f97fQCnpv3V15Se5fj+A/38/v39/vz9//z8/vz9/hMQBHds1gIAMQDO/wTEyvBFQhNF+Pj/amsADw7/XV39dnrt5PHZ8AgA/Pz7/P77/f/8+/76/P4cFwYA/egCiOnvHwagQ/79/fd/xpT/Hz/9X76Uien/519Mf/79//2XAejAP7////4DYvwFBw1AAAH9wAZ0+uOI7C1bnj2d/p3hp0dppO3LA5y//4IM+f2P8fd/pj//gQHE+BMUCmwAAcS4n4FBqbyLlZ/ru71L80bWcp8/XHu3fjx4+h/INb/BCOym33/YFWT2710KEEAsVgwMzO/v/Dt7j+HdvQmWjow7z7BtXi/6+/f/X7/+A0kI489voJsYeT4IMjAABBAL0GFMQDdKSv5/8oxz+SKg3H9ZWcbfQBV/GCAkEP39C0FAxQABxPgVHBFwxIDKRZMCAoAAAwBcKj0T0E2bvQAAAABJRU5ErkJggg=="},74921:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALBAMAAACEzBAKAAAABGdBTUEAALGOfPtRkwAAACBjSFJNAACHDwAAjA8AAP1SAACBQAAAfXkAAOmLAAA85QAAGcxzPIV3AAAKL2lDQ1BJQ0MgUHJvZmlsZQAASMedlndUVNcWh8+9d3qhzTACUobeu8AA0nuTXkVhmBlgKAMOMzSxIaICEUVEmiJIUMSA0VAkVkSxEBRUsAckCCgxGEVULG9G1ouurLz38vL746xv7bP3ufvsvc9aFwCSpy+XlwZLAZDKE/CDPJzpEZFRdOwAgAEeYIApAExWRrpfsHsIEMnLzYWeIXICXwQB8HpYvAJw09AzgE4H/5+kWel8geiYABGbszkZLBEXiDglS5Auts+KmBqXLGYYJWa+KEERy4k5YZENPvsssqOY2ak8tojFOaezU9li7hXxtkwhR8SIr4gLM7mcLBHfErFGijCVK+I34thUDjMDABRJbBdwWIkiNhExiR8S5CLi5QDgSAlfcdxXLOBkC8SXcklLz+FzExIFdB2WLt3U2ppB9+RkpXAEAsMAJiuZyWfTXdJS05m8HAAW7/xZMuLa0kVFtjS1trQ0NDMy/apQ/3Xzb0rc20V6Gfi5ZxCt/4vtr/zSGgBgzIlqs/OLLa4KgM4tAMjd+2LTOACApKhvHde/ug9NPC+JAkG6jbFxVlaWEZfDMhIX9A/9T4e/oa++ZyQ+7o/y0F058UxhioAurhsrLSVNyKdnpDNZHLrhn4f4Hwf+dR4GQZx4Dp/DE0WEiaaMy0sQtZvH5gq4aTw6l/efmvgPw/6kxbkWidL4EVBjjIDUdSpAfu0HKAoRINH7xV3/o2+++DAgfnnhKpOLc//vN/1nwaXiJYOb8DnOJSiEzhLyMxf3xM8SoAEBSAIqkAfKQB3oAENgBqyALXAEbsAb+IMQEAlWAxZIBKmAD7JAHtgECkEx2An2gGpQBxpBM2gFx0EnOAXOg0vgGrgBboP7YBRMgGdgFrwGCxAEYSEyRIHkIRVIE9KHzCAGZA+5Qb5QEBQJxUIJEA8SQnnQZqgYKoOqoXqoGfoeOgmdh65Ag9BdaAyahn6H3sEITIKpsBKsBRvDDNgJ9oFD4FVwArwGzoUL4B1wJdwAH4U74PPwNfg2PAo/g+cQgBARGqKKGCIMxAXxR6KQeISPrEeKkAqkAWlFupE+5CYyiswgb1EYFAVFRxmibFGeqFAUC7UGtR5VgqpGHUZ1oHpRN1FjqFnURzQZrYjWR9ugvdAR6AR0FroQXYFuQrejL6JvoyfQrzEYDA2jjbHCeGIiMUmYtZgSzD5MG+YcZhAzjpnDYrHyWH2sHdYfy8QKsIXYKuxR7FnsEHYC+wZHxKngzHDuuCgcD5ePq8AdwZ3BDeEmcQt4Kbwm3gbvj2fjc/Cl+EZ8N/46fgK/QJAmaBPsCCGEJMImQiWhlXCR8IDwkkgkqhGtiYFELnEjsZJ4jHiZOEZ8S5Ih6ZFcSNEkIWkH6RDpHOku6SWZTNYiO5KjyALyDnIz+QL5EfmNBEXCSMJLgi2xQaJGokNiSOK5JF5SU9JJcrVkrmSF5AnJ65IzUngpLSkXKabUeqkaqZNSI1Jz0hRpU2l/6VTpEukj0lekp2SwMloybjJsmQKZgzIXZMYpCEWd4kJhUTZTGikXKRNUDFWb6kVNohZTv6MOUGdlZWSXyYbJZsvWyJ6WHaUhNC2aFy2FVko7ThumvVuitMRpCWfJ9iWtS4aWzMstlXOU48gVybXJ3ZZ7J0+Xd5NPlt8l3yn/UAGloKcQqJClsF/hosLMUupS26WspUVLjy+9pwgr6ikGKa5VPKjYrzinpKzkoZSuVKV0QWlGmabsqJykXK58RnlahaJir8JVKVc5q/KULkt3oqfQK+m99FlVRVVPVaFqveqA6oKatlqoWr5am9pDdYI6Qz1evVy9R31WQ0XDTyNPo0XjniZek6GZqLlXs09zXktbK1xrq1an1pS2nLaXdq52i/YDHbKOg84anQadW7oYXYZusu4+3Rt6sJ6FXqJejd51fVjfUp+rv09/0ABtYG3AM2gwGDEkGToZZhq2GI4Z0Yx8jfKNOo2eG2sYRxnvMu4z/mhiYZJi0mhy31TG1Ns037Tb9HczPTOWWY3ZLXOyubv5BvMu8xfL9Jdxlu1fdseCYuFnsdWix+KDpZUl37LVctpKwyrWqtZqhEFlBDBKGJet0dbO1husT1m/tbG0Edgct/nN1tA22faI7dRy7eWc5Y3Lx+3U7Jh29Xaj9nT7WPsD9qMOqg5MhwaHx47qjmzHJsdJJ12nJKejTs+dTZz5zu3O8y42Lutczrkirh6uRa4DbjJuoW7Vbo/c1dwT3FvcZz0sPNZ6nPNEe/p47vIc8VLyYnk1e816W3mv8+71IfkE+1T7PPbV8+X7dvvBft5+u/0erNBcwVvR6Q/8vfx3+z8M0A5YE/BjICYwILAm8EmQaVBeUF8wJTgm+Ejw6xDnkNKQ+6E6ocLQnjDJsOiw5rD5cNfwsvDRCOOIdRHXIhUiuZFdUdiosKimqLmVbiv3rJyItogujB5epb0qe9WV1QqrU1afjpGMYcaciEXHhsceiX3P9Gc2MOfivOJq42ZZLqy9rGdsR3Y5e5pjxynjTMbbxZfFTyXYJexOmE50SKxInOG6cKu5L5I8k+qS5pP9kw8lf0oJT2lLxaXGpp7kyfCSeb1pymnZaYPp+umF6aNrbNbsWTPL9+E3ZUAZqzK6BFTRz1S/UEe4RTiWaZ9Zk/kmKyzrRLZ0Ni+7P0cvZ3vOZK577rdrUWtZa3vyVPM25Y2tc1pXvx5aH7e+Z4P6hoINExs9Nh7eRNiUvOmnfJP8svxXm8M3dxcoFWwsGN/isaWlUKKQXziy1XZr3TbUNu62ge3m26u2fyxiF10tNimuKH5fwiq5+o3pN5XffNoRv2Og1LJ0/07MTt7O4V0Ouw6XSZfllo3v9tvdUU4vLyp/tSdmz5WKZRV1ewl7hXtHK30ru6o0qnZWva9OrL5d41zTVqtYu712fh9739B+x/2tdUp1xXXvDnAP3Kn3qO9o0GqoOIg5mHnwSWNYY9+3jG+bmxSaips+HOIdGj0cdLi32aq5+YjikdIWuEXYMn00+uiN71y/62o1bK1vo7UVHwPHhMeefh/7/fBxn+M9JxgnWn/Q/KG2ndJe1AF15HTMdiZ2jnZFdg2e9D7Z023b3f6j0Y+HTqmeqjkte7r0DOFMwZlPZ3PPzp1LPzdzPuH8eE9Mz/0LERdu9Qb2Dlz0uXj5kvulC31OfWcv210+dcXmysmrjKud1yyvdfRb9Lf/ZPFT+4DlQMd1q+tdN6xvdA8uHzwz5DB0/qbrzUu3vG5du73i9uBw6PCdkeiR0TvsO1N3U+6+uJd5b+H+xgfoB0UPpR5WPFJ81PCz7s9to5ajp8dcx/ofBz++P84af/ZLxi/vJwqekJ9UTKpMNk+ZTZ2adp++8XTl04ln6c8WZgp/lf619rnO8x9+c/ytfzZiduIF/8Wn30teyr889GrZq565gLlHr1NfL8wXvZF/c/gt423fu/B3kwtZ77HvKz/ofuj+6PPxwafUT5/+BQOY8/xvJtwPAAAAElBMVEUAaqcBaqb9zAH+zACYpUOZpUOgYxiNAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAIUlEQVQY02NgYBAyYIAAnAwXl2BTFyBgMIYChAhB7QwMAImEB+mWQpXnAAAAAElFTkSuQmCC"},18268:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAHzSURBVHjaYkxOP8IAB//+Mfz7w8Dwi4HhP5CcJb/n/7evb16/APL/gRFQDiAAw3JuAgAIBEDQ/iswEERjGzBQLEru97ll0g0+3HvqMn1SpqlqGsZMsZsIe0SICA5gt5a/AGIEarCPtFh+6N/ffwxA9OvP/7//QYwff/6fZahmePeB4dNHhi+fGb59Y4zyvHHmCEAAAW3YDzQYaJJ93a+vX79aVf58//69fvEPlpIfnz59+vDhw7t37968efP3b/SXL59OnjwIEEAsDP+YgY53b2b89++/awvLn98MDi2cVxl+/vl6mituCtBghi9f/v/48e/XL86krj9XzwEEEENy8g6gu22rfn78+NGs5Ofr16+ZC58+fvyYwX8rxOxXr169fPny+fPn1//93bJlBUAAsQADZMEBxj9/GBxb2P/9+S/R8u3vzxuyaX8ZHv3j8/YGms3w8ycQARmi2eE37t4ACCDGR4/uSkrKAS35B3TT////wADOgLOBIaXIyjBlwxKAAGKRXjCB0SOEaeu+/y9fMnz4AHQxCP348R/o+l+//sMZQBNLEvif3AcIIMZbty7Ly6t9ZmXl+fXj/38GoHH/UcGfP79//BBiYHjy9+8/oUkNAAHEwt1V/vI/KBY/QSISFqM/GBg+MzB8A6PfYC5EFiDAABqgW776MP0rAAAAAElFTkSuQmCC"},57003:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFsSURBVHjaYvzPgAD/UNlYEUAAmuTYAAAQhAEYqF/zFbe50RZ1cMmS9TLi0pJLRjZohAMTGFUN9HdnHgEE1sDw//+Tp0ClINW/f4NI9d////3+f+b3/1+////+9f/XL6A4o6ws0AaAAGIBm/0fRTVQ2v3Pf97f/4/9Aqv+DdHA8Ps3UANAALEAMSNQNdDGP3+ALvnf8vv/t9//9X/////7f+uv/4K//iciNABNBwggsJP+/IW4kuH3n//1v/8v+wVSDURmv/57//7/CeokoKFA0wECiAnkpL9/wH4CO+DNr/+VQA1A9PN/w6//j36CVIMRxEkAAQR20m+QpSBXgU0CuSTj9/93v/8v//V/xW+48UBD/zAwAAQQSAMzOMiABoBUswCd8ev/M7A669//OX7///Lr/x+gBlCoAJ0DEEAgDUy//zBISoKNAfoepJNRFmQkyJecfxj4/kDCEIiAigECiPErakTiiWMIAAgwAB4ZUlqMMhQQAAAAAElFTkSuQmCC"},78513:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFsSURBVHjaYvzPgAD/UNlYEUAAmuTYAAAQhAEYqF/zFbe50RZ1cMmS9TLi0pJLRjZohAMTGFUN9HdnHgEE1sDw//+Tp0ClINW/f4NI9d////3+f+b3/1+////+9f/XL6A4o6ws0AaAAGIBm/0fRTVQ2v3Pf97f/4/9Aqv+DdHA8Ps3UANAALEAMSNQNdDGP3+ALvnf8vv/t9//9X/////7f+uv/4K//iciNABNBwggsJP+/IW4kuH3n//1v/8v+wVSDURmv/57//7/CeokoKFA0wECiAnkpL9/wH4CO+DNr/+VQA1A9PN/w6//j36CVIMRxEkAAQR20m+QpSBXgU0CuSTj9/93v/8v//V/xW+48UBD/zAwAAQQSAMzOMiABoBUswCd8ev/M7A669//OX7///Lr/x+gBlCoAJ0DEEAgDUy//zBISoKNAfoepJNRFmQkyJecfxj4/kDCEIiAigECiPErakTiiWMIAAgwAB4ZUlqMMhQQAAAAAElFTkSuQmCC"},23257:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFqSURBVHjaYrzOwPAPjJgYQEDAleHVbhADIvgHLPgHiQ0QQCxAlkR9NW8sw+cV/1gV/7Gb/hV4+vfzhj8Mv/78//Pn/+/f/8AkhH1t0yaAAAJp4I37zyz2lDfu79uqv/++/WYz+cuq/vvLxt8gdb+A5K9/v34B2SyyskBLAAII5JAva/7/+/z367a/f3/8ZuT9+//Pr78vQUrB6n4CSSj6/RuoASCAWEDO/fD3ddEfhv9/OE3/sKj8/n7k9/fDQNUIs/+DVf8HawAIIJCT/v38C3Hr95N/GDh/f94AVvT7N8RUBpjxQAVADQABBNLw/y/Ifwy/f/399ufTOpDBEPf8g5sN0QBEDAwAAQTWABEChgOSA9BVA00E2wAQQCANQBbEif/AzoCqgLkbbBYwWP/+//sXqBYggFhAkfL7D7OkJFCOCSj65zfUeFjwg8z++/ffX5AGoGKAAGI8jhSRyIw/SJH9D4aAYQoQYAA6rnMw1jU2vQAAAABJRU5ErkJggg=="},73723:(e,t,n)=>{e.exports=n.p+"MapStore2/web/client/components/geostory/contents/carousel/img/default.jpg"},75492:(e,t,n)=>{e.exports=n.p+"MapStore2/web/client/components/geostory/layouts/sections/patterns/dots.png"}}]);