(self.webpackChunkMyMapStoreProject=self.webpackChunkMyMapStoreProject||[]).push([[2788],{82904:(e,t,r)=>{"use strict";r.d(t,{kM:()=>n,At:()=>o,dc:()=>i,l:()=>a,Xg:()=>s}),r(17204),r(8400);const n="TOGGLE_CONTROL",o="SET_CONTROL_PROPERTY",i="SET_CONTROL_PROPERTIES",a="RESET_CONTROLS";function s(e,t,r,n){return{type:o,control:e,property:t,value:r,toggle:n}}},55927:(e,t,r)=>{"use strict";r.d(t,{BJ:()=>n,_y:()=>o,vk:()=>i,uI:()=>a,mg:()=>s,aR:()=>l,SW:()=>c,$l:()=>u,zX:()=>p,R4:()=>d,E9:()=>g,CP:()=>m,eA:()=>h,s6:()=>f,E5:()=>y,CF:()=>v,B_:()=>b,js:()=>w,TA:()=>_,D_:()=>E,G9:()=>P,gE:()=>O,pB:()=>x,GD:()=>S,sA:()=>T,o2:()=>C,PC:()=>D,rR:()=>F,vM:()=>I,AN:()=>M});const n="DASHBOARD:SET_AVAILABLE",o="DASHBOARD:SET_EDITING",i="DASHBOARD:SHOW_CONNECTIONS",a="DASHBOARD:TRIGGER_SAVE_MODAL",s="DASHBOARD:TRIGGER_SAVE_AS_MODAL",l="DASHBOARD:SAVE_DASHBOARD",c="DASHBOARD:SAVE_ERROR",u="DASHBOARD:DASHBOARD_SAVED",p="DASHBOARD:LOAD_DASHBOARD",d="DASHBOARD:DASHBOARD_RESET",g="DASHBOARD:DASHBOARD_LOADED",m="DASHBOARD:DASHBOARD_LOADING",h="DASHBOARD:DASHBOARD_LOAD_ERROR",f="DASHBOARD:UPDATE_SERVICES",y="DASHBOARD:SET_SELECTED_SERVICE",v="DASHBOARD:ADD_NEW_SERVICE",b="DASHBOARD:CATALOG_MODE",w="DASHBOARD:DELETE_SERVICE",_="DASHBOARD:SAVE_SERVICE_LOADING",E=e=>({type:o,editing:e}),P=e=>({type:i,show:e}),O=e=>({type:a,show:e}),x=e=>({type:s,show:e}),S=e=>({type:c,error:e}),T=e=>({type:u,id:e}),C=e=>({type:p,id:e}),D=()=>({type:d}),F=(e,t)=>({type:g,resource:e,data:t}),I=function(e){return{type:m,name:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading",value:e}},M=e=>({type:h,error:e})},69293:(e,t,r)=>{"use strict";r.d(t,{IL:()=>n,hU:()=>o,qA:()=>i,Xh:()=>a,a3:()=>s,zg:()=>l,vY:()=>c,n8:()=>u,W5:()=>p,WC:()=>d,QB:()=>g,h6:()=>m,r:()=>h,MJ:()=>f,sj:()=>y,br:()=>v,qF:()=>b}),r(24384);const n="MAPS_LIST_LOADED",o="MAPS_LIST_LOADING",i="MAPS_LIST_LOAD_ERROR",a="MAP_UPDATING",s="MAP_CREATED",l="MAP_DELETING",c="ATTRIBUTE_UPDATED",u="THUMBNAIL_ERROR",p="MAP_ERROR",d="SAVING_MAP",g="PERMISSIONS_LIST_LOADING",m="MAPS_SEARCH_TEXT_CHANGED",h="MAPS:SEARCH_FILTER_CHANGED",f="MAPS:SET_SEARCH_FILTER",y="MAPS:SET_CONTEXTS",v="MAPS:LOADING",b="METADATA_CHANGED"},63516:(e,t,r)=>{"use strict";r.d(t,{c8:()=>n,Tu:()=>o,XP:()=>a,Nv:()=>s,kk:()=>l,fo:()=>c}),r(24384),r(33044),r(69293),r(37275);const n="CHECK_LOGGED_USER",o="LOGIN:LOGIN_PROMPT_CLOSED",i="LOGIN:LOGIN_REQUIRED",a="LOGIN_SUCCESS",s="LOGOUT";function l(){return{type:i}}const c=()=>({type:n})},47310:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(75875),o=r.n(n),i=r(72500),a=r.n(i),s=r(27418),l=r.n(s);const c={format:"json",bounded:0,polygon_geojson:1,priority:5},u={geocode:function(e,t){var r=l()({q:e},c,t||{}),n=a().format({protocol:"https",host:"nominatim.openstreetmap.org",query:r});return o().get(n)},reverseGeocode:function(e,t){const r=l()({lat:e.lat,lon:e.lng},t||{},c),n=a().format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:r});return o().get(n)}}},32420:(e,t,r)=>{"use strict";r.d(t,{DH:()=>c,Bm:()=>u,v$:()=>p});var n=r(75875),o=r.n(n),i=r(72500),a=r.n(i),s=r(27418),l=r.n(s);const c=function(e,t){return o().get(e+"?service=WFS&version=1.1.0&request=GetFeature",{params:l()({outputFormat:"application/json"},t)}).then((e=>"object"!=typeof e.data?JSON.parse(e.data):e.data))},u=(e,t,r)=>o().get(function(e,t){let{version:r="1.1.0",...n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=a().parse(e,!0);return a().format(l()({},o,{query:l()({service:"WFS",typeName:t,version:r,request:"GetFeature",...n},o.query)}))}(e,t,r)),p=function(e,t){return o().get(((e,t)=>{const r=a().parse(e,!0);return a().format({...r,search:void 0,query:{...r.query,service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"}})})(e,t)).then((e=>{let{data:t}=e;return t}))}},51990:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=r(53391).ZP},53391:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>D});var n=r(24852),o=r.n(n),i=r(43143),a=r(12226),s=r(82110),l=r(711),c=r.n(l),u=r(64721),p=r.n(u),d=r(81763),g=r.n(d),m=r(47037),h=r.n(m),f=r(93386),y=r.n(f),v=r(75472),b=r.n(v);const w=o().lazy((()=>Promise.all([r.e(7042),r.e(6111)]).then(r.bind(r,36111)))),_={base:190,range:0,s:.95,v:.63},E=(e,t)=>{const{base:r,range:n,...o}=t;return((0,i.qH)(r,n,e+1,o)||[0]).slice(1)},P=(e,t,r,n)=>{let o=r;return p()(t.map((e=>e.value)),e)&&(o=t.filter((t=>t.value===e))[0].title,o=o||("pie"===n?"":e)),o.trim()},O=(e,t,r,n,o)=>{const i=t.filter((t=>e>=t.min&&e<t.max))[0];if(i&&!i.title)return`${i.min} - ${i.max}`;if(!i)return r||n;let a=i?.title||r;return a?a.trim().replace("${minValue}",i.min??"").replace("${maxValue}",i.max??"").replace("${legendValue}",o||""):""},x=(e,t)=>t.map((t=>{const r=t;try{return(0,a.B)(e,{value:r})}catch{return t}}));function S(e){let{type:t,isModeBarVisible:r}=e;return"pie"===t?{t:r?20:5,b:5,l:2,r:2,pad:4}:{l:5,r:5,b:30,t:r?20:5,pad:4}}function T(e){let{series:t=[],cartesian:r,type:n,yAxis:o,xAxisAngle:i,xAxisOpts:a={},yAxisOpts:s={},data:l=[],autoColorOptions:c=_,customColorEnabled:u,barChartType:p="stack"}=e;const d={colorway:u?[c?.defaultCustomColor]||0:E(t.length,c),yaxis:{type:s?.type,automargin:!0,tickformat:s?.format,tickprefix:s?.tickPrefix,ticksuffix:s?.tickSuffix,showticklabels:!0===o,showgrid:r},xaxis:{showgrid:r,type:a?.type,showticklabels:!a?.hide,nticks:a.nTicks,automargin:!0,tickangle:i??"auto"}};switch(n){case"pie":return{...!u&&{colorway:E(l.length,c)}};case"bar":return{barmode:p,...d};default:return d}}const C=e=>{const{xAxis:t,series:r=[],yAxisLabel:n,type:o="line",height:i,width:a,legend:s,classifications:l,autoColorOptions:u=_}=e,p=t?.dataKey,d=a>350,m=l?.dataKey,{classificationAttributeType:f}=e.options||{},v="global.colors.custom"===u.name,w=((e,t,r,n)=>c()([e,r?.classification||r?.rangeClassification,n],Boolean)?"string"===t?"value":"range":"default")(m,f,u,v);return{layout:{showlegend:s,...T({...e,customColorEnabled:v,classificationAttr:m}),margin:S({...e,isModeBarVisible:d}),autosize:!1,height:i,width:a,..."pie"===o&&d&&{legend:{x:1.05,y:.5}},hovermode:"x unified"},data:r.map((t=>{let{dataKey:r}=t,i=function(e){let{type:t,xDataKey:r,yDataKey:n,data:o,formula:i,yAxisOpts:a,classificationAttr:s,yAxisLabel:l,autoColorOptions:c,customColorEnabled:u,classficationType:p}=e;const d=o.map((e=>e[r]));let m=o.map((e=>e[n]));const f=s?o.map((e=>e[s])):[],{classificationColors:v,colorCategories:b}=((e,t,r,n)=>{const o="value"===e?r?.classification||[]:"range"===e&&r?.rangeClassification||[],i="value"===e&&o.length?((e,t,r,n)=>e.map((e=>{if(h()(e)||g()(e)){const o=t.filter((t=>t.value===e))[0];return o?o.color:r&&n.defaultCustomColor?n.defaultCustomColor:E(1,_)[0]}return E(1,n)[0]})))(t,o,n,r)||[]:"range"===e&&o.length&&((e,t,r,n)=>e.map((e=>{if(!g()(e))return E(1,_)[0];const o=t.filter((t=>e>=t.min&&e<t.max))[0];return o?o.color:r&&n.defaultCustomColor?n.defaultCustomColor:E(1,_)[0]})))(t,o,n,r)||[];return{colorCategories:o,classificationColors:i}})(p,f,c,u),{defaultClassLabel:w=""}=c;switch(t){case"pie":let e={name:l||n,hovertemplate:`%{label}<br>${n}<br>%{value}<br>%{percent}<extra></extra>`,type:t,textposition:"inside",values:m,pull:.005};if("default"!==p&&v.length){const r=f.map(((e,r)=>{const n=d[r],o="value"===p?P(e,b,w,t):O(e,b,w,n,s);return o?o.replace("${groupByValue}",n):n}));return e={...e,labels:r,marker:{colors:v}},e}return{...n&&{legendgroup:n},...e,labels:d,...u?{marker:{colors:d.reduce((e=>[...e,c?.defaultCustomColor||"#0888A1"]),[])}}:{}};case"bar":i&&(m=x(i,m));let r={type:t};if("default"!==p&&v.length){const e="value"===p?f.map((e=>P(e,b,w,t))):f.map((e=>O(e,b,w,l||n,s))),o=y()(e),i=o.reduce(((e,t)=>[...e,t?t.replace("${legendValue}",l||n||""):l||n]),[]),[c,u,g]=(S=e,T=o,[v,d,m].map((e=>T.map((t=>S.reduce(((r,n,o)=>n===t?[...r,e[o]]:r),[]))))));return i.map(((e,t)=>({...r,x:u[t],y:g[t],name:e,marker:{color:c[t]},hovertemplate:`${a?.tickPrefix??""}%{y:${a?.format??"g"}}${a?.tickSuffix??""}<extra>${e}</extra>`})))}return r={...r,x:d,y:m,name:l||n,hovertemplate:`${a?.tickPrefix??""}%{y:${a?.format??"g"}}${a?.tickSuffix??""}<extra></extra>`,...v&&v.length&&u?{marker:{color:v}}:{}},r;default:return i&&(m=x(i,m)),{hovertemplate:`${a?.tickPrefix??""}%{y:${a?.format??"d"}}${a?.tickSuffix??""}<extra></extra>`,x:d,y:m,name:l||n}}var S,T}({...e,xDataKey:p,yDataKey:r,classificationAttr:m,type:o,yAxisLabel:n,autoColorOptions:u,customColorEnabled:v,classficationType:w});const a=i?i?.x?.map(((e,t)=>({xAxis:e,yAxis:i.y[t]}))):{},s=b()(a,["xAxis"],["asc"]);return i.x=s?.map((e=>e.xAxis)),i.y=s?.map((e=>e.yAxis)),i})),config:{displayModeBar:d,modeBarButtonsToRemove:["lasso2d","select2d","hoverCompareCartesian","hoverClosestCartesian","hoverClosestPie"],displaylogo:!1}}};function D(e){let{onInitialized:t,...r}=e;const{data:i,layout:a,config:l}=C(r);return o().createElement(n.Suspense,{fallback:o().createElement(s.Z,null)},o().createElement(w,{onInitialized:t,data:i.flat(),layout:a,config:l}))}},1979:(e,t,r)=>{"use strict";r.d(t,{dY:()=>v,yM:()=>b});var n=r(24852),o=r.n(n),i=r(67076),a=r(49977),s=r(18446),l=r.n(s),c=r(23570),u=r.n(c),p=r(47359),d=r(49243),g=r(7412),m=r(24262);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h.apply(this,arguments)}const f=()=>-1!==(0,g.lY)().indexOf("application/json")?"application/json":(0,g.wR)(),y=(0,i.mapPropsStream)((e=>{const{stream:t,handler:r}=(0,i.createEventHandler)();return t.withLatestFrom(e.map((e=>{let{map:t,layers:r,options:n}=e;return{map:t,layers:r,options:n}})).distinctUntilChanged(((e,t)=>l()(e,t)))).switchMap((e=>{let[{point:t},{map:r,layers:n=[],options:{mapOptions:{mapInfoFormat:o=f()}={}}={}}]=e;const i=n.filter((e=>(0,m.T4)(e,r.resolution)&&(0,g.y_)(e))),s=["SLD_BODY"],l=["buffer","cql_filter","filter","propertyName"];return 0===i.length?a.Observable.of({requests:[{}],responses:[{response:{features:[]}}],validResponses:[]}):a.Observable.from(i).mergeMap((e=>{let{url:n,request:i,metadata:a}=(0,g.Fm)(e,{format:o,map:r,point:t,currentLocale:"en-US"});const c=n,p=i,m={...(0,g.K7)(e,l,s),...p},h=u()();return(0,d.y)(c,m,e).map((e=>e.data.exceptions?{reqId:h,exceptions:e.data.exceptions,queryParams:p,layerMetadata:a}:{data:e.data,reqId:h,queryParams:p,layerMetadata:{...a,features:e.features,featuresCrs:e.featuresCrs}})).catch((e=>({error:e.data||e.statusText||e.status,reqId:h,queryParams:p,layerMetadata:a}))).startWith({start:!0,reqId:h,request:m})})).scan(((e,t)=>{let{requests:r,responses:n,validResponses:i}=e;if(t.start){const{reqId:e,request:o}=t;return{requests:r.concat({reqId:e,request:o}),responses:n,validResponses:i}}const{data:a,queryParams:s,layerMetadata:l}=t,c=(0,g.Te)(o),u=n.concat({response:a,queryParams:s,layerMetadata:l});return{requests:r,validResponses:c.getValidResponses(u),responses:u}}),{requests:[],responses:[],validResponses:[]})})).startWith({requests:[],responses:[]}).combineLatest(e,(function(e){return{...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},mapInfo:e,getFeatureInfoHandler:r}}))})),v=(0,i.branch)((e=>{let{map:{mapInfoControl:t=!1}={}}=e;return t}),(0,i.compose)(y,(0,i.withStateHandlers)({popups:[]},{onClick:(e,t)=>{let{getFeatureInfoHandler:r=(()=>{})}=t;return(e,t)=>{let{rawPos:n=[],...o}=e;return r({point:o,layerInfo:t}),{popups:[{position:{coordinates:n},id:u()()}]}}},onPopupClose:()=>()=>({popups:[]})}),(0,i.withPropsOnChange)(["mapInfo","popups"],(e=>{let{mapInfo:t,popups:r,options:{mapOptions:{mapInfoFormat:n=f()}={}}={}}=e;const{responses:i,requests:a,validResponses:s}=t,l=()=>o().createElement(p.Z,{renderValidOnly:!0,responses:i,requests:a,validResponses:s,format:n,showEmptyMessageGFI:!0,missingResponses:(a||[]).length-(i||[]).length});return{popups:r.map((e=>({...e,component:l})))}})),(0,i.withPropsOnChange)(["plugins","onPopupClose","popups"],(function(){let{plugins:e,popups:t,onPopupClose:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{PopupSupport:n,tools:i={},...a}=e;return n?{plugins:{...a,tools:{...i,popup:e=>o().createElement(n,h({},e,{popups:t,onPopupClose:r}))}}}:{}})))),b=(0,i.withPropsOnChange)(["onClick","eventHandlers"],(function(){let{onClick:e=(()=>{}),eventHandlers:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{eventHandlers:{...t,onClick:e}}}))},30029:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(24852),o=r.n(n),i=r(45697),a=r.n(i),s=r(5346);const l={width:"100%",height:"100%",textAlign:"center",verticalAlign:"center"};class c extends o().PureComponent{render(){return this.props.loading?o().createElement("div",{style:l},o().createElement(s.Z,{msgId:"loading"})):this.props.children?this.props.children:o().createElement("div",{style:l},o().createElement(s.Z,{msgId:"featuregrid.noFeaturesAvailable"}))}}var u,p,d;u=c,p="propTypes",d={loading:a().bool},(p=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(p))in u?Object.defineProperty(u,p,{value:d,enumerable:!0,configurable:!0,writable:!0}):u[p]=d;const g=c},5099:(e,t,r)=>{"use strict";r.d(t,{Z:()=>X});var n=r(45697),o=r.n(n),i=r(24852),a=r.n(i),s=r(96958),l=r(622),c=r(14526),u=r(67076),p=r(49977),d=r.n(p);function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g.apply(this,arguments)}const m=(0,u.branch)((e=>{let{virtualScroll:t}=e;return t}),(0,u.compose)((0,u.mapPropsStream)((e=>{const{handler:t,stream:r}=(0,u.createEventHandler)();return e.combineLatest(r.throttle((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return d().Observable.timer(e)})).scan((e=>e+1),0).map((e=>({scrollToTopCounter:e}))).startWith({}),((e,r)=>({...e,...r,scrollToTop:t})))})),(0,u.withHandlers)({onGridSort:e=>{let{onGridSort:t=(()=>{}),scrollToTop:r=(()=>{})}=e;return function(){return r(0),t(...arguments)}},onAddFilter:e=>{let{onAddFilter:t=(()=>{}),scrollToTop:r=(()=>{})}=e;return function(){r(1e3),t(...arguments)}}})))(c.Z);var h=r(14293),f=r.n(h),y=r(95344),v=r.n(y),b=r(73849),w=r(78819),_=r(43148),E=r(76364),P=r(37275),O=r(71231);function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x.apply(this,arguments)}function S(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class T extends w.Z{constructor(e){super(e),this.validate=e=>{try{return this.props.isValid(e[this.props.column&&this.props.column.key])}catch(e){return!1}},this.getValue=()=>super.getValue()}render(){return a().createElement(O.Q,x({},this.props,{url:P.ZP.getParsedUrl(this.props.url,{outputFormat:"json"}),filter:"contains",autocompleteStreamFactory:E.Vd}))}}S(T,"propTypes",{column:o().object,dataType:o().string,inputProps:o().object,isValid:o().func,onBlur:o().func,autocompleteStreamFactory:o().func,url:o().string,typeName:o().string,value:o().string}),S(T,"defaultProps",{isValid:()=>!0,dataType:"string"});const C=T;var D=r(82994);function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F.apply(this,arguments)}const I={defaultEditor:e=>a().createElement(w.Z,e),int:e=>a().createElement(_.Z,F({dataType:"int",inputProps:{step:1,type:"number"}},e)),number:e=>a().createElement(_.Z,F({dataType:"number",inputProps:{step:1,type:"number"}},e)),string:e=>e.autocompleteEnabled?a().createElement(C,F({dataType:"string"},e)):a().createElement(w.Z,F({dataType:"string"},e)),boolean:e=>a().createElement(D.Z,F({dataType:"string"},e,{value:e.value&&e.value.toString(),filter:!1,values:["true","false"]}))},M=(0,u.withState)("value","onValueChange",(e=>e.value));var L=r(18027),A=r(47361);const R=(0,u.compose)((0,u.defaultProps)({sortable:!0,autocompleteEnabled:!1,initPlugin:()=>{},url:"",typeName:"",enableColumnFilters:!1,columns:[],features:[],newFeatures:[],select:[],changes:{},focusOnEdit:!1,editors:(e,t)=>I[e]?I[e](t):I.defaultEditor(t),dataStreamFactory:e=>{const{handler:t,stream:r}=(0,u.createEventHandler)();return(e=>e.distinctUntilChanged(((e,t)=>{let{features:r,pages:n,isFocused:o}=e,{features:i,pages:a,isFocused:s}=t;return r===i&&o===s&&n===a})).switchMap((e=>{let{size:t,pageEvents:r,isFocused:n,pages:o,pagination:i,vsOverScan:a=20,scrollDebounce:l=50,onGridScroll$:c}=e;return c.debounceTime(l).filter((()=>!n)).map((e=>{let{firstRowIdx:r,lastRowIdx:n}=e;const l=r-a<0?0:r-a,c=n+a>i.totalFeatures-1?i.totalFeatures-1:n+a,u=Math.floor(l/t),p=Math.floor(c/t);let d=!1;for(let e=u;e<=p&&!d;e++)-1===(0,s.t3)(e*t,o,t)&&(d=!0);return d&&{startPage:u,endPage:p}})).filter((e=>e)).do((e=>r.moreFeatures(e)))})))(e.filter((e=>{let{virtualScroll:t}=e;return t})).map((e=>({...e,onGridScroll$:r})))).startWith({}).map((e=>({...e,onGridScroll:t})))},virtualScroll:!0}),(0,u.withPropsOnChange)("showDragHandle",(function(){let{showDragHandle:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{className:e?"feature-grid-drag-handle-show":"feature-grid-drag-handle-hide"}})),(0,u.withPropsOnChange)(["enableColumnFilters"],(e=>({displayFilters:e.enableColumnFilters}))),(0,u.withPropsOnChange)(["editingAllowedRoles","virtualScroll"],(e=>({editingAllowedRoles:e.editingAllowedRoles,initPlugin:e.initPlugin}))),(0,u.withPropsOnChange)(["autocompleteEnabled"],(e=>({autocompleteEnabled:e.autocompleteEnabled}))),(0,u.withPropsOnChange)(["url"],(e=>({url:e.url}))),(0,u.withPropsOnChange)(["typeName"],(e=>({typeName:e.typeName}))),(0,u.withPropsOnChange)(["features","newFeatures","changes"],(e=>({rows:(e.newFeatures?[...e.newFeatures,...e.features]:e.features).filter(e.focusOnEdit?(0,s.ek)(e.changes&&Object.keys(e.changes).length>0,e.newFeatures,e.changes):()=>!0).map((t=>(0,s.Qc)(t,e.changes))).map((e=>({...e,"_!_id_!_":e.id,get:t=>"geometry"===t||"_new"===t?e[t]:e.properties&&e.properties[t]})))}))),(0,u.withPropsOnChange)(["newFeatures","changes","focusOnEdit"],(e=>({isFocused:e.focusOnEdit&&(e.changes&&Object.keys(e.changes).length>0||e.newFeatures&&e.newFeatures.length>0)}))),(0,u.withPropsOnChange)(["features","newFeatures","isFocused","virtualScroll","pagination"],(e=>({rowsCount:(e.isFocused||!e.virtualScroll)&&e.rows&&e.rows.length||e.pagination&&e.pagination.totalFeatures||0}))),(0,u.withHandlers)({rowGetter:e=>e.virtualScroll&&(t=>(0,s.WQ)(t,e.rows,e.pages,e.size))||(t=>(0,s.dM)(t,e.rows))}),(0,u.withPropsOnChange)(["describeFeatureType","columnSettings","tools","actionOpts","mode","isFocused","sortable"],(e=>{const t=function(){let{localType:t=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return e.filterRenderers&&e.filterRenderers[r]?e.filterRenderers[r]:M((0,L.Q)(t))},r={columns:(0,s.Sc)(e.tools,e.rowGetter,e.describeFeatureType,e.actionOpts,t).concat((0,s.AV)(e.describeFeatureType,e.columnSettings,{editable:"EDIT"===e.mode,sortable:e.sortable&&!e.isFocused,defaultSize:e.defaultSize},{getEditor:t=>{const r={onTemporaryChanges:e.gridEvents&&e.gridEvents.onTemporaryChanges,autocompleteEnabled:e.autocompleteEnabled,url:e.url,typeName:e.typeName},n={attribute:t.name,url:e.url,typeName:e.typeName},o=e.customEditorsOptions&&e.customEditorsOptions.rules||[],i={type:t.localType,generalProps:r,props:e},a=v().getCustomEditor(n,o,i);return f()(a)?e.editors(t.localType,r):a},getFilterRenderer:t,getFormatter:e=>(e=>"boolean"===e.localType?function(){let{value:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f()(e)?null:a().createElement("span",null,e.toString())}:["int","number"].includes(e.localType)?function(){let{value:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f()(e)?null:a().createElement(A.Z,{value:e,numberParams:{maximumFractionDigits:17}})}:null)(e)}))};return r})),(0,u.withPropsOnChange)(["gridOpts","describeFeatureType","actionOpts","mode","select","columns","showCheckbox"],(e=>{let{onRowsSelected:t=(()=>{}),onRowsDeselected:r=(()=>{}),onRowsToggled:n=(()=>{}),...o}=(0,s.a3)(e.gridEvents,e.rowGetter,e.describeFeatureType,e.actionOpts,e.columns),i=e.gridOpts;return i={...i,enableCellSelect:"EDIT"===e.mode,rowSelection:{showCheckbox:e.showCheckbox||"EDIT"===e.mode,selectBy:{keys:{rowKey:"_!_id_!_",values:e.select.map((e=>e.id))}},onRowsSelected:t,onRowsDeselected:r}},o.onRowClick=(e,t)=>{e>=0&&n([{rowIdx:e,row:t}])},{...o,...i}})),b.Z),N=R;var k=r(53370);function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G.apply(this,arguments)}function j(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class B extends a().Component{constructor(e){super(e),this.setScrollLeft=e=>this.refs.cell.setScrollLeft(e)}render(){const e=this.context.isProperty(this.props.column.key),t=this.props.rowData._new&&e||this.context.isModified(this.props.rowData.id,this.props.column.key),r=!e||this.context.isValid(this.props.rowData.get(this.props.column.key),this.props.column.key),n=(t?["modified"]:[]).concat(r?[]:["invalid"]).join(" ");return a().createElement(k.Cell,G({},this.props,{ref:"cell",className:n}))}}j(B,"propTypes",{value:o().any,rowData:o().object,column:o().object}),j(B,"contextTypes",{isModified:o().func,isProperty:o().func,isValid:o().func}),j(B,"defaultProps",{value:null,rowData:{},column:{}});const $=B;class U extends a().Component{constructor(e){super(e),this.setScrollLeft=e=>this.refs.row.setScrollLeft(e)}render(){return this.props.renderBaseRow({extraClasses:"empty_row"===this.props.row.id?"empty-row":"",cellRenderer:$,...this.props})}}var W,q,V;W=U,q="propTypes",V={columns:o().array,row:o().object,renderBaseRow:o().func.isRequired},(q=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(q))in W?Object.defineProperty(W,q,{value:V,enumerable:!0,configurable:!0,writable:!0}):W[q]=V;const Z=U;function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H.apply(this,arguments)}function K(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class z extends a().PureComponent{constructor(e){super(e)}getChildContext(){return{isModified:(e,t)=>this.props.changes.hasOwnProperty(e)&&this.props.changes[e].hasOwnProperty(t),isProperty:e=>"geometry"===e||(0,s.IC)(e,this.props.describeFeatureType),isValid:(e,t)=>!this.props.describeFeatureType||(0,s.wT)(e,t,this.props.describeFeatureType)}}render(){const e=this.props.gridComponent;return a().createElement(e,H({rowRenderer:Z},this.props))}}K(z,"propTypes",{autocompleteEnabled:o().bool,editingAllowedRoles:o().array,gridOpts:o().object,changes:o().object,selectBy:o().object,customEditorsOptions:o().object,features:o().array,showDragHandle:o().bool,gridComponent:o().func,describeFeatureType:o().object,columnSettings:o().object,gridOptions:o().object,actionOpts:o().object,tools:o().array,gridEvents:o().object,virtualScroll:o().bool,maxStoredPages:o().number}),K(z,"childContextTypes",{isModified:o().func,isValid:o().func,isProperty:o().func}),K(z,"defaultProps",{editingAllowedRoles:["ADMIN"],autocompleteEnabled:!1,gridComponent:e=>a().createElement(l.Z,null,(t=>{let{width:r,height:n}=t;return a().createElement("div",{className:e.className},a().createElement(m,g({},e,{minHeight:n,minWidth:r,enableCellAutoFocus:!1})))})),changes:{},gridEvents:{},gridOpts:{},describeFeatureType:{},columnSettings:{},features:[],tools:[],showDragHandle:!1,virtualScroll:!1,maxStoredPages:5});const X=N(z)},78819:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),o=r.n(n),i=r(53370);function a(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends i.editors.SimpleTextEditor{componentDidMount(){this.props.onTemporaryChanges?.(!0)}componentWillUnmount(){this.props.onTemporaryChanges?.(!1)}}a(s,"propTypes",{onTemporaryChanges:o().func}),a(s,"defaultProps",{onTemporaryChanges:()=>{}});const l=s},82994:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(24852),o=r.n(n),i=r(45697),a=r.n(i),s=r(78819),l=r(49902),c=r(67076);const u=(0,c.compose)((0,c.withStateHandlers)((e=>({open:!1,currentPage:1,value:e.value,data:e.data,textValue:e.textValue,textLabel:e.textLabel})),{select:e=>()=>({...e,selected:!0}),change:e=>t=>{if(e.selected&&e.changingPage)return{...e,selected:!1,changingPage:!1,value:e.value,currentPage:e.changingPage?e.currentPage:1};const r="string"==typeof t?t:t.value;return{...e,selected:!1,changingPage:!1,value:r,currentPage:e.changingPage?e.currentPage:1}},focus:e=>t=>t&&0===t.length&&""===e.value?{...e,currentPage:1,isToggled:!1,open:!0}:e,toggle:e=>()=>({...e,open:!!e.changingPage||!e.open})}))((e=>{let{toggle:t,select:r,focus:n,change:i,value:a,busy:s,data:c,loading:u=!1,filter:p,open:d}=e;return o().createElement(l.Z,{pagination:{paginated:!1},onFocus:n,onToggle:t,onChange:i,onSelect:r,selectedValue:a,dropUp:!1,busy:s,data:c,open:d,loading:u,filter:p})})),p=e=>{let{oldValue:t,changedValue:r,data:n,allowEmpty:o}=e;return o&&""===r?"":-1!==n.indexOf(r)?r:t};var d=r(91175),g=r.n(d),m=r(27418),h=r.n(m);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function y(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class v extends s.Z{constructor(e){super(e),this.validate=e=>{try{return this.props.isValid(e[this.props.column&&this.props.column.key])}catch(e){return!1}},this.getValueByLabel=e=>{try{return this.props.values[this.props.labels.indexOf(e)]}catch(t){return e}},this.getValue=()=>{const e=super.getValue();return this.props.forceSelection?{[this.props.column.key]:p({oldValue:this.props.defaultOption,changedValue:this.getValueByLabel(e[this.props.column&&this.props.column.key]),data:this.props.values,allowEmpty:this.props.allowEmpty})}:this.props.allowEmpty?e:{[this.props.column.key]:p({oldValue:this.props.defaultOption,changedValue:this.getValueByLabel(e[this.props.column&&this.props.column.key]),data:this.props.values,allowEmpty:this.props.allowEmpty})}}}render(){const e=this;var t=[];this.props.values&&this.props.labels&&this.props.values.lenght===this.props.labels.lenght?this.props.values.forEach((function(r,n){t.push({label:e.props.labels[n],value:r})})):t=this.props.values.map((e=>({label:e,value:e})));const r=h()({},{...this.props},{data:t,defaultOption:this.props.defaultOption||g()(this.props.values)});return o().createElement(u,f({},r,{filter:this.props.filter}))}}y(v,"propTypes",{column:a().object,dataType:a().string,defaultOption:a().string,forceSelection:a().bool,allowEmpty:a().bool,inputProps:a().object,isValid:a().func,onBlur:a().func,typeName:a().string,value:a().string,filter:a().string,values:a().array,labels:a().array}),y(v,"defaultProps",{isValid:()=>!0,dataType:"string",filter:"contains",values:[],forceSelection:!0,allowEmpty:!0});const b=v},43148:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(24852),o=r.n(n),i=r(45697),a=r.n(i),s=r(81763),l=r.n(s),c=r(94192);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d={int:e=>parseInt(e,10),number:e=>parseFloat(e,10)};class g extends o().Component{constructor(e){super(e),p(this,"state",{inputText:""}),p(this,"validateTextValue",(e=>{if(!d[this.props.dataType])return!1;try{const t=d[this.props.dataType](e);return this.validateNumberValue(t)}catch(e){return!1}})),p(this,"validateNumberValue",(e=>l()(e)&&!isNaN(e)&&(!l()(this.props.minValue)||this.props.minValue<=e)&&(!l()(this.props.maxValue)||this.props.maxValue>=e))),this.state={inputText:e.value?.toString?.()??""},this.inputRef=o().createRef()}componentDidMount(){this.props.onTemporaryChanges?.(!0)}componentWillUnmount(){this.props.onTemporaryChanges?.(!1)}getValue(){try{const e=d[this.props.dataType](this.state.inputText);return{[this.props.column.key]:this.validateNumberValue(e)?e:this.props.value}}catch(e){return{[this.props.column.key]:this.props.value}}}getInputNode(){return this.inputRef.current}render(){return o().createElement(c.Z,u({},this.props.inputProps,{style:!this.state.validated||this.state.isValid?{}:{borderColor:"red"},value:this.state.inputText,ref:e=>{this.inputRef=e},type:"number",min:this.props.minValue,max:this.props.maxValue,className:"form-control",defaultValue:this.props.value,onChange:e=>{this.setState({inputText:e,isValid:this.validateTextValue(e),validated:!0})}}))}}p(g,"propTypes",{value:a().oneOfType([a().string,a().number]),inputProps:a().object,dataType:a().string,minValue:a().number,maxValue:a().number,column:a().object,onTemporaryChanges:a().func}),p(g,"defaultProps",{dataType:"number",column:{}})},89808:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(24852),o=r.n(n),i=r(82994),a=r(43148),s=r(45697),l=r.n(s);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class p extends o().Component{constructor(e){super(e),u(this,"state",{inputText:""}),u(this,"validateValue",(e=>!this.props.formatRegex||new RegExp(this.props.formatRegex).test(e))),this.state={inputText:e.value},this.inputRef=o().createRef()}componentDidMount(){this.props.onTemporaryChanges?.(!0)}componentWillUnmount(){this.props.onTemporaryChanges?.(!1)}getValue(){return{[this.props.column.key]:this.validateValue(this.state.inputText)?this.state.inputText:this.props.value}}getInputNode(){return this.inputRef.current}render(){return o().createElement("input",c({},this.props.inputProps,{style:!this.state.validated||this.state.isValid?{}:{borderColor:"red"},value:this.state.inputText,ref:this.inputRef,className:"form-control",defaultValue:this.props.value,onChange:e=>{this.setState({inputText:e.target.value,isValid:this.validateValue(e.target.value),validated:!0})}}))}}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}u(p,"propTypes",{value:l().string,inputProps:l().object,dataType:l().string,column:l().object,formatRegex:l().string,onTemporaryChanges:l().func}),u(p,"defaultProps",{dataType:"string",column:{}});const g={DropDownEditor:{string:e=>o().createElement(i.Z,d({dataType:"string"},e))},NumberEditor:{int:e=>o().createElement(a.Z,d({dataType:"int"},e)),number:e=>o().createElement(a.Z,d({dataType:"number"},e))},FormatEditor:{string:e=>o().createElement(p,d({dataType:"string"},e))}}},18027:(e,t,r)=>{"use strict";r.d(t,{Q:()=>Q});var n=r(67076),o=r(24852),i=r.n(o),a=r(45697),s=r.n(a),l=r(68195),c=r(30381),u=r.n(c),p=r(20),d=r(93054),g=r.n(d),m=r(57588),h=r(47960),f=r.n(h),y=r(50966);function v(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const b=e=>{let t=u()().startOf("day");const r=u()().startOf("day").add(1,"d");let n=[],o=t.date();for(;t.date()===o&&t.isBefore(r);)n.push({date:t.toDate(),label:t.format("LT")}),t=t.add(e||30,"m");return n};class w extends o.Component{constructor(){super(...arguments),v(this,"state",{focusedItemIndex:0,times:[]}),v(this,"handleKeyDown",(e=>{let{key:t}=e,{focusedItemIndex:r,times:n}=this.state;if("Enter"===t){const t=n[r];this.props.onSelect(t),e.preventDefault()}else if("ArrowDown"===t){e.preventDefault();const t=r+1;this.scrollDown(t),t<n.length&&this.setState({focusedItemIndex:t})}else if("ArrowUp"===t){e.preventDefault();const t=r-1;this.scrollUp(t),t>-1&&this.setState({focusedItemIndex:t})}})),v(this,"scrollDown",(e=>{const t=this.itemsRef[e];t&&t.offsetTop>this.listRef.offsetHeight&&(this.listRef.scrollTop=t.offsetTop-this.listRef.offsetTop)})),v(this,"scrollUp",(e=>{const t=this.itemsRef[e];if(t){const e=this.listRef.scrollTop,r=t.offsetTop;e&&r<e&&(this.listRef.scrollTop=t.offsetTop-this.listRef.offsetTop)}})),v(this,"attachListRef",(e=>this.listRef=e)),v(this,"itemsRef",{})}componentDidMount(){this.setState({times:b()})}render(){const{focusedItemIndex:e,times:t}=this.state;return i().createElement("ul",{id:"rw_1_time_listbox",style:{position:"relative"},ref:this.attachListRef,tabIndex:"0",className:"rw-list",role:"listbox","aria-labelledby":"rw_1_input","aria-live":"false","aria-hidden":"true","aria-activedescendant":"rw_1_time_listbox__option__11"},t.map(((t,r)=>i().createElement("li",{key:t.label,onMouseDown:this.props.onMouseDown,onClick:()=>this.props.onSelect(t),ref:e=>{this.itemsRef[r]=e},role:"option",tabIndex:"0","aria-selected":"false",className:"rw-list-option "+(e===r?"rw-state-focus":""),id:"rw_1_time_listbox__option__0"},t.label))))}}v(w,"propTypes",{onSelect:s().func,onMouseDown:s().func}),v(w,"defaultProps",{onSelect:()=>{},onMouseDown:()=>{}});const _=w;function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E.apply(this,arguments)}function P(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}g()(u());const O="function"==typeof u()().locale?"locale":"lang";function x(e,t,r){return e?u()(t,r)[O](e):u()(t,r)}const S=(e,t)=>{const r=u()(e);return r.hours(t.getHours()).minute(t.getMinutes()).seconds(t.getSeconds()).milliseconds(t.getMilliseconds()),r.toDate()},T={base:"lll",date:"L",time:"LT"};class C extends o.Component{constructor(){super(...arguments),P(this,"state",{open:"",focused:!1,inputValue:"",operator:"",date:null}),P(this,"getFormat",(()=>{const{format:e,time:t,calendar:r}=this.props,{date:n,time:o,base:i}=T;return e||(!t&&r?n:t&&!r?o:i)})),P(this,"renderInput",((e,t,r,n,o,a,s)=>r?i().createElement(y.Z,{placement:"top",overlay:i().createElement(m.Tooltip,{id:"tooltip"},r)},i().createElement("input",{type:"text",id:"rw_1_input",role:"combobox",onBlur:this.handleInputBlur,placeholder:n,"aria-expanded":a||s,"aria-haspopup":"true","aria-busy":"false","aria-owns":"rw_1_cal rw_1_time_listbox",tabIndex:o,autoComplete:"off",value:`${t}${e}`,className:"rw-input",onChange:this.handleValueChange})):i().createElement("input",{type:"text",id:"rw_1_input",role:"combobox",onBlur:this.handleInputBlur,placeholder:n,"aria-expanded":a||s,"aria-haspopup":"true","aria-busy":"false","aria-owns":"rw_1_cal rw_1_time_listbox",tabIndex:o,autoComplete:"off",value:`${t}${e}`,className:"rw-input",onChange:this.handleValueChange}))),P(this,"inputFlush",!1),P(this,"ignoreBlur",!1),P(this,"handleWidgetFocus",(()=>{this.setState({focused:!0}),this.ignoreBlur=!1})),P(this,"handleWidgetBlur",(()=>{this.ignoreBlur||this.setState({open:"",focused:!1})})),P(this,"handleMouseDown",(()=>{this.ignoreBlur=!0})),P(this,"toggleCalendar",(()=>{this.setState((e=>({open:"date"!==e.open?"date":""})))})),P(this,"toggleTime",(()=>{this.setState((e=>({open:"time"!==e.open?"time":""})))})),P(this,"handleInputBlur",(()=>{if(this.inputFlush){const e=this.parse(this.state.inputValue),t=this.format(e);this.setState({inputValue:t,date:e}),this.inputFlush=!1,this.props.onChange(e,`${this.state.operator}${t}`)}})),P(this,"setDateFromValueProp",((e,t)=>{if(f()(e)){const r=this.format(e);this.setState((n=>({date:e,inputValue:r,operator:t||n.operator})))}})),P(this,"parse",(e=>{const{culture:t}=this.props,r=this.getFormat();if(e){const n=x(t,e,r);if(n.isValid())return n.toDate()}return null})),P(this,"format",(e=>{if(!e)return"";const{culture:t}=this.props,r=this.getFormat(),n=x(t,e);return n.isValid()?n.format(r):""})),P(this,"close",(()=>{this.setState({open:""})})),P(this,"open",(()=>{const{calendar:e,time:t}=this.props;return!e&&t?this.setState({open:"time"}):e&&!t?this.setState({open:"date"}):""})),P(this,"handleKeyDown",(e=>{const{open:t}=this.state,r="time"===t,n="date"===t;if(!e.defaultPrevented)if("Escape"!==e.key){if(e.altKey&&"ArrowDown"===e.key)return e.preventDefault(),void this.open();if(e.altKey&&"ArrowUp"===e.key)return e.preventDefault(),void this.close();if(r&&this.timeRef.handleKeyDown(e),n&&this.calRef.refs.inner.handleKeyDown(e),!r&&!n&&"Enter"===e.key){const e=this.parse(this.state.inputValue),t=this.format(e);this.setState({inputValue:t,date:e}),this.inputFlush=!1,this.props.onChange(e,`${this.state.operator}${t}`)}}else this.close()})),P(this,"handleValueChange",(e=>{const{value:t}=e.target,r=/\s*(!==|!=|<>|<=|>=|===|==|=|<|>)?(.*)/.exec(t);this.setState({inputValue:r[2],operator:r[1]||""}),this.inputFlush=!0})),P(this,"handleCalendarChange",(e=>{const t=S(e,new Date),r=this.format(t);this.setState({date:t,inputValue:r,open:""}),this.props.onChange(t,`${this.state.operator}${r}`)})),P(this,"handleTimeSelect",(e=>{const t=this.state.date||new Date,r=S(t,e.date),n=this.format(r);this.setState({date:r,inputValue:n,open:""}),this.props.onChange(r,`${this.state.operator}${n}`)})),P(this,"attachTimeRef",(e=>this.timeRef=e)),P(this,"attachCalRef",(e=>this.calRef=e))}componentDidMount(){const{value:e,operator:t}=this.props;this.setDateFromValueProp(e,t)}componentDidUpdate(e){if(e.value!==this.props.value||e.operator!==this.props.operator){const{value:e,operator:t}=this.props;this.setDateFromValueProp(e,t)}}render(){const{open:e,inputValue:t,operator:r,focused:n}=this.state,{calendar:o,time:a,toolTip:s,placeholder:l,tabIndex:c}=this.props,u=Object.keys(this.props).reduce(((e,t)=>(["placeholder","calendar","time","onChange","value"].includes(t)||(e[t]=this.props[t]),e)),{}),d="date"===e,g="time"===e;return i().createElement("div",{tabIndex:"-1",onKeyDown:this.handleKeyDown,onBlur:this.handleWidgetBlur,onFocus:this.handleWidgetFocus,className:`rw-datetimepicker rw-widget ${o&&a?"rw-has-both":""} ${o||a?"":"rw-has-neither"} ${n?"rw-state-focus":""}`},this.renderInput(t,r,s,l,c,d,g),o||a?i().createElement("span",{className:"rw-select"},o?i().createElement("button",{tabIndex:"-1",title:"Select Date",type:"button","aria-disabled":"false","aria-label":"Select Date",className:"rw-btn-calendar rw-btn",onClick:this.toggleCalendar},i().createElement("span",{"aria-hidden":"true",className:"rw-i rw-i-calendar"})):"",a?i().createElement("button",{tabIndex:"-1",title:"Select Time",type:"button","aria-disabled":"false","aria-label":"Select Time",className:"rw-btn-time rw-btn",onClick:this.toggleTime},i().createElement("span",{"aria-hidden":"true",className:"rw-i rw-i-clock-o"})):""):"",i().createElement("div",{className:"rw-popup-container rw-popup-animating",style:{display:g?"block":"none",overflow:g?"visible":"hidden",height:"216px"}},i().createElement("div",{className:"rw-popup rw-widget",style:{transform:g?"translateY(0)":"translateY(-100%)",position:g?"":"absolute"}},i().createElement(_,E({ref:this.attachTimeRef,onMouseDown:this.handleMouseDown},u,{onClose:this.close,onSelect:this.handleTimeSelect})))),i().createElement("div",{className:"rw-calendar-popup rw-popup-container "+(d?"":"rw-popup-animating"),style:{display:d?"block":"none",overflow:d?"visible":"hidden",height:"375px"}},i().createElement("div",{className:"rw-popup",style:{transform:d?"translateY(0)":"translateY(-100%)",padding:"0",borderRadius:"4px",position:d?"":"absolute"}},i().createElement(p.Calendar,E({tabIndex:"-1",ref:this.attachCalRef,onMouseDown:this.handleMouseDown,onChange:this.handleCalendarChange},u)))))}}P(C,"propTypes",{format:s().string,type:s().string,placeholder:s().string,onChange:s().func,calendar:s().bool,time:s().bool,value:s().any,operator:s().string,culture:s().string,toolTip:s().string,tabIndex:s().string}),P(C,"defaultProps",{placeholder:"Type date...",calendar:!0,time:!0,onChange:()=>{},value:null});const D=C;var F=r(86638),I=r(55237);function M(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class L extends i().PureComponent{constructor(){super(...arguments),M(this,"renderInput",(()=>{if(!1===this.props.column.filterable)return i().createElement("span",null);const e=(0,F.S$)(this.context.messages,this.props.placeholderMsgId)||"Search";let t="header-filter-"+this.props.column.key;return i().createElement("input",{disabled:this.props.disabled,key:t,type:"text",className:"form-control input-sm",placeholder:e,value:this.state?.value??this.props.value,onChange:this.handleChange})})),M(this,"renderTooltip",(e=>this.props.tooltipMsgId&&(0,F.S$)(this.context.messages,this.props.tooltipMsgId)?i().createElement(y.Z,{placement:"top",overlay:i().createElement(m.Tooltip,{id:"tooltip"},(0,F.S$)(this.context.messages,this.props.tooltipMsgId))},e):e)),M(this,"handleChange",(e=>{const t=e.target.value;this.setState({value:t}),this.props.onChange({value:t,attribute:this.props.column&&this.props.column.key})}))}render(){let e="header-filter--"+this.props.column.key;return i().createElement("div",{key:e,className:"form-group"+(this.props.valid?"":" has-error")},this.renderTooltip(this.renderInput()))}}M(L,"propTypes",{valid:s().bool,disabled:s().bool,onChange:s().func.isRequired,value:s().any,column:s().object,placeholderMsgId:s().string,tooltipMsgId:s().string}),M(L,"contextTypes",{messages:s().object}),M(L,"defaultProps",{value:"",valid:!0,onChange:()=>{},column:{},placeholderMsgId:"featuregrid.filter.placeholders.default"});const A=L;function R(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const N=(0,r(43146).Z)({dateProp:"value",dateTypeProp:"type",setDateProp:"onChange"})(D);class k extends A{constructor(){super(...arguments),R(this,"renderInput",(()=>{if(!1===this.props.column.filterable)return i().createElement("span",null);const e=(0,I.V$)(this.context.locale,this.props.type),t=(0,F.S$)(this.context.messages,this.props.placeholderMsgId)||"Insert date",r=this.props.intl&&this.props.intl.formatMessage({id:`${this.props.tooltipMsgId}`},{format:e})||`Insert date in ${e} format`,n="header-filter-"+this.props.column.key;let o;o=this.props.value&&null===this.props.value.startDate||!this.props.value?null:this.props.value&&this.props.value.startDate||this.props.value;const a=this.props.value?o:null,s=this.props.value&&this.props.value.operator;return i().createElement(N,{key:n,disabled:this.props.disabled,format:e,placeholder:t,value:a,toolTip:r,operator:s,type:this.props.type,time:"date-time"===this.props.type||"time"===this.props.type,calendar:"date-time"===this.props.type||"date"===this.props.type,onChange:(e,t)=>this.handleChange(e,t)})})),R(this,"handleChange",((e,t)=>{this.props.onChange({value:e,stringValue:t,attribute:this.props.column&&this.props.column.name})}))}}R(k,"propTypes",{type:s().string,disabled:s().bool,onChange:s().func,intl:l.intlShape}),R(k,"contextTypes",{messages:s().object,locale:s().string}),R(k,"defaultProps",{value:null,type:"date-time",column:{},placeholderMsgId:"featuregrid.filter.placeholders.default",onChange:()=>{}});const G=(0,n.getContext)({intl:l.intlShape})(k),j=(0,n.compose)((0,n.defaultProps)({onValueChange:()=>{},value:null}),(0,n.withHandlers)({onChange:e=>function(){let{value:t,attribute:r,stringValue:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=/\s*(!==|!=|<>|<=|>=|===|==|=|<|>)?(.*)/.exec(n),i=o[1];let a=o[1]||"=";"!=="===i|"!="===i?a="<>":"==="===i|"=="===i&&(a="="),e.onValueChange(t),e.onChange({value:{startDate:t,operator:i},operator:a,type:e.type,attribute:r})}}),(0,n.defaultProps)({placeholderMsgId:"featuregrid.filter.placeholders.date",tooltipMsgId:"featuregrid.filter.tooltips.date"}))(G),B=(0,n.compose)((0,n.defaultProps)({onValueChange:()=>{}}),(0,n.withHandlers)({onChange:e=>function(){let{value:t,attribute:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.onValueChange(t),e.onChange({value:t,operator:"=",type:e.type,attribute:r})}}))(A);var $=r(5346);const U=e=>{let{value:t,filterEnabled:r=!1,filterDeactivated:n=!1,column:o={},tooltipPlace:a="top",tooltipDisabled:s="featuregrid.filter.tooltips.geometry.disabled",tooltipEnabled:l="featuregrid.filter.tooltips.geometry.enabled",tooltipApplied:c="featuregrid.filter.tooltips.geometry.applied",onChange:u=(()=>{})}=e;const p=n?void 0:r&&t?c:r&&!t?l:s,d=i().createElement("div",{className:`featuregrid-geometry-filter${r?" filter-enabled":""}${n?" filter-deactivated":""}`,onClick:n?()=>{}:()=>{u({enabled:!r,type:"geometry",attribute:o.geometryPropName})}},i().createElement(m.Glyphicon,{glyph:t?"remove-sign":"map-marker"}));return p?i().createElement(y.Z,{placement:a,overlay:i().createElement(m.Tooltip,{id:"gofull-tooltip"},i().createElement($.Z,{msgId:p}))},d):d};var W=r(92742),q=r.n(W),V=r(6557),Z=r.n(V),H=r(96958);const K=/\,/,z=(0,n.compose)((0,n.defaultProps)({onValueChange:()=>{}}),(0,n.withState)("valid","setValid",!0),(0,n.withHandlers)({onChange:e=>function(){let{value:t,attribute:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.onValueChange(t),K.exec(t))if(/,\s*$/.exec(t))e.setValid(!1);else{const n=(t?.split(",").filter(Z())||[]).reduce(((e,t)=>{let{newVal:r}=(0,H.Cf)(t);return e&&!(isNaN(r)&&""!==q()(t))}),!0);e.setValid(n),n&&e.onChange({value:t,rawValue:t,operator:"=",type:"number",attribute:r})}else{let{operator:n,newVal:o}=(0,H.Cf)(t,"number");isNaN(o)&&""!==q()(t)?e.setValid(!1):e.setValid(!0),e.onChange({value:isNaN(o)?void 0:o,rawValue:t,operator:n,type:"number",attribute:r})}}}),(0,n.defaultProps)({placeholderMsgId:"featuregrid.filter.placeholders.number",tooltipMsgId:"featuregrid.filter.tooltips.number"}))(A),X=(0,n.compose)((0,n.defaultProps)({onValueChange:()=>{},placeholderMsgId:"featuregrid.filter.placeholders.string"}),(0,n.withHandlers)({onChange:e=>function(){let{value:t,attribute:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.onValueChange(t),e.onChange({rawValue:t,value:q()(t)?q()(t):void 0,operator:"ilike",type:"string",attribute:r})}}))(A),Y={defaultFilter:e=>(0,n.withProps)((()=>({type:e})))(B),string:()=>X,number:()=>z,int:()=>z,date:()=>(0,n.withProps)((()=>({type:"date"})))(j),time:()=>(0,n.withProps)((()=>({type:"time"})))(j),"date-time":()=>(0,n.withProps)((()=>({type:"date-time"})))(j),geometry:()=>U},Q=(e,t)=>Y[e]?Y[e](e,t):Y.defaultFilter(e,t)},14526:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(45697),o=r.n(n),i=r(53370),a=r.n(i),s=r(80307),l=r.n(s);function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u extends(a()){constructor(e){super(e),c(this,"scrollListener",(()=>{this.props.isFocused||(this.scroll=this.canvas.scrollTop);const e=Math.ceil(this.canvas.clientHeight/this.props.rowHeight),t=Math.floor(this.canvas.scrollTop/this.props.rowHeight),r=t+e;this.props.onGridScroll&&this.props.onGridScroll({firstRowIdx:t,lastRowIdx:r})})),c(this,"setCanvasListener",(()=>{this.canvas=l().findDOMNode(this).querySelector(".react-grid-Canvas"),this.header=l().findDOMNode(this).querySelector(".react-grid-HeaderRow"),this.canvas&&this.canvas.addEventListener("scroll",this.scrollListener)}))}componentDidMount(){this.setCanvasListener(),this.props.displayFilters&&this.onToggleFilter()}componentWillUnmount(){this.canvas&&(this.canvas.removeEventListener("scroll",this.scrollListener),this.canvas=null),this.props.displayFilters&&this.onToggleFilter()}componentDidUpdate(e){const{virtualScroll:t,displayFilters:r,scrollToTopCounter:n}=this.props;e.displayFilters!==r&&this.onToggleFilter(),t&&(this.canvas&&this.canvas!==l().findDOMNode(this).querySelector(".react-grid-Canvas")&&(this.canvas.removeEventListener("scroll",this.scrollListener),this.setCanvasListener()),this.canvas||this.setCanvasListener(),this.canvas&&e.isFocused&&!this.props.isFocused?this.canvas.scrollTop=this.scroll:this.canvas&&this.props.minHeight!==e.minHeight&&this.scrollListener(),!this.props.isFocused&&this.canvas&&(this.scroll=this.canvas.scrollTop),n!==e.scrollToTopCounter&&this.canvas?this.canvas.scrollTop=0:this.canvas&&this.header&&(this.canvas.scrollLeft=this.header.scrollLeft))}}c(u,"propTypes",{displayFilters:o().bool});const p=u},48384:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n,o,i,a=r(24852),s=r.n(a),l=r(45697),c=r.n(l);class u extends s().Component{render(){const e=this.props.item;return e.pagination?s().createElement("span",null,e[this.props.textField]," ",e.pagination," "):s().createElement("span",null,e[this.props.textField])}}n=u,o="propTypes",i={item:c().object,textField:c().string,valueField:c().string},(o=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i;const p=u},71231:(e,t,r)=>{"use strict";r.d(t,{Q:()=>p});var n=r(1469),o=r.n(n),i=r(24852),a=r.n(i),s=r(67076),l=r(28878),c=r(49902);(0,s.setObservableConfig)(l.Z);const u=(0,s.mapPropsStreamWithConfig)(l.Z)((e=>e.take(1).switchMap((t=>t.autocompleteStreamFactory(e))).combineLatest(e,((e,t)=>({data:o()(e&&e.fetchedData&&e.fetchedData.values)?e.fetchedData.values.map((e=>({label:e,value:e}))):[],valuesCount:e&&e.fetchedData&&e.fetchedData.size,currentPage:t&&t.currentPage,maxFeatures:t&&t.maxFeatures,select:t&&t.select,focus:t&&t.focus,loadNextPage:t&&t.loadNextPage,loadPrevPage:t&&t.loadPrevPage,toggle:t&&t.toggle,change:t.change,open:t.open,selected:t&&t.selected,value:t.value,busy:e.busy,dropUp:t.dropUp,attribute:t.column&&t.column.key,changeAttribute:t.changeAttribute})))))((e=>{let{open:t,toggle:r,select:n,focus:o,change:i,value:s,valuesCount:l,loadNextPage:u,loadPrevPage:p,maxFeatures:d,currentPage:g,busy:m,data:h,loading:f=!1,dropUp:y=!1,attribute:v,changeAttribute:b}=e;const w=Math.ceil(l/d);return a().createElement(c.Z,{pagination:{firstPage:1===g,lastPage:g===w,paginated:!0,loadPrevPage:p,loadNextPage:u},busy:m,dropUp:y,data:h,attribute:v,open:t,onFocus:o,onToggle:r,onChange:i,onSelect:n,onChangeAttribute:b,selectedValue:s,loading:f})})),p=(0,s.compose)((0,s.withStateHandlers)((e=>({delayDebounce:0,performFetch:!1,open:!1,openOnFocus:e.openOnFocus,currentPage:1,maxFeatures:5,url:e.url,typeName:e.typeName,value:e.value,attribute:e.column&&e.column.key,autocompleteStreamFactory:e.autocompleteStreamFactory,onChange:e.onChange})),{select:e=>()=>({...e,selected:!0}),change:e=>t=>{if(e.selected&&e.changingPage)return{...e,delayDebounce:e.selected?0:500,selected:!1,changingPage:!1,performFetch:!(e.selected&&!e.changingPage),value:e.value,currentPage:e.changingPage?e.currentPage:1};const r="string"==typeof t?t:t.value;return e.onChange&&e.onChange(r),{...e,delayDebounce:e.selected?0:500,selected:!1,changingPage:!1,performFetch:!(e.selected&&!e.changingPage),value:r,currentPage:e.changingPage?e.currentPage:1}},focus:e=>t=>t&&0===t.length&&""===e.value?{...e,delayDebounce:0,currentPage:1,performFetch:!0,isToggled:!1,...e.openOnFocus?{open:!0}:{}}:e,toggle:e=>()=>({...e,open:!!e.changingPage||!e.open}),loadNextPage:e=>()=>({...e,currentPage:e.currentPage+1,performFetch:!0,changingPage:!0,delayDebounce:0,value:e.value}),loadPrevPage:e=>()=>({...e,currentPage:e.currentPage-1,performFetch:!0,changingPage:!0,delayDebounce:0,value:e.value}),changeAttribute:e=>t=>({...e,attribute:t})}))(u)},76424:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(24852),o=r.n(n),i=r(13218),a=r.n(i),s=r(32425);const l=function(){let{body:e,caption:t,infoExtra:r,className:n="",description:i,fullText:l,onClick:c=(()=>{}),onMouseEnter:u=(()=>{}),onMouseLeave:p=(()=>{}),preview:d,selected:g,size:m,style:h={},stylePreview:f={},styleTools:y={},title:v,loading:b,dragSymbol:w="+",tools:_,...E}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o().createElement("div",{className:`mapstore-side-card${g?" selected":""}${m?" ms-"+m:""}${n?` ${n}`:""}${l?" full-text":""}`,onClick:e=>c({title:v,preview:d,description:i,caption:t,tools:_,...E},e),onMouseEnter:u,onMouseLeave:p,style:h},o().createElement("div",{className:"ms-head"},E.isDraggable&&E.connectDragSource&&E.connectDragSource(o().createElement("div",{className:"mapstore-side-card-tool text-center"},o().createElement("div",{style:{width:10,overflow:"hidden"}},w))),d&&o().createElement("div",{className:"mapstore-side-preview",style:f},d),o().createElement("div",{className:"mapstore-side-card-container"},o().createElement("div",{className:"mapstore-side-card-inner"},o().createElement("div",{className:"mapstore-side-card-left-container"},o().createElement("div",{className:"mapstore-side-card-info"},v&&o().createElement("div",{className:"mapstore-side-card-title"},o().createElement("span",null,v)),i&&o().createElement("div",{className:"mapstore-side-card-desc"},a()(i)?i:o().createElement("span",null,i)),t&&o().createElement("div",{className:"mapstore-side-card-caption"},o().createElement("span",null,t))),r),o().createElement("div",{className:"mapstore-side-card-right-container"},o().createElement("div",{className:"mapstore-side-card-tool text-center",style:y},_),"sm"!==m&&o().createElement("div",{className:"mapstore-side-card-loading"},o().createElement(s.Z,{className:"mapstore-side-card-loader",size:12,hidden:!b})))))),e&&o().createElement("div",{className:"ms-body"},e))}},38064:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(45697),o=r.n(n),i=r(24852),a=r.n(i),s=r(57588),l=r(76424);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class p extends a().Component{render(){const{cardComponent:e,items:t,colProps:r,onItemClick:n,size:o}=this.props,i=e||l.Z;return a().createElement("div",{className:"msSideGrid"+(this.props.className?" "+this.props.className:"")},a().createElement(s.Row,{className:"items-list"},t.map(((e,t)=>a().createElement(s.Col,c({key:e.id||t},r),a().createElement(i,c({onClick:()=>n(e),size:o},e)))))))}}u(p,"propTypes",{size:o().string,onItemClick:o().func,colProps:o().object,items:o().array,cardComponent:o().oneOfType([o().string,o().func]),className:o().string}),u(p,"defaultProps",{size:"",onItemClick:()=>{},colProps:{xs:12},className:"",items:[]});const d=p},49902:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(45697),o=r.n(n),i=r(24852),a=r.n(i),s=r(20),l=r(57588),c=r(86638),u=r(50966),p=r(48384);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}function g(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class m extends a().Component{constructor(){super(...arguments),g(this,"renderWithTooltip",(e=>{if(this.props.tooltip.customizedTooltip){const t=this.props.tooltip.customizedTooltip;return a().createElement(t,null,e)}const t=a().createElement(l.Tooltip,{id:this.props.tooltip.id},this.props.tooltip.message);return a().createElement(u.Z,{key:this.props.tooltip.overlayTriggerKey,placement:this.props.tooltip.placement,overlay:t},e)})),g(this,"renderPagination",(()=>{const e=this.props.pagination.firstPage,t=this.props.pagination.lastPage;return a().createElement("div",{className:"autocomplete-toolbar"},!e&&a().createElement(l.Glyphicon,{className:this.props.prevPageIcon,glyph:this.props.prevPageIcon,onClick:e=>{this.props.stopPropagation&&e.stopPropagation(),this.props.pagination.loadPrevPage()}}),!t&&a().createElement(l.Glyphicon,{className:this.props.nextPageIcon,glyph:this.props.nextPageIcon,onClick:e=>{this.props.stopPropagation&&e.stopPropagation(),this.props.pagination.loadNextPage()}}))})),g(this,"renderField",(()=>{const e={emptyList:(0,c.S$)(this.context.messages,"queryform.attributefilter.autocomplete.emptyList"),open:(0,c.S$)(this.context.messages,"queryform.attributefilter.autocomplete.open"),emptyFilter:(0,c.S$)(this.context.messages,"queryform.attributefilter.autocomplete.emptyFilter")};let t=[];this.props.data&&this.props.data.length>0&&(t=this.props.data.map((e=>e))),this.props.pagination&&this.props.pagination.paginated&&t.length>0&&t.push({[this.props.textField]:"",[this.props.valueField]:"",disabled:!0,pagination:this.renderPagination()});const r=this.props.loading?[]:t,n=this.props.itemComponent,o=a().createElement(s.Combobox,{placeholder:this.props.placeholder,dropUp:this.props.dropUp,busy:this.props.busy,data:r,disabled:this.props.disabled,itemComponent:e=>a().createElement(n,d({textField:this.props.textField,valueField:this.props.valueField},e)),messages:this.props.messages||e,open:this.props.open,filter:this.props.filter,onChange:e=>this.props.onChange(e),onFocus:()=>this.props.onFocus(this.props.data),onSelect:e=>this.props.onSelect(e),onToggle:e=>this.props.onToggle(e),textField:this.props.textField,valueField:this.props.valueField,value:this.props.selectedValue});return this.props.tooltip&&this.props.tooltip.enabled?this.renderWithTooltip(o):o}))}componentDidUpdate(e){const{attribute:t}=this.props;t!==e.attribute&&this.props.onChangeAttribute(t)}render(){const{selectedValue:e,disabled:t,onReset:r,label:n,clearable:o}=this.props;let i=n?a().createElement("label",null,n):a().createElement("span",null);return a().createElement("div",{className:"autocompleteField"},i,o?a().createElement("div",{className:"rw-combo-clearable "+(t?"disabled":"")},this.renderField(),a().createElement("span",{className:"rw-combo-clear "+(e?"":"hidden"),onClick:r},"x")):this.renderField())}}g(m,"propTypes",{busy:o().bool,data:o().array,disabled:o().bool,dropUp:o().bool,itemComponent:o().oneOfType([o().object,o().func]),label:o().string,loading:o().bool,filter:o().oneOfType([o().string,o().bool]),messages:o().object,onChange:o().func,onFocus:o().func,onSelect:o().func,onToggle:o().func,onChangeAttribute:o().func,open:o().bool,pagination:o().object,nextPageIcon:o().string,prevPageIcon:o().string,selectedValue:o().string,textField:o().string,tooltip:o().object,valueField:o().string,placeholder:o().string,stopPropagation:o().bool,clearable:o().bool,onReset:o().func,attribute:o().string}),g(m,"contextTypes",{messages:o().object}),g(m,"defaultProps",{stopPropagation:!1,dropUp:!1,itemComponent:p.Z,loading:!1,label:null,filter:"",pagination:{paginated:!0,firstPage:!1,lastPage:!1,loadPrevPage:()=>{},loadNextPage:()=>{}},nextPageIcon:"chevron-right",prevPageIcon:"chevron-left",onFocus:()=>{},onToggle:()=>{},onChange:()=>{},onSelect:()=>{},onReset:()=>{},onChangeAttribute:()=>{},textField:"label",tooltip:{customizedTooltip:void 0,enabled:!1,id:"",message:void 0,overlayTriggerKey:"",placement:"top"},valueField:"value",clearable:!1});const h=m},73849:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(67076),o=r(28878),i=r(49977),a=r.n(i);const s=(0,n.mapPropsStreamWithConfig)(o.Z),l=(0,n.compose)((0,n.defaultProps)({dataStreamFactory:()=>a().Observable.of({})}),s((e=>e.take(1).switchMap((t=>t.dataStreamFactory(e.startWith(t),t))).combineLatest(e,(function(){return{...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}})))))},43146:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67076),o=r(47037),i=r.n(o),a=r(47960),s=r.n(a),l=r(30381),c=r.n(l),u=r(55237);const p=function(){let{dateTypeProp:e="type",dateProp:t="date",setDateProp:r="onSetDate"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.compose)((0,n.withPropsOnChange)([t],(r=>{let{[t]:n,[e]:o,useUTCOffset:a=!0}=r,l=n,p="1970-01-01",d="00:00:00";!s()(n)&&i()(n)&&("time"===o&&(l=new Date(`${p}T${n}`)),"date"===o&&(-1!==n.indexOf("Z")&&(l=n.substr(0,n.length-1)),l=new Date(`${l}T${d}Z`)),"date-time"===o&&(l=new Date(n)));let g=l;if(l){switch(o){case"time":d=(0,u.kN)(l);break;case"date":p=(0,u.oD)(l);break;default:d=(0,u.kN)(l),p=(0,u.oD)(l)}g=new Date(`${p}T${d}Z`),g.setUTCMilliseconds(l.getUTCMilliseconds());const e=a?(0,u.$4)(g):0;g=new Date(g.getTime()+e)}return{[t]:g,defaultCurrentDate:"date-time"===o?c()().startOf("day").toDate():void 0}})),(0,n.withHandlers)({[r]:function(){let{[r]:t,[e]:n,useUTCOffset:o=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(e,r)=>{if(e){const i=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())),a=o?(0,u.$4)(e):0;let s=new Date(i.getTime()-a);switch(n){case"time":s=`${(0,u.kN)(s)}Z`;break;case"date":s=`${(0,u.oD)(s)}Z`}t(s,r)}else t(null)}}}))}},12425:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(67076).withState)("confirmDelete","toggleDeleteConfirm",!1)},30881:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(13311),o=r.n(n),i=r(41609),a=r.n(i),s=r(67076),l=r(90183),c=r(47805),u=r(89291),p=r(2245),d=r.n(p),g=r(89737),m=r(70956);const h=(e,t)=>{const r=(0,m.Z5)(e,t),n=o()(Object.keys(r||{}),(function(){return"cql_filter"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase()}));return r&&n&&r[n]},f=function(){let{layerFilter:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},y=(0,s.compose)((0,s.withPropsOnChange)((function(){let{mapSync:e,geomProp:t,dependencies:r={},layer:n,quickFilters:o,options:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return e!==a.mapSync||r.viewport!==(a.dependencies&&a.dependencies.viewport)||r.quickFilters!==(a.dependencies&&a.dependencies.quickFilters)||r.options!==(a.dependencies&&a.dependencies.options)||t!==a.geomProp||s!==a.filter||i!==a.options||o!==a.quickFilters||h(n,r)!==h(a.layer,a.dependencies)||f(n)!==f(a.layer)}),(function(){let{mapSync:e,geomProp:t="the_geom",dependencies:r={},filter:n,layer:o,quickFilters:i,options:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const p=r.viewport,f=d()({gmlVersion:"3.1.1"}),y=(0,g.Z)(f),{filter:v,property:b,and:w}=f,{layerFilter:_}=o||{};let E={},P={},O=(0,m.r$)(n,i,s);if(!e)return{filter:!a()(O)||_?v(w(..._&&!_.disabled?(0,c.toOGCFilterParts)(_,"1.1.0","ogc"):[],...O?(0,c.toOGCFilterParts)(O,"1.1.0","ogc"):[])):void 0};if(o&&r&&r.quickFilters&&r.layer&&o.name===r.layer.name&&(O={...O,...(0,m.r$)(O,r.quickFilters,r.options)}),o&&r&&r.filter&&r.layer&&o.name===r.layer.name&&(O={...O,...(0,c.composeAttributeFilters)([O,r.filter])}),r.viewport){const e=Object.keys(p.bounds).reduce(((e,t)=>({...e,[t]:parseFloat(p.bounds[t])})),{});E=(0,l.getViewportGeometry)(e,p.crs);const n=h(o,r);return P=n?[y((0,u.read)(n))]:[],{filter:v(w(...P,..._&&!_.disabled?(0,c.toOGCFilterParts)(_,"1.1.0","ogc"):[],...O?(0,c.toOGCFilterParts)(O,"1.1.0","ogc"):[],b(t).intersects(E)))}}return{filter:v(w(..._?(0,c.toOGCFilterParts)(_,"1.1.0","ogc"):[],...O?(0,c.toOGCFilterParts)(O,"1.1.0","ogc"):[]))}})))},8488:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67076),o=r(70956),i=r(13311),a=r.n(i);const s=(0,n.compose)((0,n.withPropsOnChange)(["dependencies","options"],(function(){let{dependencies:e={},options:t,layer:r={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(0,o.Z5)(r,e),i=a()(Object.keys(n||{}),(function(){return"viewparams"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase()})),s=n&&i&&n[i];return{options:s?{...t,viewParams:s}:t}})))},73339:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67076),o=r(78718),i=r.n(o);const a=(e,t,r)=>e?Object.keys(e).reduce(((n,o)=>"dependenciesMap"===o&&t[e[o]]&&t[e.mapSync]&&t[e[o]][o]&&-1===t[e[o]][o].indexOf(r)&&!n.mapSync?{...n,...i()(a(t[e[o]],t,r),["options","layer","quickFilters","filter","dependenciesMap"])}:{...n,[o]:t[e[o]]}),{}):t,s=(0,n.withProps)((e=>{let{dependenciesMap:t,dependencies:r,id:n}=e;return{dependencies:t?a(t,r,n):r,dependenciesMap:t}}))},39837:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(82030),o=r(99707);const i=(0,n.Z)((e=>{let{data:t=[]}=e;return!t||0===t.length}),(function(){let{mapSync:e,iconFit:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{iconFit:t,messageId:e?"widgets.errors.nodatainviewport":"widgets.errors.nodata",glyph:"stats"}}),o.Z)},46173:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(24852),o=r.n(n),i=r(82030),a=r(5346);const s=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,i.Z)((e=>{let{layers:t=[]}=e;return 0===t.length}),{[e?"tooltip":"title"]:o().createElement(a.Z,{msgId:"widgets.errors.noLegend"}),description:!e&&o().createElement(a.Z,{msgId:"widgets.errors.noLegendDescription"})})}},42415:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(24852),o=r.n(n),i=r(5346),a=r(82030),s=r(99707);const l=(0,a.Z)((e=>{let{error:t}=e;return!!t}),(function(){let{error:e,layer:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=-1!==e?.message?.indexOf("Could not locate")?o().createElement(s.Z,{glyph:"stats",messageId:"widgets.errors.layerNotAvailable",msgParams:{layerName:t?.name}}):function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"ECONNABORTED"===e.code?o().createElement(i.Z,{msgId:"widgets.errors.timeoutExpired"}):e.message?o().createElement(i.Z,{msgId:"widgets.errors.genericErrorWithMessage",msgParams:{message:e.message}}):o().createElement(i.Z,{msgId:"widgets.errors.genericError"})}(e);return{glyph:-1!==e?.message?.indexOf("Could not locate")?null:"warning-sign",iconFit:!1,content:r}}))},13314:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(67076),o=r(27361),i=r.n(o),a=r(12425),s=r(39860),l=r(52259);const c=(0,n.compose)((0,n.withProps)((e=>{let{dependencies:t={},dependenciesMap:r={}}=e;return{layers:t[r.layers]||t.layers||[],scales:(0,l.getScales)(t.projection||t.viewport&&t.viewport.crs||"EPSG:3857",i()(t,"mapOptions.view.DPI")),currentZoomLvl:t.zoom}})),(0,n.withProps)((e=>{let{layers:t=[]}=e;return{layers:t.filter((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"background"!==e.group&&!1!==e.visibility&&"vector"!==e.type}))}})),a.Z,(0,s.tR)(),(0,s.E6)(),(0,s.um)())},87017:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(14293),o=r.n(n),i=r(13218),a=r.n(i),s=r(67076),l=r(49977),c=r.n(l),u=r(65633),p=r(24262),d=r(73849);const g=function(){let{AggregationResults:e=[],GroupByAttributes:t=[],AggregationAttribute:r,AggregationFunctions:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.map((e=>({...t.reduce(((t,r,n)=>{let i=e[n];if(a()(i)){if(o()(i.time))throw new Error("Unknown response format from server");i=new Date(i.time).toISOString()}return{...t,[r]:i}}),{}),[`${n[0]}(${r})`]:e[e.length-1]}))).sort(((e,r)=>{const n=parseFloat(e[t]),o=parseFloat(r[t]);return isNaN(n)||isNaN(o)?e<r?-1:e>r?1:0:n-o}))},m=e=>e.filter((e=>{let{layer:t={},options:r}=e;return t.name&&(0,p.ZA)(t)&&r&&r.aggregateFunction&&r.aggregationAttribute&&r.groupByAttributes||r.classificationAttribute})).distinctUntilChanged(((e,t)=>{let{layer:r={},options:n={},filter:o}=e;return t.layer&&r.name===t.layer.name&&r.loadingError===t.layer.loadingError&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.aggregateFunction===t.aggregateFunction&&e.aggregationAttribute===t.aggregationAttribute&&e.groupByAttributes===t.groupByAttributes&&e.classificationAttribute===t.classificationAttribute&&e.viewParams===t.viewParams}(n,t.options)&&o===t.filter})).switchMap((e=>{let{layer:t={},options:r,filter:n,onLoad:o=(()=>{}),onLoadError:i=(()=>{})}=e;return(0,u.Z)((0,p.ZA)(t),{featureType:t.name,...r,filter:n},{timeout:15e3}).map((e=>({loading:!1,isAnimationActive:!1,error:void 0,data:g(e),series:[{dataKey:`${e.AggregationFunctions[0]}(${e.AggregationAttribute})`}],classifications:{dataKey:r.classificationAttribute},xAxis:{dataKey:e.GroupByAttributes[0]}}))).do(o).catch((e=>c().Observable.of({loading:!1,error:e,data:[]}).do(i))).startWith({loading:!0})})),h=(0,s.compose)((0,s.withProps)((()=>({dataStreamFactory:m}))),d.Z);var f=r(84596),y=r.n(f),v=r(89734),b=r.n(v),w=r(86850);const _=function(){let{features:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{groupByAttributes:t}=arguments.length>1?arguments[1]:void 0;return b()(e.map((e=>{let{properties:t}=e;return t})),t)},E=e=>e.filter((e=>{let{layer:t={},options:r}=e;return t.name&&(0,p.Tt)(t)&&r&&r.aggregationAttribute&&r.groupByAttributes})).distinctUntilChanged(((e,t)=>{let{layer:r={},options:n={},filter:o}=e;return t.layer&&r.name===t.layer.name&&r.loadingError===t.layer.loadingError&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.aggregateFunction===t.aggregateFunction&&e.aggregationAttribute===t.aggregationAttribute&&e.groupByAttributes===t.groupByAttributes&&e.classificationAttribute===t.classificationAttribute&&e.viewParams===t.viewParams}(n,t.options)&&o===t.filter})).switchMap((e=>{let{layer:t={},options:r,filter:n,onLoad:o=(()=>{}),onLoadError:i=(()=>{})}=e;return(0,w.Mc)(t,n,{propertyName:r.classificationAttribute?[...y()(r.aggregationAttribute),...y()(r.groupByAttributes),...y()(r.classificationAttribute)]:[...y()(r.aggregationAttribute),...y()(r.groupByAttributes)]}).map((e=>({loading:!1,isAnimationActive:!1,error:void 0,data:_(e,r),series:[{dataKey:r.aggregationAttribute}],classifications:{dataKey:r.classificationAttribute},xAxis:{dataKey:r.groupByAttributes}}))).do(o).catch((e=>c().Observable.of({loading:!1,error:e,data:[]}).do(i))).startWith({loading:!0})})),P=(0,s.compose)((0,s.withProps)((()=>({dataStreamFactory:E}))),d.Z),O=(0,s.branch)((e=>{let{options:t={}}=e;return!t.aggregateFunction||"None"===t.aggregateFunction}),P,h)},39860:(e,t,r)=>{"use strict";r.d(t,{E6:()=>E,tR:()=>w,AV:()=>_,G5:()=>b,um:()=>P});var n=r(67076);const o=(0,n.compose)((0,n.withProps)((e=>{let{maximized:t={},widgetTools:r=[],toggleMaximize:n=(()=>{}),dataGrid:o={},toolsOptions:i={}}=e;return{widgetTools:i.showMaximize?[...r,{glyph:t.widget?"resize-small":"resize-full",target:"icons",tooltipId:"widgets.widget.menu."+(t.widget?"minimize":"maximize"),tooltipPosition:"right",visible:!o.static,onClick:()=>n()}]:r}})));var i=r(24852),a=r.n(i),s=r(80717);const l=e=>"icons"===e.target,c=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(l).length>0};var u=r(27244),p=r(57588),d=r(5346),g=r(15135);const m=e=>{let{target:t,visible:r=!0}=e;return r&&"menu"===t},h=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(m).length>0},f=(0,g.Z)(p.MenuItem),y=e=>"tools"===e.target,v=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(y).length>0},b=()=>(0,n.compose)((0,n.withProps)((e=>{let{maximized:t={},widgetTools:r=[],toolsOptions:n={},canEdit:o,updateProperty:i=(()=>{}),hide:a=!1}=e;return{widgetTools:n.showHide?[...r,{glyph:"lock",target:"menu",active:a,textId:a?"widgets.widget.menu.unhide":"widgets.widget.menu.hide",tooltipId:a?"widgets.widget.menu.unhideDescription":"widgets.widget.menu.hideDescription",visible:!t.widget&&o,onClick:()=>i("hide",!a)}]:r}}))),w=()=>(0,n.withProps)((e=>{let{widgetTools:t=[],dataGrid:r={},canEdit:n,onEdit:o=(()=>{}),toggleDeleteConfirm:i=(()=>{})}=e;return{widgetTools:n?[...t,{glyph:"pencil",target:"menu",visible:n&&!r.static,textId:"widgets.widget.menu.edit",onClick:()=>o()},{glyph:"trash",target:"menu",visible:n&&!r.static,textId:"widgets.widget.menu.delete",onClick:()=>i(!0)}]:t}})),_=()=>(0,n.withProps)((e=>{let{widgetTools:t=[],data:r,title:n,exportCSV:o=(()=>{})}=e;return{widgetTools:[...t,{glyph:"download",glyphClassName:"exportCSV",target:"menu",textId:"widgets.widget.menu.downloadData",disabled:!r||!r.length,onClick:()=>o({data:r,title:n})}]}})),E=()=>(0,n.compose)((0,n.compose)((0,n.withProps)((e=>{let{maximized:t={},widgetTools:r=[],toolsOptions:n={},updateProperty:o=(()=>{}),dataGrid:i={}}=e;return{widgetTools:n.showPin?[...r,{glyph:"pushpin",bsStyle:i.static&&"primary",glyphClassName:i.static?"active":void 0,tooltipId:i.static?"widgets.widget.menu.unpin":"widgets.widget.menu.pin",target:"icons",visible:!t.widget,onClick:()=>o("dataGrid.static",!i.static)}]:r}}))),(0,n.compose)((0,n.withProps)((e=>{let{maximized:t={},widgetTools:r=[],dataGrid:n={},toggleCollapse:o=(()=>{}),toolsOptions:i={}}=e;return{widgetTools:i.showCollapse?[...r,{glyph:"minus",target:"icons",tooltipId:"widgets.widget.menu.collapse",visible:!t.widget&&!n.static,onClick:()=>o()}]:r}}))),o,(0,n.compose)((0,n.withProps)((e=>{let{widgetTools:t=[],title:r,description:n,widgetType:o}=e;return{widgetTools:n&&"text"!==o?[...t,{glyph:"question-sign",popover:{title:r,trigger:!0,text:n,id:(0,u.slug)(r)},target:"icons"}]:t}})))),P=()=>(0,n.compose)((0,n.compose)((0,n.withPropsOnChange)(["topLeftItems","widgetTools"],(e=>{let{topLeftItems:t=[],widgetTools:r}=e;return{topLeftItems:v(r)?[...t,a().createElement(s.Z,{btnGroupProps:{style:{position:"absolute",left:14}},btnDefaultProps:{className:"no-border",bsSize:"small",bsStyle:"link",style:{paddingLeft:4,paddingRight:4}},buttons:r.filter(y)})]:t}}))),(0,n.compose)((0,n.withPropsOnChange)(["icons","widgetTools"],(e=>{let{icons:t=[],widgetTools:r}=e;return{icons:c(r)?a().createElement(s.Z,{btnDefaultProps:{className:"no-border",bsSize:"xs",bsStyle:"link"},buttons:r.filter(l)}):t}}))),function(){let{className:e="widget-menu",menuIcon:t="option-vertical"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.withProps)((r=>{let{widgetTools:n,topRightItems:o=[]}=r;return{topRightItems:h(n)?[...o,a().createElement(p.ButtonToolbar,null,a().createElement(p.DropdownButton,{pullRight:!0,bsStyle:"default",className:e,title:a().createElement(p.Glyphicon,{glyph:t}),noCaret:!0,id:"dropdown-no-caret"},n.filter(m).map(((e,t)=>{let{onClick:r=(()=>{}),disabled:n=!1,glyph:o,glyphClassName:i,text:s,textId:l,tooltipId:c,active:u}=e;return a().createElement(f,{active:u,tooltipId:c,onSelect:r,disabled:n,eventKey:t},a().createElement(p.Glyphicon,{className:i,glyph:o}),l?a().createElement(d.Z,{msgId:l}):s)}))))]:o}}))}())},70956:(e,t,r)=>{"use strict";r.d(t,{Z5:()=>g,r$:()=>m});var n=r(13311),o=r.n(n),i=r(27361),a=r.n(i),s=r(41609),l=r.n(s),c=r(54061),u=r.n(c),p=r(96958),d=r(47805);const g=(e,t)=>e&&e.id&&a()(o()(t.layers||[],{id:e.id}),"params",{}),m=(e,t,r)=>{const n=t&&r&&Object.keys(t).filter((e=>o()(r.propertyName,(t=>t===e)))).reduce(((e,r)=>({...e,[r]:t[r]})),{}),i=u()(n,((e,t,r)=>(0,p.dJ)({attribute:r,...t},e)),{});if(!l()(e)||!l()(i)){const t=(0,d.composeAttributeFilters)([e,i],void 0,e?.spatialFieldOperator);return{...e,...t}}return{}}},25382:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(49977),o=r.n(n),i=r(86850),a=r(24262);const s=e=>e.distinctUntilChanged((function(){let{layer:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{layer:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.Tt)(e)===(0,a.Tt)(t)&&e.loadingError===t.loadingError})).switchMap((function(){let{layer:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.v$)({layer:e}).map((e=>({describeFeatureType:e.data,loading:!1,error:void 0}))).catch((e=>o().Observable.of({loading:!1,error:e})))}))},39589:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67076),o=r(65633),i=r(73849),a=r(49977),s=r.n(a),l=r(24262);const c=function(){let{AggregationResults:e=[],GroupByAttributes:t=[],AggregationAttribute:r,AggregationFunctions:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.map((e=>({...t.reduce(((t,r,n)=>({...t,[r]:e[n]})),{}),[`${n[0]}(${r})`]:e[e.length-1]})))},u=e=>e.filter((e=>{let{layer:t={},options:r}=e;return t.name&&(0,l.ZA)(t)&&r&&r.aggregateFunction&&r.aggregationAttribute})).distinctUntilChanged(((e,t)=>{let{layer:r={},options:n={},filter:o}=e;return t.layer&&r.name===t.layer.name&&r.loadingError===t.layer.loadingError&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.aggregateFunction===t.aggregateFunction&&e.aggregationAttribute===t.aggregationAttribute&&e.viewParams===t.viewParams}(n,t.options)&&o===t.filter})).switchMap((e=>{let{layer:t={},options:r,filter:n,onLoad:i=(()=>{}),onLoadError:a=(()=>{})}=e;return(0,o.Z)((0,l.ZA)(t),{featureType:t.name,...r,filter:n},{timeout:15e3}).map((e=>({loading:!1,isAnimationActive:!1,error:void 0,data:c(e),series:[{dataKey:`${e.AggregationFunctions[0]}(${e.AggregationAttribute})`}]}))).do(i).catch((e=>s().Observable.of({loading:!1,error:e,data:[]}).do(a))).startWith({loading:!0})})),p=(0,n.compose)((0,n.withProps)((()=>({dataStreamFactory:u}))),i.Z)},80844:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(73014),o=r(42415),i=r(39837),a=r(47361),s=r(67076),l=r(27361),c=r.n(l),u=r(90253),p=r(24852),d=r.n(p);function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g.apply(this,arguments)}const m=(0,n.Z)(),h=function(){let{value:e="",uom:t="",...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d().createElement(u.iF,g({mode:"single",forceSingleModeWidth:!1,max:500,throttle:20},r),d().createElement(a.Z,{value:e}),d().createElement("span",{style:{fontSize:"75%"}},t))},f=(0,s.compose)(m,o.Z,i.Z)((e=>{let{series:t=[],data:r=[],options:n={},style:o={width:"100%",height:"100%",transform:"translate(-50%, -50%)",position:"absolute",display:"inline",padding:"1%",top:"50%",left:"50%"}}=e;return d().createElement("div",{className:"counter-widget-view"},t.map((function(){let{dataKey:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return d().createElement(h,{key:e,uom:c()(n,`seriesOptions[${t}].uom`),value:r[0][e],style:{textAlign:"center",...o}})})))}))},43716:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Ze});var n=r(24852),o=r.n(n),i=r(67076),a=r(12425),s=r(39860);const l=(0,i.compose)(a.Z,(0,i.compose)((0,i.withState)("showTable","setShowTable",!1),(0,i.withHandlers)({toggleTableView:e=>{let{setShowTable:t,showTable:r}=e;return()=>t(!r)}}),(0,i.withProps)((e=>{let{widgetTools:t=[],toggleTableView:r=(()=>{})}=e;return{widgetTools:[...t,{glyph:"features-grid",target:"menu",textId:"widgets.widget.menu.showChartData",onClick:()=>r()}]}}))),(0,s.tR)(),(0,s.AV)(),(0,s.E6)(),(0,i.branch)((e=>{let{showTable:t}=e;return!t}),(0,s.um)())),c=(0,i.compose)(a.Z,(0,s.tR)(),(0,s.E6)(),(0,s.um)());var u=r(27361),p=r.n(u),d=r(23279),g=r.n(d);const m=(0,i.compose)((0,i.withPropsOnChange)(["gridEvents"],(function(){let{gridEvents:e={},updateProperty:t=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=g()((function(){return t(...arguments)}),500);return{gridEvents:{...e,onAddFilter:e=>r(`quickFilters.${e.attribute}`,e),onColumnResize:(e,r,n,o,i,a)=>t(`options.columnSettings["${p()(a.filter((e=>!e.hide))[e],"name")}"].width`,r)}}})),a.Z,(0,s.tR)(),(0,s.E6)(),(0,s.um)(),(0,i.withPropsOnChange)(["gridEvents"],(function(){let{gridEvents:e={},updateProperty:t=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{gridEvents:{...e,onGridSort:(e,r)=>t("sortOptions",{sortBy:e,sortOrder:r})}}})));var h=r(13314);const f=(0,i.compose)(a.Z,(0,s.tR)(),(0,s.G5)(),(0,s.E6)(),(0,s.um)()),y=(0,i.compose)(a.Z,(0,s.tR)(),(0,s.E6)(),(0,s.um)());var v=r(87017),b=r(39589),w=r(64721),_=r.n(w),E=r(82492),P=r.n(E),O=r(78889),x=r(73849),S=r(25382),T=r(49977),C=r.n(T),D=r(86850);const F=e=>e.switchMap((e=>{let{layer:t={},options:r={},filter:n,onLoad:o=(()=>{}),onLoadError:i=(()=>{})}=e;return(0,D.Mc)(t,n,{timeout:15e3,params:{propertyName:r.propertyName,viewParams:r.viewParams}}).map((()=>({loading:!1,error:void 0}))).do((e=>o({features:e.features,pagination:{totalFeatures:e.totalFeatures}}))).catch((e=>C().Observable.of({loading:!1,error:e,data:[]}).do(i)))}));r(49977);var I=r(96958);const M=e=>{const{handler:t,stream:r}=(0,i.createEventHandler)();return(0,S.Z)(e).combineLatest(function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(n=e,n.filter((e=>{let{layer:t={}}=e;return t.name})).distinctUntilChanged(((e,t)=>{let{layer:r={},options:n={},filter:o,sortOptions:i}=e;return t.layer&&r.name===t.layer.name&&r.loadingError===t.layer.loadingError&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.propertyName===t.propertyName&&e.viewParams===t.viewParams}(n,t.options)&&o===t.filter&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.sortBy===t.sortBy&&e.sortOrder===t.sortOrder}(i,t.sortOptions)})).map((e=>({...e,features:[],pages:[],pagination:{}})))).let(r?(e=>t=>t.switchMap((t=>{let{layer:r={},size:n=20,maxStoredPages:o=5,filter:i,options:a={},sortOptions:s,pages:l,features:c=[],onLoad:u=(()=>{}),onLoadError:p=(()=>{})}=t;return e.switchMap(((e,t)=>{let{pagesRange:d,pagination:g={}}=e,{}=t;return(0,D.Mc)(r,i,{...(0,I.S9)(d,l,n),sortOptions:s,timeout:15e3,totalFeatures:g.totalFeatures,propertyName:a.propertyName,viewParams:a.viewParams}).do((e=>u({...(0,I.f1)(e,d,{pages:l,features:c},{...(0,I.S9)(d,l,n),size:n,maxStoredPages:o}),pagination:{totalFeatures:e.totalFeatures}}))).map((()=>({loading:!1}))).catch((e=>C().Observable.of({loading:!1,error:e}).do(p))).startWith({loading:!0})}))})))(t.withLatestFrom(e.map((function(){let{pagination:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{pagination:e}})),((e,t)=>({pagesRange:e,...t})))):F).startWith({});var n}(e,r.startWith({startPage:0,endPage:1})),((e,r)=>({...e,...r,pageEvents:{moreFeatures:t,onPageChange:()=>{}}}))).startWith({loading:!0})},L=(0,i.compose)((0,i.defaultProps)({virtualScroll:!0,size:20,maxStoredPages:5}),(0,i.withStateHandlers)({pages:[],features:[],pagination:{}},{setData:()=>function(){let{pages:e,features:t,pagination:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{pages:e,features:t,pagination:r,error:void 0}}}),(0,i.withHandlers)({onLoad:function(){let{setData:e=(()=>{}),onLoad:t=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){e(...arguments),t(...arguments)}}}),(0,i.withProps)((()=>({dataStreamFactory:M}))),x.Z,(0,i.withProps)((function(){let{options:e={},describeFeatureType:t,columnSettings:r={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{columnSettings:P()(t?(0,O.getFeatureTypeProperties)(t).filter((t=>!_()(e.propertyName||[],t.name))).reduce(((e,t)=>({...e,[t.name]:{hide:!0}})),{}):{},e.columnSettings||{},r)}})));var A=r(30881),R=r(8488),N=r(73339),k=r(5055),G=r.n(k),j=r(41609),B=r.n(j),$=r(18446),U=r.n($),W=r(70956),q=r(99767),V=r(27835);var Z=r(47805),H=r(24262),K=r(61868),z=r(52259);const X=(0,i.compose)((0,i.branch)((function(){let{mapSync:e,dependencies:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&(!B()(t.quickFilters)||!B()(t.filter))}),(0,i.compose)((0,i.withPropsOnChange)(["id"],(e=>{let{hookRegister:t=null}=e;return{hookRegister:t||(0,z.createRegisterHooks)()}})),(0,i.mapPropsStream)((e=>e.distinctUntilChanged((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return U()(e.dependencies.quickFilters,t.dependencies.quickFilters)&&U()(e.dependencies.filter,t.dependencies.filter)&&U()(e.dependencies.layer,t.dependencies.layer)})).debounceTime(500).switchMap((e=>{let{mapSync:t,dependencies:r={},filter:n,hookRegister:o}=e;if(!t||B()(r.layer))return T.Observable.of({loading:!1});let i={};r.quickFilters&&(i={...i,...(0,W.r$)(n,r.quickFilters,r.options)}),r.filter&&(i={...i,...(0,Z.composeAttributeFilters)([i,r.filter])});const a=r&&r.layer&&r.layer.name;if(!B()(i)){i={...i,options:{...i.options||{},noSchemaLocation:!0}};const e=(0,Z.toOGCFilter)(a,i,"1.1.0");return function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,V.mG)(e,(e=>{let{wfsGetFeature:t}=e;return(0,V.Uh)("gs:Bounds",[(0,q.qP)("features",(0,q.fA)("text/xml","http://geoserver/wfs","POST",t))],(0,q.DK)((0,q.En)("bounds","application/json")))})(t),{},r)}((0,H.ZA)(r.layer),{wfsGetFeature:e}).switchMap((e=>{let t,r,n;if(G().parseString(e,{explicitArray:!1},((e,o)=>{t=o["ows:BoundingBox"],r=t["ows:LowerCorner"].split(" "),n=t["ows:UpperCorner"].split(" ")})),"0.0 0.0"===t["ows:LowerCorner"]&&"-1.0 -1.0"===t["ows:UpperCorner"])return T.Observable.of({loading:!1});const i={minx:parseFloat(r[0]),miny:parseFloat(r[1]),maxx:parseFloat(n[0]),maxy:parseFloat(n[1])},a=o.getHook(z.ZOOM_TO_EXTENT_HOOK);return a&&a(i,{crs:"EPSG:4326",maxZoom:21}),T.Observable.of({loading:!1})})).startWith({loading:!0}).catch((e=>T.Observable.of({error:"error getting bounds from filter",details:e})))}return T.Observable.of({loading:!1})})).combineLatest(e,(function(e){let{loading:t=!1}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,K.t8)("loading",t,r)})))))));var Y=r(13311),Q=r.n(Y),J=r(43378);const ee=(0,i.compose)((0,i.withPropsOnChange)((function(){let{mapSync:e,dependencies:t={},map:r={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;return e!==n.mapSync||!U()(t,n.dependencies)||!U()(r,n.map)||o!==n.filter}),(function(){let{mapSync:e,dependencies:t={},filter:r={},map:n={layers:[]}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=t&&t.layer&&t.layer.name,i=Q()(n.layers,{name:o})||{};let a,s={},l={};return e&&!B()(i)&&(t.quickFilters&&(s={...s,...(0,W.r$)(r,t.quickFilters,t.options)}),t.filter&&(s={...s,...(0,Z.composeAttributeFilters)([s,t.filter])}),!B()(s)&&(0,Z.toCQLFilter)(s))?(a=(0,Z.toCQLFilter)(s),l=(0,K.cc)(!1,{...i,params:(0,J.v)({params:{CQL_FILTER:a}},i&&i.params&&i.params.CQL_FILTER)},{name:o},n.layers),{map:{...n,layers:l}}):(l=n.layers.map((e=>({...e,params:{...e.params,CQL_FILTER:void 0}}))),{map:{...n,layers:l}})}))),te=e=>(0,i.branch)((function(){let{mapSync:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e}),(0,i.withPropsOnChange)((function(){let{mapSync:t,dependencies:r={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{mapSync:n,dependencies:o}=arguments.length>1?arguments[1]:void 0;return o&&(0,i.shallowEqual)(r[e],o[e])||t===n}),(t=>{let{map:r,mapSync:n,dependencies:o={}}=t;return{mapStateSource:"__dependency_system__",map:o[e]&&n?(0,K.t8)(e,o[e],r):r}})));var re=r(57588);const ne=function(){let{data:e=[],...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=Object.keys(e.reduce(((e,t)=>({...e,...t})),{}));return o().createElement("div",{className:"mapstore-widget-table"},o().createElement(re.Table,{striped:!0},o().createElement("thead",null,o().createElement("tr",null,r.map(((e,n)=>o().createElement("th",null,n+1===r.length&&t.yAxisLabel?t.yAxisLabel:n>0?`${e}`:e))))),o().createElement("tbody",null,e.map((e=>o().createElement("tr",null,r.map((t=>o().createElement("td",null,e[t])))))))))};var oe=r(622),ie=r(73014),ae=r(42415),se=r(39837),le=r(51990);const ce=(0,ie.Z)()((0,ae.Z)((0,se.Z)(le.Z))),ue=e=>o().createElement("div",{className:"mapstore-widget-chart"},o().createElement(oe.Z,null,o().createElement(ce,e)));var pe=r(5346),de=r(65539),ge=r(72688);const me=e=>{let{id:t,title:r,confirmDelete:n=!1,className:i,isDraggable:a=!0,toggleDeleteConfirm:s=(()=>{}),onDelete:l=(()=>{}),icons:c,topLeftItems:u,topRightItems:p,headerStyle:d={},children:g}=e;return o().createElement("div",{className:"mapstore-widget-card",id:t},o().createElement(de.Z,{className:i,header:o().createElement("div",{style:d,className:"mapstore-widget-info "+(a?"draggableHandle":"")},o().createElement("div",{className:"mapstore-widget-header"},o().createElement("span",{className:"widget-icons"},c),u,o().createElement("span",{className:"widget-title"},r),o().createElement("span",{className:"mapstore-widget-options"},p)))},g),n?o().createElement(ge.Z,{confirmText:o().createElement(pe.Z,{msgId:"widgets.widget.menu.delete"}),titleText:o().createElement(pe.Z,{msgId:"widgets.widget.menu.delete"}),body:o().createElement(pe.Z,{msgId:"widgets.widget.menu.confirmDelete"}),show:n,onClose:()=>s(!1),onConfirm:()=>l(t)}):null)};function he(){return he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},he.apply(this,arguments)}const fe=function(){let{showTable:e,toggleTableView:t=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?o().createElement(re.Glyphicon,{onClick:()=>{t()},glyph:"arrow-left pull-left"}):null};var ye=r(82030),ve=r(99707);const be=(0,ye.Z)((function(){let{text:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!e}),(()=>({glyph:"sheet",messageId:"widgets.errors.notext"})),ve.Z)((function(){let{text:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o().createElement("div",{className:"mapstore-widget-default-content ql-editor",dangerouslySetInnerHTML:{__html:e}})}));var we=r(57557),_e=r.n(we),Ee=r(75480),Pe=r(92936);const Oe=(0,i.withHandlers)({onMapViewChanges:e=>{let{updateProperty:t=(()=>{})}=e;return e=>{let{layers:r,...n}=e;return t("map",n,"merge")}}})(Pe.Z);var xe=r(18027);const Se=(0,i.compose)((0,i.mapPropsStream)((e=>e.combineLatest(e.pluck("quickFilterStream$").distinctUntilChanged().switchMap((e=>e)).startWith(void 0),((e,t)=>{const r=t&&e.options&&Q()(e.options.propertyName,(t=>t===e.attributeName))&&t[e.attributeName]||{},n=r&&(r.rawValue||r.value);return{...e,value:n}}))))),Te=(0,i.compose)((0,i.mapPropsStream)((e=>e.map((t=>({...t,quickFilterStream$:e.pluck("quickFilters").distinctUntilChanged()})))))),Ce=(0,i.compose)(Te,(0,i.withPropsOnChange)(["describeFeatureType","options"],(function(){let{describeFeatureType:e,options:t,quickFilterStream$:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?{filterRenderers:(0,I.Lo)(e).reduce(((e,n)=>{let{localType:o,name:a}=n;const s=(e=>{let{options:t,localType:r,attributeName:n,quickFilterStream$:o}=e;return(0,i.compose)((0,i.withProps)({quickFilterStream$:o,attributeName:n,options:t}),Se)((0,xe.Q)(r,{name:n}))})({options:t,localType:o,attributeName:a,quickFilterStream$:r});return{...e,[a]:s}}),{})}:{}})));var De=r(30029),Fe=r(5099);const Ie=(0,ae.Z)((0,ie.Z)((e=>{let{describeFeatureType:t}=e;return!t}))(Fe.Z)),Me=Ce((e=>{let{id:t,title:r,loading:n,confirmDelete:i=!1,enableColumnFilters:a=!1,headerStyle:s,icons:l,topRightItems:c,toggleDeleteConfirm:u=(()=>{}),onDelete:p=(()=>{}),gridEvents:d=(()=>{}),pageEvents:g={moreFeatures:()=>{}},describeFeatureType:m,filterRenderers:h,columnSettings:f,features:y,size:v,pages:b,error:w,pagination:_={},dataGrid:E={},virtualScroll:P=!0}=e;return o().createElement(me,{id:`widget-chart-${t}`,title:r,headerStyle:s,icons:l,isDraggable:E.isDraggable,confirmDelete:i,onDelete:p,toggleDeleteConfirm:u,topRightItems:c},o().createElement(de.Z,{footer:_.totalFeatures?o().createElement("div",{style:{height:"30px",overflow:"hidden"}},n?o().createElement("span",{style:{float:"right"}},o().createElement(Ee.Z,null)):null,void 0===w&&o().createElement("span",{style:{float:"left",margin:"5px"}},o().createElement(pe.Z,{msgId:"featuregrid.resultInfoVirtual",msgParams:{total:_.totalFeatures}}))):null},o().createElement(Ie,{emptyRowsView:()=>o().createElement(De.Z,{loading:n},o().createElement(ve.Z,{messageId:"featuregrid.noFeaturesAvailable",glyph:"features-grid"})),gridEvents:d,sortable:!0,defaultSize:!1,columnSettings:f,pageEvents:g,virtualScroll:P,enableColumnFilters:a,filterRenderers:h,features:y,pages:b,error:w,size:v,rowKey:"id",describeFeatureType:m,pagination:_})))}));var Le=r(80844);function Ae(){return Ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ae.apply(this,arguments)}const Re=function(){let{showTable:e,toggleTableView:t=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?o().createElement(re.Glyphicon,{onClick:()=>{t()},glyph:"arrow-left pull-left"}):null};var Ne=r(46173),ke=r(70919);const Ge=(0,Ne.Z)()(ke.Z),je=(0,i.compose)(N.Z,A.Z,R.Z,v.Z,l)((e=>{let{id:t,title:r,description:n,headerStyle:i,data:a=[],series:s=[],loading:l,icons:c,showTable:u,topRightItems:p,confirmDelete:d=!1,dataGrid:g={},onDelete:m=(()=>{}),toggleTableView:h=(()=>{}),toggleDeleteConfirm:f=(()=>{}),...y}=e;return o().createElement(me,{id:`widget-chart-${t}`,headerStyle:i,isDraggable:g.isDraggable,title:r,icons:c,topLeftItems:fe({loading:l,title:r,description:n,showTable:u,toggleTableView:h}),confirmDelete:d,onDelete:m,toggleDeleteConfirm:f,topRightItems:p},u?o().createElement(ne,he({data:a},y)):o().createElement(ue,he({id:t,isAnimationActive:!l,loading:l,data:a,series:s,iconFit:!0},y)))})),Be=(0,i.compose)(f)((function(){let{toggleDeleteConfirm:e=(()=>{}),icons:t,topLeftItems:r,id:n,title:i,text:a,headerStyle:s,topRightItems:l,dataGrid:c={},confirmDelete:u=!1,onDelete:p=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o().createElement(me,{id:`widget-text-${n}`,title:i,confirmDelete:u,onDelete:p,toggleDeleteConfirm:e,headerStyle:s,isDraggable:c.isDraggable,icons:t,topLeftItems:r,topRightItems:l},o().createElement(be,{text:a}))})),$e=(0,i.compose)(N.Z,ee,te("center"),te("zoom"),X,y)((function(){let{updateProperty:e=(()=>{}),toggleDeleteConfirm:t=(()=>{}),id:r,title:n,map:i,icons:a,hookRegister:s,mapStateSource:l,topRightItems:c,confirmDelete:u=!1,loading:p=!1,dataGrid:d={},onDelete:g=(()=>{}),headerStyle:m,env:h}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{size:{height:f,width:y},mapInfoControl:v}=i,b=f>400&&y>400&&v;return o().createElement(me,{id:`widget-text-${r}`,title:n,confirmDelete:u,onDelete:g,toggleDeleteConfirm:t,headerStyle:m,icons:a,topRightItems:c,isDraggable:d.isDraggable},o().createElement(de.Z,{footer:o().createElement("div",{style:{height:"30px",overflow:"hidden"}},p?o().createElement("span",{style:{float:"right"}},o().createElement(Ee.Z,null)):null)},o().createElement(Oe,{tools:b?["popup"]:[],updateProperty:e,id:r,map:{..._e()(i,"mapStateSource")},mapStateSource:l,hookRegister:s,layers:i&&i.layers,options:{style:{margin:10,height:"calc(100% - 20px)"}},env:h})))})),Ue=(0,i.compose)(N.Z,R.Z,A.Z,L,m)(Me),We=(0,i.compose)(N.Z,A.Z,R.Z,b.Z,c)((e=>{let{id:t,title:r,description:n,data:i=[],series:a=[],loading:s,showTable:l,confirmDelete:c=!1,headerStyle:u,icons:p,topRightItems:d,dataGrid:g={},toggleTableView:m=(()=>{}),toggleDeleteConfirm:h=(()=>{}),onDelete:f=(()=>{}),...y}=e;return o().createElement(me,{className:"counter-widget",id:`widget-chart-${t}`,title:r,isDraggable:g.isDraggable,icons:p,topLeftItems:Re({loading:s,title:r,description:n,showTable:l,toggleTableView:m}),confirmDelete:c,onDelete:f,toggleDeleteConfirm:h,headerStyle:u,topRightItems:d},o().createElement(Le.Z,Ae({id:t,isAnimationActive:!s,loading:s,data:i,series:a,iconFit:!0},y)))})),qe=(0,i.compose)(N.Z,h.Z)((function(){let{toggleDeleteConfirm:e=(()=>{}),id:t,title:r,icons:n,headerStyle:i,confirmDelete:a=!1,topRightItems:s,dataGrid:l={},onDelete:c=(()=>{}),...u}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o().createElement(me,{id:`widget-text-${t}`,title:r,confirmDelete:a,onDelete:c,toggleDeleteConfirm:e,headerStyle:i,icons:n,topRightItems:s,isDraggable:l.isDraggable},o().createElement(Ge,u))}));function Ve(){return Ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ve.apply(this,arguments)}const Ze=function(){let{dependencies:e,toggleCollapse:t=(()=>{}),exportCSV:r=(()=>{}),exportImage:n=(()=>{}),onDelete:i=(()=>{}),onEdit:a=(()=>{}),...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"text"===s.widgetType?o().createElement(Be,Ve({},s,{toggleCollapse:t,onDelete:i,onEdit:a})):"table"===s.widgetType?o().createElement(Ue,Ve({},s,{toggleCollapse:t,exportCSV:r,dependencies:e,onDelete:i,onEdit:a})):"counter"===s.widgetType?o().createElement(We,Ve({},s,{toggleCollapse:t,dependencies:e,onDelete:i,onEdit:a})):"map"===s.widgetType?o().createElement($e,Ve({},s,{toggleCollapse:t,dependencies:e,onDelete:i,onEdit:a})):"legend"===s.widgetType?o().createElement(qe,Ve({},s,{toggleCollapse:t,dependencies:e,onDelete:i,onEdit:a})):o().createElement(je,Ve({},s,{toggleCollapse:t,exportCSV:r,dependencies:e,exportImage:n,onDelete:i,onEdit:a}))}},70919:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(24852),o=r.n(n),i=r(14293),a=r.n(i),s=r(13218),l=r.n(s),c=r(38064),u=r(57588),p=r(1036),d=r(62770);function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g.apply(this,arguments)}const m=e=>{let{layers:t=[],onChange:r=(()=>{}),legendProps:n={},currentZoomLvl:i,disableOpacitySlider:s=!0,disableVisibility:m=!0,scales:h,language:f,currentLocale:y}=e;return o().createElement(c.Z,{className:"compact-legend-grid",size:"sm",items:t.map((e=>({title:e.title&&l()(e.title)&&(e.title[y]||e.title.default)||e.title,preview:m?null:o().createElement(u.Glyphicon,{className:"text-primary",glyph:e.visibility?"eye-open":"eye-close"}),style:{opacity:e.visibility?1:.4},body:e.visibility?o().createElement("div",null,o().createElement(u.Grid,{fluid:!0},o().createElement(u.Row,null,o().createElement(u.Col,{xs:12,className:"ms-legend-container"},o().createElement(d.Z,g({node:{...e},currentZoomLvl:i,scales:h,language:f},n))))),!s&&o().createElement("div",{className:"mapstore-slider",onClick:e=>{e.stopPropagation()}},o().createElement(p.Z,{disabled:!e.visibility,start:[a()(e.opacity)?100:Math.round(100*e.opacity)],range:{min:0,max:100},onChange:t=>r(e.id,"layers",{opacity:parseFloat((t[0]/100).toFixed(2))})}))):null})))})}},92936:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(67076),o=r(7848),i=r(91812),a=r(37981),s=r(57068),l=r(19180),c=r(69705),u=r(1979),p=r(61928),d=r(19983);const g=(0,n.compose)(c.Z,(0,i.Z)(0),o.Z,d.Z,l.Z,u.dY,u.yM,a.Z,s.e)(p.Z)},99707:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(24852),o=r.n(n),i=r(57588),a=r(45697),s=r(5346);function l(e){let{glyph:t="info-sign",messageId:r,msgParams:n={}}=e;return o().createElement("div",{className:"ms-widget-empty-message"},o().createElement(i.Glyphicon,{glyph:t})," ",o().createElement(s.Z,{msgId:r,msgParams:n}))}l.propTypes={messageId:a.PropTypes.string,glyph:a.PropTypes.string};const c=l},76364:(e,t,r)=>{"use strict";r.d(t,{Vd:()=>l}),r(72500),r(66654),r(91175),r(14293),r(27418);var n=r(49977),o=r.n(n),i=(r(15047),r(75875)),a=r.n(i),s=r(84069);const l=e=>e.distinctUntilChanged((function(e){let{value:t,currentPage:r,attribute:n}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!(o.value!==t||o.currentPage!==r||o.attribute!==n)})).throttle((e=>o().Observable.timer(e.delayDebounce||0))).merge(e.debounce((e=>o().Observable.timer(e.delayDebounce||0)))).distinctUntilChanged().switchMap((e=>{if(e.performFetch){const t=(0,s.getWpsPayload)({attribute:e.attribute,layerName:e.typeName,maxFeatures:e.maxFeatures,startIndex:(e.currentPage-1)*e.maxFeatures,value:e.value});return o().Observable.fromPromise(a().post(e.url,t,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((e=>({fetchedData:e.data,busy:!1})))).catch((()=>o().Observable.of({fetchedData:{values:[],size:0},busy:!1}))).startWith({busy:!0})}return o().Observable.of({fetchedData:{values:[],size:0},busy:!1})})).startWith({})},86850:(e,t,r)=>{"use strict";r.d(t,{Mc:()=>x,v$:()=>S});var n=r(72500),o=r.n(n),i=r(84596),a=r.n(i),s=r(14293),l=r.n(s),c=r(13218),u=r.n(c),p=r(49977),d=r.n(p),g=(r(5055),r(7526),r(75875)),m=r.n(g),h=r(47805),f=(r(24262),r(10284)),y=r(39156),v=r.n(y);const{getFeature:b,query:w,sortBy:_,propertyName:E}=v()({wfsVersion:"1.1.0"}),P=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"json";const i=(0,h.getWFSFilterData)(t,r),a=o().parse(e,!0);let s=u()(a.query)?a.query:{};s.service="WFS",s.outputFormat=n;const l=o().format({protocol:a.protocol,host:a.host,pathname:a.pathname,query:s});return r.layer&&"vector"===r.layer.type?d().Observable.defer((()=>new Promise((e=>{let n=((e,t)=>{if(t.filterFields&&0!==t.filterFields.length){const r=e.features.filter((0,h.createFeatureFilter)(t));e.features=r,e.numberMatched=r.length,e.numberReturned=r.length,e.totalFeatures=r.length}return t.sortOptions&&t.sortOptions.sortBy&&t.sortOptions.sortOrder&&"NONE"!==t.sortOptions.sortOrder&&e.features.sort(((e,r)=>{const n=e.properties[t.sortOptions.sortBy],o=r.properties[t.sortOptions.sortBy],i=n.toLowerCase().localeCompare(o.toLowerCase());return"ASC"===t.sortOptions.sortOrder?i:-1*i})),e})({crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4326"}},numberMatched:(o=r.layer.features).length,numberReturned:o.length,timeStamp:"2020-07-20T11:36:20.118Z",totalFeatures:o.length,type:"FeatureCollection",features:o},t);var o;e(n)})))):{data:i,queryString:l}},O=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.layer&&"vector"===r.layer.type)return P(e,t,r);const{data:n,queryString:o}=P(e,t,r);return d().Observable.defer((()=>m().post(o,n,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}}))).let(f.oB).map((e=>function(){let{totalFeatures:e,features:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{startIndex:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;return o>e&&o===n+t.length&&e===t.length?{...r,features:t,totalFeatures:o}:{...r,features:t,totalFeatures:e}}(e.data,function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pagination||!l()(e.startIndex)&&!l()(e.maxFeatures)&&{startIndex:e.startIndex,maxFeatures:e.maxFeatures}}(t,r),r.totalFeatures)))},x=function(){let{search:e={},url:t,name:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,{sortOptions:o,propertyName:i,...s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return O(e.url||t,n&&"object"==typeof n?{...n,typeName:r||n.typeName}:b(w(r,[...o?[_(o.sortBy,o.sortOrder)]:[],...i?[E(i)]:[],...n?a()(n):[]]),s),s).catch((l=>{if("OGCError"===l.name&&"NoApplicableCode"===l.code&&!o&&i&&i[0])return O(e.url||t,n&&"object"==typeof n?{...n,typeName:r||n.typeName}:b(w(r,[_(i[0]),...i?[E(i)]:[],...n?a()(n):[]]),s),s);throw l}))},S=e=>{let{layer:t}=e;return d().Observable.defer((()=>m().get(function(){let{name:e,search:t={},url:r,describeFeatureTypeURL:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=o().parse(n||t.url||r,!0);return o().format({...i,search:void 0,query:{...i.query,service:"WFS",version:"1.1.0",typeName:e,outputFormat:"application/json",request:"DescribeFeatureType"}})}(t)))).let(f.oB)}},65633:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(84596),o=r.n(n),i=r(99767),a=r(27835);const s=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,a.mG)(e,(e=>{let{featureType:t,aggregationAttribute:r,classificationAttribute:n=[],groupByAttributes:s=[],aggregateFunction:l,viewParams:c,filter:u=""}=e;const p=`<wfs:GetFeature ${c?`viewParams="${c}"`:""} outputFormat="GML2" service="WFS" version="1.0.0"><wfs:Query typeName="${t}">${u}</wfs:Query></wfs:GetFeature>`;return(0,a.Uh)("gs:Aggregate",[(0,i.qP)("features",(0,i.fA)("text/xml","http://geoserver/wfs","POST",p)),(0,i.qP)("aggregationAttribute",(0,i.XA)((0,i.gN)(r))),...o()(l).map((e=>(0,i.qP)("function",(0,i.XA)((0,i.gN)(e))))),(0,i.qP)("singlePass",(0,i.XA)((0,i.gN)("false"))),...o()(s).map((e=>(0,i.qP)("groupByAttributes",(0,i.XA)((0,i.gN)(e))))),...o()(n).map((e=>(0,i.qP)("groupByAttributes",(0,i.XA)((0,i.gN)(e)))))],(0,i.DK)((0,i.En)("result","application/json")))})(t),{},r)}},99767:(e,t,r)=>{"use strict";r.d(t,{qP:()=>g,XA:()=>m,fA:()=>h,gN:()=>f,DK:()=>y,En:()=>v,Jy:()=>w});var n=r(72500),o=r.n(n),i=r(66654),a=r.n(i),s=r(47037),l=r.n(s),c=r(1469),u=r.n(c),p=r(83608),d=r.n(p);const g=(e,t)=>`<wps:Input><ows:Identifier>${e}</ows:Identifier>`+t+"</wps:Input>",m=e=>`<wps:Data>${e}</wps:Data>`,h=(e,t,r,n)=>`<wps:Reference mimeType="${e}" xlink:href="${t}" method="${r}"${"POST"===r?"":"/"}>`+("POST"===r?`<wps:Body>${n}</wps:Body></wps:Reference>`:""),f=e=>`<wps:LiteralData>${e}</wps:LiteralData>`,y=e=>`<wps:ResponseForm>${e}</wps:ResponseForm>`,v=(e,t)=>`<wps:RawDataOutput${t?` mimeType="${t}"`:""}><ows:Identifier>${e}</ows:Identifier></wps:RawDataOutput>`,b=(e,t)=>{const r=o().parse(e,!0);let n=r.pathname;return(a()(r.pathname,"wfs")||a()(r.pathname,"wms"))&&(n=r.pathname.replace(/(wms|ows|wfs|wps)$/,"wps")),o().format({...r,search:null,pathname:n,query:{service:"WPS",...t,...r.query}})},w=(e,t)=>{if(e&&l()(e))return b(e,t);if(u()(e)){const r=d()(0,e.length-1);return b(e[r],t)}return e}},27835:(e,t,r)=>{"use strict";r.d(t,{Uh:()=>d,mG:()=>m});var n=r(6557),o=r.n(n),i=r(49977),a=r(5055),s=r(7526),l=r(75875),c=r.n(l),u=r(99767);class p extends Error{constructor(e,t){super(e),this.name="WPSExecuteError",this.code=t||e}}const d=(e,t,r)=>`<?xml version="1.0" encoding="UTF-8"?><wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:dwn="http://geoserver.org/wps/download" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd"><ows:Identifier>${e}</ows:Identifier><wps:DataInputs>`+(t||[]).join("")+"</wps:DataInputs>"+(r||"")+"</wps:Execute>",g=(e,t)=>{const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o();const r=e?.ExecuteResponse?.Status?.[0];return r?.ProcessAccepted?{status:"ProcessAccepted"}:r?.ProcessStarted?{status:"ProcessStarted"}:r?.ProcessSucceeded?{status:"ProcessSucceeded",data:t(e.ExecuteResponse.ProcessOutputs?.[0]?.Output)}:r?.ProcessFailed?{status:"ProcessFailed",exceptionReport:r?.ProcessFailed?.[0]?.ExceptionReport?.[0]?.Exception?.[0]?.ExceptionText?.[0]}:r?.ProcessPaused?{status:"ProcessPaused"}:{status:"UnexpectedStatus"}}(e,t);if("ProcessFailed"===r.status)throw new p(r.exceptionReport,"ProcessFailed");if("UnexpectedStatus"===r.status)throw new p("UnexpectedProcessStatus");if("ProcessSucceeded"===r.status)return{succeeded:!0,data:r.data};const n=e?.ExecuteResponse?.$?.statusLocation;if(!n)throw new p("NoStatusLocation");const i=n.indexOf("executionId=");if(-1===i)throw new p("NoExecutionId");const a=n.slice(i+12),s=a.indexOf("&");return{succeeded:!1,executionId:-1===s?a:a.slice(0,s)}},m=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{executeStatusUpdateInterval:o=2e3,outputsExtractor:l}=r,d=e=>i.Observable.defer((()=>new Promise(((t,r)=>(0,a.parseString)(e,{tagNameProcessors:[s.stripPrefix]},((e,n)=>e?r(e):t(n)))))));return function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.Observable.defer((()=>c().post((0,u.Jy)(e,{version:"1.0.0",REQUEST:"Execute"}),t,{headers:{"Content-Type":"application/xml"},...r})))}(e,t,n).catch((()=>{throw new p("ExecuteProcessXHRFailed")})).switchMap((e=>"application/xml"===e.headers["content-type"]||"text/xml"===e.headers["content-type"]?d(e.data).map((t=>({data:t,type:"application/xml",originalData:e.data}))):i.Observable.of({data:e.data,type:e.headers["content-type"]}))).flatMap((t=>{const{data:r,type:n,originalData:a}=t;if("application/xml"!==n)return i.Observable.of(r);if(!r?.ExecuteResponse)return i.Observable.of(a);const{succeeded:s,data:m,executionId:h}=g(r,l);if(s)return i.Observable.of(m);const f=i.Observable.interval(o).take(1).flatMap((()=>function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.Observable.defer((()=>c().get((0,u.Jy)(e,{version:"1.0.0",REQUEST:"GetExecutionStatus",executionId:t}),{headers:{Accept:"application/xml"},...r})))}(e,h).catch((()=>{throw new p("GetExecutionStatusXHRFailed")})).flatMap((e=>d(e.data).flatMap((e=>{const t=g(e,l);return t.succeeded?i.Observable.of(t.data):f}))))));return f}))}},70242:(e,t,r)=>{"use strict";r.r(t);var n=r(37718),o=r(55927),i=r(24852),a=r.n(i),s=r(45697),l=r.n(s),c=r(71703),u=r(27361),p=r.n(u),d=r(14293),g=r.n(d),m=r(72500),h=r.n(m),f=r(63516),y=r(91159),v=r(65539);function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const w=h().parse(window.location.href,!0).query;class _ extends a().Component{UNSAFE_componentWillMount(){const e=p()(this.props,"match.params.did");e?(this.props.reset(),this.props.loadResource(e)):(this.props.reset(),this.props.checkLoggedUser())}componentDidUpdate(e){const t=p()(this.props,"match.params.did");p()(e,"match.params.did")!==p()(this.props,"match.params.did")&&(g()(t)?this.props.reset():this.props.loadResource(t))}componentWillUnmount(){this.props.reset()}render(){return a().createElement(y.Z,{id:this.props.name,component:v.Z,includeCommon:!1,plugins:this.props.plugins,params:this.props.match.params})}}b(_,"propTypes",{mode:l().string,match:l().object,loadResource:l().func,checkLoggedUser:l().func,reset:l().func,plugins:l().object,name:l().string}),b(_,"defaultProps",{name:"dashboard",mode:"desktop",reset:()=>{},checkLoggedUser:()=>{}});const E=(0,c.connect)((e=>({mode:w.mobile||e.browser&&e.browser.mobile?"mobile":"desktop"})),{checkLoggedUser:f.fo,loadResource:o.o2,reset:o.PC})(_);var P=r(43410);r(23570);const O="WIDGETS:INSERT",x="WIDGETS:NEW",S="WIDGETS:EDIT",T="WIDGETS:EDIT_NEW",C="WIDGETS:EDITOR_CHANGE",D="WIDGETS:EDITOR_SETTING_CHANGE",F="WIDGETS:UPDATE_PROPERTY",I="WIDGETS:UPDATE_LAYER",M="WIDGETS:CHANGE_LAYOUT",L="WIDGETS:DELETE",A="WIDGETS:CLEAR_WIDGETS",R="WIDGETS:LOAD_DEPENDENCIES",N="WIDGETS:EXPORT_CSV",k="WIDGETS:EXPORT_IMAGE",G="WIDGETS:WIDGET_SELECTED",j="floating",B="dependencySelector",$=/^widgets\["?([^"\]]*)"?\]\.?(.*)$/,U="WIDGET:TOGGLE_COLLAPSE",W="WIDGET:TOGGLE_MAXIMIZE",q=e=>({type:I,layer:e}),V=(e,t)=>({type:C,key:e,value:t}),Z=(e,t)=>{return r={active:e,...t},{type:D,key:`${B}`,value:r};var r},H=function(e){return{type:U,widget:e,target:arguments.length>1&&void 0!==arguments[1]?arguments[1]:j}};var K=r(61868),z=r(84596),X=r.n(z);const Y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showConnections:!0,services:null,saveServiceLoading:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.BJ:return(0,K.t8)("editor.available",t.available,e);case o._y:case"WIDGETS:UPDATE":case O:case L:return(0,K.t8)("editing",t.editing,e);case o.vk:return(0,K.t8)("showConnections",t.show,e);case o.uI:return(0,K.t8)("showSaveModal",t.show,(0,K.t8)("saveErrors",void 0,e));case o.mg:return(0,K.t8)("showSaveAsModal",t.show,(0,K.t8)("saveErrors",void 0,e));case o.E9:return{...e,originalData:t.data,resource:t.resource,services:t.data?.catalogs};case o.R4:return{...e,originalData:void 0,resource:void 0,mode:"view",services:void 0};case o.SW:return(0,K.t8)("saveErrors",X()(t.error),e);case o.$l:return(0,K.t8)("saveErrors",void 0,e);case o.E5:return{...e,services:e.services||t.services,selectedService:t.service?.key||""};case o.s6:return(0,K.t8)("services",t.services,e);case o.B_:return{...e,mode:t.mode,isNew:t.isNew,saveServiceLoading:!1};case o.TA:return{...e,saveServiceLoading:t.loading};case o.CF:{let{services:r,service:n}=t;n.isNew=!1,n.showAdvancedSettings=!1,delete n.old,r[n.key]=n;const o=n.key;return{...e,services:r,selectedService:o,mode:"view"}}case o.js:{const r=t.services,n=t.service;(r[n.key]||r[n.old?.key])&&(delete r[n.key]||r[n.old?.key]);const o=Object.keys(r)[0]||"";return{...e,services:r,mode:"view",selectedService:o}}case o.CP:return(0,K.t8)("loading"===t.name?"loading":`loadFlags.${t.name}`,t.value,(0,K.t8)("loading",t.value,e));default:return e}};var Q=r(81808),J=r(27418),ee=r.n(J),te=r(28252),re=r.n(te),ne=r(13311),oe=r.n(ne),ie=r(57557),ae=r.n(ie),se=r(66604),le=r.n(se);const ce={dependencies:{viewport:"map.bbox",center:"map.center",zoom:"map.zoom"},containers:{floating:{widgets:[]}},builder:{settings:{step:0}}},ue=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case D:return re()(`builder.settings.${r.key}`,r.value,t);case T:return re()("builder.editor",r.widget,re()("builder.settings",r.settings||ce.settings,t));case S:return re()("builder.editor",{...r.widget,widgetType:r.widget&&r.widget.widgetType||"chart"},re()("builder.settings.step","chart"===(r.widget&&r.widget.widgetType||"chart")?1:0,t));case C:return re()(`builder.editor.${r.key}`,r.value,t);case O:return(0,K.vy)(`containers[${r.target}].widgets`,{id:r.id,...r.widget,dataGrid:r.id&&{y:0,x:0,w:1,h:1}},{id:r.widget.id||r.id},t);case F:const n=oe()(p()(t,`containers[${r.target}].widgets`),{id:r.id});return(0,K.vy)(`containers[${r.target}].widgets`,re()(r.key,"merge"===r.mode?ee()({},n[r.key],r.value):r.value,n),{id:r.id},t);case I:if(r.layer){const e=p()(t,`containers[${j}].widgets`);if(e)return re()(`containers[${j}].widgets`,e.map((e=>p()(e,"layer.id")===r.layer.id?re()("layer",r.layer,e):e)),t)}return t;case L:return(0,K.z6)(`containers[${r.target}].widgets`,{id:r.widget.id},t);case o.E9:const{data:i}=r;return re()(`containers[${j}]`,{...i},t);case Q.ok:const{widgetsConfig:a}=r.config||{};return re()(`containers[${j}]`,{...a},t);case M:return re()(`containers[${r.target}].layout`,r.layout)(re()(`containers[${r.target}].layouts`,r.allLayouts,t));case A:case o.R4:return re()(`containers[${j}]`,ce.containers[j],t);case"WIDGETS:ADD_DEPENDENCY":{const{key:e,value:n}=r;return re()(`dependencies[${e}]`,n,t)}case"WIDGETS:REMOVE_DEPENDENCY":{const{key:e}=r;return re()(`dependencies[${e}]`,null,t)}case R:const{dependencies:s}=r;return re()("dependencies",s,t);case"WIDGETS:RESET_DEPENDENCIES":return re()("dependencies",ce.dependencies,t);case U:{const{widget:e={}}=r;if(e.dataGrid&&e.dataGrid.static)return t;const n=p()(t,`containers[${r.target}].collapsed[${e.id}`);if(n){const o=[...p()(t,`containers[${r.target}].layout`,[]),...X()(p()(n,"layout",[]))],i=le()(p()(t,`containers[${r.target}].layouts`,{}),(function(){let e=arguments.length>1?arguments[1]:void 0;return[...arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],...X()(p()(n,`layouts[${e}]`,[]))]}));return ae()((0,K.qC)(re()(`containers[${r.target}].layout`,o),re()(`containers[${r.target}].layouts`,i))(t),`containers[${r.target}].collapsed[${e.id}]`)}return re()(`containers[${r.target}].collapsed[${e.id}]`,{layout:oe()(p()(t,`containers[${r.target}].layout`,[]),{i:e.id}),layouts:le()(p()(t,`containers[${r.target}].layouts`,{}),(t=>oe()(t,{i:e.id})))},t)}case W:{const e=r.widget,n=t?.containers?.[r.target]?.maximized;if(!e||e.dataGrid?.static)return t;if(n?.widget)return(0,K.qC)(re()(`containers[${r.target}].layout`,n.layout),re()(`containers[${r.target}].layouts`,n.layouts),re()(`containers[${r.target}].maximized`,{}),re()(`containers[${r.target}].widgets`,t?.containers?.[r.target]?.widgets?.map((e=>e.id===n.widget.id?{...e,dataGrid:{...e.dataGrid,isDraggable:!0,isResizable:!0}}:e))))(t);if(t?.containers?.[r.target]?.collapsed?.[e.id])return t;const o={x:0,y:0,w:1,h:1},i={...oe()(t?.containers?.[r.target]?.layout,{i:e.id}),...o};return(0,K.qC)(re()(`containers[${r.target}].maximized`,{widget:e,layout:t?.containers?.[r.target]?.layout,layouts:t?.containers?.[r.target]?.layouts}),re()(`containers[${r.target}].layout`,[i]),re()(`containers[${r.target}].layouts`,{xxs:[i]}),re()(`containers[${r.target}].widgets`,t?.containers?.[r.target]?.widgets?.map((t=>t.id===e.id?{...t,dataGrid:{...t.dataGrid,isDraggable:!1,isResizable:!1}}:t))))(t)}case"WIDGET:TOGGLE_COLLAPSE_ALL":{const n=p()(t,`containers[${r.target}].widgets`,[]).filter((e=>!e.dataGrid||!e.dataGrid.static)),o=n.filter((e=>p()(t,`containers[${r.target}].collapsed[${e.id}]`))),i=n.filter((e=>!p()(t,`containers[${r.target}].collapsed[${e.id}]`)));return 0===i.length?o.reduce(((t,r)=>e(t,H(r))),t):i.length>0?i.reduce(((t,r)=>e(t,H(r))),t):t}case"WIDGET:TOGGLE_TRAY":return re()("tray",r.value,t);default:return t}},pe={pages:[{name:"dashboard-embedded",path:"/:did",component:E,pageConfig:{name:"dashboard-embedded"}}],initialState:{defaultState:{},mobile:{}},baseReducers:{version:P.Z,dashboard:Y,widgets:ue},storeOpts:{persist:{whitelist:["security"]}}};var de=r(80628),ge=r(67076),me=r(22222),he=r(41609),fe=r.n(he),ye=r(5346),ve=r(75382);function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},be.apply(this,arguments)}r(38482);var we=r(82030);const _e=(0,ge.branch)((e=>{let{selectionActive:t}=e;return t}),(0,ge.compose)((0,ge.withProps)((e=>{let{className:t}=e;return{className:`${t} selection-active`}})),(0,ge.withHandlers)({getWidgetClass:e=>{let{getWidgetClass:t=(()=>{}),isWidgetSelectable:r=(()=>!0)}=e;return e=>t(e)?t(e)+(r(e)?void 0:" disabled"):r(e)?void 0:" disabled"},onWidgetClick:e=>{let{onWidgetSelected:t=(()=>{}),isWidgetSelectable:r=(()=>!0)}=e;return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return r(e)?t(e,...o):null}}})));var Ee=r(69968),Pe=r(91175),Oe=r.n(Pe);const xe=e=>p()(Oe()(e,(e=>{let{color:t}=e;return t})),"color"),Se=(0,ge.withProps)((e=>{let{groups:t,showGroupColor:r,headerStyle:n={borderTop:"3px solid rgba(0,0,0,0)",transition:"border-color .5s ease-out"}}=e;return{headerStyle:r&&t&&xe(t)?{...n,borderTop:`3px solid ${xe(t)}`}:n}}));function Te(){return Te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Te.apply(this,arguments)}r(89611);const Ce=(0,ge.branch)((e=>{let{useDefaultWidthProvider:t=!0}=e;return t}),Ee.WidthProvider)(Ee.Responsive),De=Se(r(43716).Z),Fe=function(){let e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((t=>oe()(t.widgets,(t=>t===e.id))))},Ie=(0,ge.pure)((function(){let{id:e,style:t,className:r="",toolsOptions:n={},rowHeight:o=208,breakpoints:i={lg:1200,md:996,sm:768,xs:480,xxs:0},cols:s={lg:6,md:6,sm:4,xs:2,xxs:1},widgets:l=[],layouts:c,dependencies:u,verticalCompact:p=!1,compactMode:d,useDefaultWidthProvider:g=!0,measureBeforeMount:m,width:h,showGroupColor:f,groups:y=[],canEdit:v=!0,getWidgetClass:b=(()=>{}),onWidgetClick:w=(()=>{}),updateWidgetProperty:_=(()=>{}),deleteWidget:E=(()=>{}),toggleCollapse:P=(()=>{}),toggleMaximize:O=(()=>{}),editWidget:x=(()=>{}),onLayoutChange:S=(()=>{}),language:T,env:C,...D}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const F=l.filter((e=>{let{mapSync:t,dependenciesMap:r}=e;return t&&r})).map((e=>{let{dependenciesMap:t}=e;return t})),I=e=>"table"===e.widgetType&&F.filter((t=>Object.keys(t).filter((r=>t[r]&&-1!==t[r].indexOf(e.id))).length>0)).length>0;return a().createElement(Ce,{key:e||"widgets-view",useDefaultWidthProvider:g,measureBeforeMount:m,width:g?void 0:h,isResizable:v,isDraggable:v,draggableHandle:".draggableHandle",onLayoutChange:S,preventCollision:!0,style:t,className:`widget-container ${r} ${v?"":"no-drag"}`,rowHeight:o,autoSize:!0,verticalCompact:p,compactMode:d,breakpoints:i,cols:s,layouts:c?JSON.parse(JSON.stringify(le()(c,(e=>e.map((e=>{const t=oe()(l,{id:e.i});return t?{...e,isResizable:t.dataGrid&&t.dataGrid.isResizable,isDraggable:t.dataGrid&&t.dataGrid.isDraggable,static:t.dataGrid&&t.dataGrid.static}:e})))))):void 0},l.map((e=>a().createElement("div",{key:e.id,"data-grid":e.dataGrid,onClick:()=>w(e),className:b(e)},a().createElement(De,Te({"data-grid":e.dataGrid},D,e,{quickFilters:I(e)?e.quickFilters:void 0,toolsOptions:n,groups:Fe(y,e),showGroupColor:f,dependencies:u,enableColumnFilters:I(e),canEdit:v,updateProperty:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return _(e.id,...r)},toggleCollapse:()=>P(e),toggleMaximize:()=>O(e),onDelete:()=>E(e),onEdit:()=>x(e),language:T,env:C}))))))})),Me=(0,ge.compose)(ge.pure,(0,ge.defaultProps)({breakpoints:{md:480,xxs:0},cols:{md:6,xxs:1},minLayoutWidth:480}),function(){let{overrideWidthProvider:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,ge.compose)((0,ge.defaultProps)({useDefaultWidthProvider:!e}),(e=>t=>a().createElement(ve.Z,{handleWidth:!0},(function(){let{width:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a().createElement(e,be({width:r},t))}))))}({overrideWidthProvider:!0}),(0,ge.withProps)((e=>{let{width:t,minLayoutWidth:r}=e;return{width:t<=r?t-18:t,toolsOptions:{showMaximize:!0}}})),(0,ge.withProps)((function(){let{width:e,height:t,maximized:r,minLayoutWidth:n,cols:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{className:"on-map",breakpoints:{md:n,xxs:0},cols:o||{md:6,xxs:1},style:{position:"absolute",zIndex:50,...r?.widget?{width:"100%",height:"100%",marginTop:0,bottom:"auto",top:0,left:0,zIndex:99}:{}},...r?.widget?{width:e,useDefaultWidthProvider:!1,rowHeight:t-50,breakpoints:{xxs:0},cols:{xxs:1}}:{}}})),(0,we.Z)((function(){let{widgets:e=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===e.length}),(e=>{let{loading:t}=e;return{glyph:"dashboard",title:t?a().createElement(ye.Z,{msgId:"loading"}):a().createElement(ye.Z,{msgId:"dashboard.emptyTitle"})}})),(0,ge.defaultProps)({isWidgetSelectable:()=>!0}),_e)(Ie);var Le=r(24684);const Ae=e=>e&&e.dashboard&&e.dashboard.editor&&e.dashboard.editor.available,Re=e=>e&&e.dashboard&&e.dashboard.editing,Ne=e=>e&&e.dashboard&&e.dashboard.resource,ke=e=>e&&e.browser&&e.browser.mobile;(0,me.P1)(Le.F,Ne,ke,((e,t,r)=>r?!r:t&&t.canEdit||isNaN(e.substr(-4))));var Ge=r(8316),je=r(18721),Be=r.n(je);const $e=e=>Be()(e,"localConfig.localizedLayerStyles"),Ue=(0,me.P1)($e,(e=>p()(e,"localConfig.localizedLayerStyles.name","mapstore_language")),Ge.KV,((e,t,r)=>{const n=[];return e&&n.push({name:t,value:r}),n}));var We=r(1469),qe=r.n(We),Ve=r(827),Ze=r(75110);r(81763),r(59854);const He=(e,t,r)=>{const n=[],o=[];let i,a,s=e;for(n.push(s);n.length>0;)if(s=n.shift(),!r[s])for(r[s]=!0,o.push(s),i=0;i<t.length;i+=1)a=t[i],a[0]!==s||r[a[1]]?a[1]!==s||r[a[0]]||n.push(a[0]):n.push(a[1]);return o};var Ke=r(43143);const ze=(e,t)=>{const[r,n]=$.exec(e);return r?oe()(t,{id:n}):null};var Xe=r(28368),Ye=r.n(Xe),Qe=r(13218),Je=r.n(Qe);const et=(e,t)=>e===t,tt=(0,me.wN)(me.PW,((e,t)=>Ye()(e,t,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et;return(t,r)=>Array.isArray(t)&&Array.isArray(r)?t===r||t.length===r.length&&t.reduce(((t,n,o)=>t&&e(n,r[o])),!0):Je()(t)&&Je()(r)?t===r||Object.keys(t).length===Object.keys(r).length&&Object.keys(t).reduce(((n,o)=>n&&e(t[o],r[o])),!0):t===r}()))),rt=e=>p()(e,"widgets.dependencies")||{},nt=e=>Object.keys(rt(e)).map((t=>rt(e)[t])),ot=e=>p()(e,"widgets.builder.editor"),it=((0,me.P1)(ot,Ze.Iz,(e=>Ae(e)&&Re(e)),(function(){let{layer:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e||!(arguments.length>2?arguments[2]:void 0)&&(arguments.length>1?arguments[1]:void 0)})),e=>p()(e,`widgets.containers[${j}].widgets`)),at=e=>p()(e,`widgets.containers[${j}].collapsed`),st=e=>p()(e,`widgets.containers[${j}].maximized`),lt=((0,me.P1)(it,at,st,((e,t,r)=>{if(e){if(r?.widget)return e.filter((function(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e===r.widget.id}));if(t)return e.filter((function(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!t[e]}))}return e})),(0,me.P1)(at,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e)})),e=>(it(e)||[]).filter((function(){let{widgetType:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"map"===e}))),ct=e=>(it(e)||[]).filter((function(){let{widgetType:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"table"===e})),ut=(0,me.P1)(lt,ct,Ve.Od,Le.F,(function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0;return{availableDependencies:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{let{id:t}=e;return`widgets[${t}].map`})).concat(X()(t).map((()=>"map"))).concat(X()(e).filter((()=>-1===r.indexOf("viewer"))).map((e=>{let{id:t}=e;return`widgets[${t}]`})))}})),pt=((0,me.P1)(lt,ct,Ve.Od,Le.F,ot,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;const i=o&&"map"!==o.widgetType?o&&o.layer||{}:o&&o.map&&o.map.layers||[];return{availableDependencies:e.map((e=>{let{id:t}=e;return`widgets[${t}].map`})).concat(X()(r).map((()=>r?"map":null))).filter((e=>e)).concat(X()(t).filter((()=>-1===n.indexOf("viewer"))).filter((e=>qe()(i)||i.name===e.layer.name)).filter((e=>o&&o.id!==e.id)).map((e=>{let{id:t}=e;return`widgets[${t}]`})))}})),e=>p()((e=>p()(e,"widgets.builder.settings"))(e),`${B}`)),dt=e=>p()(pt(e),"active"),gt=(0,me.P1)(it,(e=>function(){const e=(e=>{let t={},r=[];for(let n=0,o=e.length;n<o;n+=1){let o=e[n],i=o[0],a=o[1],s=null;t[i]?t[a]||(s=a):s=i,s&&r.push(He(s,e,t))}return r})(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(((t,r)=>{const n=p()(r,"mapSync")&&p()(r,"dependenciesMap")||{};return[...t,...(Object.keys(n).map((t=>ze(n[t],e)))||[]).filter((e=>void 0!==e)).map((e=>[r.id,e.id]))]}),[])}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])),t=(0,Ke.qH)(190,340,e.length+1,{base:10,range:360,s:.67,v:.67});return e.map(((e,r)=>({color:t[r],widgets:e})))}(e))),mt=tt(rt,nt,(e=>nt(e).map((t=>0===t.indexOf("map.")?p()((0,Ve.Od)(e),t.slice(4)):t.match($)?((e,t)=>{const r=$.exec(e),n=r&&r[2],o=ze(e,t);return n?p()(o,n):o})(t,it(e)):p()(e,t)))),((e,t,r)=>t.reduce(((t,n,o)=>({...t,[Object.keys(e)[o]]:r[o]})),{})));(0,me.zB)({widgets:it,layouts:e=>p()(e,`widgets.containers[${j}].layouts`),catalogs:e=>e&&e.dashboard&&e.dashboard.services});var ht=r(49977),ft=r.n(ht),yt=r(82904);r(75875);var vt=r(97395);var bt=r(74621),wt=r(6571),_t=r(89919),Et=r(75982);const Pt={openDashboardWidgetEditor:function(e){let{getState:t=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.ofType(x,S).filter((()=>Ae(t()))).switchMap((()=>ft().Observable.of((0,o.D_)(!0))))},closeDashboardWidgetEditorOnFinish:function(e){let{getState:t=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.ofType(O).filter((()=>Ae(t()))).switchMap((()=>ft().Observable.of((0,o.D_)(!1))))},initDashboardEditorOnNew:function(e){let{getState:t=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.ofType(x).filter((()=>Ae(t()))).switchMap((e=>{return ft().Observable.of((t={legend:!1,mapSync:!1,cartesian:!0,yAxis:!0,...e,type:void 0},{type:T,widget:t,settings:{step:0}}));var t}))},closeDashboardEditorOnExit:function(e){let{getState:t=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.ofType(Et.nk).filter((()=>Ae(t()))).filter((()=>Re(t()))).switchMap((()=>ft().Observable.of((0,o.D_)(!1))))},handleDashboardWidgetsFilterPanel:function(e){let{getState:t=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.ofType("WIDGETS:OPEN_FILTER_EDITOR").filter((()=>Ae(t()))).switchMap((()=>{return ft().Observable.of(function(e,t){return{type:"FEATURE_TYPE_SELECTED",url:e,typeName:t}}(...(e=>{let t=(e=>p()(ot(e),"layer"))(e);return[t.search&&t.search.url,t.name]})(t())),(n=t(),r=p()(ot(n),"filter"),{type:"QUERYFORM:LOAD_FILTER",filter:r}),(0,yt.Xg)("queryPanel","enabled",!0)).concat(ft().Observable.race(e.ofType("QUERY_FORM_SEARCH").take(1),e.ofType(yt.kM).filter((function(){let{control:e,property:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"queryPanel"===e&&(!t||"enabled"===t)})).take(1)).switchMap((e=>(e.filterObj?ft().Observable.of(V("filter",e.filterObj)):ft().Observable.empty()).merge(ft().Observable.of((0,yt.Xg)("widgetBuilder","enabled",!0)))))).takeUntil(e.ofType(Et.nk,S).merge(e.ofType(yt.kM).filter((function(){let{control:e,property:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"widgetBuilder"===e&&0==!t})))).concat(ft().Observable.of((0,yt.Xg)("queryPanel","enabled",!1)));var r,n}))},filterAnonymousUsersForDashboard:(e,t)=>e.ofType(f.c8,f.Nv).filter((()=>"/dashboard"===(0,Le.F)(t.getState()))).switchMap((e=>{let{}=e;return(0,bt.jl)(t.getState())?ft().Observable.empty():ft().Observable.of((0,o.AN)({status:403}))})),loadDashboardStream:(e,t)=>{let{getState:r=(()=>{})}=t;return e.ofType(o.zX).switchMap((e=>{let{id:t}=e;return(0,wt.RX)(t).map((e=>{let{data:t,...r}=e;return(0,o.rR)(r,t)})).let((0,_t.hP)((0,o.vM)(!0,"loading"),(0,o.vM)(!1,"loading"),(e=>{const t=window.location.href.match("dashboard-embedded")?"dashboardEmbedded":"dashboard";let n=t+".errors.loading.unknownError";return 403===e.status&&(n=t+".errors.loading.pleaseLogin",(0,bt.jl)(r())&&(n=t+".errors.loading.dashboardNotAccessible")),404===e.status&&(n=t+".errors.loading.dashboardDoesNotExist"),ft().Observable.of((0,vt.vU)({title:t+".errors.loading.title",message:n}),(0,o.AN)({...e,messageId:n}))})))}))},reloadDashboardOnLoginLogout:e=>e.ofType(o.zX).switchMap((t=>{let{id:r}=t;return e.ofType(f.XP,f.Nv).switchMap((()=>ft().Observable.of((0,o.o2)(r)).delay(1e3))).takeUntil(e.ofType(Et.nk))})),saveDashboard:e=>e.ofType(o.aR).exhaustMap((function(){let{resource:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(e.id?(0,wt.id)(e):(0,wt.SN)(e)).switchMap((t=>ft().Observable.of((0,o.sA)(t),e.id?(0,o.gE)(!1):(0,o.pB)(!1),e.id?(0,o.o2)(t):(0,Et.VF)(`/dashboard/${t}`)).merge(ft().Observable.of((0,vt.$Z)({id:"DASHBOARD_SAVE_SUCCESS",title:"saveDialog.saveSuccessTitle",message:"saveDialog.saveSuccessMessage"})).delay(e.id?0:1e3)))).let((0,_t.hP)((0,o.vM)(!0,"saving"),(0,o.vM)(!1,"saving"))).catch((function(){let{status:e,statusText:t,data:r,message:n,...i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ft().Observable.of((0,o.GD)(e?{status:e,statusText:t,data:r}:n||i),(0,o.vM)(!1,"saving"))}))}))};var Ot=r(66654),xt=r.n(Ot),St=r(64721),Tt=r.n(St),Ct=r(18446),Dt=r.n(Ct),Ft=r(14176),It=r.n(Ft),Mt=r(80416),Lt=r(69293),At=r(78598),Rt=r.n(At),Nt=r(97995),kt=r.n(Nt),Gt=(r(39902),r(89597),r(66085),r(82702),r(72163),r(5055),r(3674),r(52628),r(87185),r(30998),r(78718),r(93220),r(47037),r(85564)),jt=r.n(Gt);r(6557);const Bt=function(e,t,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return jt()([[[/\&/g,"&amp;"]],e?[]:[[/\"/g,"&quot;"]],t?[]:[[/\'/g,"&apos;"]],r?[]:[[/\>/g,"&gt;"]],n?[]:[[/\</g,"&lt;"]]]).reduce(((e,t)=>{let[r,n]=t;return e.replace(r,n)}),o)};Bt.bind(null,!0,!0,!0,!1),Bt.bind(null,!1,!1,!0,!1),r(24262),r(90183),new DOMParser;var $t=r(17542),Ut=r.n($t),Wt=r(59425),qt=r.n(Wt);const Vt=e=>e.ofType(Lt.WC,Lt.a3,Lt.W5).startWith({type:Q.ok}).switchMap((t=>t.type===Lt.WC?ft().Observable.never():e)).filter((function(){let{type:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e===Et.nk})),Zt=(e,t,r,n)=>ft().Observable.of(V("mapSync",e),V("dependenciesMap",((e,t,r)=>{let{dependenciesMap:n,mappings:o}=r;const i=["layer","filter","quickFilters","options"],a=["layers","viewport","zoom","center"],s=($.exec(t)||[])[1],l=It()(n,(e=>-1===e.indexOf(s))),c=Object.keys(o).filter((e=>void 0!==o[e])).reduce(((e,r)=>!xt()(t,"map")&&Tt()(i,r)?{...e,[r]:`${t}.${o[r]}`}:xt()(t,"map")?Tt()(a,r)?{...e,[r]:"map"===t?o[r]:`${t}.${o[r]}`}:{...e,[r]:`${t.replace(".map","")}.${o[r]}`}:e),{});return e?{...l,...c,dependenciesMap:`${t.replace(".map","")}.dependenciesMap`,mapSync:`${t.replace(".map","")}.mapSync`}:ae()(l,[Object.keys(o)])})(e,t,r))),Ht={exportWidgetData:e=>e.ofType(N).do((e=>{let{data:t=[],title:r="data"}=e;return Ut().json2csv(t,((e,t)=>e?null:(0,At.saveAs)(new Blob([t],{type:"text/csv"}),r+".csv")))})).filter((()=>!1)),alignDependenciesToWidgets:function(e){let{getState:t=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.ofType(Q.ok,o.E9,O).map((()=>ut(t()))).pluck("availableDependencies").distinctUntilChanged((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Dt()([...e],[...t])})).map((function(){return e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(((e,t)=>{const r=t.replace(".map","");return xt()(t,"map")?{...e,[`${r}.dependenciesMap`]:`${r}.dependenciesMap`,[`${r}.mapSync`]:`${r}.mapSync`,["map"===t?"viewport":`${t}.viewport`]:`${t}.bbox`,["map"===t?"center":`${t}.center`]:`${t}.center`,["map"===t?"zoom":`${t}.zoom`]:`${t}.zoom`,["map"===t?"layers":`${t}.layers`]:"map"===t?"layers.flat":`${t}.layers`}:{...e,[`${t}.filter`]:`${t}.filter`,[`${t}.quickFilters`]:`${t}.quickFilters`,[`${r}.dependenciesMap`]:`${r}.dependenciesMap`,[`${r}.mapSync`]:`${r}.mapSync`,[`${t}.layer`]:`${t}.layer`,[`${t}.options`]:`${t}.options`}}),{}),{type:R,dependencies:e};var e}))},toggleWidgetConnectFlow:function(e){let{getState:t=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.ofType("WIDGETS:TOGGLE_CONNECTION").switchMap((r=>{let{active:n,availableDependencies:o=[],options:i}=r;return n&&o.length>0?1===o.length?Zt(n,o[0],i):ft().Observable.of(Z(n,{availableDependencies:o})).merge(e.ofType(G).filter((()=>dt(t()))).switchMap((e=>{let{widget:r}=e;const o=p()(pt(t()),"availableDependencies").filter((e=>($.exec(e)||[])[1]===r.id));return Zt(n,o[0],i,r.dependeciesMap).concat(ft().Observable.of(Z(!1,{})))})).takeUntil(e.ofType(Et.nk).merge(e.filter((function(){let{type:e,key:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e===D&&t===B}))))):Zt(n,o[0],i)}))},clearWidgetsOnLocationChange:function(e){let{getState:t=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.ofType(Q.ok).switchMap((()=>{const r=(0,Le.F)(t()).split("/"),n=r[r.length-1];return e.let(Vt).filter((()=>{const e=(0,Le.F)(t()).split("/");return e[e.length-1]!==n})).switchMap((function(){let{payload:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&e.location&&e.location.pathname?ft().Observable.of({type:A}):ft().Observable.empty()}))}))},exportWidgetImage:e=>e.ofType(k).do((e=>{let{widgetDivId:t,title:r="data"}=e,n=document.createElement("canvas");const o=document.querySelector(`#${t} .recharts-wrapper svg`),i=o.outerHTML?o.outerHTML:(e=>{const t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML})(o);qt()(n,i,{renderCallback:()=>{const e=n.getContext("2d");e.globalCompositeOperation="destination-over",e.fillStyle="#fff",e.fillRect(0,0,n.width,n.height),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"snapshot.png",r=arguments.length>2?arguments[2]:void 0;!function(e,t,r){let n=new Blob([e],{type:r});Rt().saveAs(n,t)}(kt()(e),t,r)}(n.toDataURL("image/jpeg",1),`${r}.jpg`,"image/jpeg")}})})).filter((()=>!1)),updateLayerOnLayerPropertiesChange:(e,t)=>e.ofType(Mt.yS).switchMap((e=>{let{layer:r,newProperties:n}=e;const o=t.getState(),i=(0,Ze.CA)(o,r);return ft().Observable.of(...Be()(n,"layerFilter")&&i?[q(i)]:[])})),updateLayerOnLoadingErrorChange:(e,t)=>e.ofType(Mt.x9,Mt.vs).groupBy((e=>{let{layerId:t}=e;return t})).map((e=>e.switchMap((e=>{let{layerId:r}=e;const n=t.getState(),o=(0,Ze.CA)(n,r);return ft().Observable.of(...o&&o.previousLoadingError!==o.loadingError?[q(o)]:[])})))).mergeAll()};function Kt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const zt=(0,ge.compose)((0,c.connect)((0,me.P1)(Ne,(e=>p()(e,`widgets.containers[${j}].widgets`)),(e=>p()(e,`widgets.containers[${j}].layouts`)),mt,dt,(e=>ot(e)),gt,(e=>e&&e.dashboard&&e.dashboard.showConnections),(e=>e&&e.dashboard&&e.dashboard.loading),ke,Ge.KV,$e,Ue,st,((e,t,r,n,o,i,a,s,l,c,u,p,d,g)=>({resource:e,loading:l,canEdit:c?!c:e&&!!e.canEdit,layouts:r,dependencies:n,selectionActive:o,editingWidget:i,widgets:fe()(g)?t:t.filter((e=>e.id===g.widget.id)),groups:a,showGroupColor:s,language:p?u:null,env:d,maximized:g}))),{editWidget:e=>({type:S,widget:e}),updateWidgetProperty:function(e,t,r){return{type:F,id:e,target:arguments.length>4&&void 0!==arguments[4]?arguments[4]:j,key:t,value:r,mode:arguments.length>3&&void 0!==arguments[3]?arguments[3]:"replace"}},exportCSV:e=>{let{data:t=[],title:r="export"}=e;return{type:N,data:t,title:r}},exportImage:e=>{let{widgetDivId:t}=e;return{type:k,widgetDivId:t}},deleteWidget:function(e){return{type:L,target:arguments.length>1&&void 0!==arguments[1]?arguments[1]:j,widget:e}},onWidgetSelected:(e,t)=>({type:G,widget:e,opts:t}),onLayoutChange:function(e,t){return{type:M,allLayouts:t,layout:e,target:arguments.length>2&&void 0!==arguments[2]?arguments[2]:j}},toggleMaximize:function(e){return{type:W,widget:e,target:arguments.length>1&&void 0!==arguments[1]?arguments[1]:j}}}),(0,ge.withProps)((()=>({style:{height:"100%",overflow:"auto"}}))),(0,ge.withHandlers)({isWidgetSelectable:e=>{let{editingWidget:t}=e;return e=>("map"===e.widgetType||"table"===e.widgetType&&("map"!==t.widgetType&&e.layer&&t.layer&&e.layer.name===t.layer.name||"map"===t.widgetType)&&!e.mapSync)&&e.id!==t.id}}))(Me);class Xt extends a().Component{render(){return this.props.enabled?a().createElement(zt,{width:this.props.width,height:this.props.height,rowHeight:this.props.rowHeight,cols:this.props.cols,minLayoutWidth:this.props.minLayoutWidth}):null}}Kt(Xt,"propTypes",{enabled:l().bool,rowHeight:l().number,cols:l().object,minLayoutWidth:l().number}),Kt(Xt,"defaultProps",{enabled:!0,minLayoutWidth:480});const Yt={plugins:{DashboardPlugin:{DashboardPlugin:(0,de.Z)(Xt),reducers:{dashboard:Y,widgets:ue},epics:{...Pt,...Ht}},FeedbackMaskPlugin:r(68741).Z},requires:{}};var Qt=r(76015);(0,r(98223).Rw)(Yt.plugins);const{query:Jt}=h().parse(window.location.href,!0);(0,Qt.Z)(pe,Yt,(e=>({...e,initialActions:[n.loadVersion,o.G9.bind(null,!!Jt.connections)]})))},75110:(e,t,r)=>{"use strict";r.d(t,{l2:()=>w,CA:()=>_,W6:()=>E,Iz:()=>P,jN:()=>O,Rt:()=>x});var n=r(22222),o=(r(52259),r(7412)),i=(r(24262),r(18412)),a=r(90183),s=r(7877),l=r(27361),c=r.n(l),u=r(91175),p=r.n(u),d=(r(41609),r(13311)),g=r.n(d),m=r(13218),h=r.n(m),f=r(1469),y=r.n(f),v=r(84596),b=r.n(v);r(14293),r(59112),r(827);const w=function(){let{layers:e,config:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&y()(e)?e:e&&e.flat||t&&t.layers||[]},_=(e,t)=>p()(w(e).filter((e=>e.id===t))),E=((0,n.P1)([w,s.Dg,e=>e.search&&e.search,e=>c()(e,"mapInfo.centerToMarker",""),e=>c()(e,"additionallayers",[]),e=>e.annotations&&e.annotations.showMarker&&e.annotations.clickPoint],(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0;const c=s.filter((e=>{let{actionType:t}=e;return"override"===t})),u=s.filter((e=>{let{actionType:t}=e;return"overlay"===t})).map((e=>e.options));let d=e.map((e=>{const{options:t}=p()(c.filter((t=>t.id===e.id)))||{};return t?{...e,...t}:{...e}}));if(d=d.concat(u),t){d.push((0,o.su)("GetFeatureInfoHighLight",{features:t.features},void 0,{overrideOLStyle:!0,featuresCrs:t.featuresCrs,style:{...i.be,color:"#3388ff",weight:4,dashArray:"",fillColor:"#3388ff",fillOpacity:.2}}));const e="enabled"===n?(0,a.getNormalizedLatLon)(t.latlng):t.latlng;d.push((0,o.su)("GetFeatureInfo",e))}if(l){const e="enabled"===n?(0,a.getNormalizedLatLon)(l.latlng):l.latlng;d.push((0,o.su)("Annotations",e)),d.push((0,o.su)("GetFeatureInfo",{...e}))}if(r&&r.markerPosition){let e=h()(r.style)&&r.style||{};d.push((0,o.su)("GeoCoder",r.markerPosition,"marker",{overrideOLStyle:!0,style:{...i.be,...e}},r.markerLabel))}return d})),e=>e.layers&&e.layers.flat&&e.layers.groups||[]),P=e=>{const t=(e=>{const t=(e=>e.layers&&e.layers.selected||[])(e);return t.map((t=>g()(w(e),{id:t})))})(e)||[];return t&&t[0]},O=e=>e.layers&&e.layers.settings||{expanded:!1,options:{opacity:1}},x=(e,t)=>(w(e)||[]).filter((e=>e&&e.dimensions&&g()(b()(e.dimensions),{name:t})))},8316:(e,t,r)=>{"use strict";r.d(t,{Pz:()=>a,KV:()=>s});var n=r(22222),o=r(91175),i=r.n(o);const a=e=>e.locale&&e.locale.current||"en-US",s=(0,n.P1)([a],(e=>i()(e.split("-"))))},74621:(e,t,r)=>{"use strict";r.d(t,{np:()=>n,jl:()=>o}),r(27418),r(27361);const n=e=>e&&e.security&&e.security.user,o=e=>e&&e.security&&e.security.user},43143:(e,t,r)=>{"use strict";r.d(t,{qH:()=>u,qq:()=>p});var n=r(17621),o=r.n(n),i=r(14841),a=r.n(i),s=r(64721),l=r.n(s);let c;const u=(e,t,r,n)=>{let o=e;isNaN(parseFloat(e))&&(o=c.hexToHsv(e)[0]);let i=.5/(r-1),a=t/(r-1),s=[];1===r&&(i=.5,a=t/2);for(let e=0;e<r;e++){let r=o+e*a-t/2,l=i*e+.3,u=l;n&&(r=n.h||r,l=n.s||l,u=n.v||u),s.push(c.hsvToHex(r,l,u,e))}return s},p=(e,t,r)=>{const n=o()(e);return e&&n.setAlpha(a()(void 0!==t?t:n.getAlpha())).toRgbString()||r},d=e=>{const t=Math.round,r=Math.random,n=[t(255*r()),t(255*r()),t(255*r())],o=c.rgbToHex(n);if(e)for(;l()(e,o)||"#000000"===o||"#FFFFFF"===o;)d(e);return o};c={decToHex:e=>{const t="0123456789ABCDEF";let r=parseInt(e,10);return r=isNaN(r)?0:r,r=r>255||r<0?0:r,t.charAt((r-r%16)/16)+t.charAt(r%16)},rgbToHex:(e,t,r)=>e instanceof Array?c.rgbToHex(e[0],e[1],e[2]):"#"+c.decToHex(e)+c.decToHex(t)+c.decToHex(r),realToDec:e=>Math.min(255,Math.round(256*e)),rgbToHsv:(e,t,r)=>{if(e instanceof Array)return c.rgbToHsv(e[0],e[1],e[2]);let n,o,i,a,s,l=e/255,u=t/255,p=r/255;switch(n=Math.min(Math.min(l,u),p),o=Math.max(Math.max(l,u),p),i=o-n,o){case n:a=0;break;case l:a=60*(u-p)/i,u<p&&(a+=360);break;case u:a=60*(p-l)/i+120;break;case p:a=60*(l-u)/i+240}return s=0===o?0:1-n/o,[Math.round(a),s,o]},distributedColorsHEX:e=>{let t=360/(e-1),r=[];const n=(e,t,r)=>{let o=n(e,t,r);return c.rgbToHex(o)};for(let o=0;o<e;o++)r.push(n(t*o,.57,.63,o));return r},sameToneRangeColors:u,hsvToRgb:(e,t,r)=>{if(e instanceof Array)return c.hsvToRgb(e[0],e[1],e[2]);let n,o,i,a=Math.floor(e/60%6),s=e/60-a,l=r*(1-t),u=r*(1-s*t),p=r*(1-(1-s)*t);switch(a){case 0:n=r,o=p,i=l;break;case 1:n=u,o=r,i=l;break;case 2:n=l,o=r,i=p;break;case 3:n=l,o=u,i=r;break;case 4:n=p,o=l,i=r;break;case 5:n=r,o=l,i=u}return[c.realToDec(n),c.realToDec(o),c.realToDec(i)]},hsvToHex:(e,t,r)=>{let n=c.hsvToRgb(e,t,r);return c.rgbToHex(n)},hexToHsv:e=>{let t=e;if(t.length>0){"#"===t[0]&&(t=e.substring(1));let r=c.hexToRgb(t);return c.rgbToHsv(r)}return null},hexToRgb:e=>{let t,r,n,o=e;return"#"===o.charAt(0)&&(o=e.substring(1)),t=o.charAt(0)+o.charAt(1),r=o.charAt(2)+o.charAt(3),n=o.charAt(4)+o.charAt(5),[parseInt(t,16),parseInt(r,16),parseInt(n,16)]},colorToHexStr:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"red";return o()(e).toHexString()},colorToRgbaStr:p,generateRandomHexColor:d}},90183:(e,t,r)=>{"use strict";r.r(t),r.d(t,{FORMULAS:()=>V,getProjUrl:()=>H,determineCrs:()=>z,normalizePoint:()=>Y,reproject:()=>J,reprojectExtent:()=>te,getPolygonFromExtent:()=>re,getExtentFromNormalized:()=>ne,crsCodeTable:()=>oe,setCrsLabels:()=>ie,getUnits:()=>ae,getProjectedBBox:()=>se,createBBox:()=>le,reprojectGeoJson:()=>ce,lineIntersectPolygon:()=>ue,normalizeLng:()=>pe,reprojectBbox:()=>de,bboxToFeatureGeometry:()=>ge,getCompatibleSRS:()=>me,getEquivalentSRS:()=>he,getEPSGCode:()=>fe,normalizeSRS:()=>be,isAllowedSRS:()=>we,getAvailableCRS:()=>_e,filterCRSList:()=>Ee,calculateAzimuth:()=>Pe,calculateDistance:()=>Oe,extendExtent:()=>xe,getGeoJSONExtent:()=>Se,isValidExtent:()=>Te,calculateCircleCoordinates:()=>Ce,transformLineToArcs:()=>De,transformArcsToLine:()=>Fe,coordsOLtoLeaflet:()=>Ie,mergeToPolyGeom:()=>Me,getViewportGeometry:()=>Le,getExtentFromViewport:()=>Ae,fetchProjRemotely:()=>Re,parseURN:()=>Ne,parseString:()=>ke,getWMSBoundingBox:()=>Ge,isSRSAllowed:()=>je,getNormalizedLatLon:()=>Be,isInsideVisibleArea:()=>$e,centerToVisibleArea:()=>Ue,calculateCircleRadiusFromPixel:()=>We,roundCoord:()=>qe,midpoint:()=>Ve,pointObjectToArray:()=>Ze,isPointInsideExtent:()=>He,isBboxCompatible:()=>Ke,extractCrsFromURN:()=>ze,makeNumericEPSG:()=>Xe,makeBboxFromOWS:()=>Ye,getPolygonFromCircle:()=>Qe,getProjections:()=>Je,getExtentForProjection:()=>et,checkIfLayerFitsExtentForProjection:()=>tt,getLonLatFromPoint:()=>rt,convertRadianToDegrees:()=>nt,convertDegreesToRadian:()=>ot,setValueBoundaries:()=>it,default:()=>at});var n=r(68103),o=r(90173),i=r(75875),a=r.n(i),s=r(27418),l=r.n(s),c=r(1469),u=r.n(c),p=r(13218),d=r.n(p),g=r(23560),m=r.n(g),h=r(42348),f=r.n(h),y=r(8400),v=r.n(y),b=r(50361),w=r.n(b),_=r(81763),E=r.n(_),P=r(12571),O=r.n(P),x=r(91175),S=r.n(x),T=r(10928),C=r.n(T),D=r(68898),F=r(67703),I=r.n(F),M=r(73345),L=r.n(M),A=r(7725),R=r(23384),N=r.n(R),k=r(81965),G=r(89733),j=r(35462),B=r(13292),$=r.n(B),U=r(37275);const W=o.default;let q;const V={vincenty:e=>{let t=0;for(let r=0;r<e.length-1;++r){const o=e[r],i=e[r+1],[a,s]=o,[l,c]=i;t+=parseFloat(n.Kl({longitude:a,latitude:s},{longitude:l,latitude:c}))}return t},haversine:e=>{let t=0;for(let r=0;r<e.length-1;++r){const o=e[r],i=e[r+1],[a,s]=o,[l,c]=i;t+=parseFloat(n.e8({longitude:a,latitude:s},{longitude:l,latitude:c}))}return t}};function Z(e,t){return(r=e).length>=2&&"number"==typeof r[0]&&"number"==typeof r[1]?t(e):e.map((function(e){return Z(e,t)}));var r}const H=e=>`http://spatialreference.org/ref/epsg/${e}/proj4/`;function K(e,t,r){if(null===e)return e;let n=w()(e);return"Feature"===e.type?n.geometry=K(e.geometry,t,r):"FeatureCollection"===e.type?n.features=n.features.map((function(e){return K(e,t,r)})):"GeometryCollection"===e.type?n.geometries=n.geometries.map((function(e){return K(e,t,r)})):t&&t(n),r&&r(n),n}function z(e){return"string"==typeof e||e instanceof String?o.default.defs(e)?new o.default.Proj(e):null:e}let X={"EPSG:4326":"WGS 84","EPSG:3857":"EPSG:3857"};const Y=e=>({x:e.x||0,y:e.y||0,srs:e.srs||e.crs||"EPSG:4326",crs:e.srs||e.crs||"EPSG:4326"}),Q=e=>{let t=e;return E()(e.x)||(t.x=parseFloat(e.x)),E()(e.y)||(t.y=parseFloat(e.y)),t},J=function(e,t,r){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=t&&o.default.defs(t)?new o.default.Proj(t):null,a=r&&o.default.defs(r)?new o.default.Proj(r):null;if(i&&a){let s=u()(e)?o.default.toPoint(e):o.default.toPoint([e.x,e.y]);const c=l()({},t===r?Q(s):o.default.transform(i,a,Q(s)),{srs:r});return n?Y(c):c}return null},ee=["EPSG:900913","EPSG:4326","EPSG:3857"],te=(e,t,r)=>"EPSG:4326"===t?e:r?e.map((e=>[J([e[0],e[1]],"EPSG:4326",t),J([e[2],e[3]],"EPSG:4326",t)].reduce(((e,t)=>[...e,t.x,t.y]),[]))):[J([e[0],e[1]],"EPSG:4326",t),J([e[2],e[3]],"EPSG:4326",t)].reduce(((e,t)=>[...e,t.x,t.y]),[]),re=e=>e?e.hasOwnProperty("geometry")&&"Polygon"===e.geometry.type?e:(0,k.Z)(e):null,ne=(e,t)=>{const r=((e,t)=>{const r="EPSG:4326"!==t?[J([parseFloat(e.minx),parseFloat(e.miny)],t,"EPSG:4326"),J([parseFloat(e.maxx),parseFloat(e.maxy)],t,"EPSG:4326")].reduce(((e,t)=>[...e,t.x,t.y]),[]):[parseFloat(e.minx),parseFloat(e.miny),parseFloat(e.maxx),parseFloat(e.maxy)];let n=!1;return"EPSG:4326"===t?n=Math.abs(e.maxx-e.minx)>=360:"EPSG:900913"!==t&&"EPSG:3857"!==t||(n=Math.abs(e.maxx-e.minx)>=40075016.68557849),n?[0,r[1],360,r[3]]:[(r[0]+180)%360,r[1],(r[2]+180)%360,r[3]].map(((e,t)=>t%2==0&&e<0?360+e:e))})(e,t),n=r[2]<r[0];return n?{extent:te([[-180,r[1],r[2]-180,r[3]],[r[0]-180,r[1],180,r[3]]],t,n),isIDL:n}:{extent:te([r[0]-180,r[1],r[2]-180,r[3]],t,n),isIDL:n}},oe={wgs84:4326,wgs1984:4326,crs84:4326,ogccrs84:4326,lambert93:2154,rgflambert93:2154},ie=e=>{X=l()({},X,e)},ae=function(e){return new o.default.Proj(e).units||"degrees"},se=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,o=t*n[0]/2,i=t*n[1]/2,a=Math.cos(r),s=Math.sin(r),l=o*a,c=o*s,u=i*a,p=i*s,d=e.x,g=e.y,m=d-l+p,h=d-l-p,f=d+l-p,y=d+l+p,v=g-c-u,b=g-c+u,w=g+c+u,_=g+c-u;return q.createBBox(Math.min(m,h,f,y),Math.min(v,b,w,_),Math.max(m,h,f,y),Math.max(v,b,w,_))},le=(e,t,r,n)=>({minx:e,miny:t,maxx:r,maxy:n}),ce=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EPSG:4326",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"EPSG:4326";"string"==typeof t&&(t=z(t)),"string"==typeof r&&(r=z(r));let n=W(t,r);return K(e,(e=>{e.crs&&delete e.crs,e.coordinates=Z(e.coordinates,(e=>{let[t,r]=e;return n.forward([t,r])}))}),(e=>{e.bbox&&(e.bbox=(()=>{let t=[Number.MAX_VALUE,Number.MAX_VALUE],r=[-Number.MAX_VALUE,-Number.MAX_VALUE];return K(e,(function(e){Z(e.coordinates,(function(e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),r[0]=Math.max(r[0],e[0]),r[1]=Math.max(r[1],e[1])}))})),[t[0],t[1],r[0],r[1]]})())}))},ue=function(e,t){let r=L()(t).features[0];return 0!==I()(e,r).features.length},pe=e=>{let t=e/360%1*360;return t<-180?t+=360:t>180&&(t-=360),t},de=function(e,t,r){let n,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];n=u()(e)?{sw:[e[0],e[1]],ne:[e[2],e[3]]}:{sw:[e.minx,e.miny],ne:[e.maxx,e.maxy]};let i=[];for(let e in n)if(n.hasOwnProperty(e)){const a=q.reproject(n[e],t,r,o);if(!a)return null;{let{x:e,y:t}=a;i.push(e),i.push(t)}}return i},ge=e=>{const t=u()(e)?{minx:e[0],miny:e[1],maxx:e[2],maxy:e[3]}:e,{minx:r,miny:n,maxx:o,maxy:i}=t;return{type:"Polygon",coordinates:[[[r,n],[r,i],[o,i],[o,n],[r,n]]]}},me=(e,t)=>"EPSG:900913"===e&&!t["EPSG:900913"]&&t["EPSG:3857"]?"EPSG:3857":"EPSG:3857"===e&&!t["EPSG:3857"]&&t["EPSG:900913"]?"EPSG:900913":e,he=e=>"EPSG:900913"===e||"EPSG:3857"===e?["EPSG:3857","EPSG:900913"]:[e],fe=e=>-1!==e.indexOf(":")?"EPSG:"+e.substring(e.lastIndexOf(":")+1):e,ye=["EPSG:900913","EPSG:3857","EPSG:3785","EPSG:102113","GOOGLE"],ve=["EPSG:4326","WGS84"],be=function(e,t){const r=-1!==ye.indexOf(e)?"EPSG:3857":-1!==ve.indexOf(e)?"EPSG:4326":e;return t&&!t[r]?q.getCompatibleSRS(r,t):r},we=(e,t)=>t[q.getCompatibleSRS(e,t)],_e=function(){let e={};for(let t in o.default.defs)o.default.defs.hasOwnProperty(t)&&(e[t]={label:X[t]||t});return e},Ee=(e,t,r,n)=>{let o=Object.keys(e).reduce(((r,n)=>l()({},-1===t.indexOf(n)?r:{...r,[n]:e[n]})),{});const i=n.map((e=>e.code));let a=Object.keys(r).reduce(((e,t)=>l()({},-1===i.indexOf(t)?e:{...e,[t]:r[t]})),{});return l()({},o,a)},Pe=function(e,t,r){var n=q.reproject(e,r,"EPSG:4326"),o=q.reproject(t,r,"EPSG:4326"),i=n.x*Math.PI/180,a=n.y*Math.PI/180,s=o.x*Math.PI/180,l=o.y*Math.PI/180,c=s-i,u=Math.sin(c)*Math.cos(l),p=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(c);return(180*Math.atan2(u,p)/Math.PI+360)%360},Oe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"haversine";return e.length>=2&&-1!==Object.keys(V).indexOf(t)?V[t](e):0},xe=function(e,t){let r=e.slice();return t[0]<e[0]&&(r[0]=t[0]),t[2]>e[2]&&(r[2]=t[2]),t[1]<e[1]&&(r[1]=t[1]),t[3]>e[3]&&(r[3]=t[3]),r},Se=function(e){let t=[1/0,1/0,-1/0,-1/0];const r=(e,t)=>{let r=q.getGeoJSONExtent(t);return q.isValidExtent(r)?q.extendExtent(r,e):r};if(e.coordinates){if("Point"===e.type){let r=e.coordinates;t[0]=r[0]-.01*r[0],t[1]=r[1]-.01*r[1],t[2]=r[0]+.01*r[0],t[3]=r[1]+.01*r[1]}return v()(f()(e.coordinates),2).reduce(((e,t)=>[t[0]<e[0]?t[0]:e[0],t[1]<e[1]?t[1]:e[1],t[0]>e[2]?t[0]:e[2],t[1]>e[3]?t[1]:e[3]]),t)}if("GeometryCollection"===e.type)return e.geometries.reduce(r,t);if(e.type){if("FeatureCollection"===e.type)return e.features.reduce(r,t);if("Feature"===e.type&&e.geometry)return q.getGeoJSONExtent(e.geometry)}return t},Te=function(e){return!(-1!==e.indexOf(1/0)||-1!==e.indexOf(-1/0)||e[0]>e[2]||e[1]>e[3])},Ce=function(e,t,r,n){let o,i,a,s=Math.PI*(1/r-.5);n&&(s+=n/180*Math.PI);let l=[[]];for(let n=0;n<r;n++)o=s+2*n*Math.PI/r,i=e.x+t*Math.cos(o),a=e.y+t*Math.sin(o),l[0].push([i,a]);return l[0].push(l[0][0]),l},De=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{npoints:100,offset:10,properties:{}},r=[];for(let n=0;n<e.length-1;++n){const o=e[n],i=e[n+1],a=N()(o),s=N()(i);if(o[0]!==i[0]||o[1]!==i[1]){let e=(0,A.Z)(a,s,t);r=[...r,...e.geometry.coordinates]}}return r},Fe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e.length<=t?[S()(e),C()(e)]:e.length>t?[S()(e)].concat(q.transformArcsToLine(O()(e,t))):[]},Ie=e=>{let{coordinates:t,type:r}=e;switch(r){case"Polygon":return t.map((e=>e.map((e=>e.reverse()))));case"LineString":return t.map((e=>e.reverse()));case"Point":return t.reverse();default:return[]}},Me=e=>1===e.length?e[0].geometry:{type:"GeometryCollection",geometries:e.map((e=>{let{geometry:t}=e;return t}))},Le=(e,t)=>{if(S()(ee.filter((e=>e===t)))){const{extent:r,isIDL:n}=ne(e,t),o=(n?r:[r]).map((e=>{const t=[e[0],e[1]],r=[e[2],e[3]];return[[t,[t[0],r[1]],r,[r[0],t[1]],t]]}));if(n){let e=r[1][0]+(Math.abs(r[0][0]-r[0][2])+Math.abs(r[1][0]-r[1][2]))/2;return e=e>180?e-360:e,{type:"MultiPolygon",radius:0,projection:t,coordinates:o,extent:r,center:[e,(r[0][1]+r[0][3])/2]}}return{type:"Polygon",radius:0,projection:t,coordinates:o[0],extent:r,center:[(r[0]+r[2])/2,(r[1]+r[3])/2]}}const r=[e.minx,e.miny,e.maxx,e.maxy],n=[r[0],r[1]],o=[r[2],r[3]];return{type:"Polygon",radius:0,projection:t,coordinates:[[n,[n[0],o[1]],o,[o[0],n[1]],n]],extent:r,center:[(r[0]+r[2])/2,(r[1]+r[3])/2]}},Ae=function(){let{bounds:e,crs:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EPSG:4326";if(!e||!t)return null;const{extent:n}=q.getViewportGeometry(e,t);if(4===n.length)return q.reprojectBbox(n,t,r);const[o,i]=n.map((e=>e[2]-e[0]));return o>i?q.reprojectBbox(n[0],t,r):q.reprojectBbox(n[1],t,r)},Re=(e,t)=>{const r=2===e.split(":").length?e.split(":")[1]:"3857";return a().get(t||H(r),null,{timeout:2e3})},Ne=e=>{const t=e&&e.properties&&e.properties.name||e&&e.name||e&&e.properties&&e.properties.code||e;let r=t&&C()(t.split(":"));return"WGS 1984"===r||"WGS84"===r?"EPSG:4326":r?"EPSG:"+r:null},ke=e=>{const t=e.split(" "),r=parseFloat(t[0]),n=parseFloat(t[1]);return!isNaN(r)&&!isNaN(n)&&{x:r,y:n}||null},Ge=(e,t)=>{const r=t||"EPSG:3857",n=e&&u()(e)&&S()(e.filter((e=>e&&e.$&&e.$.SRS===r&&e.$.maxx&&e.$.maxy&&e.$.minx&&e.$.miny)).map((e=>e&&e.$&&q.reprojectBbox([parseFloat(e.$.minx),parseFloat(e.$.miny),parseFloat(e.$.maxx),parseFloat(e.$.maxy)],r,"EPSG:4326"))));return u()(n)&&{minx:n[0],miny:n[1],maxx:n[2],maxy:n[3]}||null},je=e=>!!o.default.defs(e),Be=e=>{let{lng:t=1,lat:r=1}=e;return{lat:r,lng:q.normalizeLng(t)}},$e=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=q.getNormalizedLatLon(e),i=J([o.lng,o.lat],"EPSG:4326",t.projection);if(!t.bbox)return!1;const a=q.reprojectBbox(t.bbox.bounds,t.bbox.crs,t.projection),s={left:0,right:0,top:0,bottom:0,...r},l={minx:a[0]+s.left*n,miny:a[1]+s.bottom*n,maxx:a[2]-s.right*n,maxy:a[3]-s.top*n},c=q.getViewportGeometry(l,t.projection),u=4===c.extent.length?[[...c.extent]]:[...c.extent];return S()(u.map((e=>i.x>=e[0]&&i.y>=e[1]&&i.x<=e[2]&&i.y<=e[3])).filter((e=>e)))||!1},Ue=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=q.getNormalizedLatLon(e),i=J([o.lng,o.lat],"EPSG:4326",t.projection),a={left:0,right:0,top:0,bottom:0,...r},s=(t.size.width-a.right-a.left)*n,l=(t.size.height-a.top-a.bottom)*n,c={minx:i.x-s/2-a.left*n,miny:i.y-l/2-a.bottom*n,maxx:i.x+s/2+a.right*n,maxy:i.y+l/2+a.top*n},u=q.getViewportGeometry(c,t.projection);if(4===u.extent.length)return{pos:J([u.extent[0]+t.size.width/2*n,u.extent[1]+t.size.height/2*n],t.projection,"EPSG:4326"),zoom:t.zoom,crs:"EPSG:4326"};if(Math.abs(u.extent[0][2]-u.extent[0][0])>Math.abs(u.extent[1][2]-u.extent[1][0])){const e=J([u.extent[0][2]-t.size.width/2*n,u.extent[0][3]-t.size.height/2*n],t.projection,"EPSG:4326");return{pos:{...e,x:e.x+(o.lng>e.x?360:0)},zoom:t.zoom,crs:"EPSG:4326"}}return{pos:J([u.extent[1][0]+t.size.width/2*n,u.extent[1][1]+t.size.height/2*n],t.projection,"EPSG:4326"),zoom:t.zoom,crs:"EPSG:4326"}},We=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.01;const i=u()(r)?r:[r.x,r.y];if(E()(i[0])&&!isNaN(i[0])&&E()(i[1])&&!isNaN(i[1])&&E()(t.x)&&!isNaN(t.x)&&E()(t.y)&&!isNaN(t.y)){const r=m()(e)?e([t.x,t.y>=n?t.y-n:t.y+n]):null,a=r&&(u()(r)?r:[r.x,r.y]);return u()(a)?Math.sqrt((i[0]-a[0])*(i[0]-a[0])+(i[1]-a[1])*(i[1]-a[1])):o}return o},qe=function(){let{roundingBehaviour:e="round",value:t=0,maximumFractionDigits:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===r&&Math[e]?Math[e](t):t},Ve=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=u()(e)?{x:e[0],y:e[1]}:e,o=u()(t)?{x:t[0],y:t[1]}:t,i={x:.5*(n.x+o.x),y:.5*(n.y+o.y)};return r?[i.x,i.y]:i},Ze=e=>d()(e)&&E()(e.x)&&E()(e.y)?[e.x,e.y]:e,He=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{lat:1,lng:1},t=arguments.length>1?arguments[1]:void 0;return(0,j.Z)(re(t),N()([e.lng,e.lat]))},Ke=(e,t)=>(0,G.Z)(e,t)||(0,j.Z)(e,t)||(0,j.Z)(t,e),ze=e=>{if(e){const t=e.split(":");if("urn"===t[0]&&("ogc"===t[1]||"x-ogc"===t[1])&&"def"===t[2]&&"crs"===t[3]&&(t[4]||t[6])){const e=t[4],r=t[6];return e?`${e}:${r}`:r}}return null},Xe=e=>{if(!e||"EPSG:"!==e.slice(0,5))return null;const t=e.slice(5),r=parseInt(t,10);if(r>=1024&&r<=32767)return e;const n=t.replace(" ","").replace(":","").toLowerCase(),o=oe[n];return o>=1024&&o<=32767?`EPSG:${o}`:null},Ye=(e,t)=>{let r=[e[0],e[1]],n=[t[0],t[1]];if(r[1]>n[1]){const e=r;r=n,n=e}if(r[0]>n[0]){const e=r.slice(),t=n.slice();r=[t[0],e[1]],n=[e[0],t[1]]}return[r[0],r[1],n[0],n[1]]},Qe=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"degrees",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;return e&&t?(0,D.Z)(e,t,{steps:n,units:r}):null},Je=()=>((0,U.u8)("projectionDefs")||[]).concat([{code:"EPSG:3857",extent:[-20026376.39,-20048966.1,20026376.39,20048966.1]},{code:"EPSG:4326",extent:[-180,-90,180,90]}]),et=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"EPSG:3857";return Je().find((t=>t.code===e))||{extent:[-20026376.39,-20048966.1,20026376.39,20048966.1]}},tt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.bbox?.crs||"EPSG:3857",[r,n,o,i]=et(t).extent,[a,s,l,c]=$()({type:"FeatureCollection",features:e.features||[]});return a>=r&&s>=n&&l<=o&&c<=i},rt=e=>{const t=e&&e.latlng||null;let r=null;return t&&(r=t&&Math.round(1e17*t.lng)/1e17,r-=360*Math.floor(r/360+.5)),[r,t&&t.lat]},nt=e=>{const t=parseFloat(e);return E()(t)&&180*t/Math.PI},ot=e=>{const t=parseFloat(e);return E()(t)&&t*Math.PI/180},it=(e,t,r)=>isNaN(e)&&e.length<1?0:e<t?t:e>r?r:parseFloat(e);q={setCrsLabels:ie,getUnits:ae,reproject:J,getProjectedBBox:se,createBBox:le,reprojectGeoJson:ce,lineIntersectPolygon:ue,normalizePoint:Y,normalizeLng:pe,reprojectBbox:de,getCompatibleSRS:me,getEquivalentSRS:he,getEPSGCode:fe,normalizeSRS:be,isAllowedSRS:we,getAvailableCRS:_e,filterCRSList:Ee,calculateAzimuth:Pe,calculateDistance:Oe,FORMULAS:V,extendExtent:xe,getGeoJSONExtent:Se,isValidExtent:Te,calculateCircleCoordinates:Ce,transformLineToArcs:De,transformArcsToLine:Fe,coordsOLtoLeaflet:Ie,mergeToPolyGeom:Me,getViewportGeometry:Le,getProjUrl:H,getExtentFromViewport:Ae,fetchProjRemotely:Re,parseURN:Ne,determineCrs:z,parseString:ke,getWMSBoundingBox:Ge,isSRSAllowed:je,getNormalizedLatLon:Be,isInsideVisibleArea:$e,centerToVisibleArea:Ue,calculateCircleRadiusFromPixel:We,roundCoord:qe,midpoint:Ve,pointObjectToArray:Ze,getExtentFromNormalized:ne,getPolygonFromExtent:re,isPointInsideExtent:He,isBboxCompatible:Ke,extractCrsFromURN:ze,crsCodeTable:oe,makeNumericEPSG:Xe,makeBboxFromOWS:Ye,getPolygonFromCircle:Qe,checkIfLayerFitsExtentForProjection:tt,getLonLatFromPoint:rt,getExtentForProjection:et,convertRadianToDegrees:nt,convertDegreesToRadian:ot,setValueBoundaries:it};const at=q},12226:(e,t,r)=>{"use strict";r.d(t,{B:()=>o});var n=r(62651);function o(e,t){return(0,n.U)(e)(t)}},96958:(e,t,r)=>{"use strict";r.d(t,{t3:()=>w,WQ:()=>E,dM:()=>P,Lo:()=>x,S9:()=>F,AV:()=>I,Sc:()=>M,a3:()=>L,IC:()=>A,wT:()=>R,ek:()=>N,Qc:()=>k,Cf:()=>j,dJ:()=>B,f1:()=>$});var n=r(6557),o=r.n(n),i=r(92742),a=r.n(i),s=r(19873),l=r.n(s),c=r(30998),u=r.n(c),p=r(27361),d=r.n(p),g=r(1469),m=r.n(g),h=r(14293),f=r.n(h),y=r(47037),v=r.n(y),b=r(78889);const w=(e,t,r)=>{const n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return u()(e,(e=>e<=r&&r<e+t))}(t,r,e);return-1===n?n:n*r+e-t[n]},_={id:"empty_row",get:()=>{}},E=function(e,t){return t[w(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3?arguments[3]:void 0)]||{..._}},P=(e,t)=>t[e],O=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;const n=u()(e,t);return n>=0?e.map(((e,t)=>t===n?r:e)):[...e,r]},x=e=>((0,b.getFeatureTypeProperties)(e)||[]).filter((e=>!(0,b.isGeometryType)(e))),S=function(e){let t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map((n=>t<=n&&n<=r?0:Math.abs(n-e))).reduce(((e,t,r,n)=>t>n[e]&&r||e),0)},T=(e,t)=>t.filter(((t,r)=>r!==e)),C=(e,t,r)=>e.filter(((e,n)=>n<t||n>=t+r)),D=(e,t,r,n)=>{let o,i;for(let i=e;i<=t&&void 0===o;i++)-1===w(i*n,r,n)&&(o=i);for(let o=t;o>=e&&void 0===i;o--)-1===w(o*n,r,n)&&(i=o);return[o,i].filter((e=>void 0!==e))},F=(e,t,r)=>{let{startPage:n,endPage:o}=e;const i=D(n,o,t,r),a=i[1]-i[0]+1;return{startIndex:i[0]*r,maxFeatures:a*r}},I=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{editable:r=!1,sortable:n=!0,resizable:o=!0,filterable:i=!0,defaultSize:a=200}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{getEditor:s=(()=>{}),getFilterRenderer:l=(()=>{}),getFormatter:c=(()=>{})}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return x(e).filter((e=>!(t[e.name]&&t[e.name].hide))).map((e=>({sortable:n,key:e.name,width:t[e.name]&&t[e.name].width||a||void 0,name:t[e.name]&&t[e.name].label||e.name,resizable:o,editable:r,filterable:i,editor:s(e),formatter:c(e),filterRenderer:l(e,e.name)})))},M=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>{};const i=(0,b.findGeometryProperty)(r);return e.map((e=>({...e,events:e.events&&Object.keys(e.events).reduce(((o,i)=>({...o,[i]:(o,a)=>e.events[i](t(a.rowIdx),a,r,n)})),{}),..."geometry"===e.key&&i?{filterRenderer:o({...i,localType:"geometry"},i.name),filterable:!0,geometryPropName:i.name}:{}})))},L=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return Object.keys(e).reduce(((i,a)=>({...i,[a]:function(){for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return e[a](...s,t,r,n,o)}})),{})},A=(e,t)=>!!(0,b.getPropertyDesciptor)(e,t),R=(e,t,r)=>{return(0,b.isValidValueForPropertyName)(e,(o=r,"geometry"===(n=t)?(e=>d()((0,b.findGeometryProperty)(e),"name"))(o):n),r);var n,o},N=(e,t,r)=>n=>t.length>0?n._new:!e||e&&!!r[n.id],k=function(e){return((e,t)=>{const r=Object.keys(t).filter((e=>"geometry"!==e)).reduce(((e,r)=>({...e,[r]:t[r]})),{}),n=Object.keys(t).filter((e=>"geometry"===e)).reduce(((e,r)=>({...e,[r]:t[r]})),{});return{...e,...n,properties:{...e&&e.properties||{},...r}}})(e,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})[e.id]||{})},G=/\s*(!==|!=|<>|<=|>=|===|==|=|<|>)?\s*(-?\d*\.?\d*)\s*/,j=(e,t)=>{if("string"===t)return{newVal:a()(e),operator:"ilike"};const r=G.exec(e);let n,o="=";return r?(o=r[1]||"=","!=="===o|"!="===o?o="<>":"==="===o|"=="===o&&(o="="),n=parseFloat(r[2])):n=parseFloat(e,10),{newVal:n,operator:o}},B=function(){let{attribute:e,operator:t,value:r,type:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=i.groupFields?.filter((t=>e!==t.id&&1!==t.id))||[];if(("string"===n||"number"===n)&&v()(r)&&-1!==r?.indexOf(",")){const t=r?.split(",").filter(o())||[],s=i.filterFields?.filter((t=>e!==t.attribute))||[];return{...i,groupFields:a.concat([{id:e,logic:"OR",groupId:1,index:0}]),filterFields:s.concat(t.map((t=>{let{operator:r,newVal:o}=j(t,n);return{attribute:e,rowId:Date.now(),type:n,groupId:e,operator:r,value:o}}))),spatialField:i.spatialField,spatialFieldOperator:i.spatialFieldOperator}}return{...i,groupFields:a.concat([{id:1,logic:"AND",groupId:1,index:0}]),filterFields:"geometry"===n?i.filterFields:f()(r)?(i.filterFields||[]).filter((t=>t.attribute!==e)):O(i.filterFields||[],{attribute:e},{attribute:e,rowId:Date.now(),type:n,groupId:1,operator:t,value:r}),spatialField:"geometry"===n?r:i.spatialField,spatialFieldOperator:m()(r)?"OR":""}},$=function(e){let{endPage:t,startPage:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{pages:n,features:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{size:i,maxStoredPages:a,startIndex:s}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c=D(r,t,n,i),u=c[1]-c[0]+1;let p=d()(e,"features",[]);p.length!==u*i&&(p=p.concat(l()(Array(u*i-p.length>0?u*i-p.length:p.length),!1)));let g=n,m=o;const h=g.length+u-Math.max(a,t-r+1);if(h>0){const e=r*i,a=t*i,s=e+(a-e)/2;for(let t=0;t<h;t++){const t=S(s,n,e,a),r=t*i;g=T(t,g),m=C(o,r,i)}}let f=[];for(let e=0;e<u;e++)f.push(s+i*e);return{pages:g.concat(f),features:m.concat(p)}}},47805:(e,t,r)=>{"use strict";r.r(t),r.d(t,{cqlToOgc:()=>T,escapeCQLStrings:()=>F,checkOperatorValidity:()=>I,isCrossLayerFilterValid:()=>M,setupCrossLayerFilterDefaults:()=>A,ogcDateField:()=>k,ogcListField:()=>G,ogcStringField:()=>j,ogcBooleanField:()=>B,ogcArrayField:()=>$,ogcNumberField:()=>U,processOGCSimpleFilterField:()=>W,toOGCFilterParts:()=>Z,toOGCFilter:()=>H,processOGCFilterGroup:()=>K,processOGCFilterFields:()=>z,getGmlPointElement:()=>X,getGmlPolygonElement:()=>Y,getGmlLineStringElement:()=>Q,processOGCGeometry:()=>J,processOGCSpatialFilter:()=>ee,getGetFeatureBase:()=>te,getCrossLayerCqlFilter:()=>re,processOGCCrossLayerFilter:()=>ne,toCQLFilter:()=>oe,processCQLFilterGroup:()=>ie,getCQLGeometryElement:()=>ae,processCQLSpatialFilter:()=>se,cqlDateField:()=>le,cqlArrayField:()=>ce,processCqlWildcardsold:()=>ue,processCqlWildcards:()=>pe,cqlStringField:()=>de,cqlBooleanField:()=>ge,cqlNumberField:()=>me,findSubGroups:()=>he,cqlListField:()=>fe,processCQLFilterFields:()=>ye,processCQLSimpleFilterField:()=>ve,getOgcAllPropertyValue:()=>be,getSLD:()=>we,getWFSFilterData:()=>_e,isLikeOrIlike:()=>Ee,isFilterEmpty:()=>Pe,isFilterValid:()=>Oe,composeAttributeFilters:()=>Se,reprojectFilterInNativeCrs:()=>Te,normalizeFilterCQL:()=>Ce,createFeatureFilter:()=>De,mergeFiltersToOGC:()=>Fe});var n=r(65692),o=r(78889),i=r(99321),a=r(89291),s=r(89737),l=r(2245),c=r.n(l),u=r(90183),p=r(27361),d=r.n(p),g=r(14293),m=r.n(g),h=r(52353),f=r.n(h),y=r(1469),v=r.n(y),b=r(13311),w=r.n(b),_=r(30998),E=r.n(_),P=r(47037),O=r.n(P),x=r(85564),S=r.n(x);const T=(e,t)=>{const r=c()(t);return(0,s.Z)(r)((0,a.read)(e))};let C;const D=e=>{const t=e.match(/(?<!!)[*.]/);return!t?.length},F=e=>e&&e.replace?e.replace(/\'/g,"''"):e,I=(e,t)=>!m()(e)&&"isNull"!==t||!f()(e)&&"isNull"===t,M=e=>d()(e,"operation",!1)&&d()(e,"collectGeometries.queryCollection.typeName",!1)&&d()(e,"collectGeometries.queryCollection.geometryName",!1),L=e=>'"'+e+'"',A=e=>{if(!e||!d()(e,"collectGeometries.queryCollection"))return null;if(d()(e,"collectGeometries.queryCollection")){const t=(d()(e,"collectGeometries.queryCollection.filterFields")||[]).filter((e=>I(e.value,e.operator))),r=d()(e,"collectGeometries.queryCollection.groupFields")||[{id:1,index:0,logic:"OR"}];return{...e,collectGeometries:{...e.collectGeometries,queryCollection:{...e.collectGeometries.queryCollection,filterFields:t,groupFields:r}}}}return null},R=e=>e?"1.0"===e?"1.0.0":"1.1"===e?"1.1.0":e:"2.0",N={ogc:{startTag:"<ogc:PropertyName>",endTag:"</ogc:PropertyName>"},fes:{startTag:"<fes:ValueReference>",endTag:"</fes:ValueReference>"}},k=(e,t,r,n)=>{let o;if("><"===t){if(r.startDate&&r.endDate){const a=r.startDate.toISOString?r.startDate.toISOString():r.startDate,s=r.endDate.toISOString?r.endDate.toISOString():r.endDate;o=i.ogcComparisonOperators[t](n,N[n].startTag+e+N[n].endTag+"<"+n+":LowerBoundary><"+n+":Literal>"+a+"</"+n+":Literal></"+n+":LowerBoundary><"+n+":UpperBoundary><"+n+":Literal>"+s+"</"+n+":Literal></"+n+":UpperBoundary>")}}else if(r.startDate){const a=r.startDate.toISOString?r.startDate.toISOString():r.startDate;o=i.ogcComparisonOperators[t](n,N[n].startTag+e+N[n].endTag+"<"+n+":Literal>"+a+"</"+n+":Literal>")}return o},G=(e,t,r,n)=>{let o;return m()(r)||(o=i.ogcComparisonOperators[t](n,N[n].startTag+e+N[n].endTag+"<"+n+":Literal>"+r+"</"+n+":Literal>")),o},j=(e,t,r,n)=>{let o;return I(r,t)&&(o="isNull"===t?i.ogcComparisonOperators[t](n,N[n].startTag+e+N[n].endTag):"="===t?i.ogcComparisonOperators[t](n,N[n].startTag+e+N[n].endTag+"<"+n+":Literal>"+r+"</"+n+":Literal>"):i.ogcComparisonOperators[t](n,N[n].startTag+e+N[n].endTag+"<"+n+":Literal>"+((e,t)=>t(e)?"*"+e+"*":e)(r,D)+"</"+n+":Literal>")),o},B=(e,t,r,n)=>{let o="";return I(r,t)&&"="===t&&""!==r&&(o=i.ogcComparisonOperators[t](n,N[n].startTag+e+N[n].endTag+"<"+n+":Literal>"+r+"</"+n+":Literal>")),o},$=(e,t,r,n)=>{let o="";return I(r,t)&&"contains"===t&&""!==r&&(o=`<${n}:PropertyIsEqualTo>\n                <${n}:Function name="InArray">\n                    <${n}:Literal>${r}</${n}:Literal>\n                    <${n}:PropertyName>${e}</${n}:PropertyName>\n                </${n}:Function>\n                <${n}:Literal>true</${n}:Literal>\n            </${n}:PropertyIsEqualTo>`),o},U=(e,t,r,n)=>{let o;if("><"===t)m()(r)||null===r.lowBound||void 0===r.lowBound||null!==r.upBound&&void 0!==r.upBound?m()(r)||null===r.upBound||void 0===r.upBound||null!==r.lowBound&&void 0!==r.lowBound?m()(r)||null===r.upBound||void 0===r.upBound||null===r.lowBound||void 0===r.lowBound||(o=i.ogcComparisonOperators[t](n,N[n].startTag+e+N[n].endTag+"<"+n+":LowerBoundary><"+n+":Literal>"+r.lowBound+"</"+n+":Literal></"+n+":LowerBoundary><"+n+":UpperBoundary><"+n+":Literal>"+r.upBound+"</"+n+":Literal></"+n+":UpperBoundary>")):o=i.ogcComparisonOperators["<="](n,N[n].startTag+e+N[n].endTag+"<"+n+":Literal>"+r.upBound+"</"+n+":Literal>"):o=i.ogcComparisonOperators[">="](n,N[n].startTag+e+N[n].endTag+"<"+n+":Literal>"+r.lowBound+"</"+n+":Literal>");else{let a=m()(r)||null===r.lowBound||void 0===r.lowBound?r:r.lowBound;m()(a)||(o=i.ogcComparisonOperators[t](n,N[n].startTag+e+N[n].endTag+"<"+n+":Literal>"+a+"</"+n+":Literal>"))}return o},W=(e,t)=>{let r="";switch(e.type){case"date":r=k(e.attribute,e.operator,e.values,t);break;case"array":r=$(e.attribute,e.operator,e.values,t);break;case"number":r=U(e.attribute,e.operator,e.values,t);break;case"string":r=j(e.attribute,e.operator,e.values,t);break;case"boolean":r=B(e.attribute,e.operator,e.values,t);break;case"list":if(e.values&&e.values.length>0){const n="OR";r=e.values.reduce(((r,n)=>{let o=null===n||"null"===n?"isNull":"=";return r+j(e.attribute,o,n,t)}),""),r=i.ogcLogicalOperators[n](t,r)}}return r},q=function(){let{typeName:e,geometryName:t,cqlFilter:r="INCLUDE"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return`queryCollection('${e}', '${t}','${F(r)}')`},V=e=>`collectGeometries(${e})`,Z=function(e,t,r){let n,a,s,l,c=[];if(e.filterFields&&e.filterFields.length>0)n=e.groupFields&&e.groupFields.length>0?C.processOGCFilterGroup(e.groupFields[0],e,r):C.processOGCFilterFields(null,e,r),""!==n&&c.push(n);else if(e.simpleFilterFields&&e.simpleFilterFields.length>0){const t="AND",n=i.ogcLogicalOperators[t](r,e.simpleFilterFields.map((e=>W(e,r))).join(""));c.push(n)}if(v()(e.spatialField)?(l=w()(e.spatialField,(e=>"BBOX"===e.operation)),l||(s=e.spatialField)):e.spatialField&&("BBOX"===e.spatialField.operation?l=e.spatialField:s=[e.spatialField]),l){if(v()(l.geometry&&l.geometry.extent[0])){const e="OR",n=l.geometry.extent.reduce(((e,n)=>{let o=Object.assign({},l);return l.geometry.extent=n,e+C.processOGCSpatialFilter(t,o,r)}),"");a=i.ogcLogicalOperators[e](r,n)}c.push(a)}else if(s&&(s=s.filter((e=>e&&e.geometry&&e.operation)),s.length>0)){const n=s.map((e=>C.processOGCSpatialFilter(t,e,r))).join("");a=s.length>1?i.ogcLogicalOperators[e.spatialFieldOperator||"AND"](r,n):n,c.push(a)}if(e.crossLayerFilter&&e.crossLayerFilter.operation){let t={...e.crossLayerFilter,attribute:e.crossLayerFilter.attribute};Array.isArray()?t.forEach((e=>c.push(C.processOGCCrossLayerFilter(e,r)))):c.push(C.processOGCCrossLayerFilter(t,r))}return e.options&&e.options.cqlFilter&&c.push(T(e.options.cqlFilter,{filterNS:r,wfsVersion:t,gmlVersion:(0,o.wfsToGmlVersion)(t)})),c},H=function(e,t,r){let n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"EPSG:4326";try{n=t instanceof Object?t:JSON.parse(t)}catch(e){return e}const c=R(r||"2.0"),u="2.0"===c?"fes":"ogc";let p=C.getGetFeatureBase(c,n.pagination,i,a,t&&t.options),d=C.toOGCFilterParts(n,c,u),g="";return d.length>0&&(g="<"+u+":Filter>",1===d.length?g+=d[0]:(g+="<"+u+":And>",d.forEach((e=>{g+=e})),g+="</"+u+":And>"),g+="</"+u+":Filter>"),p+=`<wfs:Query ${"2.0"===c?"typeNames":"typeName"}="${e}" ${"native"!==l&&`srsName="${l}"`||""}>`,p+=g,s&&(p+=s.map((e=>N[u].startTag+e+N[u].endTag)).join("")),o&&o.sortBy&&o.sortOrder&&(p+="<"+u+":SortBy><"+u+":SortProperty>"+N[u].startTag+o.sortBy+N[u].endTag+"<"+u+":SortOrder>"+o.sortOrder+"</"+u+":SortOrder></"+u+":SortProperty></"+u+":SortBy>"),p+="</wfs:Query></wfs:GetFeature>",p},K=function(e,t,r){let n=C.processOGCFilterFields(e,t,r),o=C.findSubGroups(e,t.groupFields);return o.length>0&&o.forEach((e=>{n+=C.processOGCFilterGroup(e,t,r)})),""!==n?i.ogcLogicalOperators[e.logic](r,n):""},z=function(e,t,r){let n=e?t.filterFields.filter((t=>t.groupId===e.id&&I(t.value,t.operator))):t.filterFields.filter((e=>I(e.value,e.operator))),o=[];return n.length?(o=n.reduce(((e,t)=>{let n;switch(t.type){case"date":case"date-time":case"time":n=k(t.attribute,t.operator,t.value,r);break;case"number":n=U(t.attribute,t.operator,t.value,r);break;case"string":n=j(t.attribute,t.operator,t.value,r);break;case"boolean":n=B(t.attribute,t.operator,t.value,r);break;case"list":n=G(t.attribute,t.operator,t.value,r);break;case"array":n=$(t.attribute,t.operator,t.value,r)}return"isNull"===t.operator&&(n=j(t.attribute,t.operator,t.operator,r)),n&&e.push(n),e}),[]),o.join("")):""},X=(e,t,r)=>(0,n.pointElement)(e,t,(0,o.wfsToGmlVersion)(r)),Y=(e,t,r)=>(0,n.polygonElement)(e,t,(0,o.wfsToGmlVersion)(r)),Q=(e,t,r)=>(0,n.lineStringElement)(e,t,(0,o.wfsToGmlVersion)(r)),J=(e,t)=>(0,n.processOGCGeometry)((0,o.wfsToGmlVersion)(e),t),ee=function(e,t,r){if(t.collectGeometries)return C.processOGCCrossLayerFilter(t);let a=N[r].startTag+t.attribute+N[r].endTag;switch(t.operation){case"INTERSECTS":case"DWITHIN":case"WITHIN":case"CONTAINS":a+=(0,n.processOGCGeometry)((0,o.wfsToGmlVersion)(e),t.geometry),"DWITHIN"===t.operation&&(a+="<"+r+':Distance units="m">'+(t.geometry.distance||0)+"</"+r+":Distance>");break;case"BBOX":{let e=t.geometry.extent[0]+" "+t.geometry.extent[1],r=t.geometry.extent[2]+" "+t.geometry.extent[3];a+='<gml:Envelope srsName="'+t.geometry.projection+'"><gml:lowerCorner>'+e+"</gml:lowerCorner><gml:upperCorner>"+r+"</gml:upperCorner></gml:Envelope>";break}}return i.ogcSpatialOperators[t.operation](r,a)},te=function(e,t,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=R(e),a="<wfs:GetFeature ";switch(a+=n?'outputFormat="'+n+'" ':"",a+=t&&(t.startIndex||0===t.startIndex)?'startIndex="'+t.startIndex+'" ':"",a+=o.viewParams?` viewParams="${o.viewParams}" `:"",i){case"1.0.0":a+=t&&t.maxFeatures?'maxFeatures="'+t.maxFeatures+'" ':"",a=r?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" outputFormat="GML2" xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(o.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/WFS-basic.xsd"')+">";break;case"1.1.0":a+=t&&t.maxFeatures?'maxFeatures="'+t.maxFeatures+'" ':"",a=r?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(o.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd"')+">";break;default:a+=t&&t.maxFeatures?'count="'+t.maxFeatures+'" ':"",a=r&&!t?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" xmlns:wfs="http://www.opengis.net/wfs/2.0" xmlns:fes="http://www.opengis.net/fes/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(o.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd"')+">"}return a},re=e=>d()(e,"collectGeometries.queryCollection.cqlFilter")||(d()(e,"collectGeometries.queryCollection.filterFields")||[]).length>0&&(d()(e,"collectGeometries.queryCollection.groupFields")||[]).length>0&&C.toCQLFilter(e.collectGeometries.queryCollection)||"INCLUDE",ne=function(e,t){let r=t||"ogc",n=N[r].startTag+e.attribute+N[r].endTag;if(e.collectGeometries){const t=C.getCrossLayerCqlFilter(e);n+=`<ogc:Function name="collectGeometries"><ogc:Function name="queryCollection"><ogc:Literal>${e.collectGeometries.queryCollection.typeName}</ogc:Literal><ogc:Literal>${e.collectGeometries.queryCollection.geometryName}</ogc:Literal><ogc:Literal><![CDATA[${t}]]></ogc:Literal></ogc:Function></ogc:Function>`}return"DWITHIN"===e.operation&&(n+="<"+r+':Distance units="m">'+(e.distance||0)+"</"+r+":Distance>"),i.ogcSpatialOperators[e.operation](r,n)},oe=function(e){let t;try{t=e instanceof Object?e:JSON.parse(e)}catch(e){return e}let r,n,o=[];if(t.filterFields&&t.filterFields.length>0)r=C.processCQLFilterGroup(t.groupFields[0],t),r&&o.push(r);else if(t.simpleFilterFields&&t.simpleFilterFields.length>0){let e=t.simpleFilterFields.reduce(((e,t)=>{let r=e,n=C.processCQLSimpleFilterField(t);return!1!==n&&(r=e.length>0?e+" AND ("+n+")":"("+n+")"),r}),"");e=e.length>0?e:"INCLUDE",o.push(e)}if(t.spatialField&&(n=C.processCQLSpatialFilter(t),n&&o.push(n)),t.crossLayerFilter){const{crossLayerFilter:e}=t,{operation:r}=e,n=e.attribute,i=e.collectGeometries&&e.collectGeometries.queryCollection;if(r&&n&&i){const{typeName:t,geometryName:a}=i,s=C.getCrossLayerCqlFilter(e),l=V(q({typeName:t,geometryName:a,cqlFilter:s}));o.push(`${r}(${n},${l})`)}}return o.length?"("+(o.length>1?o.join(") AND ("):o[0])+")":null},ie=function(e,t){const r="NOR"===e.logic?{...e,logic:"AND",negateAll:!0}:e;let n=C.processCQLFilterFields(r,t),o=C.findSubGroups(r,t.groupFields);if(o.length>0){const e=o.map((e=>(r.negateAll?"NOT (":"(")+C.processCQLFilterGroup(e,t)+")")).join(" "+r.logic+" ");return n?[n,e].join(" "+r.logic+" "):e}return n},ae=function(e,t){let r=t+"(";switch(t){case"Point":r+=e.join(" ");break;case"MultiPoint":e.forEach(((t,n)=>{r+=t.join(" "),r+=n<e.length-1?", ":""}));break;case"Polygon":e.forEach(((t,o)=>{r+="(";let i=(0,n.closePolygon)(t).map((e=>e[0]+" "+e[1]));r+=i.join(", "),r+=")",r+=o<e.length-1?", ":""}));break;case"MultiPolygon":e.forEach(((t,o)=>{r+="(",t.forEach(((e,o)=>{r+="(";let i=(0,n.closePolygon)(e).map((e=>e[0]+" "+e[1]));r+=i.join(", "),r+=")",r+=o<t.length-1?", ":""})),r+=")",r+=o<e.length-1?", ":""}))}return r+=")",r},se=function(e){let t=(v()(e.spatialField)?e.spatialField:[e.spatialField]).filter((e=>e&&e.geometry&&e.operation)),r="";return t.forEach(((n,o)=>{if(r+=n.operation+'("'+n.attribute+'",',n.collectGeometries&&n.collectGeometries.queryCollection)r+=V(q(n.collectGeometries.queryCollection));else{let e=n.geometry.projection||"";e=2===e.split(":").length?"SRID="+e.split(":")[1]+";":"",r+=e+C.getCQLGeometryElement(n.geometry.coordinates,n.geometry.type)}r+=")",o<t.length-1&&(r+=` ${e.spatialFieldOperator||"AND"} `)})),r},le=function(e,t,r){let n;return"><"===t?r.startDate&&r.endDate&&(n="("+e+">='"+(r.startDate.toISOString?r.startDate.toISOString():r.startDate)+"' AND "+e+"<='"+(r.endDate.toISOString?r.endDate.toISOString():r.endDate)+"')"):r.startDate&&(n=e+t+"'"+(r.startDate.toISOString?r.startDate.toISOString():r.startDate)+"'"),n},ce=function(e,t,r){return"contains"===t?`InArray(${r},${e})=true`:""},ue=function(e,t){const r=F(e),n=e.startsWith("*"),o=e.endsWith("*"),i=n&&!o,a=o&&!n,s=r.replace(/^\*+|\*+$/g,"");switch(t){case"ilike":case"like":const e="ilike"===t?s.toLowerCase():s;return i?"'%"+e+"'":a?"'"+e+"%'":"'%"+e+"%'";default:return"'"+r+"'"}},pe=function(e,t){let r=!1;const n=F(e),o=n.replaceAll(/[%_*.!]/g,((e,t,n)=>{if(["%","_"].includes(e))return"%"===e?"\\%":"\\_";const o=t>0?n.charAt(t-1):"",i=t<n.length-1?n.charAt(t+1):"";return["*","."].includes(e)&&"!"!==o?(r=!0,"*"===e?"%":"_"):"!"===e&&["*","."].includes(i)?"":e}));switch(t){case"ilike":case"like":const e="ilike"===t?o.toLowerCase():o;return r?"'"+e+"'":"'%"+e+"%'";default:return"'"+n+"'"}},de=function(e,t,r){let n;const o=L(e);if(!m()(r)){const e=pe(r,t);n="isNull"===t?"isNull("+o+")=true":["<>","="].includes(t)?o+t+e:"ilike"===t?"strToLowerCase("+o+") LIKE "+e:o+" LIKE "+e}return n},ge=function(e,t,r){let n="";return m()(r)||""===r||"="!==t||(n='"'+e+'"'+t+"'"+r+"'"),n},me=function(e,t,r){let n;const o=L(e);if("><"===t)m()(r)||null===r.lowBound||void 0===r.lowBound||null!==r.upBound&&void 0!==r.upBound?m()(r)||null===r.upBound||void 0===r.upBound||null!==r.lowBound&&void 0!==r.lowBound?m()(r)||null===r.upBound||void 0===r.upBound||null===r.lowBound||void 0===r.lowBound||(n="("+o+">='"+r.lowBound+"' AND "+o+"<='"+r.upBound+"')"):n="("+o+"<='"+r.upBound+"')":n="("+o+">='"+r.lowBound+"')";else{let e=m()(r)||null===r.lowBound||void 0===r.lowBound?r:r.lowBound;m()(e)||(n=o+" "+t+" '"+e+"'")}return n},he=function(e,t){return t.filter((t=>t.groupId===e.id))},fe=function(e,t,r){return C.cqlStringField(e,t,r)},ye=function(e,t){let r=t.filterFields.filter((t=>t.groupId===e.id)),n=[];return r&&(r.forEach((t=>{let r;switch(t.type){case"date":case"time":case"date-time":r=C.cqlDateField(t.attribute,t.operator,t.value);break;case"number":r=C.cqlNumberField(t.attribute,t.operator,t.value);break;case"string":r=C.cqlStringField(t.attribute,t.operator,t.value);break;case"boolean":r=C.cqlBooleanField(t.attribute,t.operator,t.value);break;case"list":r=C.cqlListField(t.attribute,t.operator,t.value);break;case"array":r=C.cqlArrayField(t.attribute,t.operator,t.value)}r&&n.push(e.negateAll?"NOT ("+r+")":r)})),n=n.join(" "+e.logic+" ")),n},ve=function(e){let t=!1;switch(e.type){case"date":t=C.cqlDateField(e.attribute,e.operator,e.values);break;case"number":t=C.cqlNumberField(e.attribute,e.operator,e.values);break;case"string":t=C.cqlStringField(e.attribute,e.operator,e.values);break;case"boolean":t=C.cqlBooleanField(e.attribute,e.operator,e.values);break;case"list":if(e.values.length!==e.optionsValues.length){let r=!1,n=e.values.reduce(((e,t)=>(null===t||"null"===t?r=!0:e.push("'"+t+"'"),e)),[]);t=n.length>0?e.attribute+" IN("+n.join(",")+")":t,r&&(t=t?t+" OR isNull("+e.attribute+")=true":"isNull("+e.attribute+")=true")}}return!!(t&&t.length>0)&&t},be=function(e,t){return`<wfs:GetPropertyValue service="WFS" valueReference='${t}'\n                version="2.0" xmlns:fes="http://www.opengis.net/fes/2.0"\n                xmlns:gml="http://www.opengis.net/gml/3.2"\n                xmlns:wfs="http://www.opengis.net/wfs/2.0"\n                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n                xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd">\n                    <wfs:Query typeNames="${e}"/>\n            </wfs:GetPropertyValue>`},we=function(e,t,r){let n=C.toOGCFilter(e,t,r),o=n.search(`<${C.nsplaceholder}:Filter>`);if(-1!==o){let e=n.search("</wfs:Query>");n=n.substr(o,e-o)}else n="";return`<StyledLayerDescriptor version="1.0.0"\n            xsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:gml="http://www.opengis.net/gml" xmlns:gsml="urn:cgi:xmlns:CGI:GeoSciML:2.0" xmlns:sld="http://www.opengis.net/sld" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><NamedLayer><Name>${e}</Name><UserStyle><FeatureTypeStyle><Rule >${n}<PointSymbolizer><Graphic><Mark><WellKnownName>circle</WellKnownName><Fill><CssParameter name="fill">#0000FF</CssParameter></Fill></Mark><Size>20</Size></Graphic></PointSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer></StyledLayerDescriptor>`},_e=(e,t)=>{let r;return r="string"==typeof e?e:"OGC"===e.filterType?C.toOGCFilter(e.featureTypeName,{...e,options:t},e.ogcVersion,e.sortOptions,e.hits):C.toCQLFilter(e),r},Ee=e=>"ilike"===e||"like"===e,Pe=function(){let{filterFields:e=[],spatialField:t={},crossLayerFilter:r={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!(e.filter((e=>e.value||0===e.value)).length>0||t.geometry||r&&r.attribute&&r.operation)},Oe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.filterFields&&e.filterFields.length>0||e.simpleFilterFields&&e.simpleFilterFields.length>0||e.spatialField&&e.spatialField.geometry&&e.spatialField.operation||v()(e.spatialField)&&E()(e.spatialField,(e=>e.operation&&e.geometry))>-1||e.crossLayerFilter&&e.crossLayerFilter.collectGeometries&&e.crossLayerFilter.collectGeometries.queryCollection&&e.crossLayerFilter.collectGeometries.queryCollection.geometryName&&e.crossLayerFilter.collectGeometries.queryCollection.typeName},xe=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return S()(t.filter((e=>!!e)))},Se=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"AND",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"AND";const n={id:(new Date).getTime(),index:0,logic:t};return e.reduce((function(e){let{filterFields:t=[],groupFields:o=[],spatialField:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;return{groupFields:e.groupFields.concat(t.length>0&&o.map((e=>({groupId:0===e.index&&n.id||`${e.groupId}_${a}`,logic:e.logic,id:`${e.id}_${a}`,index:1+e.index})))||[]),filterFields:e.filterFields.concat(t.map((e=>({...e,groupId:`${e.groupId}_${a}`})))),spatialField:xe(e.spatialField,i),spatialFieldOperator:r}}),{groupFields:[n],filterFields:[],spatialField:[]})},Te=(e,t)=>{const r=e.spatialField.geometry.projection,n=e.spatialField.geometry.center,o=e.spatialField.geometry.radius,i=(0,u.reprojectGeoJson)(e.spatialField.geometry,e.spatialField.geometry.projection||"EPSG:3857",t).coordinates,a=n&&(e=>{let{x:t,y:r}=e;return[t,r]})((0,u.reproject)(n,r,t)),s=o&&(0,u.reproject)([o,0],r,t).x;return{...e,spatialField:{...e.spatialField,geometry:{...e.spatialField.geometry,center:a,radius:s,coordinates:i,projection:t}}}},Ce=(e,t)=>e&&e.spatialField&&e.spatialField.geometry&&e.spatialField.geometry.coordinates&&e.spatialField.geometry.coordinates[0]&&(e.spatialField.projection||"EPSG:3857")!==t?t?C.reprojectFilterInNativeCrs(e,t):{...e,spatialField:void 0}:e,De=e=>t=>{if(!e)return!0;const{filterFields:r=[]}=e;for(let e=0;e<r.length;e++){if(void 0===t.properties[r[e].attribute])return!1;if("string"===r[e].type&&!t.properties[r[e].attribute].toLowerCase().includes(r[e].value.toLowerCase()))return!1;if("boolean"===r[e].type&&!t.properties[r[e].attribute].toLowerCase().includes(r[e].value.toLowerCase()))return!1;if("number"===r[e].type&&parseFloat(r[e].attribute)!==parseFloat(t.properties[r[e].attribute]))return!1;if("date"===r[e].type){let n=new Date(t.properties[r[e].attribute]),o=new Date(r[e].value.startDate);if(n.getFullYear()!==o.getFullYear()||n.getMonth()!==o.getMonth()||n.getDay()!==o.getDay())return!1}}return!0},Fe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{nsPlaceholder:t="ogc",ogcVersion:r="2.0",addXmlnsToRoot:n=!1,xmlnsToAdd:i=[]}=e,l=c()({filterNS:t,wfsVersion:r,gmlVersion:(0,o.wfsToGmlVersion)(r)}),u=(0,s.Z)(l);for(var p=arguments.length,d=new Array(p>1?p-1:0),g=1;g<p;g++)d[g-1]=arguments[g];const m=l.filter(l.and(...S()(d.filter((e=>!!e&&(O()(e)||Oe(e)&&!e.disabled))).map((e=>O()(e)?[u((0,a.read)(e))]:Z(e,r,t))))));if(n){const e=m.indexOf(">");return`${m.slice(0,e)}${i.length>0?` ${i.join(" ")}`:""}${m.slice(e)}`}return m};C={processOGCFilterGroup:K,processOGCFilterFields:z,processOGCCrossLayerFilter:ne,getGetFeatureBase:te,toOGCFilterParts:Z,findSubGroups:he,toCQLFilter:oe,getCrossLayerCqlFilter:re,processCQLFilterGroup:ie,processCQLSimpleFilterField:ve,processCQLSpatialFilter:se,processCQLFilterFields:ye,getCQLGeometryElement:ae,cqlStringField:de,cqlDateField:le,cqlNumberField:me,cqlArrayField:ce,cqlBooleanField:ge,cqlListField:fe,toOGCFilter:H,reprojectFilterInNativeCrs:Te,processOGCSpatialFilter:ee,createFeatureFilter:De,mergeFiltersToOGC:Fe}},61868:(e,t,r)=>{"use strict";r.d(t,{t8:()=>g,zN:()=>m,qC:()=>h,vy:()=>f,cc:()=>y,z6:()=>v});var n=r(27361),o=r.n(n),i=r(30998),a=r.n(i),s=r(28252),l=r.n(s),c=r(17664),u=r.n(c),p=r(36102),d=r.n(p);const g=l(),m=u(),h=d(),f=(e,t,r,n)=>{const i=e?o()(n,e)||[]:n,s=a()(i,r);if(s>=0){let r=i.slice();return r.splice(s,1,t),e?g(e,r,n):r}return e?g(e,i.concat(t),n):i.concat(t)},y=(e,t,r,n)=>{const i=e?o()(n,e)||[]:n,s=a()(i,r);if(s>=0){let r=i.slice();return r.splice(s,1,t),e?g(e,r,n):r}return n},v=(e,t,r)=>{const n=e?o()(r,e)||[]:r,i=a()(n,t);if(i>=0){const t=n.slice();return t.splice(i,1),e?g(e,t,r):t()}return r}},24262:(e,t,r)=>{"use strict";r.d(t,{ZA:()=>_,Mk:()=>O,ar:()=>x,oH:()=>T,V5:()=>D,D$:()=>F,Hi:()=>M,R8:()=>L,IS:()=>A,AZ:()=>R,lD:()=>N,DN:()=>k,z8:()=>G,Fh:()=>j,Tt:()=>B,EM:()=>$,QW:()=>U,go:()=>W,T4:()=>q});var n=r(27418),o=r.n(n),i=(r(94707),r(23570),r(47037)),a=r.n(i),s=r(13218),l=r.n(s),c=r(1469),u=r.n(c),p=r(91175),d=r.n(p),g=r(84596),m=r.n(g),h=r(41609),f=r.n(h),y=(r(30998),r(78718),r(14293),r(33044));let v,b=/\/[\w- ]*geoserver[\w- ]*\//;const w=(e,t)=>t.filter((t=>(t.group||"Default")===e)).map((e=>e.id)).reverse(),_=e=>e&&e.wpsUrl||e.search&&e.search.url||e.url,E=(e,t)=>e.slice(0).reverse().reduce(((e,r)=>e.concat(r.nodes.slice(0).reverse().reduce(((e,r)=>l()(r)?e.concat(E([r],t)):e.concat(((e,t)=>d()(t.filter((t=>t.id===e))))(r,t))),[]))),[]),P=(e,t)=>E(e,t),O=(e,t)=>e&&u()(e)?e.reduce(((e,r)=>e||(!r||r.name!==t&&r.id!==t&&r!==t?r&&r.nodes&&r.nodes.length>0?O(r.nodes,t):e:r)),null):null,x=e=>e&&e.nodes?e.nodes.reduce(((e,t)=>{let r=[].concat(e);return t.nodes&&(r=e.concat(x(t))),a()(t)?[...r,t]:[...r,t.id]}),[]):[],S=e=>{let t=[];return e&&m()(e).forEach((r=>{t.push(r),r.nodes&&Array.isArray(e)&&Array.isArray(r.nodes)&&(t=t.concat(S(r.nodes)))})),t},T=(e,t,r,n)=>e&&u()(e)&&e.length>0?e.map((e=>{if(l()(e)){if(e.id===t)return{...e,...l()(r)?r:{[r]:n}};if(e.nodes)return{...e,nodes:T(e.nodes,t,r,n)}}return e})):[],C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.capabilitiesURL||d()(m()(e.url))},D=e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&Object.keys(e).reduce(((r,n)=>{const i=e[n].reduce(((e,t)=>o()(e,{[t.id||t.name]:{srs:[...Object.keys(t.matrixIds)],matrixIds:o()({},t.matrixIds)}})),{}),a=e[n].reduce(((e,t)=>{const r=t.tileMatrixSet.reduce(((e,t)=>o()({},e,{[t["ows:Identifier"]]:o()({},t)})),{}),n=Object.keys(r).reduce(((e,t)=>{const n=Object.keys(i).filter((e=>d()(i[e].srs.filter((e=>e===t))))).map((e=>i[e].matrixIds[t])),a=n[0]&&r[t].TileMatrix.map(((e,t)=>n[0][t]&&n[0][t].ranges?o()({},e,{ranges:n[0][t].ranges}):o()({},e)));return d()(n)?o()({},e,{[t]:o()({},r[t],{TileMatrix:a})}):o()({},e)}),{});return o()({},e,n)}),{});return o()({},r,{[n]:o()({},t[n]||{},{tileMatrixSet:o()({},r[n]&&r[n].tileMatrixSet||{},a)})})}),o()({},t))||t}(e.filter((e=>e.tileMatrixSet)).reduce(((e,t)=>{const r=C(t);return e[r]?o()({},e,{[r]:[...e[r],t]}):o()({},e,{[r]:[t]})}),{})),F=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.map((e=>e.split("?")[0]+t))},I={},M=e=>u()(e.url)?e.url[0]:e.url,L=(e,t)=>e&&e.id||e.name+"__"+(t?t.length:Math.random().toString(36).substring(2,15)),A=(e,t)=>{let r=0,n=e.map((e=>o()({},e,{storeIndex:r++})));return n.reduce(((e,t)=>-1===e.indexOf(t.group||"Default")?e.concat([t.group||"Default"]):e),[]).filter((e=>"background"!==e)).reverse().reduce(((e,r)=>{let i=r||"Default";return i.split(".").reduce(((e,r,a,s)=>{const c=i.split(".",a+1).join(".");let u=((e,t)=>d()(t.filter((t=>l()(t)&&t.id===e))))(c,e);const p=a===s.length-1;if(u)p&&(u.nodes=w(c,n).concat(u.nodes).reduce(((e,t)=>(l()(t)?e.push({node:t,order:n.find((e=>e.group===t.id))?.storeIndex}):e.push({node:t,order:n.find((e=>e.id===t))?.storeIndex}),e)),[]).sort(((e,t)=>t.order-e.order)).map((e=>e.node)));else{const i=((e,t)=>{if(t&&Array.isArray(t))for(let r of t)if(r?.id===e)return r.title;return"Default"})(c,S(t));u=((e,t,r,n,i)=>o()({},{id:e,title:t??(r||"").replace(/\${dot}/g,"."),name:r,nodes:i?w(e,n):[],expanded:!0}))(c,i||r,r,n,p),e.push(u)}return u.nodes}),e),e}),[])},R=e=>e.reduce(((e,t)=>e.concat(v.getNotEmptyGroup(t))),[]),N=(e,t)=>t.filter((e=>"background"===e.group)).concat(P(e,t)),k=e=>{if(e&&u()(e.layers)){let t=v.getLayersByGroup(e.layers,e.groups);u()(e.groups)&&(t=e.groups.reduce(((e,t)=>{let r=e;if(t.title){const e={title:t.title,description:t.description,tooltipOptions:t.tooltipOptions,tooltipPlacement:t.tooltipPlacement};r=v.deepChange(r,t.id,e)}return r=v.deepChange(r,t.id,"expanded",t.expanded),r}),[].concat(t)));let r=(e=>{if(!e||!e.layers||!u()(e.layers))return null;const t=e.mapInitialConfig&&e.mapInitialConfig.sources&&o()({},e.mapInitialConfig.sources)||{};return f()(t)?[...e.layers]:e.layers.map((e=>{const r=((e,t)=>{if(!e||!t)return{};!u()(t.matrixIds)&&l()(t.matrixIds)&&(t.matrixIds=[...Object.keys(t.matrixIds)]);const r=C(t),n=t.matrixIds&&t.matrixIds.reduce(((t,n)=>{const i=e[r]&&e[r].tileMatrixSet&&e[r].tileMatrixSet[n]&&e[r].tileMatrixSet[n].TileMatrix.map((e=>({identifier:e["ows:Identifier"],ranges:e.ranges})))||[];return 0===i.length?o()({},t):o()({},t,{[n]:[...i]})}),{})||null,i=t.tileMatrixSet&&t.matrixIds.map((t=>e[r].tileMatrixSet[t])).filter((e=>e))||null;return i&&n&&{tileMatrixSet:i,matrixIds:n}||{}})(t,e);return o()({},e,r)}))})(e);return o()({},e,{layers:{flat:v.reorder(t,r),groups:t}})}return e},G=e=>o()({id:e.id,features:e.features,format:e.format,thumbURL:e.thumbURL&&"blob"===e.thumbURL.split(":")[0]?void 0:e.thumbURL,group:e.group,search:e.search,source:e.source,name:e.name,opacity:e.opacity,provider:e.provider,description:e.description,styles:e.styles,style:e.style,styleName:e.styleName,layerFilter:e.layerFilter,title:e.title,transparent:e.transparent,tiled:e.tiled,type:e.type,url:e.url,bbox:e.bbox,visibility:e.visibility,singleTile:e.singleTile||!1,allowedSRS:e.allowedSRS,matrixIds:e.matrixIds,tileMatrixSet:e.tileMatrixSet,requestEncoding:e.requestEncoding,dimensions:e.dimensions||[],maxZoom:e.maxZoom,maxNativeZoom:e.maxNativeZoom,maxResolution:e.maxResolution,minResolution:e.minResolution,disableResolutionLimits:e.disableResolutionLimits,hideLoading:e.hideLoading||!1,handleClickOnLayer:e.handleClickOnLayer||!1,queryable:e.queryable,featureInfo:e.featureInfo,catalogURL:e.catalogURL,capabilitiesURL:e.capabilitiesURL,useForElevation:e.useForElevation||!1,hidden:e.hidden||!1,origin:e.origin,thematic:e.thematic,tooltipOptions:e.tooltipOptions,tooltipPlacement:e.tooltipPlacement,legendOptions:e.legendOptions,tileSize:e.tileSize,version:e.version},e.params?{params:e.params}:{},e.credits?{credits:e.credits}:{},e.extendedParams?{extendedParams:e.extendedParams}:{},e.localizedLayerStyles?{localizedLayerStyles:e.localizedLayerStyles}:{}),j=e=>{const t=v.findGeoServerName({url:e.url});let r=M(e);if(t){let n=r.split(t);if(2===n.length){let o=e.name.split(":");2===o.length&&(r=n[0]+t+o[0]+"/"+o[1]+"/"+n[1])}}return((e,t)=>{const r=Object.keys(t).map((e=>e+"="+encodeURIComponent(t[e]))).join("&");return-1===e.indexOf("?")?e+"?"+r:e+"&"+r})(r,{...e.baseParams,...e.params})},B=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.search&&e.search.url||e.url},$=e=>I.getLayerTitleTranslations?I.getLayerTitleTranslations(e):e.Title,U=e=>{const t=F(u()(e.url)?e.url:[e.url]);let r={};return t.forEach((t=>{(0,y.addAuthenticationParameter)(t,r,e.securityToken)})),r},W=e=>{let{imageUrl:t,link:r,title:n}=e;const o=t?`<img src="${t}" ${n?`title="${n}"`:""}>`:n;return r&&o?`<a href="${r}" target="_blank">${o}</a>`:o},q=(e,t)=>{if(e.disableResolutionLimits)return!0;const r=e.minResolution||-1/0,n=e.maxResolution||1/0;return void 0===t||t<n&&t>=r};v={getGroupByName:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return d()(t.filter((t=>t.name===e)))||t.reduce(((t,r)=>t||!!r.nodes&&v.getGroupByName(e,r.nodes)),void 0)},getLayerId:L,normalizeLayer:e=>e.id?e:{...e,id:v.getLayerId(e)},getNotEmptyGroup:e=>{const t=e.nodes.reduce(((e,t)=>t.nodes?e.concat(v.getNotEmptyGroup(t)):e.concat(t)),[]);return t.length>0?o()({},e,{nodes:t}):[]},getLayersByGroup:A,deepChange:T,reorder:(e,t)=>t.filter((e=>"background"===e.group)).concat(P(e,t)),getRegGeoserverRule:()=>b,findGeoServerName:e=>{let{url:t,regexRule:r}=e;const n=r||v.getRegGeoserverRule(),o=u()(t)?t[0]:t;return n.test(o)&&o.match(n)[0]||null},isInsideResolutionsLimits:q,visibleTimelineLayers:(e,t)=>e.filter((e=>{let r=t?.find((t=>t.id===e.id));return r?.visibility?e:null}))}},86638:(e,t,r)=>{"use strict";r.d(t,{Pp:()=>c,fE:()=>u,Xu:()=>p,mh:()=>d,S$:()=>g,mo:()=>m});const n=r(72500),{addLocaleData:o}=(r(13218),r(68195));o([...r(6467),...r(78398),...r(54206),...r(51738),...r(32820),...r(95383),...r(13655),...r(32181),...r(68333),...r(22669),...r(44636),...r(44683),...r(72198),...r(82147)]);let i={it:{code:"it-IT",description:"Italiano"},en:{code:"en-US",description:"English"},fr:{code:"fr-FR",description:"Franais"},de:{code:"de-DE",description:"Deutsch"},es:{code:"es-ES",description:"Espaol"},zh:{code:"zh-ZH",description:""},nl:{code:"nl-NL",description:"Nederlands"},hr:{code:"hr-HR",description:"Hrvatski"},pt:{code:"pt-PT",description:"Portugus"},vi:{code:"vi-VN",description:"ting Vit"},fi:{code:"fi-FI",description:"Suomi"},sv:{code:"sv-SE",description:"Svenska"},sk:{code:"sk-SK",description:"Slovak"}};const a={default:"YYYY/MM/DD","en-US":"MM/DD/YYYY","it-IT":"DD/MM/YYYY","nl-NL":"DD/MM/YYYY","zh-ZH":"YYYY/MM/DD","hr-HR":"DD/MM/YYYY","pt-PT":"DD/MM/YYYY","vi-VN":"DD/MM/YYYY","fi-FI":"DD/MM/YYYY"};let s,l={};const c=e=>{Promise.all([r.e(2456),r.e(9030),r.e(1058)]).then((t=>{r.g.Intl=r(58267),r(88750),r(95330),r(63474),r(53178),r(73836),r(13447),r(98320),r(72652),r(88792),r(18453),r(76925),r(53046),r(24968),e&&e()}).bind(null,r)).catch(r.oe)},u=function(e){i=e},p=function(){return s.getLocale(n.parse(window.location.href,!0).query)},d=e=>a[e]||a.default,g=function(e,t){var r=e;return t.split(".").forEach((e=>{r=r?r[e]:null})),r||t},m=(e,t)=>{l[e]=t};s={getLocale:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.keys(i)[0],r=i.en?{key:"en",locale:i.en}:{key:t,locale:i[t]};let n=i[s.normalizeLocaleCode(e.locale||(navigator?navigator.language||navigator.browserLanguage:r.key))];return n?n.code:r.locale.code},normalizeLocaleCode:function(e){var t;if(null==e)t=void 0;else{let r=/^[a-z]+/i.exec(e);t=r&&r.length>0?r[0].toLowerCase():void 0}return t}}},7412:(e,t,r)=>{"use strict";r.d(t,{lY:()=>b,wR:()=>w,su:()=>_,Fm:()=>E,pf:()=>P,Te:()=>O,Qm:()=>x,y_:()=>S,gA:()=>C,K7:()=>D,ZX:()=>I});var n=r(53005),o=r(60130),i=r.n(o),a=r(30998),s=r.n(a),l=r(3918),c=r.n(l),u=r(68843),p=r(39980),d=r(529),g=r(6402),m=r(80009),h=r(35433),f=r(50948),y=r.n(f);let v;const b=()=>Object.keys(v.getAvailableInfoFormat()).map((e=>n.O7[e])),w=()=>n.O7[v.AVAILABLE_FORMAT[0]],_=(e,t,r,n,o)=>({type:"vector",visibility:!0,name:e||"GetFeatureInfo",styleName:r||"marker",label:o,features:v.clickedPointToGeoJson(t),...n}),E=(e,t)=>{if(v.services[e.type]){let r=v.getDefaultInfoFormatValueFromLayer(e,t),n=v.getLayerFeatureInfoViewer(e);const o=v.getLayerFeatureInfo(e);return v.services[e.type].buildRequest(e,t,r,n,o)}return{}},P=(e,t,r)=>v.services[e.type]&&v.services[e.type].getIdentifyFlow?v.services[e.type].getIdentifyFlow(e,t,r):null,O=e=>{const t={getValidResponses:e=>e,getNoValidResponses:()=>[]};return{getValidResponses:r=>r.reduce(((r,o)=>{if(o){let i;o.queryParams&&o.queryParams.hasOwnProperty("info_format")&&(i=o.queryParams.info_format),o.queryParams&&o.queryParams.hasOwnProperty("outputFormat")&&(i=o.queryParams.outputFormat);const a=(n.cX[o.format||n.so[i]||n.so[e]]||t).getValidResponses([o]);return[...r,...a]}return[...r]}),[]),getNoValidResponses:r=>r.reduce(((r,o)=>{if(o){let i;o.queryParams&&o.queryParams.hasOwnProperty("info_format")&&(i=o.queryParams.info_format),o.queryParams&&o.queryParams.hasOwnProperty("outputFormat")&&(i=o.queryParams.outputFormat);const a=(n.cX[o.format||n.so[i]||n.so[e]]||t).getNoValidResponses([o]);return[...r,...a]}return[...r]}),[])}},x=()=>({[n.O7.PROPERTIES]:u.Z,[n.O7.JSON]:u.Z,[n.O7.HTML]:p.Z,[n.O7.TEXT]:d.Z}),S=e=>e.visibility&&v.services[e.type]&&(void 0===e.queryable||e.queryable)&&"background"!==e.group&&"HIDDEN"!==e?.featureInfo?.format,T={wfs:g.Z,wms:m.Z,wmts:h.Z,vector:y()},C=e=>v.VIEWERS[e]?v.VIEWERS[e]:null,D=(e,t,r)=>{let n=t||[],o=r||[];return Object.keys(e).reduce(((t,r)=>{if("params"!==r&&-1!==n.indexOf(r))t[r]=e[r];else if("params"===r&&o.length>0){let n=e[r];Object.keys(n).forEach((e=>{-1===s()(o,(t=>t===e))&&(t[e]=n[e])}),{})}return t}),{})};let F={};const I=e=>F[e];v={AVAILABLE_FORMAT:["TEXT","PROPERTIES","HTML","TEMPLATE"],getAvailableInfoFormatLabels:()=>Object.keys(v.getAvailableInfoFormat()),getAvailableInfoFormat:()=>Object.keys(n.O7).filter((e=>-1!==v.AVAILABLE_FORMAT.indexOf(e))).reduce(((e,t)=>(e[t]=n.O7[t],e)),{}),getDefaultInfoFormatValue:w,clickedPointToGeoJson:e=>{if(!e)return[];if("Feature"===e.type){let t=[i()(e)];return e&&e.geometry&&"Point"!==e.geometry.type&&t.push(e),t}return void 0===e.lng||void 0===e.lat?e.features||[]:[...e.features||[],{id:"get-feature-info-point",type:"Feature",geometry:{type:"Point",coordinates:[parseFloat(e.lng),parseFloat(e.lat)]},style:[{iconUrl:c(),iconAnchor:[12,41],iconSize:[25,41]}]}]},services:T,getDefaultInfoFormatValueFromLayer:(e,t)=>e.featureInfo&&e.featureInfo.format&&n.O7[e.featureInfo.format]||t.format||v.getDefaultInfoFormatValue(),getLayerFeatureInfoViewer:e=>e.featureInfo&&e.featureInfo.viewer?e.featureInfo.viewer:{},getLayerFeatureInfo:e=>e&&e.featureInfo&&{...e.featureInfo}||{},VIEWERS:{},registerRowViewer:(e,t)=>{F[e]=t},getRowViewer:I}},52259:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DEFAULT_SCREEN_DPI:()=>V,METERS_PER_UNIT:()=>Z,GOOGLE_MERCATOR:()=>H,EXTENT_TO_ZOOM_HOOK:()=>K,ZOOM_TO_EXTENT_HOOK:()=>z,RESOLUTIONS_HOOK:()=>X,RESOLUTION_HOOK:()=>Y,COMPUTE_BBOX_HOOK:()=>Q,GET_PIXEL_FROM_COORDINATES_HOOK:()=>J,GET_COORDINATES_FROM_PIXEL_HOOK:()=>ee,registerHook:()=>re,getHook:()=>ne,executeHook:()=>oe,clearHooks:()=>ie,dpi2dpm:()=>ae,dpi2dpu:()=>se,getSphericalMercatorScale:()=>le,getGoogleMercatorScale:()=>ce,getSphericalMercatorScales:()=>ue,getGoogleMercatorScales:()=>pe,getResolutionsForScales:()=>de,getGoogleMercatorResolutions:()=>ge,getResolutionsForProjection:()=>me,getResolutions:()=>he,getScales:()=>fe,getZoomFromResolution:()=>ye,defaultGetZoomForExtent:()=>ve,getZoomForExtent:()=>be,getCurrentResolution:()=>we,getCenterForExtent:()=>_e,getBbox:()=>Ee,isNearlyEqual:()=>Pe,mapUpdated:()=>Oe,transformExtent:()=>xe,groupSaveFormatted:()=>Se,saveMapConfiguration:()=>Te,generateNewUUIDs:()=>Ce,mergeMapConfigs:()=>De,addRootParentGroup:()=>Fe,isSimpleGeomType:()=>Ie,getSimpleGeomType:()=>Me,getIdFromUri:()=>Le,parseLayoutValue:()=>Ae,prepareMapObjectToCompare:()=>Re,updateObjectFieldKey:()=>Ne,compareMapChanges:()=>ke,createRegisterHooks:()=>Ge,detectIdentifyInMapPopUp:()=>je,getResolutionObject:()=>Be,calculateExtent:()=>$e,reprojectZoom:()=>Ue,default:()=>We});var n=r(47037),o=r.n(n),i=r(92742),a=r.n(i),s=r(81763),l=r.n(s),c=r(78718),u=r.n(c),p=r(27361),d=r.n(p),g=r(13311),m=r.n(g),h=r(95395),f=r.n(h),y=r(66604),v=r.n(y),b=r(3674),w=r.n(b),_=r(44908),E=r.n(_),P=r(87185),O=r.n(P),x=r(18446),S=r.n(x),T=r(41609),C=r.n(T),D=r(30998),F=r.n(D),I=r(50361),M=r.n(I),L=r(22762),A=r.n(L),R=r(57557),N=r.n(R),k=r(23570),G=r.n(k),j=r(90183),B=r(61868),$=r(24262),U=r(27418),W=r.n(U),q=r(90173);const V=96,Z={m:1,degrees:111194.87428468118,ft:.3048,"us-ft":1200/3937},H={RADIUS:6378137,TILE_WIDTH:256,ZOOM_FACTOR:2},K="EXTENT_TO_ZOOM_HOOK",z="ZOOM_TO_EXTENT_HOOK",X="RESOLUTIONS_HOOK",Y="RESOLUTION_HOOK",Q="COMPUTE_BBOX_HOOK",J="GET_PIXEL_FROM_COORDINATES_HOOK",ee="GET_COORDINATES_FROM_PIXEL_HOOK";let te={};function re(e,t){te[e]=t}function ne(e){return te[e]}function oe(e,t,r){const n=ne(e);return n?t(n):r?r():null}function ie(){te={}}function ae(e){return e*(100/2.54)}function se(e,t){const r=(0,j.getUnits)(t||"EPSG:3857");return Z[r]*ae(e||V)}function le(e,t,r,n,o){return 2*Math.PI*e/(t*Math.pow(r,n)/ae(o||V))}function ce(e,t){return le(H.RADIUS,H.TILE_WIDTH,H.ZOOM_FACTOR,e,t)}function ue(e,t,r,n,o,i){var a=[];for(let s=n;s<=o;s++)a.push(le(e,t,r,s,i));return a}function pe(e,t,r){return ue(H.RADIUS,H.TILE_WIDTH,H.ZOOM_FACTOR,e,t,r)}function de(e,t,r){const n=se(r,t);return e.map((e=>e/n))}function ge(e,t,r){return de(pe(e,t,r),"EPSG:3857",r)}function me(e,t,r,n,o,i,a){let s=n??0,l=o??28,c=i??2;const u=q.default.defs(e),p=a??(0,j.getExtentForProjection)(e)?.extent;let d,g,m=(p?p[2]-p[0]:360*Z.degrees/Z[u.getUnits()])/256,h=(p?p[3]-p[1]:360*Z.degrees/Z[u.getUnits()])/256;m<=h?(d=1,g=Math.round(h/m),h/=g):(g=1,d=Math.round(m/h),m/=d);const f=Math.max(m,h),y=f/Math.pow(2,28);let v=r;void 0!==v?s=0:v=f/Math.pow(c,s);let b=t;return void 0===b&&(b=void 0!==l?void 0!==r?v/Math.pow(c,l):f/Math.pow(c,l):y),l=s+Math.floor(Math.log(v/b)/Math.log(c)),Array.apply(0,Array(l-s+1)).map(((e,t)=>v/Math.pow(c,t)))}function he(e){return ne("RESOLUTIONS_HOOK")?ne("RESOLUTIONS_HOOK")(e):e&&"EPSG:3857"!==(0,j.normalizeSRS)(e)?me(e):ge(0,21,V)}function fe(e,t){const r=se(t,e);return he(e).map((e=>e*r))}function ye(e){const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:he()).map(((t,r)=>({diff:Math.abs(t-e),zoom:r}))),{zoom:r}=A()(t,"diff");return r}function ve(e,t,r,n,o,i){const a=e[2]-e[0],s=e[3]-e[1],l=Math.abs(a/t.width),c=Math.abs(s/t.height),u=Math.max(l,c),p=i||de(pe(r,n,o||V),"EPSG:3857",o),{zoom:d}=p.reduce(((e,t,r)=>{const n=Math.abs(t-u);return n>e.diff?e:{diff:n,zoom:r}}),{diff:Number.POSITIVE_INFINITY,zoom:0});return Math.max(0,Math.min(d,n))}function be(e,t,r,n,o){return ne("EXTENT_TO_ZOOM_HOOK")?ne("EXTENT_TO_ZOOM_HOOK")(e,t,r,n,o):ve(e,t,r,n,o,ne("RESOLUTIONS_HOOK")?ne("RESOLUTIONS_HOOK")():null)}function we(e,t,r,n){return ne("RESOLUTION_HOOK")?ne("RESOLUTION_HOOK")(e,t,r,n):ge(t,r,n)[e]}function _e(e,t){var r=(e[2]-e[0])/2,n=(e[3]-e[1])/2;return{x:e[0]+r,y:e[1]+n,crs:t}}function Ee(e,t){return oe("COMPUTE_BBOX_HOOK",(r=>r(e,t)))}const Pe=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)==0};function Oe(e,t){return!(!e||C()(e)||!t||C()(t))&&(!(Pe(t?.center?.x,e?.center?.x)&&Pe(t?.center?.y,e?.center?.y))||t?.zoom!==e?.zoom)}function xe(e,t,r,n){let o=(0,j.getUnits)(e);return"ft"===o?{width:r/Z.ft,height:n/Z.ft}:"us-ft"===o?{width:r/Z["us-ft"],height:n/Z["us-ft"]}:"degrees"===o?{width:r/(111132.92-559.82*Math.cos(2*t.y)+1.175*Math.cos(4*t.y)),height:n/(111412.84*Math.cos(t.y)-93.5*Math.cos(3*t.y))}:{width:r,height:n}}const Se=e=>({id:e.id,title:e.title,description:e.description,tooltipOptions:e.tooltipOptions,tooltipPlacement:e.tooltipPlacement,expanded:e.expanded});function Te(e,t,r,n,o,i,a){const s={center:e.center,maxExtent:e.maxExtent,projection:e.projection,units:e.units,mapInfoControl:e.mapInfoControl,zoom:e.zoom,mapOptions:e.mapOptions||{}},l=t.map((e=>(0,$.z8)(e))),c=r.reduce(((e,t)=>e.concat((0,$.ar)(t))),[].concat(r.map((e=>e.id)))).map((e=>{const t=(0,$.Mk)(r,e);return t&&t.nodes?Se(t):null})).filter((e=>e)),u=n.filter((e=>!!e.thumbnail)),p=(0,$.V5)(l),d=l.map((e=>W()({},e,{tileMatrixSet:e.tileMatrixSet&&e.tileMatrixSet.length>0,matrixIds:e.matrixIds&&Object.keys(e.matrixIds)})));let g=F()(d,(e=>"annotations"===e.id));if(-1!==g){let e=d[g].features.map((e=>"FeatureCollection"===e.type?{...e,features:e.features.map((e=>e.properties.geometryGeodesic?(0,B.t8)("properties.geometryGeodesic",null,e):e))}:e.properties.geometryGeodesic?(0,B.t8)("properties.geometryGeodesic",null,e):{}));d[g]=(0,B.t8)("features",e,d[g])}return{version:2,map:W()({},s,{layers:d,groups:c,backgrounds:u,text_search_config:o,bookmark_search_config:i},!C()(p)&&{sources:p}||{}),...a}}const Ce=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=M()(e),r={...d()(e,"map.layers",[]).reduce(((e,t)=>({...e,[t.id]:"annotations"===t.id?t.id:G()()})),{}),...d()(e,"widgetsConfig.widgets",[]).reduce(((e,t)=>({...e,[t.id]:G()()})),{})};return(0,B.t8)("map.backgrounds",d()(e,"map.backgrounds",[]).map((e=>({...e,id:r[e.id]}))),(0,B.t8)("widgetsConfig",{collapsed:v()(f()(d()(e,"widgetsConfig.collapsed",{}),((e,t)=>r[t])),(e=>({...e,layouts:v()(e.layouts,(e=>({...e,i:r[e.i]})))}))),layouts:v()(d()(e,"widgetsConfig.layouts",{}),(e=>e.map((e=>({...e,i:r[e.i]}))))),widgets:d()(e,"widgetsConfig.widgets",[]).map((e=>({...e,id:r[e.id],layer:{...d()(e,"layer",{}),id:r[d()(e,"layer.id")]}})))},(0,B.t8)("map.layers",d()(e,"map.layers",[]).map((e=>({...e,id:r[e.id]}))),t)))},De=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>u()(e,w()(e).filter((t=>void 0!==e[t])))))},r=Ce(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),n=[...d()(e,"map.backgrounds",[]),...d()(r,"map.backgrounds",[])],o=t(d()(e,"map.layers",[])),i=t(d()(r,"map.layers",[])),a=m()(o,(e=>"annotations"===e.id)),s=m()(i,(e=>"annotations"===e.id)),l=[...i.filter((e=>"annotations"!==e.id)),...o.filter((e=>"annotations"!==e.id)),...a||s?[{...a||{},...s||{},features:[...d()(a,"features",[]),...d()(s,"features",[])]}]:[]],c=["id","visibility"],p=l.filter((e=>"background"===e.group)).filter(((e,t,r)=>F()(r,(t=>S()(N()(e,c),N()(t,c))))===t)),g=F()(p,(e=>e.visibility)),h={...d()(e,"map.sources",{}),...d()(r,"map.sources",{})},f=d()(e,"widgetsConfig",{}),y=d()(r,"widgetsConfig",{});return{...r,...e,catalogServices:{...d()(e,"catalogServices",{}),services:{...d()(e,"catalogServices.services",{}),...d()(r,"catalogServices.services",{})}},map:{...r.map,...e.map,backgrounds:n,groups:O()([...d()(e,"map.groups",[]),...d()(r,"map.groups",[])],((e,t)=>e.id===t.id)),layers:[...p.slice(0,g+1),...p.slice(g+1).map((e=>({...e,visibility:!1}))),...l.filter((e=>"background"!==e.group))],sources:C()(h)?void 0:h},widgetsConfig:{collapsed:{...f.collapsed,...y.collapsed},layouts:E()([...w()(f.layouts),...w()(y.layouts)]).reduce(((e,t)=>({...e,[t]:[...d()(f,`layouts.${t}`,[]),...d()(y,`layouts.${t}`,[])]})),{}),widgets:[...d()(f,"widgets",[]),...d()(y,"widgets",[])]},timelineData:{...d()(e,"timelineData",{}),...d()(r,"timelineData",{})},dimensionData:{...d()(e,"dimensionData",{}),...d()(r,"dimensionData",{})}}},Fe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"RootGroup";const r=d()(e,"map.groups",[]),n=r.filter((e=>{let{id:t}=e;return"Default"!==t})),o=m()(r,(e=>{let{id:t}=e;return"Default"===t})),i=o&&{id:G()(),title:t,expanded:o.expanded},a=o?[...n.map((e=>{let{id:t,...r}=e;return{id:`${i.id}.${t}`,...r}})),i]:n;return{...e,map:{...e.map,groups:a,layers:d()(e,"map.layers",[]).map((e=>{let{group:t,...r}=e;return{...r,group:!o||"background"===t||"Default"!==t&&t?o&&m()(a,(e=>{let{id:r}=e;return r.slice(r.indexOf(".")+1)===t}))?.id||t:i.id}}))}}};function Ie(e){switch(e){case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":case"Text":return!1;default:return!0}}function Me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Point";switch(e){case"Point":case"LineString":case"Polygon":case"Circle":default:return e;case"MultiPoint":case"Marker":case"Text":return"Point";case"MultiLineString":return"LineString";case"MultiPolygon":return"Polygon";case"GeometryCollection":return"GeometryCollection"}}const Le=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/data\/(\d+)/;const r=decodeURIComponent(e),n=t.exec(r);return n&&n.length&&n.length>1?n[1]:null},Ae=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o()(e)&&-1!==e.indexOf("%")?parseFloat(a()(e))*t/100:l()(e)?e:0},Re=e=>{const t=["apiKey","time","args","fixed"],r=e=>t.reduce(((t,r)=>t||e===r),!1);Object.keys(e).forEach((t=>{const n=e[t],o=typeof n;"object"!==o||null===n||r(t)?"undefined"!==o&&n&&!r(t)||delete e[t]:(Re(n),Object.keys(n).length||delete e[t])}))},Ne=(e,t,r)=>{e[t]&&(Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(e,t)),delete e[t])},ke=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=["map.layers","map.backgrounds","map.text_search_config","map.bookmark_search_config","map.text_serch_config","map.zoom","widgetsConfig"],n=u()(M()(e),r),o=u()(M()(t),r);return Ne(n.map,"text_serch_config","text_search_config"),Ne(o.map,"text_serch_config","text_search_config"),Re(n),Re(o),S()(n,o)},Ge=()=>{let e={};return{registerHook:(t,r)=>{e[t]=r},getHook:t=>e[t],executeHook:(t,r,n)=>{const o=e[t];return o?r(o):n?n():null}}},je=e=>{if(e.mapPopups?.popups){let t=e.mapPopups.popups.filter((e=>"identify"===e?.component?.toLowerCase()));return!!(t&&t.length>0)}return!1},Be=function(e,t){let{projection:r,resolutions:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=se(V,r);if("scale"===t){const t=e/o;return{resolution:t,scale:e,zoom:ye(t,n)}}return{resolution:e,scale:e*o,zoom:ye(e,n)}};function $e(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0,crs:"EPSG:3857"},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{width:100,height:100},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"EPSG:3857";const{x:o,y:i}=(0,j.reproject)(e,e.crs??n,n),a=t*r.width/2,s=t*r.height/2;return[o-a,i-s,o+a,i+s]}const Ue=(e,t,r)=>{const n=Z[(0,j.getUnits)(t)]/Z[(0,j.getUnits)(r)],o=he(t)[e]*n,i=he(r),a=i.reduce(((e,t)=>Math.abs(t-o)<Math.abs(e-o)?t:e),i[0]);return i.indexOf(a)},We={createRegisterHooks:Ge,EXTENT_TO_ZOOM_HOOK:K,RESOLUTIONS_HOOK:X,RESOLUTION_HOOK:Y,COMPUTE_BBOX_HOOK:Q,GET_PIXEL_FROM_COORDINATES_HOOK:J,GET_COORDINATES_FROM_PIXEL_HOOK:ee,DEFAULT_SCREEN_DPI:V,ZOOM_TO_EXTENT_HOOK:z,registerHook:re,getHook:ne,dpi2dpm:ae,getSphericalMercatorScales:ue,getSphericalMercatorScale:le,getGoogleMercatorScales:pe,getGoogleMercatorResolutions:ge,getGoogleMercatorScale:ce,getResolutionsForScales:de,getZoomForExtent:be,defaultGetZoomForExtent:ve,getCenterForExtent:_e,getResolutions:he,getScales:fe,getBbox:Ee,mapUpdated:Oe,getCurrentResolution:we,transformExtent:xe,saveMapConfiguration:Te,generateNewUUIDs:Ce,mergeMapConfigs:De,addRootParentGroup:Fe,isSimpleGeomType:Ie,getSimpleGeomType:Me,getIdFromUri:Le,parseLayoutValue:Ae,prepareMapObjectToCompare:Re,updateObjectFieldKey:Ne,compareMapChanges:ke,clearHooks:ie,getResolutionObject:Be,calculateExtent:$e,reprojectZoom:Ue}},22843:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{UY:()=>combineReducers,lp:()=>combineEpics,bh:()=>getMonitoredState,ZP:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(24852),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),object_assign__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(27418),object_assign__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(object_assign__WEBPACK_IMPORTED_MODULE_1__),lodash_omit__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(57557),lodash_omit__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash_omit__WEBPACK_IMPORTED_MODULE_2__),lodash_isObject__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(13218),lodash_isObject__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(lodash_isObject__WEBPACK_IMPORTED_MODULE_3__),lodash_head__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(91175),lodash_head__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(lodash_head__WEBPACK_IMPORTED_MODULE_4__),lodash_isArray__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1469),lodash_isArray__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(lodash_isArray__WEBPACK_IMPORTED_MODULE_5__),lodash_isString__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(47037),lodash_isString__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(lodash_isString__WEBPACK_IMPORTED_MODULE_6__),lodash_isFunction__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(23560),lodash_isFunction__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(lodash_isFunction__WEBPACK_IMPORTED_MODULE_7__),lodash_memoize__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(88306),lodash_memoize__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(lodash_memoize__WEBPACK_IMPORTED_MODULE_8__),lodash_get__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(27361),lodash_get__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_9__),lodash_endsWith__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(66654),lodash_endsWith__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(lodash_endsWith__WEBPACK_IMPORTED_MODULE_10__),react_redux__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(71703),react_redux__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_11__),url__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(72500),url__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(url__WEBPACK_IMPORTED_MODULE_12__),lodash_curry__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(41239),lodash_curry__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(lodash_curry__WEBPACK_IMPORTED_MODULE_13__),redux_observable__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(1376),redux_observable__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(redux_observable__WEBPACK_IMPORTED_MODULE_14__),redux__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(12838),_EpicsUtils__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(16135);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends.apply(this,arguments)}function loadScript(e){return new Promise((function(t,r){const n=document.createElement("script");let o=!1;n.type="text/javascript",n.src=e,n.async=!0,n.onerror=function(e){r(e,n)},n.onload=n.onreadystatechange=function(){o||this.readyState&&"complete"!==this.readyState||(o=!0,t())};const i=document.getElementsByTagName("script")?.[0];i?i.parentElement.insertBefore(n,i):document.head.appendChild(n)}))}const dynamicFederation=(e,t)=>new Promise((e=>e(__webpack_require__.I&&__webpack_require__.I("default")))).then((()=>window[e].init(__webpack_require__.S.default))).then((()=>window[e].get(t).then((e=>e())))),defaultMonitoredState=[{name:"mapType",path:"maptype.mapType"},{name:"user",path:"security.user"}],getFromPlugins=lodash_curry__WEBPACK_IMPORTED_MODULE_13___default()(((e,t)=>Object.keys(t).map((r=>t[r][e])).reduce(((e,t)=>({...e,...t})),{}))),getReducers=getFromPlugins("reducers"),getEpics=getFromPlugins("epics"),combineReducers=(e,t)=>{const r=getReducers(e);return(0,redux__WEBPACK_IMPORTED_MODULE_15__.UY)({...t,...r})},combineEpics=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const n={...getEpics(e),...t};return(0,redux_observable__WEBPACK_IMPORTED_MODULE_14__.combineEpics)(...(0,_EpicsUtils__WEBPACK_IMPORTED_MODULE_16__.f)(n,r))},filterState=lodash_memoize__WEBPACK_IMPORTED_MODULE_8___default()(((e,t)=>t.reduce(((t,r)=>object_assign__WEBPACK_IMPORTED_MODULE_1___default()(t,{[r.name]:lodash_get__WEBPACK_IMPORTED_MODULE_9___default()(e,r.path)})),{})),((e,t)=>t.reduce(((t,r)=>t+JSON.stringify(lodash_get__WEBPACK_IMPORTED_MODULE_9___default()(e,r.path))),""))),getPluginSimpleName=e=>lodash_endsWith__WEBPACK_IMPORTED_MODULE_10___default()(e,"Plugin")&&e.substring(0,e.length-6)||e,normalizeName=e=>lodash_endsWith__WEBPACK_IMPORTED_MODULE_10___default()(e,"Plugin")&&e||e+"Plugin",getPluginsConfiguration=(e,t)=>{const r=getPluginSimpleName(t);return e.filter((e=>e.name===r||e===r)).map((e=>lodash_isString__WEBPACK_IMPORTED_MODULE_6___default()(e)?{name:e}:e))},getPluginConfiguration=(e,t)=>{const r=getPluginsConfiguration(e,t);return lodash_head__WEBPACK_IMPORTED_MODULE_4___default()(r)||{}},parseExpression=function(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},context=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},value=arguments.length>2?arguments[2]:void 0;const searchExpression=/^\{(.*)\}$/,expression=searchExpression.exec(value),dispatch=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return()=>state("store").dispatch(e.apply(null,[e,...r]))},request=url__WEBPACK_IMPORTED_MODULE_12___default().parse(location.href,!0);return null!==expression?eval(expression[1]):value},handleExpression=(e,t,r)=>lodash_isString__WEBPACK_IMPORTED_MODULE_6___default()(r)&&0===r.indexOf("{")?parseExpression(e,t,r):r,filterDisabledPlugins=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=lodash_get__WEBPACK_IMPORTED_MODULE_9___default()(e,"cfg.disablePluginIf")||lodash_get__WEBPACK_IMPORTED_MODULE_9___default()(e,"plugin.disablePluginIf");return!(n&&!lodash_get__WEBPACK_IMPORTED_MODULE_9___default()(e,"cfg.skipAutoDisable")&&handleExpression(t,r.requires,n))},isContainedInList=(e,t,r,n)=>e&&t&&-1!==handleExpression(r,n,t).indexOf(e),showIn=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return(isContainedInList(o,r.showIn,e,t)||isContainedInList(n,r.showIn,e,t)||!r.showIn&&i)&&!(isContainedInList(o,r.hideFrom,e,t)||isContainedInList(n,r.hideFrom,e,t))},isMapStorePlugin=e=>e.loadPlugin||e.displayName||e.prototype?.isReactComponent||e.isMapStorePlugin,getPluginImplementation=(e,t)=>isMapStorePlugin(e)?e:e(t),includeLoaded=(e,t,r,n)=>{if(t[e]){const o=t[e],i=getPluginImplementation(o.component||o,n);return object_assign__WEBPACK_IMPORTED_MODULE_1___default()(i,r,{loadPlugin:void 0},{...o.containers})}return r},getPriority=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return lodash_get__WEBPACK_IMPORTED_MODULE_9___default()(t,r+".priority")||lodash_get__WEBPACK_IMPORTED_MODULE_9___default()(e,r+".priority")||0},getMorePrioritizedContainer=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>3?arguments[3]:void 0;return(arguments.length>2?arguments[2]:void 0).reduce(((r,n)=>{const o=n.name||n,i=getPriority(e,t,o);return i>r.priority?{plugin:{name:o,impl:object_assign__WEBPACK_IMPORTED_MODULE_1___default()({},e[o],t[o])},priority:i}:r}),{plugin:null,priority:r})},parsePluginConfig=(e,t,r)=>lodash_isArray__WEBPACK_IMPORTED_MODULE_5___default()(r)?r.map((r=>parsePluginConfig(e,t,r))):lodash_isObject__WEBPACK_IMPORTED_MODULE_3___default()(r)?Object.keys(r).reduce(((n,o)=>{const i=r[o];return object_assign__WEBPACK_IMPORTED_MODULE_1___default()(n,{[o]:parsePluginConfig(e,t,i)})}),{}):parseExpression(e,t,r),canContain=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t[e]||r[e]||!1},isMorePrioritizedContainer=(e,t,r,n)=>null===getMorePrioritizedContainer(e,t,r,n).plugin,isValidConfiguration=e=>e&&lodash_isString__WEBPACK_IMPORTED_MODULE_6___default()(e)||lodash_isObject__WEBPACK_IMPORTED_MODULE_3___default()(e)&&e.name,executeDeferredProp=(e,t,r)=>e&&lodash_isFunction__WEBPACK_IMPORTED_MODULE_7___default()(e[r])?{...e,[r]:e[r](t)}:e,getPluginItems=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=arguments.length>7?arguments[7]:void 0;return Object.keys(t).reduce(((e,o)=>[...e,...getPluginsConfiguration(r,o).map((e=>({name:o,impl:executeDeferredProp(includeLoaded(getPluginSimpleName(o),a,t[o]),e,n),config:e})))]),[]).filter((e=>isValidConfiguration(e.config))).filter((e=>canContain(n,e.impl,e.config.override))).filter((r=>showIn(e,t.requires,r.config,n,o,i))).reduce(((e,t)=>{const r=t.impl?.[n];return lodash_isArray__WEBPACK_IMPORTED_MODULE_5___default()(r)?[...e,...r.map((e=>({...t,impl:{...t.impl,[n]:e}})))]:[...e,t]}),[]).filter((e=>isMorePrioritizedContainer(e.impl,e.config.override,r,getPriority(e.impl,e.config.override,n)))).map((o=>{const i=getPluginSimpleName(o.name),s=includeLoaded(i,a,o.impl);return{name:i,...{...lodash_get__WEBPACK_IMPORTED_MODULE_9___default()(s,n+".impl")||lodash_get__WEBPACK_IMPORTED_MODULE_9___default()(s,n)||{},...lodash_get__WEBPACK_IMPORTED_MODULE_9___default()(o.config,"override."+n)??{}},cfg:{...s?.cfg??{},...parsePluginConfig(e,t.requires,o.config.cfg||{})??{}},plugin:s,items:getPluginItems(e,t,r,i,null,!0,a)}})).filter((r=>filterDisabledPlugins(r,e,t))).filter((e=>!s||s(e)))},pluginsMergeProps=(e,t,r)=>{const{pluginCfg:n,...o}=r;return object_assign__WEBPACK_IMPORTED_MODULE_1___default()({},o,e,t,n||{})},importPlugin=e=>dynamicFederation(e,"./plugin"),getMonitoredState=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return filterState(e,defaultMonitoredState.concat(t))},mapPluginsPosition=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(((e,t)=>{const r=t.cfg&&t.cfg.containerPosition||"bodyPlugins";return{...e,[r]:e[r]?[...e[r],t]:[t]}}),{})},getPlugins=e=>Object.keys(e).map((t=>e[t])).reduce(((e,t)=>object_assign__WEBPACK_IMPORTED_MODULE_1___default()({},e,lodash_omit__WEBPACK_IMPORTED_MODULE_2___default()(t,"reducers","epics"))),{}),getPluginDescriptor=function(e,t,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=lodash_isObject__WEBPACK_IMPORTED_MODULE_3___default()(n)?n.name:n,a=lodash_isObject__WEBPACK_IMPORTED_MODULE_3___default()(n)?n.id:null,s=lodash_isObject__WEBPACK_IMPORTED_MODULE_3___default()(n)?n.stateSelector:a||void 0,l=!lodash_isObject__WEBPACK_IMPORTED_MODULE_3___default()(n)||void 0===n.isDefault||n.isDefault,c=t[(lodash_isObject__WEBPACK_IMPORTED_MODULE_3___default()(n)?n.name:n)+"Plugin"];return c?{id:a||i,name:i,impl:includeLoaded(i,o,getPluginImplementation(c,s),s),cfg:object_assign__WEBPACK_IMPORTED_MODULE_1___default()({},c.cfg||{},lodash_isObject__WEBPACK_IMPORTED_MODULE_3___default()(n)?parsePluginConfig(e,t.requires,n.cfg):{}),items:getPluginItems(e,t,r,i,a,l,o)}:null},getConfiguredPlugin=function(e){let t=arguments.length>2?arguments[2]:void 0;if(e){const r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})[e.name]||!e.plugin.loadPlugin&&e.plugin,n=lodash_isObject__WEBPACK_IMPORTED_MODULE_3___default()(e)?e.id:null,o=lodash_isObject__WEBPACK_IMPORTED_MODULE_3___default()(e)?e.stateSelector:n||void 0,i=getPluginImplementation(r?.component||r,o),a=r=>i?react__WEBPACK_IMPORTED_MODULE_0___default().createElement(i,_extends({key:e.id},r,e.cfg,{pluginCfg:e.cfg,items:e.items||[]})):t;return a.loaded=!!r,a}return e},setRefToWrappedComponent=e=>t=>{t&&(window[`${e}Plugin`]=t)},connect=(e,t,r,n)=>(0,react_redux__WEBPACK_IMPORTED_MODULE_11__.connect)(e,t,r||pluginsMergeProps,n),createPlugin=(e,t)=>{let{component:r,options:n={},containers:o={},reducers:i={},epics:a={},lazy:s=!1,enabler:l=(()=>!0),loader:c}=t;const u=normalizeName(e),p=s?{loadPlugin:e=>{c().then((t=>{const r=t.default||t;e(object_assign__WEBPACK_IMPORTED_MODULE_1___default()(r,{isMapStorePlugin:!0}))}))},enabler:l}:object_assign__WEBPACK_IMPORTED_MODULE_1___default()(r,{isMapStorePlugin:!0});return{[u]:object_assign__WEBPACK_IMPORTED_MODULE_1___default()(p,o,n),reducers:i,epics:a}},loadPlugin=(e,t)=>loadScript(e).then((()=>importPlugin(t))).then((e=>({name:t,plugin:e}))),__WEBPACK_DEFAULT_EXPORT__={combineReducers,combineEpics,filterState,filterDisabledPlugins,getMonitoredState,mapPluginsPosition,getPlugins,getPluginDescriptor,getPluginItems,getConfiguredPlugin,setRefToWrappedComponent,connect,createPlugin,importPlugin,loadPlugin,handleExpression,getMorePrioritizedContainer,getPluginConfiguration,isMapStorePlugin}},33044:(e,t,r)=>{"use strict";r.r(t),r.d(t,{setStore:()=>h,getSecurityInfo:()=>f,getUser:()=>y,getBasicAuthHeader:()=>v,getToken:()=>b,getRefreshToken:()=>w,getUserAttributes:()=>_,findUserAttribute:()=>E,findUserAttributeValue:()=>P,getAuthenticationRules:()=>O,isAuthenticationActivated:()=>x,getAuthenticationMethod:()=>S,getAuthenticationRule:()=>T,getAuthKeyParameter:()=>C,getAuthenticationHeaders:()=>D,addAuthenticationParameter:()=>F,addAuthenticationToUrl:()=>I,clearNilValuesForParams:()=>M,addAuthenticationToSLD:()=>L,cleanAuthParamsFromURL:()=>A,default:()=>R});var n=r(37275),o=r(72500),i=r.n(o),a=r(27418),s=r.n(a),l=r(91175),c=r.n(l),u=r(14293),p=r.n(u),d=r(1469),g=r.n(d),m=r(76825);function h(e){(0,m.PQ)(e)}function f(){return(0,m.y0)().security||{}}function y(){return f()?.user}function v(){return f()?.authHeader}function b(){return f()?.token}function w(){return f()?.refresh_token}function _(e){const t=e||y();if(!t||!t.attribute)return[];const r=t.attribute;return g()(r)?r:[r]}function E(e){const t=_();return t&&e?c()(t.filter((t=>t.name&&t.name.toLowerCase()===e.toLowerCase()))):null}function P(e){const t=E(e);return t?.value}function O(){return n.ZP.getConfigProp("authenticationRules")||[]}function x(){return n.ZP.getConfigProp("useAuthenticationRules")||!1}function S(e){const t=c()(O().filter((t=>t&&t.urlPattern&&e.match(new RegExp(t.urlPattern,"i")))));return t?.method}function T(e){return c()(O().filter((t=>t&&t.urlPattern&&e.match(new RegExp(t.urlPattern,"i")))))}function C(e){const t=T(e);return t?.authkeyParamName??"authkey"}function D(e,t){if(!e||!x())return null;if("bearer"===S(e)){const e=p()(t)?b():t;return e?{Authorization:`Bearer ${e}`}:null}return null}function F(e,t,r){if(!e||!x())return t;switch(S(e)){case"authkey":{const n=p()(r)?b():r;if(!n)return t;const o=C(e);return s()(t||{},{[o]:n})}case"test":{const r=T(e),n=r?r.token:"",o=C(e);return s()(t||{},{[o]:n})}default:return t}}function I(e){if(!e||!x())return e;const t=i().parse(e,!0);return t.query=F(e,t.query),delete t.search,i().format(t)}function M(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce(((t,r)=>p()(e[r])?t:{...t,[r]:e[r]}),{})}function L(e,t){if(e.SLD){const r=i().parse(e.SLD,!0),n=F(e.SLD,r.query,t.securityToken);return s()({},e,{SLD:i().format(s()({},r,{query:n,search:void 0}))})}return e}function A(e){return n.ZP.filterUrlParams(e,[C(e)].filter((e=>e)))}const R={setStore:h,getSecurityInfo:f,getUser:y,getBasicAuthHeader:v,getToken:b,getRefreshToken:w,getUserAttributes:_,findUserAttribute:E,findUserAttributeValue:P,getAuthenticationRules:O,isAuthenticationActivated:x,getAuthenticationMethod:S,getAuthenticationRule:T,addAuthenticationToUrl:I,addAuthenticationParameter:F,clearNilValuesForParams:M,addAuthenticationToSLD:L,getAuthKeyParameter:C,cleanAuthParamsFromURL:A,getAuthenticationHeaders:D}},59112:(e,t,r)=>{"use strict";r(13218),r(27361),r(86638),r(91175)},59286:(e,t,r)=>{"use strict";r.d(t,{getCleanTemplate:()=>u,generateTemplateString:()=>p});var n=r(47037),o=r.n(n),i=r(18721),a=r.n(i),s=r(92742),l=r.n(s);r(41106);const c=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=o()(t)&&l()(t.substring(r,t.length-n))||"";return a()(e,i)},u=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:()=>"";const s=o()(e)&&e.match(r),l=s&&s.map((e=>{const r=e.replace(/(<([^>]+)>)/gi,"");return{previous:e,next:c(t,r,n,i)?r:a(e)}}))||null;return l&&l.reduce(((e,t)=>e.replace(t.previous,t.next)),e)||e||""},p=(d={},function(e,t){var r=d[e];return r&&!t||(r=r=>{let n=e.replace(/\$\{([\s]*[^;\s\{]+[\s]*)\}/g,((e,n)=>(t||(e=>e))(n.trim().split(".").reduce(((e,t)=>e&&e[t]),r))));return o()(n)&&n||""},t||(d[e]=r)),r});var d},55237:(e,t,r)=>{"use strict";r.d(t,{$4:()=>d,kN:()=>g,oD:()=>m,V$:()=>h,uH:()=>f});var n=r(47037),o=r.n(n),i=r(47960),a=r.n(i),s=r(27361),l=r.n(s),c=r(84596),u=r.n(c),p=(r(30381),r(86638));const d=e=>6e4*e.getTimezoneOffset(),g=e=>{let t=e;!a()(e)&o()(e)&&(t=new Date(e));let r=t.getUTCHours();r=r<10?"0"+r:r;let n=t.getUTCMinutes();n=n<10?"0"+n:n;let i=t.getUTCSeconds();return i=i<10?"0"+i:i,`${r}:${n}:${i}`},m=e=>{let t=e;!a()(e)&o()(e)&&(t=new Date(e));let r=t.getUTCMonth()+1,n=t.getUTCDate();return r=r<10?"0"+r:r,n=n<10?"0"+n:n,`${t.getUTCFullYear()}-${r}-${n}`},h=(e,t)=>{const r=(0,p.mh)(e),n="HH:mm:SS";switch(t){case"time":return n;case"date":return r;default:return r+" "+n}},f=function(){let{Domains:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=u()(e.DimensionDomain||[]).concat(),n=e["@version"]||e.version;const o=l()(e,"SpaceDomain.BoundingBox");return o&&r.push({Identifier:"space",Domain:o}),r.map((e=>{let{Identifier:r,Domain:o}=e;return{source:{type:"multidim-extension",version:n,url:t},name:r,domain:o}}))}},7294:(e,t,r)=>{"use strict";r.d(t,{nn:()=>b,Bf:()=>w,Wg:()=>_,C2:()=>E,s5:()=>P,G6:()=>O,b4:()=>x,EN:()=>S,JY:()=>T,h7:()=>C});var n=r(90183),o=r(47037),i=r.n(o),a=r(1469),s=r.n(a),l=r(13218),c=r.n(l),u=r(91175),p=r.n(u),d=r(84596),g=r.n(d),m=r(12571),h=r.n(m),f=r(89734),y=r.n(f);let v;const b=e=>{let t=new Array(30);for(let r=0;r<30;++r)t[r]=e.tileMatrixPrefix+r;return t},w=(e,t)=>c()(e)&&s()(e[t])&&e[t]||s()(e)&&e||[],_=(e,t)=>e.length>t?h()(e,0,t):e.length<t?e.concat(new Array(t-e.length)):e,E=function(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t;return e&&i()(e)?e:e?(0,n.getEquivalentSRS)(t,r).reduce(((t,r)=>{if(s()(e)){const i=p()(e.filter((e=>(e["ows:Identifier"]===r||(0,n.getEPSGCode)(e["ows:SupportedCRS"])===r)&&o[e["ows:Identifier"]])));return i&&i["ows:Identifier"]?i["ows:Identifier"]:t}return c()(e)&&e[r]||t}),a):a},P=e=>{const t=v.getOperations(e);return v.getOperation(t,"GetTile","KVP")?"KVP":v.getOperation(t,"GetTile","RESTful")&&"RESTful"},O=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g()(e.Capabilities["ows:OperationsMetadata"]["ows:Operation"])},x=(e,t,r)=>p()(g()(p()(e.filter((e=>e.$.name===t)).map((e=>g()(e["ows:DCP"]["ows:HTTP"]["ows:Get"]))))||[]).filter((e=>(e["ows:Constraint"]&&e["ows:Constraint"]["ows:AllowedValues"]["ows:Value"])===r)).map((e=>e.$["xlink:href"]))),S=e=>e?.Style?1===g()(e.Style).length?p()(g()(e.Style).map((e=>e["ows:Identifier"]))):p()(g()(e.Style).filter((e=>{let{$:t={}}=e;return"true"===t.isDefault})).map((e=>e["ows:Identifier"]))):null,T=e=>p()(g()(e.Format)),C=(e,t)=>{const r=E(e.tileMatrixSet,t,e.allowedSRS,e.matrixIds),n=e.matrixIds&&w(e.matrixIds,r||t),o=((e,t)=>e?{...e,TileMatrix:y()(e?.TileMatrix.map((e=>({...e,ScaleDenominator:Number(e.ScaleDenominator)}))),"ScaleDenominator").reverse().filter((e=>!t||t.map((function(){let{identifier:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e})).indexOf(e["ows:Identifier"])>=0))}:e)(p()(e.tileMatrixSet.filter((e=>e["ows:Identifier"]===r))),n),i=o?.TileMatrix.map?.((e=>e["ows:Identifier"]));return{matrixIds:i&&n?n.sort(((e,t)=>i.indexOf(e.identifier)-i.indexOf(t.identifier))):n,tileMatrixSetName:r,tileMatrixSet:o}};v={getOperations:O,getOperation:x}},95344:(e,t,r)=>{const n=r(13311);let o=r(27418)({},r(89808).Z);e.exports={get:()=>o,set:e=>{o=e},register:e=>{let{name:t,editors:r}=e;r&&(o[t]=r)},remove:e=>{if(t=e,-1!==Object.keys(o).indexOf(t))try{return delete o[e],!0}catch(e){return!1}var t;return!1},clean:()=>{o={}},getCustomEditor:function(e){let{attribute:t,url:r,typeName:i}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{type:s,generalProps:l={},props:c}=arguments.length>2?arguments[2]:void 0;const u=n(a,(e=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).length>0&&Object.keys(e).reduce(((r,n)=>{const o=new RegExp(e[n]);return r&&o.test(t[n])}),!0)}(e.regex,{attribute:t,url:r,typeName:i})));if(u){const e=((e,t,r)=>{if(o[t]){if(o[t][e])return o[t][e](r);if(o[t].defaultEditor)return o[t].defaultEditor(r)}return null})(s,u.editor,{...c,...l,...u.editorProps||{}});return e}return null}}},39156:(e,t,r)=>{const n=r(2245),o=r(84596),{wfsToGmlVersion:i}=r(78889);e.exports=function(){let{wfsVersion:e="1.1.0",gmlVersion:t,filterNS:r,wfsNS:a="wfs"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=t;!s&&e?s=i(e):s||(s="3.1.1");const l=t=>o(t).map((t=>`<${"2.0"===e?"fes":"ogc"}:PropertyName>${t}</${"2.0"===e?"fes":"ogc"}:PropertyName>`)).join("");return{propertyName:l,...n({gmlVersion:s,wfsVersion:e,filterNS:r||"2.0"===e?"fes":"ogc"}),getFeature:(t,r)=>`<${a}:GetFeature ${function(){let{viewParams:t,resultType:r,outputFormat:n,startIndex:o,maxFeatures:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0===e.indexOf("1.")?'service="WFS" version="'+(s=e)+'" '+("1.0.0"===s?'outputFormat="GML2" ':"")+'xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs '+("1.0.0"===s?`http://schemas.opengis.net/wfs/${s}/WFS-basic.xsd"`:`http://schemas.opengis.net/wfs/${s}/wfs.xsd"`):(e=>'service="WFS" version="'+e+'" xmlns:wfs="http://www.opengis.net/wfs/2.0" xmlns:fes="http://www.opengis.net/fes/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd"')(e))+(r?` resultType="${r}"`:"")+(n?` outputFormat="${n}"`:"")+(o||0===o?` startIndex="${o}"`:"")+(i||0===i?" "+(a=i,0===e.indexOf("2.")?`count="${a}"`:`maxFeatures="${a}"`):"")+(t?` viewParams="${t}"`:"");var a,s}(r)}>${Array.isArray(t)?t.join(""):t}</${a}:GetFeature>`,sortBy:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ASC";return`<${a}:SortBy><${a}:SortProperty>${l(e)}<${a}:SortOrder>${t}</${a}:SortOrder></${a}:SortProperty></${a}:SortBy>`},query:function(t,r){let{srsName:n="EPSG:4326"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return`<${a}:Query ${"2.0"===e?"typeNames":"typeName"}="${t}" ${"native"!==n?`srsName="${n}"`:""}>${Array.isArray(r)?r.join(""):r}</${a}:Query>`}}}},84069:(e,t,r)=>{const{isFilterValid:n,toOGCFilterParts:o}=r(47805),i=r(2245),{and:a}=i({});e.exports={getWpsPayload:e=>{let{layerName:t,layerFilter:r,attribute:i,maxFeatures:s,startIndex:l,value:c}=e;const u=c?'<ogc:PropertyIsLike matchCase="false" wildCard="*" singleChar="." escapeChar="!">   <ogc:PropertyName>'+i+"</ogc:PropertyName>   <ogc:Literal>*"+c+"*</ogc:Literal></ogc:PropertyIsLike>":"",p=r&&!r.disabled&&n(r)?o(r,"1.1.0","ogc"):[];return'<wps:Execute xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.0.0" service="WPS" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">  <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">gs:PagedUnique</ows:Identifier>  <wps:DataInputs>    <wps:Input>      <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">features</ows:Identifier>      <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">features</ows:Title>      <wps:Data />      <wps:Reference xmlns:xlink="http://www.w3.org/1999/xlink" mimeType="text/xml" xlink:href="http://geoserver/wfs" method="POST">        <wps:Body>         <wfs:GetFeature xmlns:wfs="http://www.opengis.net/wfs" service="WFS" version="1.0.0">           <wfs:Query typeName="'+t+'">'+(u.length>0||p.length>0?'<ogc:Filter xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml">'+a(...p,u)+"</ogc:Filter>":"")+'             <ogc:SortBy xmlns:ogc="http://www.opengis.net/ogc">               <ogc:SortProperty>                 <ogc:PropertyName>'+i+'</ogc:PropertyName>               </ogc:SortProperty>             </ogc:SortBy>           </wfs:Query>         </wfs:GetFeature>       </wps:Body>     </wps:Reference>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">fieldName</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">fieldName</ows:Title>     <wps:Data>       <wps:LiteralData>'+i+'</wps:LiteralData>     </wps:Data>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">maxFeatures</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">maxFeatures</ows:Title>     <wps:Data>       <wps:LiteralData>'+s+'</wps:LiteralData>     </wps:Data>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">startIndex</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">startIndex</ows:Title>     <wps:Data>       <wps:LiteralData>'+l+'</wps:LiteralData>     </wps:Data>   </wps:Input> </wps:DataInputs> <wps:ResponseForm>   <wps:RawDataOutput mimeType="application/json">     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">result</ows:Identifier>   </wps:RawDataOutput> </wps:ResponseForm></wps:Execute>'}}},72810:()=>{},12993:()=>{},78699:()=>{},1386:()=>{},86799:()=>{}}]);