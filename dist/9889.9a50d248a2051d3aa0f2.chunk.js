(self.webpackChunkMyMapStoreProject=self.webpackChunkMyMapStoreProject||[]).push([[9889],{57043:(t,e,i)=>{var r=i(62488),o=i(21078),s=i(278),n=i(1469);t.exports=function(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),i=arguments[0],a=t;a--;)e[a-1]=arguments[a];return r(n(i)?s(i):[i],o(e,1))}},23493:(t,e,i)=>{var r=i(23279),o=i(13218);t.exports=function(t,e,i){var s=!0,n=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return o(i)&&(s="leading"in i?!!i.leading:s,n="trailing"in i?!!i.trailing:n),r(t,e,{leading:s,maxWait:e,trailing:n})}},69669:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var r=i(21915),o=i(28795),s=i(32538),n=i(38667),a=function(t){function e(e,i,r){if(t.call(this),void 0!==r&&void 0===i)this.setFlatCoordinates(r,e);else{var o=i||0;this.setCenterAndRadius(e,o,r)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,i,r){var o=this.flatCoordinates,s=t-o[0],n=e-o[1],a=s*s+n*n;if(a<r){if(0===a)for(var h=0;h<this.stride;++h)i[h]=o[h];else{var u=this.getRadius()/Math.sqrt(a);i[0]=o[0]+u*s,i[1]=o[1]+u*n;for(var d=2;d<this.stride;++d)i[d]=o[d]}return i.length=this.stride,a}return r},e.prototype.containsXY=function(t,e){var i=this.flatCoordinates,r=t-i[0],o=e-i[1];return r*r+o*o<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return(0,r.T9)(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return o.Z.CIRCLE},e.prototype.intersectsExtent=function(t){var e=this.getExtent();if((0,r.kK)(t,e)){var i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||t[1]<=i[1]&&t[3]>=i[1]||(0,r.H6)(t,this.intersectsCoordinate,this)}return!1},e.prototype.setCenter=function(t){var e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],r=t.slice();r[e]=r[0]+i;for(var o=1;o<e;++o)r[e+o]=t[o];this.setFlatCoordinates(this.layout,r),this.changed()},e.prototype.setCenterAndRadius=function(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,o=(0,n.IG)(r,0,t,this.stride);r[o++]=r[0]+e;for(var s=1,a=this.stride;s<a;++s)r[o++]=r[s];r.length=o,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e}(s.ZP);a.prototype.transform;const h=a},72445:(t,e,i)=>{"use strict";i.d(e,{ZP:()=>M});var r=i(73381),o=i(23068),s=i(30006),n=i(86968),a=i(58493),h=i(90728),u=i(13002),d=i(9520),l=i(36403),_=i(64011),c=i(69669),p=i(28795),g=i(44538),f=i(25642),y=i(52329),v=i(13987),m=i(14303),C=i(52043),x=i(40353),F=i(38024),T=i(73604),E=i(29902),w=i(97016),P=i(31219),L="Point",S="LineString",k="Polygon",Z="Circle",I="drawstart",G=function(t){function e(e,i){t.call(this,e),this.feature=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(d.ZP);const M=function(t){function e(e){var i=e;i.stopDown||(i.stopDown=_.Dv),t.call(this,i),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=function(t){var e;return t===p.Z.POINT||t===p.Z.MULTI_POINT?e=L:t===p.Z.LINE_STRING||t===p.Z.MULTI_LINE_STRING?e=S:t===p.Z.POLYGON||t===p.Z.MULTI_POLYGON?e=k:t===p.Z.CIRCLE&&(e=Z),e}(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_===k?3:2,this.maxPoints_=e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:_.uX;var r,o=e.geometryFunction;if(!o)if(this.type_===p.Z.CIRCLE)o=function(t,e){var i=e||new c.Z([NaN,NaN]),r=(0,h.bI)(t[0],t[1]);return i.setCenterAndRadius(t[0],Math.sqrt(r)),i};else{var s,n=this.mode_;n===L?s=C.Z:n===S?s=g.Z:n===k&&(s=x.ZP),o=function(t,e){var i=e;return i?n===k?t[0].length?i.setCoordinates([t[0].concat([t[0][0]])]):i.setCoordinates([]):i.setCoordinates(t):i=new s(t),i}}this.geometryFunction_=o,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new E.Z({source:new w.Z({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(r=(0,P.createEditingStyle)(),function(t,e){return r[t.getGeometry().getType()]}),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:l.rM,this.freehandCondition_,e.freehand?this.freehandCondition_=l.Bx:this.freehandCondition_=e.freehandCondition?e.freehandCondition:l.vY,(0,u.oL)(this,(0,a.v_)(T.Z.ACTIVE),this.updateState_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===r.Z.CONTEXTMENU&&e.preventDefault(),this.freehand_=this.mode_!==L&&this.freehandCondition_(e);var i=e.type===s.Z.POINTERMOVE,o=!0;return!this.freehand_&&this.lastDragTime_&&e.type===s.Z.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===s.Z.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e),o=!1):this.freehand_&&e.type===s.Z.POINTERDOWN?o=!1:i?(o=e.type===s.Z.POINTERMOVE)&&this.freehand_?o=this.handlePointerMove_(e):(e.pointerEvent.pointerType==m.T2||e.type===s.Z.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===s.Z.DBLCLICK&&(o=!1),t.prototype.handleEvent.call(this,e)&&o},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new n.Z(s.Z.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)},e.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var i=this.mode_===Z;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===L&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,r=e[0]-i[0],o=e[1]-i[1],s=r*r+o*o;if(this.shouldHandle_=this.freehand_?s>this.squaredClickTolerance_:s<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,r=[this.finishCoordinate_];if(this.mode_===S)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===k){var o=this.sketchCoords_;i=o[0].length>this.minPoints_,r=[o[0][0],o[0][o[0].length-2]]}if(i)for(var s=t.map,n=0,a=r.length;n<a;n++){var h=r[n],u=s.getPixelFromCoordinate(h),d=t.pixel,l=d[0]-u[0],_=d[1]-u[1],c=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(l*l+_*_)<=c){this.finishCoordinate_=h;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new o.Z(new C.Z(e)),this.updateSketchFeatures_())},e.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===L?this.sketchCoords_=e.slice():this.mode_===k?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new o.Z(new g.Z(this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new o.Z,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new G(I,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,i,r,s=t.coordinate,n=this.sketchFeature_.getGeometry();if(this.mode_===L?i=this.sketchCoords_:this.mode_===k?(i=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(s=this.finishCoordinate_.slice())):i=(e=this.sketchCoords_)[e.length-1],i[0]=s[0],i[1]=s[1],this.geometryFunction_(this.sketchCoords_,n),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(s),n.getType()==p.Z.POLYGON&&this.mode_!==k){this.sketchLine_||(this.sketchLine_=new o.Z);var a=n.getLinearRing(0);(r=this.sketchLine_.getGeometry())?(r.setFlatCoordinates(a.getLayout(),a.getFlatCoordinates()),r.changed()):(r=new g.Z(a.getFlatCoordinates(),a.getLayout()),this.sketchLine_.setGeometry(r))}else this.sketchLineCoords_&&(r=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,i,r=t.coordinate,o=this.sketchFeature_.getGeometry();this.mode_===S?(this.finishCoordinate_=r.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(r.slice()),this.geometryFunction_(i,o)):this.mode_===k&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(r.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,o)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry();this.mode_===S?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===k&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry();this.mode_===S?(e.pop(),this.geometryFunction_(e,i)):this.mode_===k&&(e[0].pop(),this.geometryFunction_(e,i),e=i.getCoordinates()),this.type_===p.Z.MULTI_POINT?t.setGeometry(new y.Z([e])):this.type_===p.Z.MULTI_LINE_STRING?t.setGeometry(new f.Z([e])):this.type_===p.Z.MULTI_POLYGON&&t.setGeometry(new v.Z([e])),this.dispatchEvent(new G("drawend",t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new G(I,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},e}(F.Z)},1577:(t,e,i)=>{"use strict";i.d(e,{Z:()=>k});var r=i(49179),o=i(78426),s=i(19629),n=i(23068),a=i(30006),h=i(79682),u=i(90728),d=i(13002),l=i(9520),_=i(73381),c=i(36403),p=i(21915),g=i(28795),f=i(52043),y=i(38024),v=i(29902),m=i(97016),C=i(25753),x=i(73101),F=i(31219),T=1,E="modifyend",w=function(t){function e(e,i,r){t.call(this,e),this.features=i,this.mapBrowserEvent=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(l.ZP);function P(t,e){return t.index-e.index}function L(t,e){var i=e.geometry;if(i.getType()===g.Z.CIRCLE){var r=i;if(e.index===T){var o=(0,u.bI)(r.getCenter(),t),s=Math.sqrt(o)-r.getRadius();return s*s}}return(0,u.Bs)(t,e.segment)}function S(t,e){var i=e.geometry;return i.getType()===g.Z.CIRCLE&&e.index===T?i.getClosestPoint(t):(0,u.oL)(t,e.segment)}const k=function(t){function e(e){var i,r;if(t.call(this,e),this.condition_=e.condition?e.condition:c.Xp,this.defaultDeleteCondition_=function(t){return(0,c.Ko)(t)&&(0,c.Kf)(t)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:c.Bx,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new x.Z,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new v.Z({source:new m.Z({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(i=(0,F.createEditingStyle)(),function(t,e){return i[g.Z.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,e.source?(this.source_=e.source,r=new o.Z(this.source_.getFeatures()),(0,d.oL)(this.source_,C.Z.ADDFEATURE,this.handleSourceAdd_,this),(0,d.oL)(this.source_,C.Z.REMOVEFEATURE,this.handleSourceRemove_,this)):r=e.features,!r)throw new Error("The modify interaction requires features or a source");this.features_=r,this.features_.forEach(this.addFeature_.bind(this)),(0,d.oL)(this.features_,s.Z.ADD,this.handleFeatureAdd_,this),(0,d.oL)(this.features_,s.Z.REMOVE,this.handleFeatureRemove_,this),this.lastPointerEvent_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature_=function(t){var e=t.getGeometry();e&&e.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[e.getType()].call(this,t,e);var i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),(0,d.oL)(t,_.Z.CHANGE,this.handleFeatureChange_,this)},e.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new w("modifystart",this.features_,t)))},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),(0,d.Ev)(t,_.Z.CHANGE,this.handleFeatureChange_,this)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,i=[];e.forEach((function(e){t===e.feature&&i.push(e)}));for(var r=i.length-1;r>=0;--r)e.remove(i[r])},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},e.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),r={feature:t,geometry:e,segment:[i,i]};this.rBush_.insert(e.getExtent(),r)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,o=i.length;r<o;++r){var s=i[r],n={feature:t,geometry:e,depth:[r],index:r,segment:[s,s]};this.rBush_.insert(e.getExtent(),n)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,o=i.length-1;r<o;++r){var s=i.slice(r,r+2),n={feature:t,geometry:e,index:r,segment:s};this.rBush_.insert((0,p.hI)(s),n)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,o=i.length;r<o;++r)for(var s=i[r],n=0,a=s.length-1;n<a;++n){var h=s.slice(n,n+2),u={feature:t,geometry:e,depth:[r],index:n,segment:h};this.rBush_.insert((0,p.hI)(h),u)}},e.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,o=i.length;r<o;++r)for(var s=i[r],n=0,a=s.length-1;n<a;++n){var h=s.slice(n,n+2),u={feature:t,geometry:e,depth:[r],index:n,segment:h};this.rBush_.insert((0,p.hI)(h),u)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,o=i.length;r<o;++r)for(var s=i[r],n=0,a=s.length;n<a;++n)for(var h=s[n],u=0,d=h.length-1;u<d;++u){var l=h.slice(u,u+2),_={feature:t,geometry:e,depth:[n,r],index:u,segment:l};this.rBush_.insert((0,p.hI)(l),_)}},e.prototype.writeCircleGeometry_=function(t,e){var i=e.getCenter(),r={feature:t,geometry:e,index:0,segment:[i,i]},o={feature:t,geometry:e,index:T,segment:[i,i]},s=[r,o];r.featureSegments=o.featureSegments=s,this.rBush_.insert((0,p.HK)(i),r),this.rBush_.insert(e.getExtent(),o)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),r=0;r<i.length;++r)this.SEGMENT_WRITERS_[i[r].getType()].call(this,t,i[r])},e.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;return e?e.getGeometry().setCoordinates(t):(e=new n.Z(new f.Z(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e)),e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=a.Z.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(i=!(e.type!=a.Z.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==a.Z.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!i);var i},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,i=0,r=this.dragSegments_.length;i<r;++i){for(var o=this.dragSegments_[i],s=o[0],n=s.depth,a=s.geometry,h=void 0,d=s.segment,l=o[1];e.length<a.getStride();)e.push(d[l][e.length]);switch(a.getType()){case g.Z.POINT:h=e,d[0]=d[1]=e;break;case g.Z.MULTI_POINT:(h=a.getCoordinates())[s.index]=e,d[0]=d[1]=e;break;case g.Z.LINE_STRING:(h=a.getCoordinates())[s.index+l]=e,d[l]=e;break;case g.Z.MULTI_LINE_STRING:case g.Z.POLYGON:(h=a.getCoordinates())[n[0]][s.index+l]=e,d[l]=e;break;case g.Z.MULTI_POLYGON:(h=a.getCoordinates())[n[1]][n[0]][s.index+l]=e,d[l]=e;break;case g.Z.CIRCLE:d[0]=d[1]=e,0===s.index?(this.changingFeature_=!0,a.setCenter(e),this.changingFeature_=!1):(this.changingFeature_=!0,a.setRadius((0,u.TE)(a.getCenter(),e)),this.changingFeature_=!1)}h&&this.setGeometryCoordinates_(a,h)}this.createOrUpdateVertexFeature_(e)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;this.handlePointerAtPixel_(t.pixel,t.map);var e=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0,this.modified_=!1;var i=this.vertexFeature_;if(i){var o=[],s=i.getGeometry().getCoordinates(),n=(0,p.hI)([s]),a=this.rBush_.getInExtent(n),h={};a.sort(P);for(var d=0,l=a.length;d<l;++d){var _=a[d],c=_.segment,f=(0,r.sq)(_.feature),y=_.depth;if(y&&(f+="-"+y.join("-")),h[f]||(h[f]=new Array(2)),_.geometry.getType()===g.Z.CIRCLE&&_.index===T){var v=S(e,_);(0,u.fS)(v,s)&&!h[f][0]&&(this.dragSegments_.push([_,0]),h[f][0]=_)}else if((0,u.fS)(c[0],s)&&!h[f][0])this.dragSegments_.push([_,0]),h[f][0]=_;else if((0,u.fS)(c[1],s)&&!h[f][1]){if((_.geometry.getType()===g.Z.LINE_STRING||_.geometry.getType()===g.Z.MULTI_LINE_STRING)&&h[f][0]&&0===h[f][0].index)continue;this.dragSegments_.push([_,1]),h[f][1]=_}else this.insertVertexCondition_(t)&&(0,r.sq)(c)in this.vertexSegments_&&!h[f][0]&&!h[f][1]&&o.push([_,s])}o.length&&this.willModifyFeatures_(t);for(var m=o.length-1;m>=0;--m)this.insertVertex_.apply(this,o[m])}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var i=this.dragSegments_[e][0],r=i.geometry;if(r.getType()===g.Z.CIRCLE){var o=r.getCenter(),s=i.featureSegments[0],n=i.featureSegments[1];s.segment[0]=s.segment[1]=o,n.segment[0]=n.segment[1]=o,this.rBush_.update((0,p.HK)(o),s),this.rBush_.update(r.getExtent(),n)}else this.rBush_.update((0,p.hI)(i.segment),i)}return this.modified_&&(this.dispatchEvent(new w(E,this.features_,t)),this.modified_=!1),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map)},e.prototype.handlePointerAtPixel_=function(t,e){var i=e.getCoordinateFromPixel(t),o=(0,p.f3)((0,p.HK)(i),e.getView().getResolution()*this.pixelTolerance_),s=this.rBush_.getInExtent(o);if(s.length>0){s.sort((function(t,e){return L(i,t)-L(i,e)}));var n=s[0],a=n.segment,h=S(i,n),d=e.getPixelFromCoordinate(h),l=(0,u.TE)(t,d);if(l<=this.pixelTolerance_){var _={};if(n.geometry.getType()===g.Z.CIRCLE&&n.index===T)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(h);else{var c=e.getPixelFromCoordinate(a[0]),f=e.getPixelFromCoordinate(a[1]),y=(0,u.bI)(d,c),v=(0,u.bI)(d,f);l=Math.sqrt(Math.min(y,v)),this.snappedToVertex_=l<=this.pixelTolerance_,this.snappedToVertex_&&(h=y>v?a[1]:a[0]),this.createOrUpdateVertexFeature_(h);for(var m=1,C=s.length;m<C;++m){var x=s[m].segment;if(!((0,u.fS)(a[0],x[0])&&(0,u.fS)(a[1],x[1])||(0,u.fS)(a[0],x[1])&&(0,u.fS)(a[1],x[0])))break;_[(0,r.sq)(x)]=!0}}return _[(0,r.sq)(a)]=!0,void(this.vertexSegments_=_)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var i,r=t.segment,o=t.feature,s=t.geometry,n=t.depth,a=t.index;e.length<s.getStride();)e.push(0);switch(s.getType()){case g.Z.MULTI_LINE_STRING:case g.Z.POLYGON:(i=s.getCoordinates())[n[0]].splice(a+1,0,e);break;case g.Z.MULTI_POLYGON:(i=s.getCoordinates())[n[1]][n[0]].splice(a+1,0,e);break;case g.Z.LINE_STRING:(i=s.getCoordinates()).splice(a+1,0,e);break;default:return}this.setGeometryCoordinates_(s,i);var h=this.rBush_;h.remove(t),this.updateSegmentIndices_(s,a,n,1);var u={segment:[r[0],e],feature:o,geometry:s,depth:n,index:a};h.insert((0,p.hI)(u.segment),u),this.dragSegments_.push([u,1]);var d={segment:[e,r[1]],feature:o,geometry:s,depth:n,index:a+1};h.insert((0,p.hI)(d.segment),d),this.dragSegments_.push([d,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=a.Z.POINTERDRAG){var t=this.lastPointerEvent_;return this.willModifyFeatures_(t),this.removeVertex_(),this.dispatchEvent(new w(E,this.features_,t)),this.modified_=!1,!0}return!1},e.prototype.removeVertex_=function(){var t,e,i,o,s,n,a,h,u,d,l,_=this.dragSegments_,c={},f=!1;for(s=_.length-1;s>=0;--s)d=(i=_[s])[0],l=(0,r.sq)(d.feature),d.depth&&(l+="-"+d.depth.join("-")),l in c||(c[l]={}),0===i[1]?(c[l].right=d,c[l].index=d.index):1==i[1]&&(c[l].left=d,c[l].index=d.index+1);for(l in c){switch(u=c[l].right,a=c[l].left,(h=(n=c[l].index)-1)<0&&(h=0),t=e=(o=(d=void 0!==a?a:u).geometry).getCoordinates(),f=!1,o.getType()){case g.Z.MULTI_LINE_STRING:e[d.depth[0]].length>2&&(e[d.depth[0]].splice(n,1),f=!0);break;case g.Z.LINE_STRING:e.length>2&&(e.splice(n,1),f=!0);break;case g.Z.MULTI_POLYGON:t=t[d.depth[1]];case g.Z.POLYGON:(t=t[d.depth[0]]).length>4&&(n==t.length-1&&(n=0),t.splice(n,1),f=!0,0===n&&(t.pop(),t.push(t[0]),h=t.length-1))}if(f){this.setGeometryCoordinates_(o,e);var y=[];if(void 0!==a&&(this.rBush_.remove(a),y.push(a.segment[0])),void 0!==u&&(this.rBush_.remove(u),y.push(u.segment[1])),void 0!==a&&void 0!==u){var v={depth:d.depth,feature:d.feature,geometry:d.geometry,index:h,segment:y};this.rBush_.insert((0,p.hI)(v.segment),v)}this.updateSegmentIndices_(o,n,d.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),_.length=0}}return f},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,i,r){this.rBush_.forEachInExtent(t.getExtent(),(function(o){o.geometry===t&&(void 0===i||void 0===o.depth||(0,h.fS)(o.depth,i))&&o.index>e&&(o.index+=r)}))},e}(y.Z)},51273:(t,e,i)=>{"use strict";i.d(e,{Z:()=>m});var r=i(49179),o=i(19629),s=i(79682),n=i(13002),a=i(9520),h=i(36403),u=i(64011),d=i(28795),l=i(47588),_=i(29902),c=i(13580),p=i(97016),g=i(31219),f={SELECT:"select"},y=function(t){function e(e,i,r,o){t.call(this,e),this.selected=i,this.deselected=r,this.mapBrowserEvent=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.ZP);function v(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),i=this.removeCondition_(t),r=this.toggleCondition_(t),o=!e&&!i&&!r,n=t.map,a=this.getFeatures(),u=[],d=[];if(o){(0,c.ZH)(this.featureLayerAssociation_),n.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return d.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var l=a.getLength()-1;l>=0;--l){var _=a.item(l),p=d.indexOf(_);p>-1?d.splice(p,1):(a.remove(_),u.push(_))}0!==d.length&&a.extend(d)}else{n.forEachFeatureAtPixel(t.pixel,function(t,o){if(this.filter_(t,o))return!e&&!r||(0,s.q9)(a.getArray(),t)?(i||r)&&(0,s.q9)(a.getArray(),t)&&(u.push(t),this.removeFeatureLayerAssociation_(t)):(d.push(t),this.addFeatureLayerAssociation_(t,o)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var g=u.length-1;g>=0;--g)a.remove(u[g]);a.extend(d)}return(d.length>0||u.length>0)&&this.dispatchEvent(new y(f.SELECT,d,u,t)),(0,h.MJ)(t)}const m=function(t){function e(e){t.call(this,{handleEvent:v});var i=e||{};this.condition_=i.condition?i.condition:h.Kf,this.addCondition_=i.addCondition?i.addCondition:h.Fi,this.removeCondition_=i.removeCondition?i.removeCondition:h.Fi,this.toggleCondition_=i.toggleCondition?i.toggleCondition:h.vY,this.multi_=!!i.multi&&i.multi,this.filter_=i.filter?i.filter:u.uX,this.hitTolerance_=i.hitTolerance?i.hitTolerance:0;var r,a,l=new _.Z({source:new p.Z({useSpatialIndex:!1,features:i.features,wrapX:i.wrapX}),style:i.style?i.style:(a=(0,g.createEditingStyle)(),(0,s.l7)(a[d.Z.POLYGON],a[d.Z.LINE_STRING]),(0,s.l7)(a[d.Z.GEOMETRY_COLLECTION],a[d.Z.LINE_STRING]),function(t,e){return t.getGeometry()?a[t.getGeometry().getType()]:null}),updateWhileAnimating:!0,updateWhileInteracting:!0});if(this.featureOverlay_=l,i.layers)if("function"==typeof i.layers)r=i.layers;else{var c=i.layers;r=function(t){return(0,s.q9)(c,t)}}else r=u.uX;this.layerFilter_=r,this.featureLayerAssociation_={};var f=this.getFeatures();(0,n.oL)(f,o.Z.ADD,this.addFeature_,this),(0,n.oL)(f,o.Z.REMOVE,this.removeFeature_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeatureLayerAssociation_=function(t,e){this.featureLayerAssociation_[(0,r.sq)(t)]=e},e.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[(0,r.sq)(t)]},e.prototype.getOverlay=function(){return this.featureOverlay_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var i=this.getMap(),r=this.getFeatures();i&&r.forEach(i.unskipFeature.bind(i)),t.prototype.setMap.call(this,e),this.featureOverlay_.setMap(e),e&&r.forEach(e.skipFeature.bind(e))},e.prototype.addFeature_=function(t){var e=this.getMap();e&&e.skipFeature(t.element)},e.prototype.removeFeature_=function(t){var e=this.getMap();e&&e.unskipFeature(t.element)},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[(0,r.sq)(t)]},e}(l.ZP)},29194:(t,e,i)=>{"use strict";i.d(e,{Z:()=>_});var r=i(78426),o=i(58493),s=i(13002),n=i(9520),a=i(64011),h=i(79682),u=i(38024),d=i(73604),l=function(t){function e(e,i,r){t.call(this,e),this.features=i,this.coordinate=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(n.ZP);const _=function(t){function e(e){var i,r=e||{};if(t.call(this,r),this.lastCoordinate_=null,this.features_=void 0!==r.features?r.features:null,r.layers)if("function"==typeof r.layers)i=r.layers;else{var n=r.layers;i=function(t){return(0,h.q9)(n,t)}}else i=a.uX;this.layerFilter_=i,this.hitTolerance_=r.hitTolerance?r.hitTolerance:0,this.lastFeature_=null,(0,s.oL)(this,(0,o.v_)(d.Z.ACTIVE),this.handleActiveChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDownEvent=function(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);var e=this.features_||new r.Z([this.lastFeature_]);return this.dispatchEvent(new l("translatestart",e,t.coordinate)),!0}return!1},e.prototype.handleUpEvent=function(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);var e=this.features_||new r.Z([this.lastFeature_]);return this.dispatchEvent(new l("translateend",e,t.coordinate)),!0}return!1},e.prototype.handleDragEvent=function(t){if(this.lastCoordinate_){var e=t.coordinate,i=e[0]-this.lastCoordinate_[0],o=e[1]-this.lastCoordinate_[1],s=this.features_||new r.Z([this.lastFeature_]);s.forEach((function(t){var e=t.getGeometry();e.translate(i,o),t.setGeometry(e)})),this.lastCoordinate_=e,this.dispatchEvent(new l("translating",s,e))}},e.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},e.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t){if(!this.features_||(0,h.q9)(this.features_.getArray(),t))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var i=this.getMap();t.prototype.setMap.call(this,e),this.updateState_(i)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var e=this.getMap(),i=this.getActive();e&&i||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},e}(u.Z)}}]);