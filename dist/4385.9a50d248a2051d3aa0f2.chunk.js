(self.webpackChunkMyMapStoreProject=self.webpackChunkMyMapStoreProject||[]).push([[4385],{64385:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var i=r(68195),s=r(45697),n=r.n(s),o=r(57557),a=r.n(o),l=r(67076);const c={locale:navigator&&navigator.language,formats:{},messages:{},defaultLocale:"en",defaultFormats:{},formatDate:e=>e,formatTime:e=>e,formatRelative:e=>e,formatNumber:e=>e,formatPlural:e=>e,formatMessage:e=>e,formatHTMLMessage:e=>e,now:()=>new Date};var u=r(90596),p=r(44054),h=r(30072),d=r(5904),g=r(22404),f=r(9056),m=r(6909),y=r(24852),w=r.n(y),b=r(51273),v=r(36403),S=r(20767),I=r(98185),k=r(31219),_=r(9371);function P(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class F extends w().Component{constructor(){super(...arguments),P(this,"getLayer",(()=>{let e;return this.props.map.getLayers().forEach((t=>{this.layersFilter(t)&&(e=t)}),this),e})),P(this,"setSelectInteraction",(()=>{this._selectInteraction.getActive()||this._selectInteraction.setActive(!0)})),P(this,"createSelectInteraction",(()=>{this.createStyle(),this._selectInteraction=new b.Z({layers:this.layersFilter,style:this._style,toggleCondition:v.QC}),this._selectInteraction.on("select",this.selectionChange,this),this.props.map.addInteraction(this._selectInteraction)})),P(this,"selectionChange",(()=>{let e=[];this._selectInteraction.getFeatures().forEach((t=>{e.push(t.getId())})),this.props.updateHighlighted(e,"")})),P(this,"cleanSupport",(()=>{this._selectInteraction&&this._selectInteraction.getActive()&&(this._selectInteraction.getFeatures().clear(),this.props.updateHighlighted([],""),this._selectInteraction.setActive(!1))})),P(this,"layersFilter",(e=>this.props.layer&&e.get("msId")===this.props.layer)),P(this,"createStyle",(()=>{let e=this.props.selectedStyle,t={stroke:new S.default(e.stroke?e.stroke:{color:"blue",width:1}),fill:new I.default(e.fill?e.fill:{color:"blue"})};"Point"===e.type&&(t={image:new _.default({...t,radius:e.radius||5})}),this._style=new k.default(t)})),P(this,"highlightFeatures",(e=>{let t=this.getLayer(),r=this._selectInteraction.getFeatures();r.clear(),t&&t.getSource().getFeatures().map((t=>{-1!==e.indexOf(t.getId())&&r.push(t)}),this)}))}componentDidMount(){this.createSelectInteraction(),"enabled"===this.props.status?this._selectInteraction.setActive(!0):this._selectInteraction.setActive(!1),this.props.features&&this.highlightFeatures(this.props.features)}shouldComponentUpdate(e){let t=this.props;return e.status!==t.status||e.layer!==t.layer||"update"===e.status&&e.features.toString()!==t.features.toString()}UNSAFE_componentWillUpdate(e){switch(e.status){case"enabled":this.setSelectInteraction(e);break;case"disabled":this.cleanSupport();break;case"update":this.highlightFeatures(e.features);break;default:return}}componentWillUnmount(){this._selectInteraction&&(this.cleanSupport(),this._selectInteraction.un("select",this.selectionChange,this),this.props.map.removeInteraction(this._selectInteraction),this._selectInteraction=null,this._style=null)}render(){return null}}P(F,"propTypes",{map:n().object,layer:n().string.isRequired,status:n().oneOf(["disabled","enabled","update"]),updateHighlighted:n().func,selectedStyle:n().object,features:n().array}),P(F,"contextTypes",{messages:n().object}),P(F,"defaultProps",{status:"disabled",updateHighlighted:()=>{},selectedStyle:{type:"Point",radius:12,stroke:{width:4,color:"yellow"},fill:{color:"red"}}});var T=r(97016),C=r(29902),Z=r(72445),j=r(18369);function L(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class D extends w().Component{constructor(){super(...arguments),L(this,"addDrawInteraction",(e=>{this.drawInteraction&&this.removeDrawInteraction();let t=new T.Z,r=new C.Z({source:t,zIndex:1e6,style:new k.default({fill:new I.default({color:"rgba(255, 255, 255, 0.2)"}),stroke:new S.default({color:"#ffcc33",width:2}),image:new _.default({radius:7,fill:new I.default({color:"#ffcc33"})})})});this.props.map.addLayer(r);let i=new Z.ZP({source:t,type:e.selection.geomType,style:new k.default({fill:new I.default({color:"rgba(255, 255, 255, 0.2)"}),stroke:new S.default({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new _.default({radius:5,stroke:new S.default({color:"rgba(0, 0, 0, 0.7)"}),fill:new I.default({color:"rgba(255, 255, 255, 0.2)"})})})});i.on("drawstart",(e=>{this.sketchFeature=e.feature,t.clear()})),i.on("drawend",(()=>{this.updateSelectionState()})),this.props.map.addInteraction(i),this.drawInteraction=i,this.selectionLayer=r,this.setDoubleClickZoomEnabled(!1)})),L(this,"removeDrawInteraction",(()=>{null!==this.drawInteraction&&(this.props.map.removeInteraction(this.drawInteraction),this.drawInteraction=null,this.props.map.removeLayer(this.selectionLayer),this.sketchFeature=null,setTimeout((()=>this.setDoubleClickZoomEnabled(!0)),251))})),L(this,"updateSelectionState",(()=>{if(!this.sketchFeature)return;const e=this.sketchFeature.getGeometry().getCoordinates();let t={geomType:this.props.selection.geomType,point:"Point"===this.props.selection.geomType?[e[0],e[1]]:null,line:"LineString"===this.props.selection.geomType?e.map((e=>[e[0],e[1]])):null,polygon:"Polygon"===this.props.selection.geomType?this.sketchFeature.getGeometry().getLinearRing(0).getCoordinates().map((e=>[e[0],e[1]])):null};this.props.changeSelectionState(t)})),L(this,"setDoubleClickZoomEnabled",(e=>{let t=this.props.map.getInteractions();for(let r=0;r<t.getLength();r++){let i=t.item(r);if(i instanceof j.Z){i.setActive(e);break}}}))}UNSAFE_componentWillReceiveProps(e){e.selection.geomType&&e.selection.geomType!==this.props.selection.geomType&&this.addDrawInteraction(e),e.selection.geomType||this.removeDrawInteraction()}render(){return null}}L(D,"propTypes",{map:n().object,projection:n().string,selection:n().object,changeSelectionState:n().func}),L(D,"defaultProps",{selection:{}});var M=r(26105),A=r(89912);const E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,l.compose)((0,l.getContext)({intl:n().object}),(0,l.branch)((e=>{let{intl:t}=e;return!!t}),i.injectIntl,(0,l.withProps)({intl:c})),(0,l.withPropsOnChange)(["intl"],(t=>{let{intl:r={}}=t;return e.reduce((function(){let e=arguments.length>1?arguments[1]:void 0;return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[e]:r[e]}}),{})})),(t=["intl"],(0,l.mapProps)((e=>a()(e,t)))));var t}(["formatNumber"]),x={LMap:u.Z,Layer:p.Z,Feature:h.Z,MeasurementSupport:E(d.Z),Overview:g.Z,ScaleBar:f.Z,DrawSupport:m.Z,HighlightFeatureSupport:F,SelectionSupport:D,PopupSupport:M.Z,BoxSelectionSupport:A.Z}}}]);